(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function A(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=A(r);fetch(r.href,s)}})();function $y(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function CI(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var A=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};A.prototype=e.prototype}else A={};return Object.defineProperty(A,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(A,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),A}var Xy={exports:{}},Gu={},Yy={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tl=Symbol.for("react.element"),xI=Symbol.for("react.portal"),EI=Symbol.for("react.fragment"),_I=Symbol.for("react.strict_mode"),FI=Symbol.for("react.profiler"),II=Symbol.for("react.provider"),QI=Symbol.for("react.context"),UI=Symbol.for("react.forward_ref"),bI=Symbol.for("react.suspense"),SI=Symbol.for("react.memo"),TI=Symbol.for("react.lazy"),Bw=Symbol.iterator;function NI(t){return t===null||typeof t!="object"?null:(t=Bw&&t[Bw]||t["@@iterator"],typeof t=="function"?t:null)}var Jy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zy=Object.assign,qy={};function io(t,e,A){this.props=t,this.context=e,this.refs=qy,this.updater=A||Jy}io.prototype.isReactComponent={};io.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};io.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ev(){}ev.prototype=io.prototype;function $p(t,e,A){this.props=t,this.context=e,this.refs=qy,this.updater=A||Jy}var Xp=$p.prototype=new ev;Xp.constructor=$p;Zy(Xp,io.prototype);Xp.isPureReactComponent=!0;var yw=Array.isArray,tv=Object.prototype.hasOwnProperty,Yp={current:null},Av={key:!0,ref:!0,__self:!0,__source:!0};function nv(t,e,A){var n,r={},s=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)tv.call(e,n)&&!Av.hasOwnProperty(n)&&(r[n]=e[n]);var o=arguments.length-2;if(o===1)r.children=A;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];r.children=a}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)r[n]===void 0&&(r[n]=o[n]);return{$$typeof:tl,type:t,key:s,ref:i,props:r,_owner:Yp.current}}function kI(t,e){return{$$typeof:tl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jp(t){return typeof t=="object"&&t!==null&&t.$$typeof===tl}function DI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(A){return e[A]})}var vw=/\/+/g;function Kd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DI(""+t.key):e.toString(36)}function mc(t,e,A,n,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case tl:case xI:i=!0}}if(i)return i=t,r=r(i),t=n===""?"."+Kd(i,0):n,yw(r)?(A="",t!=null&&(A=t.replace(vw,"$&/")+"/"),mc(r,e,A,"",function(l){return l})):r!=null&&(Jp(r)&&(r=kI(r,A+(!r.key||i&&i.key===r.key?"":(""+r.key).replace(vw,"$&/")+"/")+t)),e.push(r)),1;if(i=0,n=n===""?".":n+":",yw(t))for(var o=0;o<t.length;o++){s=t[o];var a=n+Kd(s,o);i+=mc(s,e,A,a,r)}else if(a=NI(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=n+Kd(s,o++),i+=mc(s,e,A,a,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Cl(t,e,A){if(t==null)return t;var n=[],r=0;return mc(t,n,"","",function(s){return e.call(A,s,r++)}),n}function HI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(A){(t._status===0||t._status===-1)&&(t._status=1,t._result=A)},function(A){(t._status===0||t._status===-1)&&(t._status=2,t._result=A)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wA={current:null},wc={transition:null},LI={ReactCurrentDispatcher:wA,ReactCurrentBatchConfig:wc,ReactCurrentOwner:Yp};function rv(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Cl,forEach:function(t,e,A){Cl(t,function(){e.apply(this,arguments)},A)},count:function(t){var e=0;return Cl(t,function(){e++}),e},toArray:function(t){return Cl(t,function(e){return e})||[]},only:function(t){if(!Jp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=io;Se.Fragment=EI;Se.Profiler=FI;Se.PureComponent=$p;Se.StrictMode=_I;Se.Suspense=bI;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LI;Se.act=rv;Se.cloneElement=function(t,e,A){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Zy({},t.props),r=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=Yp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)tv.call(e,a)&&!Av.hasOwnProperty(a)&&(n[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)n.children=A;else if(1<a){o=Array(a);for(var l=0;l<a;l++)o[l]=arguments[l+2];n.children=o}return{$$typeof:tl,type:t.type,key:r,ref:s,props:n,_owner:i}};Se.createContext=function(t){return t={$$typeof:QI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:II,_context:t},t.Consumer=t};Se.createElement=nv;Se.createFactory=function(t){var e=nv.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:UI,render:t}};Se.isValidElement=Jp;Se.lazy=function(t){return{$$typeof:TI,_payload:{_status:-1,_result:t},_init:HI}};Se.memo=function(t,e){return{$$typeof:SI,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=wc.transition;wc.transition={};try{t()}finally{wc.transition=e}};Se.unstable_act=rv;Se.useCallback=function(t,e){return wA.current.useCallback(t,e)};Se.useContext=function(t){return wA.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return wA.current.useDeferredValue(t)};Se.useEffect=function(t,e){return wA.current.useEffect(t,e)};Se.useId=function(){return wA.current.useId()};Se.useImperativeHandle=function(t,e,A){return wA.current.useImperativeHandle(t,e,A)};Se.useInsertionEffect=function(t,e){return wA.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return wA.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return wA.current.useMemo(t,e)};Se.useReducer=function(t,e,A){return wA.current.useReducer(t,e,A)};Se.useRef=function(t){return wA.current.useRef(t)};Se.useState=function(t){return wA.current.useState(t)};Se.useSyncExternalStore=function(t,e,A){return wA.current.useSyncExternalStore(t,e,A)};Se.useTransition=function(){return wA.current.useTransition()};Se.version="18.3.1";Yy.exports=Se;var E=Yy.exports;const Vt=$y(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI=E,PI=Symbol.for("react.element"),MI=Symbol.for("react.fragment"),OI=Object.prototype.hasOwnProperty,KI=RI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jI={key:!0,ref:!0,__self:!0,__source:!0};function sv(t,e,A){var n,r={},s=null,i=null;A!==void 0&&(s=""+A),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)OI.call(e,n)&&!jI.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:PI,type:t,key:s,ref:i,props:r,_owner:KI.current}}Gu.Fragment=MI;Gu.jsx=sv;Gu.jsxs=sv;Xy.exports=Gu;var u=Xy.exports,Ah={},iv={exports:{}},OA={},ov={exports:{}},av={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,O){var W=N.length;N.push(O);e:for(;0<W;){var Z=W-1>>>1,oe=N[Z];if(0<r(oe,O))N[Z]=O,N[W]=oe,W=Z;else break e}}function A(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var O=N[0],W=N.pop();if(W!==O){N[0]=W;e:for(var Z=0,oe=N.length,ce=oe>>>1;Z<ce;){var ve=2*(Z+1)-1,Te=N[ve],xe=ve+1,Ie=N[xe];if(0>r(Te,W))xe<oe&&0>r(Ie,Te)?(N[Z]=Ie,N[xe]=W,Z=xe):(N[Z]=Te,N[ve]=W,Z=ve);else if(xe<oe&&0>r(Ie,W))N[Z]=Ie,N[xe]=W,Z=xe;else break e}}return O}function r(N,O){var W=N.sortIndex-O.sortIndex;return W!==0?W:N.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var a=[],l=[],c=1,d=null,f=3,h=!1,m=!1,C=!1,Q=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(N){for(var O=A(l);O!==null;){if(O.callback===null)n(l);else if(O.startTime<=N)n(l),O.sortIndex=O.expirationTime,e(a,O);else break;O=A(l)}}function v(N){if(C=!1,w(N),!m)if(A(a)!==null)m=!0,J(_);else{var O=A(l);O!==null&&Ae(v,O.startTime-N)}}function _(N,O){m=!1,C&&(C=!1,g(T),T=-1),h=!0;var W=f;try{for(w(O),d=A(a);d!==null&&(!(d.expirationTime>O)||N&&!R());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,f=d.priorityLevel;var oe=Z(d.expirationTime<=O);O=t.unstable_now(),typeof oe=="function"?d.callback=oe:d===A(a)&&n(a),w(O)}else n(a);d=A(a)}if(d!==null)var ce=!0;else{var ve=A(l);ve!==null&&Ae(v,ve.startTime-O),ce=!1}return ce}finally{d=null,f=W,h=!1}}var F=!1,U=null,T=-1,D=5,L=-1;function R(){return!(t.unstable_now()-L<D)}function z(){if(U!==null){var N=t.unstable_now();L=N;var O=!0;try{O=U(!0,N)}finally{O?j():(F=!1,U=null)}}else F=!1}var j;if(typeof p=="function")j=function(){p(z)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,q=ae.port2;ae.port1.onmessage=z,j=function(){q.postMessage(null)}}else j=function(){Q(z,0)};function J(N){U=N,F||(F=!0,j())}function Ae(N,O){T=Q(function(){N(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,J(_))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return A(a)},t.unstable_next=function(N){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var W=f;f=O;try{return N()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,O){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var W=f;f=N;try{return O()}finally{f=W}},t.unstable_scheduleCallback=function(N,O,W){var Z=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Z+W:Z):W=Z,N){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=W+oe,N={id:c++,callback:O,priorityLevel:N,startTime:W,expirationTime:oe,sortIndex:-1},W>Z?(N.sortIndex=W,e(l,N),A(a)===null&&N===A(l)&&(C?(g(T),T=-1):C=!0,Ae(v,W-Z))):(N.sortIndex=oe,e(a,N),m||h||(m=!0,J(_))),N},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(N){var O=f;return function(){var W=f;f=O;try{return N.apply(this,arguments)}finally{f=W}}}})(av);ov.exports=av;var GI=ov.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WI=E,MA=GI;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,A=1;A<arguments.length;A++)e+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lv=new Set,xa={};function $s(t,e){Gi(t,e),Gi(t+"Capture",e)}function Gi(t,e){for(xa[t]=e,t=0;t<e.length;t++)lv.add(e[t])}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nh=Object.prototype.hasOwnProperty,zI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cw={},xw={};function VI(t){return nh.call(xw,t)?!0:nh.call(Cw,t)?!1:zI.test(t)?xw[t]=!0:(Cw[t]=!0,!1)}function $I(t,e,A,n){if(A!==null&&A.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:A!==null?!A.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XI(t,e,A,n){if(e===null||typeof e>"u"||$I(t,e,A,n))return!0;if(n)return!1;if(A!==null)switch(A.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function BA(t,e,A,n,r,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=A,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yt[t]=new BA(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yt[e]=new BA(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yt[t]=new BA(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yt[t]=new BA(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yt[t]=new BA(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yt[t]=new BA(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yt[t]=new BA(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yt[t]=new BA(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yt[t]=new BA(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zp=/[\-:]([a-z])/g;function qp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zp,qp);Yt[e]=new BA(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zp,qp);Yt[e]=new BA(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zp,qp);Yt[e]=new BA(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yt[t]=new BA(t,1,!1,t.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new BA("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yt[t]=new BA(t,1,!1,t.toLowerCase(),null,!0,!0)});function eg(t,e,A,n){var r=Yt.hasOwnProperty(e)?Yt[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XI(e,A,r,n)&&(A=null),n||r===null?VI(e)&&(A===null?t.removeAttribute(e):t.setAttribute(e,""+A)):r.mustUseProperty?t[r.propertyName]=A===null?r.type===3?!1:"":A:(e=r.attributeName,n=r.attributeNamespace,A===null?t.removeAttribute(e):(r=r.type,A=r===3||r===4&&A===!0?"":""+A,n?t.setAttributeNS(n,e,A):t.setAttribute(e,A))))}var gr=WI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xl=Symbol.for("react.element"),gi=Symbol.for("react.portal"),mi=Symbol.for("react.fragment"),tg=Symbol.for("react.strict_mode"),rh=Symbol.for("react.profiler"),cv=Symbol.for("react.provider"),uv=Symbol.for("react.context"),Ag=Symbol.for("react.forward_ref"),sh=Symbol.for("react.suspense"),ih=Symbol.for("react.suspense_list"),ng=Symbol.for("react.memo"),_r=Symbol.for("react.lazy"),dv=Symbol.for("react.offscreen"),Ew=Symbol.iterator;function Fo(t){return t===null||typeof t!="object"?null:(t=Ew&&t[Ew]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,jd;function jo(t){if(jd===void 0)try{throw Error()}catch(A){var e=A.stack.trim().match(/\n( *(at )?)/);jd=e&&e[1]||""}return`
`+jd+t}var Gd=!1;function Wd(t,e){if(!t||Gd)return"";Gd=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var r=l.stack.split(`
`),s=n.stack.split(`
`),i=r.length-1,o=s.length-1;1<=i&&0<=o&&r[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(r[i]!==s[o]){if(i!==1||o!==1)do if(i--,o--,0>o||r[i]!==s[o]){var a=`
`+r[i].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=i&&0<=o);break}}}finally{Gd=!1,Error.prepareStackTrace=A}return(t=t?t.displayName||t.name:"")?jo(t):""}function YI(t){switch(t.tag){case 5:return jo(t.type);case 16:return jo("Lazy");case 13:return jo("Suspense");case 19:return jo("SuspenseList");case 0:case 2:case 15:return t=Wd(t.type,!1),t;case 11:return t=Wd(t.type.render,!1),t;case 1:return t=Wd(t.type,!0),t;default:return""}}function oh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mi:return"Fragment";case gi:return"Portal";case rh:return"Profiler";case tg:return"StrictMode";case sh:return"Suspense";case ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uv:return(t.displayName||"Context")+".Consumer";case cv:return(t._context.displayName||"Context")+".Provider";case Ag:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ng:return e=t.displayName||null,e!==null?e:oh(t.type)||"Memo";case _r:e=t._payload,t=t._init;try{return oh(t(e))}catch{}}return null}function JI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oh(e);case 8:return e===tg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZI(t){var e=fv(t)?"checked":"value",A=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var r=A.get,s=A.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(i){n=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:A.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function El(t){t._valueTracker||(t._valueTracker=ZI(t))}function hv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var A=e.getValue(),n="";return t&&(n=fv(t)?t.checked?"true":"false":t.value),t=n,t!==A?(e.setValue(t),!0):!1}function Rc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ah(t,e){var A=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??t._wrapperState.initialChecked})}function _w(t,e){var A=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;A=es(e.value!=null?e.value:A),t._wrapperState={initialChecked:n,initialValue:A,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pv(t,e){e=e.checked,e!=null&&eg(t,"checked",e,!1)}function lh(t,e){pv(t,e);var A=es(e.value),n=e.type;if(A!=null)n==="number"?(A===0&&t.value===""||t.value!=A)&&(t.value=""+A):t.value!==""+A&&(t.value=""+A);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ch(t,e.type,A):e.hasOwnProperty("defaultValue")&&ch(t,e.type,es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fw(t,e,A){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,A||e===t.value||(t.value=e),t.defaultValue=e}A=t.name,A!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,A!==""&&(t.name=A)}function ch(t,e,A){(e!=="number"||Rc(t.ownerDocument)!==t)&&(A==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+A&&(t.defaultValue=""+A))}var Go=Array.isArray;function Si(t,e,A,n){if(t=t.options,e){e={};for(var r=0;r<A.length;r++)e["$"+A[r]]=!0;for(A=0;A<t.length;A++)r=e.hasOwnProperty("$"+t[A].value),t[A].selected!==r&&(t[A].selected=r),r&&n&&(t[A].defaultSelected=!0)}else{for(A=""+es(A),e=null,r=0;r<t.length;r++){if(t[r].value===A){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function uh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Iw(t,e){var A=e.value;if(A==null){if(A=e.children,e=e.defaultValue,A!=null){if(e!=null)throw Error($(92));if(Go(A)){if(1<A.length)throw Error($(93));A=A[0]}e=A}e==null&&(e=""),A=e}t._wrapperState={initialValue:es(A)}}function gv(t,e){var A=es(e.value),n=es(e.defaultValue);A!=null&&(A=""+A,A!==t.value&&(t.value=A),e.defaultValue==null&&t.defaultValue!==A&&(t.defaultValue=A)),n!=null&&(t.defaultValue=""+n)}function Qw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _l,wv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,A,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,A,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_l=_l||document.createElement("div"),_l.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_l.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ea(t,e){if(e){var A=t.firstChild;if(A&&A===t.lastChild&&A.nodeType===3){A.nodeValue=e;return}}t.textContent=e}var ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qI=["Webkit","ms","Moz","O"];Object.keys(ta).forEach(function(t){qI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ta[e]=ta[t]})});function Bv(t,e,A){return e==null||typeof e=="boolean"||e===""?"":A||typeof e!="number"||e===0||ta.hasOwnProperty(t)&&ta[t]?(""+e).trim():e+"px"}function yv(t,e){t=t.style;for(var A in e)if(e.hasOwnProperty(A)){var n=A.indexOf("--")===0,r=Bv(A,e[A],n);A==="float"&&(A="cssFloat"),n?t.setProperty(A,r):t[A]=r}}var eQ=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fh(t,e){if(e){if(eQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function hh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ph=null;function rg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gh=null,Ti=null,Ni=null;function Uw(t){if(t=rl(t)){if(typeof gh!="function")throw Error($(280));var e=t.stateNode;e&&(e=Xu(e),gh(t.stateNode,t.type,e))}}function vv(t){Ti?Ni?Ni.push(t):Ni=[t]:Ti=t}function Cv(){if(Ti){var t=Ti,e=Ni;if(Ni=Ti=null,Uw(t),e)for(t=0;t<e.length;t++)Uw(e[t])}}function xv(t,e){return t(e)}function Ev(){}var zd=!1;function _v(t,e,A){if(zd)return t(e,A);zd=!0;try{return xv(t,e,A)}finally{zd=!1,(Ti!==null||Ni!==null)&&(Ev(),Cv())}}function _a(t,e){var A=t.stateNode;if(A===null)return null;var n=Xu(A);if(n===null)return null;A=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(A&&typeof A!="function")throw Error($(231,e,typeof A));return A}var mh=!1;if(ar)try{var Io={};Object.defineProperty(Io,"passive",{get:function(){mh=!0}}),window.addEventListener("test",Io,Io),window.removeEventListener("test",Io,Io)}catch{mh=!1}function tQ(t,e,A,n,r,s,i,o,a){var l=Array.prototype.slice.call(arguments,3);try{e.apply(A,l)}catch(c){this.onError(c)}}var Aa=!1,Pc=null,Mc=!1,wh=null,AQ={onError:function(t){Aa=!0,Pc=t}};function nQ(t,e,A,n,r,s,i,o,a){Aa=!1,Pc=null,tQ.apply(AQ,arguments)}function rQ(t,e,A,n,r,s,i,o,a){if(nQ.apply(this,arguments),Aa){if(Aa){var l=Pc;Aa=!1,Pc=null}else throw Error($(198));Mc||(Mc=!0,wh=l)}}function Xs(t){var e=t,A=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(A=e.return),t=e.return;while(t)}return e.tag===3?A:null}function Fv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bw(t){if(Xs(t)!==t)throw Error($(188))}function sQ(t){var e=t.alternate;if(!e){if(e=Xs(t),e===null)throw Error($(188));return e!==t?null:t}for(var A=t,n=e;;){var r=A.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){A=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===A)return bw(r),t;if(s===n)return bw(r),e;s=s.sibling}throw Error($(188))}if(A.return!==n.return)A=r,n=s;else{for(var i=!1,o=r.child;o;){if(o===A){i=!0,A=r,n=s;break}if(o===n){i=!0,n=r,A=s;break}o=o.sibling}if(!i){for(o=s.child;o;){if(o===A){i=!0,A=s,n=r;break}if(o===n){i=!0,n=s,A=r;break}o=o.sibling}if(!i)throw Error($(189))}}if(A.alternate!==n)throw Error($(190))}if(A.tag!==3)throw Error($(188));return A.stateNode.current===A?t:e}function Iv(t){return t=sQ(t),t!==null?Qv(t):null}function Qv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Qv(t);if(e!==null)return e;t=t.sibling}return null}var Uv=MA.unstable_scheduleCallback,Sw=MA.unstable_cancelCallback,iQ=MA.unstable_shouldYield,oQ=MA.unstable_requestPaint,wt=MA.unstable_now,aQ=MA.unstable_getCurrentPriorityLevel,sg=MA.unstable_ImmediatePriority,bv=MA.unstable_UserBlockingPriority,Oc=MA.unstable_NormalPriority,lQ=MA.unstable_LowPriority,Sv=MA.unstable_IdlePriority,Wu=null,Dn=null;function cQ(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Wu,t,void 0,(t.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:fQ,uQ=Math.log,dQ=Math.LN2;function fQ(t){return t>>>=0,t===0?32:31-(uQ(t)/dQ|0)|0}var Fl=64,Il=4194304;function Wo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kc(t,e){var A=t.pendingLanes;if(A===0)return 0;var n=0,r=t.suspendedLanes,s=t.pingedLanes,i=A&268435455;if(i!==0){var o=i&~r;o!==0?n=Wo(o):(s&=i,s!==0&&(n=Wo(s)))}else i=A&~r,i!==0?n=Wo(i):s!==0&&(n=Wo(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(n&4&&(n|=A&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)A=31-Bn(e),r=1<<A,n|=t[A],e&=~r;return n}function hQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pQ(t,e){for(var A=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Bn(s),o=1<<i,a=r[i];a===-1?(!(o&A)||o&n)&&(r[i]=hQ(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function Bh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tv(){var t=Fl;return Fl<<=1,!(Fl&4194240)&&(Fl=64),t}function Vd(t){for(var e=[],A=0;31>A;A++)e.push(t);return e}function Al(t,e,A){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bn(e),t[e]=A}function gQ(t,e){var A=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<A;){var r=31-Bn(A),s=1<<r;e[r]=0,n[r]=-1,t[r]=-1,A&=~s}}function ig(t,e){var A=t.entangledLanes|=e;for(t=t.entanglements;A;){var n=31-Bn(A),r=1<<n;r&e|t[n]&e&&(t[n]|=e),A&=~r}}var Ve=0;function Nv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kv,og,Dv,Hv,Lv,yh=!1,Ql=[],Mr=null,Or=null,Kr=null,Fa=new Map,Ia=new Map,Ur=[],mQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tw(t,e){switch(t){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":Fa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ia.delete(e.pointerId)}}function Qo(t,e,A,n,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:A,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},e!==null&&(e=rl(e),e!==null&&og(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function wQ(t,e,A,n,r){switch(e){case"focusin":return Mr=Qo(Mr,t,e,A,n,r),!0;case"dragenter":return Or=Qo(Or,t,e,A,n,r),!0;case"mouseover":return Kr=Qo(Kr,t,e,A,n,r),!0;case"pointerover":var s=r.pointerId;return Fa.set(s,Qo(Fa.get(s)||null,t,e,A,n,r)),!0;case"gotpointercapture":return s=r.pointerId,Ia.set(s,Qo(Ia.get(s)||null,t,e,A,n,r)),!0}return!1}function Rv(t){var e=Es(t.target);if(e!==null){var A=Xs(e);if(A!==null){if(e=A.tag,e===13){if(e=Fv(A),e!==null){t.blockedOn=e,Lv(t.priority,function(){Dv(A)});return}}else if(e===3&&A.stateNode.current.memoizedState.isDehydrated){t.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var A=vh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(A===null){A=t.nativeEvent;var n=new A.constructor(A.type,A);ph=n,A.target.dispatchEvent(n),ph=null}else return e=rl(A),e!==null&&og(e),t.blockedOn=A,!1;e.shift()}return!0}function Nw(t,e,A){Bc(t)&&A.delete(e)}function BQ(){yh=!1,Mr!==null&&Bc(Mr)&&(Mr=null),Or!==null&&Bc(Or)&&(Or=null),Kr!==null&&Bc(Kr)&&(Kr=null),Fa.forEach(Nw),Ia.forEach(Nw)}function Uo(t,e){t.blockedOn===e&&(t.blockedOn=null,yh||(yh=!0,MA.unstable_scheduleCallback(MA.unstable_NormalPriority,BQ)))}function Qa(t){function e(r){return Uo(r,t)}if(0<Ql.length){Uo(Ql[0],t);for(var A=1;A<Ql.length;A++){var n=Ql[A];n.blockedOn===t&&(n.blockedOn=null)}}for(Mr!==null&&Uo(Mr,t),Or!==null&&Uo(Or,t),Kr!==null&&Uo(Kr,t),Fa.forEach(e),Ia.forEach(e),A=0;A<Ur.length;A++)n=Ur[A],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ur.length&&(A=Ur[0],A.blockedOn===null);)Rv(A),A.blockedOn===null&&Ur.shift()}var ki=gr.ReactCurrentBatchConfig,jc=!0;function yQ(t,e,A,n){var r=Ve,s=ki.transition;ki.transition=null;try{Ve=1,ag(t,e,A,n)}finally{Ve=r,ki.transition=s}}function vQ(t,e,A,n){var r=Ve,s=ki.transition;ki.transition=null;try{Ve=4,ag(t,e,A,n)}finally{Ve=r,ki.transition=s}}function ag(t,e,A,n){if(jc){var r=vh(t,e,A,n);if(r===null)nf(t,e,n,Gc,A),Tw(t,n);else if(wQ(r,t,e,A,n))n.stopPropagation();else if(Tw(t,n),e&4&&-1<mQ.indexOf(t)){for(;r!==null;){var s=rl(r);if(s!==null&&kv(s),s=vh(t,e,A,n),s===null&&nf(t,e,n,Gc,A),s===r)break;r=s}r!==null&&n.stopPropagation()}else nf(t,e,n,null,A)}}var Gc=null;function vh(t,e,A,n){if(Gc=null,t=rg(n),t=Es(t),t!==null)if(e=Xs(t),e===null)t=null;else if(A=e.tag,A===13){if(t=Fv(e),t!==null)return t;t=null}else if(A===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gc=t,null}function Pv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aQ()){case sg:return 1;case bv:return 4;case Oc:case lQ:return 16;case Sv:return 536870912;default:return 16}default:return 16}}var kr=null,lg=null,yc=null;function Mv(){if(yc)return yc;var t,e=lg,A=e.length,n,r="value"in kr?kr.value:kr.textContent,s=r.length;for(t=0;t<A&&e[t]===r[t];t++);var i=A-t;for(n=1;n<=i&&e[A-n]===r[s-n];n++);return yc=r.slice(t,1<n?1-n:void 0)}function vc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ul(){return!0}function kw(){return!1}function KA(t){function e(A,n,r,s,i){this._reactName=A,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(A=t[o],this[o]=A?A(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ul:kw,this.isPropagationStopped=kw,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=Ul)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=Ul)},persist:function(){},isPersistent:Ul}),e}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cg=KA(oo),nl=ut({},oo,{view:0,detail:0}),CQ=KA(nl),$d,Xd,bo,zu=ut({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ug,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bo&&(bo&&t.type==="mousemove"?($d=t.screenX-bo.screenX,Xd=t.screenY-bo.screenY):Xd=$d=0,bo=t),$d)},movementY:function(t){return"movementY"in t?t.movementY:Xd}}),Dw=KA(zu),xQ=ut({},zu,{dataTransfer:0}),EQ=KA(xQ),_Q=ut({},nl,{relatedTarget:0}),Yd=KA(_Q),FQ=ut({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),IQ=KA(FQ),QQ=ut({},oo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UQ=KA(QQ),bQ=ut({},oo,{data:0}),Hw=KA(bQ),SQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NQ[t])?!!e[t]:!1}function ug(){return kQ}var DQ=ut({},nl,{key:function(t){if(t.key){var e=SQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ug,charCode:function(t){return t.type==="keypress"?vc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HQ=KA(DQ),LQ=ut({},zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lw=KA(LQ),RQ=ut({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ug}),PQ=KA(RQ),MQ=ut({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),OQ=KA(MQ),KQ=ut({},zu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jQ=KA(KQ),GQ=[9,13,27,32],dg=ar&&"CompositionEvent"in window,na=null;ar&&"documentMode"in document&&(na=document.documentMode);var WQ=ar&&"TextEvent"in window&&!na,Ov=ar&&(!dg||na&&8<na&&11>=na),Rw=" ",Pw=!1;function Kv(t,e){switch(t){case"keyup":return GQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wi=!1;function zQ(t,e){switch(t){case"compositionend":return jv(e);case"keypress":return e.which!==32?null:(Pw=!0,Rw);case"textInput":return t=e.data,t===Rw&&Pw?null:t;default:return null}}function VQ(t,e){if(wi)return t==="compositionend"||!dg&&Kv(t,e)?(t=Mv(),yc=lg=kr=null,wi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ov&&e.locale!=="ko"?null:e.data;default:return null}}var $Q={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$Q[t.type]:e==="textarea"}function Gv(t,e,A,n){vv(n),e=Wc(e,"onChange"),0<e.length&&(A=new cg("onChange","change",null,A,n),t.push({event:A,listeners:e}))}var ra=null,Ua=null;function XQ(t){tC(t,0)}function Vu(t){var e=vi(t);if(hv(e))return t}function YQ(t,e){if(t==="change")return e}var Wv=!1;if(ar){var Jd;if(ar){var Zd="oninput"in document;if(!Zd){var Ow=document.createElement("div");Ow.setAttribute("oninput","return;"),Zd=typeof Ow.oninput=="function"}Jd=Zd}else Jd=!1;Wv=Jd&&(!document.documentMode||9<document.documentMode)}function Kw(){ra&&(ra.detachEvent("onpropertychange",zv),Ua=ra=null)}function zv(t){if(t.propertyName==="value"&&Vu(Ua)){var e=[];Gv(e,Ua,t,rg(t)),_v(XQ,e)}}function JQ(t,e,A){t==="focusin"?(Kw(),ra=e,Ua=A,ra.attachEvent("onpropertychange",zv)):t==="focusout"&&Kw()}function ZQ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vu(Ua)}function qQ(t,e){if(t==="click")return Vu(e)}function eU(t,e){if(t==="input"||t==="change")return Vu(e)}function tU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xn=typeof Object.is=="function"?Object.is:tU;function ba(t,e){if(xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var A=Object.keys(t),n=Object.keys(e);if(A.length!==n.length)return!1;for(n=0;n<A.length;n++){var r=A[n];if(!nh.call(e,r)||!xn(t[r],e[r]))return!1}return!0}function jw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gw(t,e){var A=jw(t);t=0;for(var n;A;){if(A.nodeType===3){if(n=t+A.textContent.length,t<=e&&n>=e)return{node:A,offset:e-t};t=n}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=jw(A)}}function Vv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $v(){for(var t=window,e=Rc();e instanceof t.HTMLIFrameElement;){try{var A=typeof e.contentWindow.location.href=="string"}catch{A=!1}if(A)t=e.contentWindow;else break;e=Rc(t.document)}return e}function fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AU(t){var e=$v(),A=t.focusedElem,n=t.selectionRange;if(e!==A&&A&&A.ownerDocument&&Vv(A.ownerDocument.documentElement,A)){if(n!==null&&fg(A)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in A)A.selectionStart=e,A.selectionEnd=Math.min(t,A.value.length);else if(t=(e=A.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=A.textContent.length,s=Math.min(n.start,r);n=n.end===void 0?s:Math.min(n.end,r),!t.extend&&s>n&&(r=n,n=s,s=r),r=Gw(A,s);var i=Gw(A,n);r&&i&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=A;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<e.length;A++)t=e[A],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nU=ar&&"documentMode"in document&&11>=document.documentMode,Bi=null,Ch=null,sa=null,xh=!1;function Ww(t,e,A){var n=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;xh||Bi==null||Bi!==Rc(n)||(n=Bi,"selectionStart"in n&&fg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),sa&&ba(sa,n)||(sa=n,n=Wc(Ch,"onSelect"),0<n.length&&(e=new cg("onSelect","select",null,e,A),t.push({event:e,listeners:n}),e.target=Bi)))}function bl(t,e){var A={};return A[t.toLowerCase()]=e.toLowerCase(),A["Webkit"+t]="webkit"+e,A["Moz"+t]="moz"+e,A}var yi={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},qd={},Xv={};ar&&(Xv=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function $u(t){if(qd[t])return qd[t];if(!yi[t])return t;var e=yi[t],A;for(A in e)if(e.hasOwnProperty(A)&&A in Xv)return qd[t]=e[A];return t}var Yv=$u("animationend"),Jv=$u("animationiteration"),Zv=$u("animationstart"),qv=$u("transitionend"),eC=new Map,zw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(t,e){eC.set(t,e),$s(e,[t])}for(var ef=0;ef<zw.length;ef++){var tf=zw[ef],rU=tf.toLowerCase(),sU=tf[0].toUpperCase()+tf.slice(1);ss(rU,"on"+sU)}ss(Yv,"onAnimationEnd");ss(Jv,"onAnimationIteration");ss(Zv,"onAnimationStart");ss("dblclick","onDoubleClick");ss("focusin","onFocus");ss("focusout","onBlur");ss(qv,"onTransitionEnd");Gi("onMouseEnter",["mouseout","mouseover"]);Gi("onMouseLeave",["mouseout","mouseover"]);Gi("onPointerEnter",["pointerout","pointerover"]);Gi("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iU=new Set("cancel close invalid load scroll toggle".split(" ").concat(zo));function Vw(t,e,A){var n=t.type||"unknown-event";t.currentTarget=A,rQ(n,e,void 0,t),t.currentTarget=null}function tC(t,e){e=(e&4)!==0;for(var A=0;A<t.length;A++){var n=t[A],r=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var i=n.length-1;0<=i;i--){var o=n[i],a=o.instance,l=o.currentTarget;if(o=o.listener,a!==s&&r.isPropagationStopped())break e;Vw(r,o,l),s=a}else for(i=0;i<n.length;i++){if(o=n[i],a=o.instance,l=o.currentTarget,o=o.listener,a!==s&&r.isPropagationStopped())break e;Vw(r,o,l),s=a}}}if(Mc)throw t=wh,Mc=!1,wh=null,t}function nt(t,e){var A=e[Qh];A===void 0&&(A=e[Qh]=new Set);var n=t+"__bubble";A.has(n)||(AC(e,t,2,!1),A.add(n))}function Af(t,e,A){var n=0;e&&(n|=4),AC(A,t,n,e)}var Sl="_reactListening"+Math.random().toString(36).slice(2);function Sa(t){if(!t[Sl]){t[Sl]=!0,lv.forEach(function(A){A!=="selectionchange"&&(iU.has(A)||Af(A,!1,t),Af(A,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sl]||(e[Sl]=!0,Af("selectionchange",!1,e))}}function AC(t,e,A,n){switch(Pv(e)){case 1:var r=yQ;break;case 4:r=vQ;break;default:r=ag}A=r.bind(null,e,A,t),r=void 0,!mh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,A,{capture:!0,passive:r}):t.addEventListener(e,A,!0):r!==void 0?t.addEventListener(e,A,{passive:r}):t.addEventListener(e,A,!1)}function nf(t,e,A,n,r){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(i===4)for(i=n.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===r||a.nodeType===8&&a.parentNode===r))return;i=i.return}for(;o!==null;){if(i=Es(o),i===null)return;if(a=i.tag,a===5||a===6){n=s=i;continue e}o=o.parentNode}}n=n.return}_v(function(){var l=s,c=rg(A),d=[];e:{var f=eC.get(t);if(f!==void 0){var h=cg,m=t;switch(t){case"keypress":if(vc(A)===0)break e;case"keydown":case"keyup":h=HQ;break;case"focusin":m="focus",h=Yd;break;case"focusout":m="blur",h=Yd;break;case"beforeblur":case"afterblur":h=Yd;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Dw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=EQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=PQ;break;case Yv:case Jv:case Zv:h=IQ;break;case qv:h=OQ;break;case"scroll":h=CQ;break;case"wheel":h=jQ;break;case"copy":case"cut":case"paste":h=UQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Lw}var C=(e&4)!==0,Q=!C&&t==="scroll",g=C?f!==null?f+"Capture":null:f;C=[];for(var p=l,w;p!==null;){w=p;var v=w.stateNode;if(w.tag===5&&v!==null&&(w=v,g!==null&&(v=_a(p,g),v!=null&&C.push(Ta(p,v,w)))),Q)break;p=p.return}0<C.length&&(f=new h(f,m,null,A,c),d.push({event:f,listeners:C}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&A!==ph&&(m=A.relatedTarget||A.fromElement)&&(Es(m)||m[lr]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=A.relatedTarget||A.toElement,h=l,m=m?Es(m):null,m!==null&&(Q=Xs(m),m!==Q||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=l),h!==m)){if(C=Dw,v="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(C=Lw,v="onPointerLeave",g="onPointerEnter",p="pointer"),Q=h==null?f:vi(h),w=m==null?f:vi(m),f=new C(v,p+"leave",h,A,c),f.target=Q,f.relatedTarget=w,v=null,Es(c)===l&&(C=new C(g,p+"enter",m,A,c),C.target=w,C.relatedTarget=Q,v=C),Q=v,h&&m)t:{for(C=h,g=m,p=0,w=C;w;w=si(w))p++;for(w=0,v=g;v;v=si(v))w++;for(;0<p-w;)C=si(C),p--;for(;0<w-p;)g=si(g),w--;for(;p--;){if(C===g||g!==null&&C===g.alternate)break t;C=si(C),g=si(g)}C=null}else C=null;h!==null&&$w(d,f,h,C,!1),m!==null&&Q!==null&&$w(d,Q,m,C,!0)}}e:{if(f=l?vi(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var _=YQ;else if(Mw(f))if(Wv)_=eU;else{_=ZQ;var F=JQ}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=qQ);if(_&&(_=_(t,l))){Gv(d,_,A,c);break e}F&&F(t,f,l),t==="focusout"&&(F=f._wrapperState)&&F.controlled&&f.type==="number"&&ch(f,"number",f.value)}switch(F=l?vi(l):window,t){case"focusin":(Mw(F)||F.contentEditable==="true")&&(Bi=F,Ch=l,sa=null);break;case"focusout":sa=Ch=Bi=null;break;case"mousedown":xh=!0;break;case"contextmenu":case"mouseup":case"dragend":xh=!1,Ww(d,A,c);break;case"selectionchange":if(nU)break;case"keydown":case"keyup":Ww(d,A,c)}var U;if(dg)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else wi?Kv(t,A)&&(T="onCompositionEnd"):t==="keydown"&&A.keyCode===229&&(T="onCompositionStart");T&&(Ov&&A.locale!=="ko"&&(wi||T!=="onCompositionStart"?T==="onCompositionEnd"&&wi&&(U=Mv()):(kr=c,lg="value"in kr?kr.value:kr.textContent,wi=!0)),F=Wc(l,T),0<F.length&&(T=new Hw(T,t,null,A,c),d.push({event:T,listeners:F}),U?T.data=U:(U=jv(A),U!==null&&(T.data=U)))),(U=WQ?zQ(t,A):VQ(t,A))&&(l=Wc(l,"onBeforeInput"),0<l.length&&(c=new Hw("onBeforeInput","beforeinput",null,A,c),d.push({event:c,listeners:l}),c.data=U))}tC(d,e)})}function Ta(t,e,A){return{instance:t,listener:e,currentTarget:A}}function Wc(t,e){for(var A=e+"Capture",n=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=_a(t,A),s!=null&&n.unshift(Ta(t,s,r)),s=_a(t,e),s!=null&&n.push(Ta(t,s,r))),t=t.return}return n}function si(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $w(t,e,A,n,r){for(var s=e._reactName,i=[];A!==null&&A!==n;){var o=A,a=o.alternate,l=o.stateNode;if(a!==null&&a===n)break;o.tag===5&&l!==null&&(o=l,r?(a=_a(A,s),a!=null&&i.unshift(Ta(A,a,o))):r||(a=_a(A,s),a!=null&&i.push(Ta(A,a,o)))),A=A.return}i.length!==0&&t.push({event:e,listeners:i})}var oU=/\r\n?/g,aU=/\u0000|\uFFFD/g;function Xw(t){return(typeof t=="string"?t:""+t).replace(oU,`
`).replace(aU,"")}function Tl(t,e,A){if(e=Xw(e),Xw(t)!==e&&A)throw Error($(425))}function zc(){}var Eh=null,_h=null;function Fh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ih=typeof setTimeout=="function"?setTimeout:void 0,lU=typeof clearTimeout=="function"?clearTimeout:void 0,Yw=typeof Promise=="function"?Promise:void 0,cU=typeof queueMicrotask=="function"?queueMicrotask:typeof Yw<"u"?function(t){return Yw.resolve(null).then(t).catch(uU)}:Ih;function uU(t){setTimeout(function(){throw t})}function rf(t,e){var A=e,n=0;do{var r=A.nextSibling;if(t.removeChild(A),r&&r.nodeType===8)if(A=r.data,A==="/$"){if(n===0){t.removeChild(r),Qa(e);return}n--}else A!=="$"&&A!=="$?"&&A!=="$!"||n++;A=r}while(A);Qa(e)}function jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var A=t.data;if(A==="$"||A==="$!"||A==="$?"){if(e===0)return t;e--}else A==="/$"&&e++}t=t.previousSibling}return null}var ao=Math.random().toString(36).slice(2),Tn="__reactFiber$"+ao,Na="__reactProps$"+ao,lr="__reactContainer$"+ao,Qh="__reactEvents$"+ao,dU="__reactListeners$"+ao,fU="__reactHandles$"+ao;function Es(t){var e=t[Tn];if(e)return e;for(var A=t.parentNode;A;){if(e=A[lr]||A[Tn]){if(A=e.alternate,e.child!==null||A!==null&&A.child!==null)for(t=Jw(t);t!==null;){if(A=t[Tn])return A;t=Jw(t)}return e}t=A,A=t.parentNode}return null}function rl(t){return t=t[Tn]||t[lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Xu(t){return t[Na]||null}var Uh=[],Ci=-1;function is(t){return{current:t}}function rt(t){0>Ci||(t.current=Uh[Ci],Uh[Ci]=null,Ci--)}function At(t,e){Ci++,Uh[Ci]=t.current,t.current=e}var ts={},iA=is(ts),IA=is(!1),Ds=ts;function Wi(t,e){var A=t.type.contextTypes;if(!A)return ts;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in A)r[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function QA(t){return t=t.childContextTypes,t!=null}function Vc(){rt(IA),rt(iA)}function Zw(t,e,A){if(iA.current!==ts)throw Error($(168));At(iA,e),At(IA,A)}function nC(t,e,A){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return A;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error($(108,JI(t)||"Unknown",r));return ut({},A,n)}function $c(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ts,Ds=iA.current,At(iA,t),At(IA,IA.current),!0}function qw(t,e,A){var n=t.stateNode;if(!n)throw Error($(169));A?(t=nC(t,e,Ds),n.__reactInternalMemoizedMergedChildContext=t,rt(IA),rt(iA),At(iA,t)):rt(IA),At(IA,A)}var Zn=null,Yu=!1,sf=!1;function rC(t){Zn===null?Zn=[t]:Zn.push(t)}function hU(t){Yu=!0,rC(t)}function os(){if(!sf&&Zn!==null){sf=!0;var t=0,e=Ve;try{var A=Zn;for(Ve=1;t<A.length;t++){var n=A[t];do n=n(!0);while(n!==null)}Zn=null,Yu=!1}catch(r){throw Zn!==null&&(Zn=Zn.slice(t+1)),Uv(sg,os),r}finally{Ve=e,sf=!1}}return null}var xi=[],Ei=0,Xc=null,Yc=0,$A=[],XA=0,Hs=null,qn=1,er="";function Bs(t,e){xi[Ei++]=Yc,xi[Ei++]=Xc,Xc=t,Yc=e}function sC(t,e,A){$A[XA++]=qn,$A[XA++]=er,$A[XA++]=Hs,Hs=t;var n=qn;t=er;var r=32-Bn(n)-1;n&=~(1<<r),A+=1;var s=32-Bn(e)+r;if(30<s){var i=r-r%5;s=(n&(1<<i)-1).toString(32),n>>=i,r-=i,qn=1<<32-Bn(e)+r|A<<r|n,er=s+t}else qn=1<<s|A<<r|n,er=t}function hg(t){t.return!==null&&(Bs(t,1),sC(t,1,0))}function pg(t){for(;t===Xc;)Xc=xi[--Ei],xi[Ei]=null,Yc=xi[--Ei],xi[Ei]=null;for(;t===Hs;)Hs=$A[--XA],$A[XA]=null,er=$A[--XA],$A[XA]=null,qn=$A[--XA],$A[XA]=null}var RA=null,LA=null,it=!1,hn=null;function iC(t,e){var A=JA(5,null,null,0);A.elementType="DELETED",A.stateNode=e,A.return=t,e=t.deletions,e===null?(t.deletions=[A],t.flags|=16):e.push(A)}function eB(t,e){switch(t.tag){case 5:var A=t.type;return e=e.nodeType!==1||A.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,RA=t,LA=jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,RA=t,LA=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(A=Hs!==null?{id:qn,overflow:er}:null,t.memoizedState={dehydrated:e,treeContext:A,retryLane:1073741824},A=JA(18,null,null,0),A.stateNode=e,A.return=t,t.child=A,RA=t,LA=null,!0):!1;default:return!1}}function bh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sh(t){if(it){var e=LA;if(e){var A=e;if(!eB(t,e)){if(bh(t))throw Error($(418));e=jr(A.nextSibling);var n=RA;e&&eB(t,e)?iC(n,A):(t.flags=t.flags&-4097|2,it=!1,RA=t)}}else{if(bh(t))throw Error($(418));t.flags=t.flags&-4097|2,it=!1,RA=t}}}function tB(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;RA=t}function Nl(t){if(t!==RA)return!1;if(!it)return tB(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fh(t.type,t.memoizedProps)),e&&(e=LA)){if(bh(t))throw oC(),Error($(418));for(;e;)iC(t,e),e=jr(e.nextSibling)}if(tB(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var A=t.data;if(A==="/$"){if(e===0){LA=jr(t.nextSibling);break e}e--}else A!=="$"&&A!=="$!"&&A!=="$?"||e++}t=t.nextSibling}LA=null}}else LA=RA?jr(t.stateNode.nextSibling):null;return!0}function oC(){for(var t=LA;t;)t=jr(t.nextSibling)}function zi(){LA=RA=null,it=!1}function gg(t){hn===null?hn=[t]:hn.push(t)}var pU=gr.ReactCurrentBatchConfig;function So(t,e,A){if(t=A.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error($(309));var n=A.stateNode}if(!n)throw Error($(147,t));var r=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var o=r.refs;i===null?delete o[s]:o[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!A._owner)throw Error($(290,t))}return t}function kl(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function AB(t){var e=t._init;return e(t._payload)}function aC(t){function e(g,p){if(t){var w=g.deletions;w===null?(g.deletions=[p],g.flags|=16):w.push(p)}}function A(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function r(g,p){return g=Vr(g,p),g.index=0,g.sibling=null,g}function s(g,p,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<p?(g.flags|=2,p):w):(g.flags|=2,p)):(g.flags|=1048576,p)}function i(g){return t&&g.alternate===null&&(g.flags|=2),g}function o(g,p,w,v){return p===null||p.tag!==6?(p=ff(w,g.mode,v),p.return=g,p):(p=r(p,w),p.return=g,p)}function a(g,p,w,v){var _=w.type;return _===mi?c(g,p,w.props.children,v,w.key):p!==null&&(p.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===_r&&AB(_)===p.type)?(v=r(p,w.props),v.ref=So(g,p,w),v.return=g,v):(v=Qc(w.type,w.key,w.props,null,g.mode,v),v.ref=So(g,p,w),v.return=g,v)}function l(g,p,w,v){return p===null||p.tag!==4||p.stateNode.containerInfo!==w.containerInfo||p.stateNode.implementation!==w.implementation?(p=hf(w,g.mode,v),p.return=g,p):(p=r(p,w.children||[]),p.return=g,p)}function c(g,p,w,v,_){return p===null||p.tag!==7?(p=Ss(w,g.mode,v,_),p.return=g,p):(p=r(p,w),p.return=g,p)}function d(g,p,w){if(typeof p=="string"&&p!==""||typeof p=="number")return p=ff(""+p,g.mode,w),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case xl:return w=Qc(p.type,p.key,p.props,null,g.mode,w),w.ref=So(g,null,p),w.return=g,w;case gi:return p=hf(p,g.mode,w),p.return=g,p;case _r:var v=p._init;return d(g,v(p._payload),w)}if(Go(p)||Fo(p))return p=Ss(p,g.mode,w,null),p.return=g,p;kl(g,p)}return null}function f(g,p,w,v){var _=p!==null?p.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:o(g,p,""+w,v);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xl:return w.key===_?a(g,p,w,v):null;case gi:return w.key===_?l(g,p,w,v):null;case _r:return _=w._init,f(g,p,_(w._payload),v)}if(Go(w)||Fo(w))return _!==null?null:c(g,p,w,v,null);kl(g,w)}return null}function h(g,p,w,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return g=g.get(w)||null,o(p,g,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xl:return g=g.get(v.key===null?w:v.key)||null,a(p,g,v,_);case gi:return g=g.get(v.key===null?w:v.key)||null,l(p,g,v,_);case _r:var F=v._init;return h(g,p,w,F(v._payload),_)}if(Go(v)||Fo(v))return g=g.get(w)||null,c(p,g,v,_,null);kl(p,v)}return null}function m(g,p,w,v){for(var _=null,F=null,U=p,T=p=0,D=null;U!==null&&T<w.length;T++){U.index>T?(D=U,U=null):D=U.sibling;var L=f(g,U,w[T],v);if(L===null){U===null&&(U=D);break}t&&U&&L.alternate===null&&e(g,U),p=s(L,p,T),F===null?_=L:F.sibling=L,F=L,U=D}if(T===w.length)return A(g,U),it&&Bs(g,T),_;if(U===null){for(;T<w.length;T++)U=d(g,w[T],v),U!==null&&(p=s(U,p,T),F===null?_=U:F.sibling=U,F=U);return it&&Bs(g,T),_}for(U=n(g,U);T<w.length;T++)D=h(U,g,T,w[T],v),D!==null&&(t&&D.alternate!==null&&U.delete(D.key===null?T:D.key),p=s(D,p,T),F===null?_=D:F.sibling=D,F=D);return t&&U.forEach(function(R){return e(g,R)}),it&&Bs(g,T),_}function C(g,p,w,v){var _=Fo(w);if(typeof _!="function")throw Error($(150));if(w=_.call(w),w==null)throw Error($(151));for(var F=_=null,U=p,T=p=0,D=null,L=w.next();U!==null&&!L.done;T++,L=w.next()){U.index>T?(D=U,U=null):D=U.sibling;var R=f(g,U,L.value,v);if(R===null){U===null&&(U=D);break}t&&U&&R.alternate===null&&e(g,U),p=s(R,p,T),F===null?_=R:F.sibling=R,F=R,U=D}if(L.done)return A(g,U),it&&Bs(g,T),_;if(U===null){for(;!L.done;T++,L=w.next())L=d(g,L.value,v),L!==null&&(p=s(L,p,T),F===null?_=L:F.sibling=L,F=L);return it&&Bs(g,T),_}for(U=n(g,U);!L.done;T++,L=w.next())L=h(U,g,T,L.value,v),L!==null&&(t&&L.alternate!==null&&U.delete(L.key===null?T:L.key),p=s(L,p,T),F===null?_=L:F.sibling=L,F=L);return t&&U.forEach(function(z){return e(g,z)}),it&&Bs(g,T),_}function Q(g,p,w,v){if(typeof w=="object"&&w!==null&&w.type===mi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case xl:e:{for(var _=w.key,F=p;F!==null;){if(F.key===_){if(_=w.type,_===mi){if(F.tag===7){A(g,F.sibling),p=r(F,w.props.children),p.return=g,g=p;break e}}else if(F.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===_r&&AB(_)===F.type){A(g,F.sibling),p=r(F,w.props),p.ref=So(g,F,w),p.return=g,g=p;break e}A(g,F);break}else e(g,F);F=F.sibling}w.type===mi?(p=Ss(w.props.children,g.mode,v,w.key),p.return=g,g=p):(v=Qc(w.type,w.key,w.props,null,g.mode,v),v.ref=So(g,p,w),v.return=g,g=v)}return i(g);case gi:e:{for(F=w.key;p!==null;){if(p.key===F)if(p.tag===4&&p.stateNode.containerInfo===w.containerInfo&&p.stateNode.implementation===w.implementation){A(g,p.sibling),p=r(p,w.children||[]),p.return=g,g=p;break e}else{A(g,p);break}else e(g,p);p=p.sibling}p=hf(w,g.mode,v),p.return=g,g=p}return i(g);case _r:return F=w._init,Q(g,p,F(w._payload),v)}if(Go(w))return m(g,p,w,v);if(Fo(w))return C(g,p,w,v);kl(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,p!==null&&p.tag===6?(A(g,p.sibling),p=r(p,w),p.return=g,g=p):(A(g,p),p=ff(w,g.mode,v),p.return=g,g=p),i(g)):A(g,p)}return Q}var Vi=aC(!0),lC=aC(!1),Jc=is(null),Zc=null,_i=null,mg=null;function wg(){mg=_i=Zc=null}function Bg(t){var e=Jc.current;rt(Jc),t._currentValue=e}function Th(t,e,A){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===A)break;t=t.return}}function Di(t,e){Zc=t,mg=_i=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(EA=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(mg!==t)if(t={context:t,memoizedValue:e,next:null},_i===null){if(Zc===null)throw Error($(308));_i=t,Zc.dependencies={lanes:0,firstContext:t}}else _i=_i.next=t;return e}var _s=null;function yg(t){_s===null?_s=[t]:_s.push(t)}function cC(t,e,A,n){var r=e.interleaved;return r===null?(A.next=A,yg(e)):(A.next=r.next,r.next=A),e.interleaved=A,cr(t,n)}function cr(t,e){t.lanes|=e;var A=t.alternate;for(A!==null&&(A.lanes|=e),A=t,t=t.return;t!==null;)t.childLanes|=e,A=t.alternate,A!==null&&(A.childLanes|=e),A=t,t=t.return;return A.tag===3?A.stateNode:null}var Fr=!1;function vg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gr(t,e,A){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Pe&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,cr(t,A)}return r=n.interleaved,r===null?(e.next=e,yg(n)):(e.next=r.next,r.next=e),n.interleaved=e,cr(t,A)}function Cc(t,e,A){if(e=e.updateQueue,e!==null&&(e=e.shared,(A&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,A|=n,e.lanes=A,ig(t,A)}}function nB(t,e){var A=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,A===n)){var r=null,s=null;if(A=A.firstBaseUpdate,A!==null){do{var i={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};s===null?r=s=i:s=s.next=i,A=A.next}while(A!==null);s===null?r=s=e:s=s.next=e}else r=s=e;A={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=A;return}t=A.lastBaseUpdate,t===null?A.firstBaseUpdate=e:t.next=e,A.lastBaseUpdate=e}function qc(t,e,A,n){var r=t.updateQueue;Fr=!1;var s=r.firstBaseUpdate,i=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var a=o,l=a.next;a.next=null,i===null?s=l:i.next=l,i=a;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==i&&(o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=a))}if(s!==null){var d=r.baseState;i=0,c=l=a=null,o=s;do{var f=o.lane,h=o.eventTime;if((n&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,C=o;switch(f=e,h=A,C.tag){case 1:if(m=C.payload,typeof m=="function"){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=C.payload,f=typeof m=="function"?m.call(h,d,f):m,f==null)break e;d=ut({},d,f);break e;case 2:Fr=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[o]:f.push(o))}else h={eventTime:h,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(l=c=h,a=d):c=c.next=h,i|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;f=o,o=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(c===null&&(a=d),r.baseState=a,r.firstBaseUpdate=l,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do i|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Rs|=i,t.lanes=i,t.memoizedState=d}}function rB(t,e,A){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=A,typeof r!="function")throw Error($(191,r));r.call(n)}}}var sl={},Hn=is(sl),ka=is(sl),Da=is(sl);function Fs(t){if(t===sl)throw Error($(174));return t}function Cg(t,e){switch(At(Da,e),At(ka,t),At(Hn,sl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dh(e,t)}rt(Hn),At(Hn,e)}function $i(){rt(Hn),rt(ka),rt(Da)}function dC(t){Fs(Da.current);var e=Fs(Hn.current),A=dh(e,t.type);e!==A&&(At(ka,t),At(Hn,A))}function xg(t){ka.current===t&&(rt(Hn),rt(ka))}var lt=is(0);function eu(t){for(var e=t;e!==null;){if(e.tag===13){var A=e.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var of=[];function Eg(){for(var t=0;t<of.length;t++)of[t]._workInProgressVersionPrimary=null;of.length=0}var xc=gr.ReactCurrentDispatcher,af=gr.ReactCurrentBatchConfig,Ls=0,ct=null,Ut=null,kt=null,tu=!1,ia=!1,Ha=0,gU=0;function eA(){throw Error($(321))}function _g(t,e){if(e===null)return!1;for(var A=0;A<e.length&&A<t.length;A++)if(!xn(t[A],e[A]))return!1;return!0}function Fg(t,e,A,n,r,s){if(Ls=s,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xc.current=t===null||t.memoizedState===null?yU:vU,t=A(n,r),ia){s=0;do{if(ia=!1,Ha=0,25<=s)throw Error($(301));s+=1,kt=Ut=null,e.updateQueue=null,xc.current=CU,t=A(n,r)}while(ia)}if(xc.current=Au,e=Ut!==null&&Ut.next!==null,Ls=0,kt=Ut=ct=null,tu=!1,e)throw Error($(300));return t}function Ig(){var t=Ha!==0;return Ha=0,t}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?ct.memoizedState=kt=t:kt=kt.next=t,kt}function rn(){if(Ut===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Ut.next;var e=kt===null?ct.memoizedState:kt.next;if(e!==null)kt=e,Ut=t;else{if(t===null)throw Error($(310));Ut=t,t={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},kt===null?ct.memoizedState=kt=t:kt=kt.next=t}return kt}function La(t,e){return typeof e=="function"?e(t):e}function lf(t){var e=rn(),A=e.queue;if(A===null)throw Error($(311));A.lastRenderedReducer=t;var n=Ut,r=n.baseQueue,s=A.pending;if(s!==null){if(r!==null){var i=r.next;r.next=s.next,s.next=i}n.baseQueue=r=s,A.pending=null}if(r!==null){s=r.next,n=n.baseState;var o=i=null,a=null,l=s;do{var c=l.lane;if((Ls&c)===c)a!==null&&(a=a.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var d={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};a===null?(o=a=d,i=n):a=a.next=d,ct.lanes|=c,Rs|=c}l=l.next}while(l!==null&&l!==s);a===null?i=n:a.next=o,xn(n,e.memoizedState)||(EA=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=a,A.lastRenderedState=n}if(t=A.interleaved,t!==null){r=t;do s=r.lane,ct.lanes|=s,Rs|=s,r=r.next;while(r!==t)}else r===null&&(A.lanes=0);return[e.memoizedState,A.dispatch]}function cf(t){var e=rn(),A=e.queue;if(A===null)throw Error($(311));A.lastRenderedReducer=t;var n=A.dispatch,r=A.pending,s=e.memoizedState;if(r!==null){A.pending=null;var i=r=r.next;do s=t(s,i.action),i=i.next;while(i!==r);xn(s,e.memoizedState)||(EA=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),A.lastRenderedState=s}return[s,n]}function fC(){}function hC(t,e){var A=ct,n=rn(),r=e(),s=!xn(n.memoizedState,r);if(s&&(n.memoizedState=r,EA=!0),n=n.queue,Qg(mC.bind(null,A,n,t),[t]),n.getSnapshot!==e||s||kt!==null&&kt.memoizedState.tag&1){if(A.flags|=2048,Ra(9,gC.bind(null,A,n,r,e),void 0,null),Rt===null)throw Error($(349));Ls&30||pC(A,e,r)}return r}function pC(t,e,A){t.flags|=16384,t={getSnapshot:e,value:A},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(A=e.stores,A===null?e.stores=[t]:A.push(t))}function gC(t,e,A,n){e.value=A,e.getSnapshot=n,wC(e)&&BC(t)}function mC(t,e,A){return A(function(){wC(e)&&BC(t)})}function wC(t){var e=t.getSnapshot;t=t.value;try{var A=e();return!xn(t,A)}catch{return!0}}function BC(t){var e=cr(t,1);e!==null&&yn(e,t,1,-1)}function sB(t){var e=bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:t},e.queue=t,t=t.dispatch=BU.bind(null,ct,t),[e.memoizedState,t]}function Ra(t,e,A,n){return t={tag:t,create:e,destroy:A,deps:n,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(A=e.lastEffect,A===null?e.lastEffect=t.next=t:(n=A.next,A.next=t,t.next=n,e.lastEffect=t)),t}function yC(){return rn().memoizedState}function Ec(t,e,A,n){var r=bn();ct.flags|=t,r.memoizedState=Ra(1|e,A,void 0,n===void 0?null:n)}function Ju(t,e,A,n){var r=rn();n=n===void 0?null:n;var s=void 0;if(Ut!==null){var i=Ut.memoizedState;if(s=i.destroy,n!==null&&_g(n,i.deps)){r.memoizedState=Ra(e,A,s,n);return}}ct.flags|=t,r.memoizedState=Ra(1|e,A,s,n)}function iB(t,e){return Ec(8390656,8,t,e)}function Qg(t,e){return Ju(2048,8,t,e)}function vC(t,e){return Ju(4,2,t,e)}function CC(t,e){return Ju(4,4,t,e)}function xC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function EC(t,e,A){return A=A!=null?A.concat([t]):null,Ju(4,4,xC.bind(null,e,t),A)}function Ug(){}function _C(t,e){var A=rn();e=e===void 0?null:e;var n=A.memoizedState;return n!==null&&e!==null&&_g(e,n[1])?n[0]:(A.memoizedState=[t,e],t)}function FC(t,e){var A=rn();e=e===void 0?null:e;var n=A.memoizedState;return n!==null&&e!==null&&_g(e,n[1])?n[0]:(t=t(),A.memoizedState=[t,e],t)}function IC(t,e,A){return Ls&21?(xn(A,e)||(A=Tv(),ct.lanes|=A,Rs|=A,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,EA=!0),t.memoizedState=A)}function mU(t,e){var A=Ve;Ve=A!==0&&4>A?A:4,t(!0);var n=af.transition;af.transition={};try{t(!1),e()}finally{Ve=A,af.transition=n}}function QC(){return rn().memoizedState}function wU(t,e,A){var n=zr(t);if(A={lane:n,action:A,hasEagerState:!1,eagerState:null,next:null},UC(t))bC(e,A);else if(A=cC(t,e,A,n),A!==null){var r=pA();yn(A,t,n,r),SC(A,e,n)}}function BU(t,e,A){var n=zr(t),r={lane:n,action:A,hasEagerState:!1,eagerState:null,next:null};if(UC(t))bC(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,o=s(i,A);if(r.hasEagerState=!0,r.eagerState=o,xn(o,i)){var a=e.interleaved;a===null?(r.next=r,yg(e)):(r.next=a.next,a.next=r),e.interleaved=r;return}}catch{}finally{}A=cC(t,e,r,n),A!==null&&(r=pA(),yn(A,t,n,r),SC(A,e,n))}}function UC(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function bC(t,e){ia=tu=!0;var A=t.pending;A===null?e.next=e:(e.next=A.next,A.next=e),t.pending=e}function SC(t,e,A){if(A&4194240){var n=e.lanes;n&=t.pendingLanes,A|=n,e.lanes=A,ig(t,A)}}var Au={readContext:nn,useCallback:eA,useContext:eA,useEffect:eA,useImperativeHandle:eA,useInsertionEffect:eA,useLayoutEffect:eA,useMemo:eA,useReducer:eA,useRef:eA,useState:eA,useDebugValue:eA,useDeferredValue:eA,useTransition:eA,useMutableSource:eA,useSyncExternalStore:eA,useId:eA,unstable_isNewReconciler:!1},yU={readContext:nn,useCallback:function(t,e){return bn().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:iB,useImperativeHandle:function(t,e,A){return A=A!=null?A.concat([t]):null,Ec(4194308,4,xC.bind(null,e,t),A)},useLayoutEffect:function(t,e){return Ec(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ec(4,2,t,e)},useMemo:function(t,e){var A=bn();return e=e===void 0?null:e,t=t(),A.memoizedState=[t,e],t},useReducer:function(t,e,A){var n=bn();return e=A!==void 0?A(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=wU.bind(null,ct,t),[n.memoizedState,t]},useRef:function(t){var e=bn();return t={current:t},e.memoizedState=t},useState:sB,useDebugValue:Ug,useDeferredValue:function(t){return bn().memoizedState=t},useTransition:function(){var t=sB(!1),e=t[0];return t=mU.bind(null,t[1]),bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,A){var n=ct,r=bn();if(it){if(A===void 0)throw Error($(407));A=A()}else{if(A=e(),Rt===null)throw Error($(349));Ls&30||pC(n,e,A)}r.memoizedState=A;var s={value:A,getSnapshot:e};return r.queue=s,iB(mC.bind(null,n,s,t),[t]),n.flags|=2048,Ra(9,gC.bind(null,n,s,A,e),void 0,null),A},useId:function(){var t=bn(),e=Rt.identifierPrefix;if(it){var A=er,n=qn;A=(n&~(1<<32-Bn(n)-1)).toString(32)+A,e=":"+e+"R"+A,A=Ha++,0<A&&(e+="H"+A.toString(32)),e+=":"}else A=gU++,e=":"+e+"r"+A.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vU={readContext:nn,useCallback:_C,useContext:nn,useEffect:Qg,useImperativeHandle:EC,useInsertionEffect:vC,useLayoutEffect:CC,useMemo:FC,useReducer:lf,useRef:yC,useState:function(){return lf(La)},useDebugValue:Ug,useDeferredValue:function(t){var e=rn();return IC(e,Ut.memoizedState,t)},useTransition:function(){var t=lf(La)[0],e=rn().memoizedState;return[t,e]},useMutableSource:fC,useSyncExternalStore:hC,useId:QC,unstable_isNewReconciler:!1},CU={readContext:nn,useCallback:_C,useContext:nn,useEffect:Qg,useImperativeHandle:EC,useInsertionEffect:vC,useLayoutEffect:CC,useMemo:FC,useReducer:cf,useRef:yC,useState:function(){return cf(La)},useDebugValue:Ug,useDeferredValue:function(t){var e=rn();return Ut===null?e.memoizedState=t:IC(e,Ut.memoizedState,t)},useTransition:function(){var t=cf(La)[0],e=rn().memoizedState;return[t,e]},useMutableSource:fC,useSyncExternalStore:hC,useId:QC,unstable_isNewReconciler:!1};function dn(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var A in t)e[A]===void 0&&(e[A]=t[A]);return e}return e}function Nh(t,e,A,n){e=t.memoizedState,A=A(n,e),A=A==null?e:ut({},e,A),t.memoizedState=A,t.lanes===0&&(t.updateQueue.baseState=A)}var Zu={isMounted:function(t){return(t=t._reactInternals)?Xs(t)===t:!1},enqueueSetState:function(t,e,A){t=t._reactInternals;var n=pA(),r=zr(t),s=rr(n,r);s.payload=e,A!=null&&(s.callback=A),e=Gr(t,s,r),e!==null&&(yn(e,t,r,n),Cc(e,t,r))},enqueueReplaceState:function(t,e,A){t=t._reactInternals;var n=pA(),r=zr(t),s=rr(n,r);s.tag=1,s.payload=e,A!=null&&(s.callback=A),e=Gr(t,s,r),e!==null&&(yn(e,t,r,n),Cc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var A=pA(),n=zr(t),r=rr(A,n);r.tag=2,e!=null&&(r.callback=e),e=Gr(t,r,n),e!==null&&(yn(e,t,n,A),Cc(e,t,n))}};function oB(t,e,A,n,r,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,i):e.prototype&&e.prototype.isPureReactComponent?!ba(A,n)||!ba(r,s):!0}function TC(t,e,A){var n=!1,r=ts,s=e.contextType;return typeof s=="object"&&s!==null?s=nn(s):(r=QA(e)?Ds:iA.current,n=e.contextTypes,s=(n=n!=null)?Wi(t,r):ts),e=new e(A,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zu,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function aB(t,e,A,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(A,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(A,n),e.state!==t&&Zu.enqueueReplaceState(e,e.state,null)}function kh(t,e,A,n){var r=t.stateNode;r.props=A,r.state=t.memoizedState,r.refs={},vg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=nn(s):(s=QA(e)?Ds:iA.current,r.context=Wi(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Nh(t,e,s,A),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Zu.enqueueReplaceState(r,r.state,null),qc(t,A,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Xi(t,e){try{var A="",n=e;do A+=YI(n),n=n.return;while(n);var r=A}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function uf(t,e,A){return{value:t,source:null,stack:A??null,digest:e??null}}function Dh(t,e){try{console.error(e.value)}catch(A){setTimeout(function(){throw A})}}var xU=typeof WeakMap=="function"?WeakMap:Map;function NC(t,e,A){A=rr(-1,A),A.tag=3,A.payload={element:null};var n=e.value;return A.callback=function(){ru||(ru=!0,Wh=n),Dh(t,e)},A}function kC(t,e,A){A=rr(-1,A),A.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;A.payload=function(){return n(r)},A.callback=function(){Dh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(A.callback=function(){Dh(t,e),typeof n!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),A}function lB(t,e,A){var n=t.pingCache;if(n===null){n=t.pingCache=new xU;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(A)||(r.add(A),t=LU.bind(null,t,e,A),e.then(t,t))}function cB(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uB(t,e,A,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(e=rr(-1,1),e.tag=2,Gr(A,e,1))),A.lanes|=1),t)}var EU=gr.ReactCurrentOwner,EA=!1;function hA(t,e,A,n){e.child=t===null?lC(e,null,A,n):Vi(e,t.child,A,n)}function dB(t,e,A,n,r){A=A.render;var s=e.ref;return Di(e,r),n=Fg(t,e,A,n,s,r),A=Ig(),t!==null&&!EA?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ur(t,e,r)):(it&&A&&hg(e),e.flags|=1,hA(t,e,n,r),e.child)}function fB(t,e,A,n,r){if(t===null){var s=A.type;return typeof s=="function"&&!Lg(s)&&s.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(e.tag=15,e.type=s,DC(t,e,s,n,r)):(t=Qc(A.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var i=s.memoizedProps;if(A=A.compare,A=A!==null?A:ba,A(i,n)&&t.ref===e.ref)return ur(t,e,r)}return e.flags|=1,t=Vr(s,n),t.ref=e.ref,t.return=e,e.child=t}function DC(t,e,A,n,r){if(t!==null){var s=t.memoizedProps;if(ba(s,n)&&t.ref===e.ref)if(EA=!1,e.pendingProps=n=s,(t.lanes&r)!==0)t.flags&131072&&(EA=!0);else return e.lanes=t.lanes,ur(t,e,r)}return Hh(t,e,A,n,r)}function HC(t,e,A){var n=e.pendingProps,r=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(Ii,HA),HA|=A;else{if(!(A&1073741824))return t=s!==null?s.baseLanes|A:A,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,At(Ii,HA),HA|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:A,At(Ii,HA),HA|=n}else s!==null?(n=s.baseLanes|A,e.memoizedState=null):n=A,At(Ii,HA),HA|=n;return hA(t,e,r,A),e.child}function LC(t,e){var A=e.ref;(t===null&&A!==null||t!==null&&t.ref!==A)&&(e.flags|=512,e.flags|=2097152)}function Hh(t,e,A,n,r){var s=QA(A)?Ds:iA.current;return s=Wi(e,s),Di(e,r),A=Fg(t,e,A,n,s,r),n=Ig(),t!==null&&!EA?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ur(t,e,r)):(it&&n&&hg(e),e.flags|=1,hA(t,e,A,r),e.child)}function hB(t,e,A,n,r){if(QA(A)){var s=!0;$c(e)}else s=!1;if(Di(e,r),e.stateNode===null)_c(t,e),TC(e,A,n),kh(e,A,n,r),n=!0;else if(t===null){var i=e.stateNode,o=e.memoizedProps;i.props=o;var a=i.context,l=A.contextType;typeof l=="object"&&l!==null?l=nn(l):(l=QA(A)?Ds:iA.current,l=Wi(e,l));var c=A.getDerivedStateFromProps,d=typeof c=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||a!==l)&&aB(e,i,n,l),Fr=!1;var f=e.memoizedState;i.state=f,qc(e,n,i,r),a=e.memoizedState,o!==n||f!==a||IA.current||Fr?(typeof c=="function"&&(Nh(e,A,c,n),a=e.memoizedState),(o=Fr||oB(e,A,o,n,f,a,l))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=a),i.props=n,i.state=a,i.context=l,n=o):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,uC(t,e),o=e.memoizedProps,l=e.type===e.elementType?o:dn(e.type,o),i.props=l,d=e.pendingProps,f=i.context,a=A.contextType,typeof a=="object"&&a!==null?a=nn(a):(a=QA(A)?Ds:iA.current,a=Wi(e,a));var h=A.getDerivedStateFromProps;(c=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==d||f!==a)&&aB(e,i,n,a),Fr=!1,f=e.memoizedState,i.state=f,qc(e,n,i,r);var m=e.memoizedState;o!==d||f!==m||IA.current||Fr?(typeof h=="function"&&(Nh(e,A,h,n),m=e.memoizedState),(l=Fr||oB(e,A,l,n,f,m,a)||!1)?(c||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,m,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,m,a)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),i.props=n,i.state=m,i.context=a,n=l):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Lh(t,e,A,n,s,r)}function Lh(t,e,A,n,r,s){LC(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return r&&qw(e,A,!1),ur(t,e,s);n=e.stateNode,EU.current=e;var o=i&&typeof A.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Vi(e,t.child,null,s),e.child=Vi(e,null,o,s)):hA(t,e,o,s),e.memoizedState=n.state,r&&qw(e,A,!0),e.child}function RC(t){var e=t.stateNode;e.pendingContext?Zw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zw(t,e.context,!1),Cg(t,e.containerInfo)}function pB(t,e,A,n,r){return zi(),gg(r),e.flags|=256,hA(t,e,A,n),e.child}var Rh={dehydrated:null,treeContext:null,retryLane:0};function Ph(t){return{baseLanes:t,cachePool:null,transitions:null}}function PC(t,e,A){var n=e.pendingProps,r=lt.current,s=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),At(lt,r&1),t===null)return Sh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,s?(n=e.mode,s=e.child,i={mode:"hidden",children:i},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=td(i,n,0,null),t=Ss(t,n,A,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ph(A),e.memoizedState=Rh,t):bg(e,i));if(r=t.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return _U(t,e,i,n,o,r,A);if(s){s=n.fallback,i=e.mode,r=t.child,o=r.sibling;var a={mode:"hidden",children:n.children};return!(i&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=a,e.deletions=null):(n=Vr(r,a),n.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=Vr(o,s):(s=Ss(s,i,A,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,i=t.child.memoizedState,i=i===null?Ph(A):{baseLanes:i.baseLanes|A,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~A,e.memoizedState=Rh,n}return s=t.child,t=s.sibling,n=Vr(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=A),n.return=e,n.sibling=null,t!==null&&(A=e.deletions,A===null?(e.deletions=[t],e.flags|=16):A.push(t)),e.child=n,e.memoizedState=null,n}function bg(t,e){return e=td({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dl(t,e,A,n){return n!==null&&gg(n),Vi(e,t.child,null,A),t=bg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _U(t,e,A,n,r,s,i){if(A)return e.flags&256?(e.flags&=-257,n=uf(Error($(422))),Dl(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,r=e.mode,n=td({mode:"visible",children:n.children},r,0,null),s=Ss(s,r,i,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Vi(e,t.child,null,i),e.child.memoizedState=Ph(i),e.memoizedState=Rh,s);if(!(e.mode&1))return Dl(t,e,i,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error($(419)),n=uf(s,n,void 0),Dl(t,e,i,n)}if(o=(i&t.childLanes)!==0,EA||o){if(n=Rt,n!==null){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|i)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,cr(t,r),yn(n,t,r,-1))}return Hg(),n=uf(Error($(421))),Dl(t,e,i,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=RU.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,LA=jr(r.nextSibling),RA=e,it=!0,hn=null,t!==null&&($A[XA++]=qn,$A[XA++]=er,$A[XA++]=Hs,qn=t.id,er=t.overflow,Hs=e),e=bg(e,n.children),e.flags|=4096,e)}function gB(t,e,A){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Th(t.return,e,A)}function df(t,e,A,n,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:A,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=A,s.tailMode=r)}function MC(t,e,A){var n=e.pendingProps,r=n.revealOrder,s=n.tail;if(hA(t,e,n.children,A),n=lt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gB(t,A,e);else if(t.tag===19)gB(t,A,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(At(lt,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(A=e.child,r=null;A!==null;)t=A.alternate,t!==null&&eu(t)===null&&(r=A),A=A.sibling;A=r,A===null?(r=e.child,e.child=null):(r=A.sibling,A.sibling=null),df(e,!1,r,A,s);break;case"backwards":for(A=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&eu(t)===null){e.child=r;break}t=r.sibling,r.sibling=A,A=r,r=t}df(e,!0,A,null,s);break;case"together":df(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _c(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ur(t,e,A){if(t!==null&&(e.dependencies=t.dependencies),Rs|=e.lanes,!(A&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,A=Vr(t,t.pendingProps),e.child=A,A.return=e;t.sibling!==null;)t=t.sibling,A=A.sibling=Vr(t,t.pendingProps),A.return=e;A.sibling=null}return e.child}function FU(t,e,A){switch(e.tag){case 3:RC(e),zi();break;case 5:dC(e);break;case 1:QA(e.type)&&$c(e);break;case 4:Cg(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;At(Jc,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(At(lt,lt.current&1),e.flags|=128,null):A&e.child.childLanes?PC(t,e,A):(At(lt,lt.current&1),t=ur(t,e,A),t!==null?t.sibling:null);At(lt,lt.current&1);break;case 19:if(n=(A&e.childLanes)!==0,t.flags&128){if(n)return MC(t,e,A);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),At(lt,lt.current),n)break;return null;case 22:case 23:return e.lanes=0,HC(t,e,A)}return ur(t,e,A)}var OC,Mh,KC,jC;OC=function(t,e){for(var A=e.child;A!==null;){if(A.tag===5||A.tag===6)t.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break;for(;A.sibling===null;){if(A.return===null||A.return===e)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};Mh=function(){};KC=function(t,e,A,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,Fs(Hn.current);var s=null;switch(A){case"input":r=ah(t,r),n=ah(t,n),s=[];break;case"select":r=ut({},r,{value:void 0}),n=ut({},n,{value:void 0}),s=[];break;case"textarea":r=uh(t,r),n=uh(t,n),s=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=zc)}fh(A,n);var i;A=null;for(l in r)if(!n.hasOwnProperty(l)&&r.hasOwnProperty(l)&&r[l]!=null)if(l==="style"){var o=r[l];for(i in o)o.hasOwnProperty(i)&&(A||(A={}),A[i]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(xa.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var a=n[l];if(o=r!=null?r[l]:void 0,n.hasOwnProperty(l)&&a!==o&&(a!=null||o!=null))if(l==="style")if(o){for(i in o)!o.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(A||(A={}),A[i]="");for(i in a)a.hasOwnProperty(i)&&o[i]!==a[i]&&(A||(A={}),A[i]=a[i])}else A||(s||(s=[]),s.push(l,A)),A=a;else l==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(l,a)):l==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(l,""+a):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(xa.hasOwnProperty(l)?(a!=null&&l==="onScroll"&&nt("scroll",t),s||o===a||(s=[])):(s=s||[]).push(l,a))}A&&(s=s||[]).push("style",A);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};jC=function(t,e,A,n){A!==n&&(e.flags|=4)};function To(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var A=null;e!==null;)e.alternate!==null&&(A=e),e=e.sibling;A===null?t.tail=null:A.sibling=null;break;case"collapsed":A=t.tail;for(var n=null;A!==null;)A.alternate!==null&&(n=A),A=A.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function tA(t){var e=t.alternate!==null&&t.alternate.child===t.child,A=0,n=0;if(e)for(var r=t.child;r!==null;)A|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)A|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=A,e}function IU(t,e,A){var n=e.pendingProps;switch(pg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tA(e),null;case 1:return QA(e.type)&&Vc(),tA(e),null;case 3:return n=e.stateNode,$i(),rt(IA),rt(iA),Eg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Nl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&($h(hn),hn=null))),Mh(t,e),tA(e),null;case 5:xg(e);var r=Fs(Da.current);if(A=e.type,t!==null&&e.stateNode!=null)KC(t,e,A,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error($(166));return tA(e),null}if(t=Fs(Hn.current),Nl(e)){n=e.stateNode,A=e.type;var s=e.memoizedProps;switch(n[Tn]=e,n[Na]=s,t=(e.mode&1)!==0,A){case"dialog":nt("cancel",n),nt("close",n);break;case"iframe":case"object":case"embed":nt("load",n);break;case"video":case"audio":for(r=0;r<zo.length;r++)nt(zo[r],n);break;case"source":nt("error",n);break;case"img":case"image":case"link":nt("error",n),nt("load",n);break;case"details":nt("toggle",n);break;case"input":_w(n,s),nt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},nt("invalid",n);break;case"textarea":Iw(n,s),nt("invalid",n)}fh(A,s),r=null;for(var i in s)if(s.hasOwnProperty(i)){var o=s[i];i==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&Tl(n.textContent,o,t),r=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Tl(n.textContent,o,t),r=["children",""+o]):xa.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&nt("scroll",n)}switch(A){case"input":El(n),Fw(n,s,!0);break;case"textarea":El(n),Qw(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=zc)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mv(A)),t==="http://www.w3.org/1999/xhtml"?A==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(A,{is:n.is}):(t=i.createElement(A),A==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,A),t[Tn]=e,t[Na]=n,OC(t,e,!1,!1),e.stateNode=t;e:{switch(i=hh(A,n),A){case"dialog":nt("cancel",t),nt("close",t),r=n;break;case"iframe":case"object":case"embed":nt("load",t),r=n;break;case"video":case"audio":for(r=0;r<zo.length;r++)nt(zo[r],t);r=n;break;case"source":nt("error",t),r=n;break;case"img":case"image":case"link":nt("error",t),nt("load",t),r=n;break;case"details":nt("toggle",t),r=n;break;case"input":_w(t,n),r=ah(t,n),nt("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=ut({},n,{value:void 0}),nt("invalid",t);break;case"textarea":Iw(t,n),r=uh(t,n),nt("invalid",t);break;default:r=n}fh(A,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?yv(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&wv(t,a)):s==="children"?typeof a=="string"?(A!=="textarea"||a!=="")&&Ea(t,a):typeof a=="number"&&Ea(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xa.hasOwnProperty(s)?a!=null&&s==="onScroll"&&nt("scroll",t):a!=null&&eg(t,s,a,i))}switch(A){case"input":El(t),Fw(t,n,!1);break;case"textarea":El(t),Qw(t);break;case"option":n.value!=null&&t.setAttribute("value",""+es(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Si(t,!!n.multiple,s,!1):n.defaultValue!=null&&Si(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=zc)}switch(A){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tA(e),null;case 6:if(t&&e.stateNode!=null)jC(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error($(166));if(A=Fs(Da.current),Fs(Hn.current),Nl(e)){if(n=e.stateNode,A=e.memoizedProps,n[Tn]=e,(s=n.nodeValue!==A)&&(t=RA,t!==null))switch(t.tag){case 3:Tl(n.nodeValue,A,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tl(n.nodeValue,A,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(A.nodeType===9?A:A.ownerDocument).createTextNode(n),n[Tn]=e,e.stateNode=n}return tA(e),null;case 13:if(rt(lt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&LA!==null&&e.mode&1&&!(e.flags&128))oC(),zi(),e.flags|=98560,s=!1;else if(s=Nl(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Tn]=e}else zi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tA(e),s=!1}else hn!==null&&($h(hn),hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=A,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?St===0&&(St=3):Hg())),e.updateQueue!==null&&(e.flags|=4),tA(e),null);case 4:return $i(),Mh(t,e),t===null&&Sa(e.stateNode.containerInfo),tA(e),null;case 10:return Bg(e.type._context),tA(e),null;case 17:return QA(e.type)&&Vc(),tA(e),null;case 19:if(rt(lt),s=e.memoizedState,s===null)return tA(e),null;if(n=(e.flags&128)!==0,i=s.rendering,i===null)if(n)To(s,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=eu(t),i!==null){for(e.flags|=128,To(s,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=A,A=e.child;A!==null;)s=A,t=n,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),A=A.sibling;return At(lt,lt.current&1|2),e.child}t=t.sibling}s.tail!==null&&wt()>Yi&&(e.flags|=128,n=!0,To(s,!1),e.lanes=4194304)}else{if(!n)if(t=eu(i),t!==null){if(e.flags|=128,n=!0,A=t.updateQueue,A!==null&&(e.updateQueue=A,e.flags|=4),To(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!it)return tA(e),null}else 2*wt()-s.renderingStartTime>Yi&&A!==1073741824&&(e.flags|=128,n=!0,To(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(A=s.last,A!==null?A.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wt(),e.sibling=null,A=lt.current,At(lt,n?A&1|2:A&1),e):(tA(e),null);case 22:case 23:return Dg(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?HA&1073741824&&(tA(e),e.subtreeFlags&6&&(e.flags|=8192)):tA(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function QU(t,e){switch(pg(e),e.tag){case 1:return QA(e.type)&&Vc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $i(),rt(IA),rt(iA),Eg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xg(e),null;case 13:if(rt(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));zi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return rt(lt),null;case 4:return $i(),null;case 10:return Bg(e.type._context),null;case 22:case 23:return Dg(),null;case 24:return null;default:return null}}var Hl=!1,sA=!1,UU=typeof WeakSet=="function"?WeakSet:Set,se=null;function Fi(t,e){var A=t.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(n){dt(t,e,n)}else A.current=null}function Oh(t,e,A){try{A()}catch(n){dt(t,e,n)}}var mB=!1;function bU(t,e){if(Eh=jc,t=$v(),fg(t)){if("selectionStart"in t)var A={start:t.selectionStart,end:t.selectionEnd};else e:{A=(A=t.ownerDocument)&&A.defaultView||window;var n=A.getSelection&&A.getSelection();if(n&&n.rangeCount!==0){A=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{A.nodeType,s.nodeType}catch{A=null;break e}var i=0,o=-1,a=-1,l=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==A||r!==0&&d.nodeType!==3||(o=i+r),d!==s||n!==0&&d.nodeType!==3||(a=i+n),d.nodeType===3&&(i+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===A&&++l===r&&(o=i),f===s&&++c===n&&(a=i),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}A=o===-1||a===-1?null:{start:o,end:a}}else A=null}A=A||{start:0,end:0}}else A=null;for(_h={focusedElem:t,selectionRange:A},jc=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var C=m.memoizedProps,Q=m.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?C:dn(e.type,C),Q);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(v){dt(e,e.return,v)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return m=mB,mB=!1,m}function oa(t,e,A){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Oh(e,A,s)}r=r.next}while(r!==n)}}function qu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var A=e=e.next;do{if((A.tag&t)===t){var n=A.create;A.destroy=n()}A=A.next}while(A!==e)}}function Kh(t){var e=t.ref;if(e!==null){var A=t.stateNode;switch(t.tag){case 5:t=A;break;default:t=A}typeof e=="function"?e(t):e.current=t}}function GC(t){var e=t.alternate;e!==null&&(t.alternate=null,GC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tn],delete e[Na],delete e[Qh],delete e[dU],delete e[fU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function WC(t){return t.tag===5||t.tag===3||t.tag===4}function wB(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||WC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jh(t,e,A){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?A.nodeType===8?A.parentNode.insertBefore(t,e):A.insertBefore(t,e):(A.nodeType===8?(e=A.parentNode,e.insertBefore(t,A)):(e=A,e.appendChild(t)),A=A._reactRootContainer,A!=null||e.onclick!==null||(e.onclick=zc));else if(n!==4&&(t=t.child,t!==null))for(jh(t,e,A),t=t.sibling;t!==null;)jh(t,e,A),t=t.sibling}function Gh(t,e,A){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?A.insertBefore(t,e):A.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Gh(t,e,A),t=t.sibling;t!==null;)Gh(t,e,A),t=t.sibling}var Gt=null,fn=!1;function Br(t,e,A){for(A=A.child;A!==null;)zC(t,e,A),A=A.sibling}function zC(t,e,A){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Wu,A)}catch{}switch(A.tag){case 5:sA||Fi(A,e);case 6:var n=Gt,r=fn;Gt=null,Br(t,e,A),Gt=n,fn=r,Gt!==null&&(fn?(t=Gt,A=A.stateNode,t.nodeType===8?t.parentNode.removeChild(A):t.removeChild(A)):Gt.removeChild(A.stateNode));break;case 18:Gt!==null&&(fn?(t=Gt,A=A.stateNode,t.nodeType===8?rf(t.parentNode,A):t.nodeType===1&&rf(t,A),Qa(t)):rf(Gt,A.stateNode));break;case 4:n=Gt,r=fn,Gt=A.stateNode.containerInfo,fn=!0,Br(t,e,A),Gt=n,fn=r;break;case 0:case 11:case 14:case 15:if(!sA&&(n=A.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var s=r,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&Oh(A,e,i),r=r.next}while(r!==n)}Br(t,e,A);break;case 1:if(!sA&&(Fi(A,e),n=A.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=A.memoizedProps,n.state=A.memoizedState,n.componentWillUnmount()}catch(o){dt(A,e,o)}Br(t,e,A);break;case 21:Br(t,e,A);break;case 22:A.mode&1?(sA=(n=sA)||A.memoizedState!==null,Br(t,e,A),sA=n):Br(t,e,A);break;default:Br(t,e,A)}}function BB(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var A=t.stateNode;A===null&&(A=t.stateNode=new UU),e.forEach(function(n){var r=PU.bind(null,t,n);A.has(n)||(A.add(n),n.then(r,r))})}}function ln(t,e){var A=e.deletions;if(A!==null)for(var n=0;n<A.length;n++){var r=A[n];try{var s=t,i=e,o=i;e:for(;o!==null;){switch(o.tag){case 5:Gt=o.stateNode,fn=!1;break e;case 3:Gt=o.stateNode.containerInfo,fn=!0;break e;case 4:Gt=o.stateNode.containerInfo,fn=!0;break e}o=o.return}if(Gt===null)throw Error($(160));zC(s,i,r),Gt=null,fn=!1;var a=r.alternate;a!==null&&(a.return=null),r.return=null}catch(l){dt(r,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VC(e,t),e=e.sibling}function VC(t,e){var A=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ln(e,t),Qn(t),n&4){try{oa(3,t,t.return),qu(3,t)}catch(C){dt(t,t.return,C)}try{oa(5,t,t.return)}catch(C){dt(t,t.return,C)}}break;case 1:ln(e,t),Qn(t),n&512&&A!==null&&Fi(A,A.return);break;case 5:if(ln(e,t),Qn(t),n&512&&A!==null&&Fi(A,A.return),t.flags&32){var r=t.stateNode;try{Ea(r,"")}catch(C){dt(t,t.return,C)}}if(n&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,i=A!==null?A.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&pv(r,s),hh(o,i);var l=hh(o,s);for(i=0;i<a.length;i+=2){var c=a[i],d=a[i+1];c==="style"?yv(r,d):c==="dangerouslySetInnerHTML"?wv(r,d):c==="children"?Ea(r,d):eg(r,c,d,l)}switch(o){case"input":lh(r,s);break;case"textarea":gv(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Si(r,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Si(r,!!s.multiple,s.defaultValue,!0):Si(r,!!s.multiple,s.multiple?[]:"",!1))}r[Na]=s}catch(C){dt(t,t.return,C)}}break;case 6:if(ln(e,t),Qn(t),n&4){if(t.stateNode===null)throw Error($(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(C){dt(t,t.return,C)}}break;case 3:if(ln(e,t),Qn(t),n&4&&A!==null&&A.memoizedState.isDehydrated)try{Qa(e.containerInfo)}catch(C){dt(t,t.return,C)}break;case 4:ln(e,t),Qn(t);break;case 13:ln(e,t),Qn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Ng=wt())),n&4&&BB(t);break;case 22:if(c=A!==null&&A.memoizedState!==null,t.mode&1?(sA=(l=sA)||c,ln(e,t),sA=l):ln(e,t),Qn(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(se=t,c=t.child;c!==null;){for(d=se=c;se!==null;){switch(f=se,h=f.child,f.tag){case 0:case 11:case 14:case 15:oa(4,f,f.return);break;case 1:Fi(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,A=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(C){dt(n,A,C)}}break;case 5:Fi(f,f.return);break;case 22:if(f.memoizedState!==null){vB(d);continue}}h!==null?(h.return=f,se=h):vB(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,l?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,a=d.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=Bv("display",i))}catch(C){dt(t,t.return,C)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(C){dt(t,t.return,C)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ln(e,t),Qn(t),n&4&&BB(t);break;case 21:break;default:ln(e,t),Qn(t)}}function Qn(t){var e=t.flags;if(e&2){try{e:{for(var A=t.return;A!==null;){if(WC(A)){var n=A;break e}A=A.return}throw Error($(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(Ea(r,""),n.flags&=-33);var s=wB(t);Gh(t,s,r);break;case 3:case 4:var i=n.stateNode.containerInfo,o=wB(t);jh(t,o,i);break;default:throw Error($(161))}}catch(a){dt(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SU(t,e,A){se=t,$C(t)}function $C(t,e,A){for(var n=(t.mode&1)!==0;se!==null;){var r=se,s=r.child;if(r.tag===22&&n){var i=r.memoizedState!==null||Hl;if(!i){var o=r.alternate,a=o!==null&&o.memoizedState!==null||sA;o=Hl;var l=sA;if(Hl=i,(sA=a)&&!l)for(se=r;se!==null;)i=se,a=i.child,i.tag===22&&i.memoizedState!==null?CB(r):a!==null?(a.return=i,se=a):CB(r);for(;s!==null;)se=s,$C(s),s=s.sibling;se=r,Hl=o,sA=l}yB(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,se=s):yB(t)}}function yB(t){for(;se!==null;){var e=se;if(e.flags&8772){var A=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sA||qu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!sA)if(A===null)n.componentDidMount();else{var r=e.elementType===e.type?A.memoizedProps:dn(e.type,A.memoizedProps);n.componentDidUpdate(r,A.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rB(e,s,n);break;case 3:var i=e.updateQueue;if(i!==null){if(A=null,e.child!==null)switch(e.child.tag){case 5:A=e.child.stateNode;break;case 1:A=e.child.stateNode}rB(e,i,A)}break;case 5:var o=e.stateNode;if(A===null&&e.flags&4){A=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&A.focus();break;case"img":a.src&&(A.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Qa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}sA||e.flags&512&&Kh(e)}catch(f){dt(e,e.return,f)}}if(e===t){se=null;break}if(A=e.sibling,A!==null){A.return=e.return,se=A;break}se=e.return}}function vB(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var A=e.sibling;if(A!==null){A.return=e.return,se=A;break}se=e.return}}function CB(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var A=e.return;try{qu(4,e)}catch(a){dt(e,A,a)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(a){dt(e,r,a)}}var s=e.return;try{Kh(e)}catch(a){dt(e,s,a)}break;case 5:var i=e.return;try{Kh(e)}catch(a){dt(e,i,a)}}}catch(a){dt(e,e.return,a)}if(e===t){se=null;break}var o=e.sibling;if(o!==null){o.return=e.return,se=o;break}se=e.return}}var TU=Math.ceil,nu=gr.ReactCurrentDispatcher,Sg=gr.ReactCurrentOwner,An=gr.ReactCurrentBatchConfig,Pe=0,Rt=null,Ft=null,Xt=0,HA=0,Ii=is(0),St=0,Pa=null,Rs=0,ed=0,Tg=0,aa=null,xA=null,Ng=0,Yi=1/0,Jn=null,ru=!1,Wh=null,Wr=null,Ll=!1,Dr=null,su=0,la=0,zh=null,Fc=-1,Ic=0;function pA(){return Pe&6?wt():Fc!==-1?Fc:Fc=wt()}function zr(t){return t.mode&1?Pe&2&&Xt!==0?Xt&-Xt:pU.transition!==null?(Ic===0&&(Ic=Tv()),Ic):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:Pv(t.type)),t):1}function yn(t,e,A,n){if(50<la)throw la=0,zh=null,Error($(185));Al(t,A,n),(!(Pe&2)||t!==Rt)&&(t===Rt&&(!(Pe&2)&&(ed|=A),St===4&&br(t,Xt)),UA(t,n),A===1&&Pe===0&&!(e.mode&1)&&(Yi=wt()+500,Yu&&os()))}function UA(t,e){var A=t.callbackNode;pQ(t,e);var n=Kc(t,t===Rt?Xt:0);if(n===0)A!==null&&Sw(A),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(A!=null&&Sw(A),e===1)t.tag===0?hU(xB.bind(null,t)):rC(xB.bind(null,t)),cU(function(){!(Pe&6)&&os()}),A=null;else{switch(Nv(n)){case 1:A=sg;break;case 4:A=bv;break;case 16:A=Oc;break;case 536870912:A=Sv;break;default:A=Oc}A=Ax(A,XC.bind(null,t))}t.callbackPriority=e,t.callbackNode=A}}function XC(t,e){if(Fc=-1,Ic=0,Pe&6)throw Error($(327));var A=t.callbackNode;if(Hi()&&t.callbackNode!==A)return null;var n=Kc(t,t===Rt?Xt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=iu(t,n);else{e=n;var r=Pe;Pe|=2;var s=JC();(Rt!==t||Xt!==e)&&(Jn=null,Yi=wt()+500,bs(t,e));do try{DU();break}catch(o){YC(t,o)}while(!0);wg(),nu.current=s,Pe=r,Ft!==null?e=0:(Rt=null,Xt=0,e=St)}if(e!==0){if(e===2&&(r=Bh(t),r!==0&&(n=r,e=Vh(t,r))),e===1)throw A=Pa,bs(t,0),br(t,n),UA(t,wt()),A;if(e===6)br(t,n);else{if(r=t.current.alternate,!(n&30)&&!NU(r)&&(e=iu(t,n),e===2&&(s=Bh(t),s!==0&&(n=s,e=Vh(t,s))),e===1))throw A=Pa,bs(t,0),br(t,n),UA(t,wt()),A;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error($(345));case 2:ys(t,xA,Jn);break;case 3:if(br(t,n),(n&130023424)===n&&(e=Ng+500-wt(),10<e)){if(Kc(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){pA(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Ih(ys.bind(null,t,xA,Jn),e);break}ys(t,xA,Jn);break;case 4:if(br(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var i=31-Bn(n);s=1<<i,i=e[i],i>r&&(r=i),n&=~s}if(n=r,n=wt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*TU(n/1960))-n,10<n){t.timeoutHandle=Ih(ys.bind(null,t,xA,Jn),n);break}ys(t,xA,Jn);break;case 5:ys(t,xA,Jn);break;default:throw Error($(329))}}}return UA(t,wt()),t.callbackNode===A?XC.bind(null,t):null}function Vh(t,e){var A=aa;return t.current.memoizedState.isDehydrated&&(bs(t,e).flags|=256),t=iu(t,e),t!==2&&(e=xA,xA=A,e!==null&&$h(e)),t}function $h(t){xA===null?xA=t:xA.push.apply(xA,t)}function NU(t){for(var e=t;;){if(e.flags&16384){var A=e.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var n=0;n<A.length;n++){var r=A[n],s=r.getSnapshot;r=r.value;try{if(!xn(s(),r))return!1}catch{return!1}}}if(A=e.child,e.subtreeFlags&16384&&A!==null)A.return=e,e=A;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(t,e){for(e&=~Tg,e&=~ed,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var A=31-Bn(e),n=1<<A;t[A]=-1,e&=~n}}function xB(t){if(Pe&6)throw Error($(327));Hi();var e=Kc(t,0);if(!(e&1))return UA(t,wt()),null;var A=iu(t,e);if(t.tag!==0&&A===2){var n=Bh(t);n!==0&&(e=n,A=Vh(t,n))}if(A===1)throw A=Pa,bs(t,0),br(t,e),UA(t,wt()),A;if(A===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ys(t,xA,Jn),UA(t,wt()),null}function kg(t,e){var A=Pe;Pe|=1;try{return t(e)}finally{Pe=A,Pe===0&&(Yi=wt()+500,Yu&&os())}}function Ps(t){Dr!==null&&Dr.tag===0&&!(Pe&6)&&Hi();var e=Pe;Pe|=1;var A=An.transition,n=Ve;try{if(An.transition=null,Ve=1,t)return t()}finally{Ve=n,An.transition=A,Pe=e,!(Pe&6)&&os()}}function Dg(){HA=Ii.current,rt(Ii)}function bs(t,e){t.finishedWork=null,t.finishedLanes=0;var A=t.timeoutHandle;if(A!==-1&&(t.timeoutHandle=-1,lU(A)),Ft!==null)for(A=Ft.return;A!==null;){var n=A;switch(pg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Vc();break;case 3:$i(),rt(IA),rt(iA),Eg();break;case 5:xg(n);break;case 4:$i();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:Bg(n.type._context);break;case 22:case 23:Dg()}A=A.return}if(Rt=t,Ft=t=Vr(t.current,null),Xt=HA=e,St=0,Pa=null,Tg=ed=Rs=0,xA=aa=null,_s!==null){for(e=0;e<_s.length;e++)if(A=_s[e],n=A.interleaved,n!==null){A.interleaved=null;var r=n.next,s=A.pending;if(s!==null){var i=s.next;s.next=r,n.next=i}A.pending=n}_s=null}return t}function YC(t,e){do{var A=Ft;try{if(wg(),xc.current=Au,tu){for(var n=ct.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}tu=!1}if(Ls=0,kt=Ut=ct=null,ia=!1,Ha=0,Sg.current=null,A===null||A.return===null){St=1,Pa=e,Ft=null;break}e:{var s=t,i=A.return,o=A,a=e;if(e=Xt,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var l=a,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=cB(i);if(h!==null){h.flags&=-257,uB(h,i,o,s,e),h.mode&1&&lB(s,l,e),e=h,a=l;var m=e.updateQueue;if(m===null){var C=new Set;C.add(a),e.updateQueue=C}else m.add(a);break e}else{if(!(e&1)){lB(s,l,e),Hg();break e}a=Error($(426))}}else if(it&&o.mode&1){var Q=cB(i);if(Q!==null){!(Q.flags&65536)&&(Q.flags|=256),uB(Q,i,o,s,e),gg(Xi(a,o));break e}}s=a=Xi(a,o),St!==4&&(St=2),aa===null?aa=[s]:aa.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=NC(s,a,e);nB(s,g);break e;case 1:o=a;var p=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Wr===null||!Wr.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var v=kC(s,o,e);nB(s,v);break e}}s=s.return}while(s!==null)}qC(A)}catch(_){e=_,Ft===A&&A!==null&&(Ft=A=A.return);continue}break}while(!0)}function JC(){var t=nu.current;return nu.current=Au,t===null?Au:t}function Hg(){(St===0||St===3||St===2)&&(St=4),Rt===null||!(Rs&268435455)&&!(ed&268435455)||br(Rt,Xt)}function iu(t,e){var A=Pe;Pe|=2;var n=JC();(Rt!==t||Xt!==e)&&(Jn=null,bs(t,e));do try{kU();break}catch(r){YC(t,r)}while(!0);if(wg(),Pe=A,nu.current=n,Ft!==null)throw Error($(261));return Rt=null,Xt=0,St}function kU(){for(;Ft!==null;)ZC(Ft)}function DU(){for(;Ft!==null&&!iQ();)ZC(Ft)}function ZC(t){var e=tx(t.alternate,t,HA);t.memoizedProps=t.pendingProps,e===null?qC(t):Ft=e,Sg.current=null}function qC(t){var e=t;do{var A=e.alternate;if(t=e.return,e.flags&32768){if(A=QU(A,e),A!==null){A.flags&=32767,Ft=A;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,Ft=null;return}}else if(A=IU(A,e,HA),A!==null){Ft=A;return}if(e=e.sibling,e!==null){Ft=e;return}Ft=e=t}while(e!==null);St===0&&(St=5)}function ys(t,e,A){var n=Ve,r=An.transition;try{An.transition=null,Ve=1,HU(t,e,A,n)}finally{An.transition=r,Ve=n}return null}function HU(t,e,A,n){do Hi();while(Dr!==null);if(Pe&6)throw Error($(327));A=t.finishedWork;var r=t.finishedLanes;if(A===null)return null;if(t.finishedWork=null,t.finishedLanes=0,A===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=A.lanes|A.childLanes;if(gQ(t,s),t===Rt&&(Ft=Rt=null,Xt=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||Ll||(Ll=!0,Ax(Oc,function(){return Hi(),null})),s=(A.flags&15990)!==0,A.subtreeFlags&15990||s){s=An.transition,An.transition=null;var i=Ve;Ve=1;var o=Pe;Pe|=4,Sg.current=null,bU(t,A),VC(A,t),AU(_h),jc=!!Eh,_h=Eh=null,t.current=A,SU(A),oQ(),Pe=o,Ve=i,An.transition=s}else t.current=A;if(Ll&&(Ll=!1,Dr=t,su=r),s=t.pendingLanes,s===0&&(Wr=null),cQ(A.stateNode),UA(t,wt()),e!==null)for(n=t.onRecoverableError,A=0;A<e.length;A++)r=e[A],n(r.value,{componentStack:r.stack,digest:r.digest});if(ru)throw ru=!1,t=Wh,Wh=null,t;return su&1&&t.tag!==0&&Hi(),s=t.pendingLanes,s&1?t===zh?la++:(la=0,zh=t):la=0,os(),null}function Hi(){if(Dr!==null){var t=Nv(su),e=An.transition,A=Ve;try{if(An.transition=null,Ve=16>t?16:t,Dr===null)var n=!1;else{if(t=Dr,Dr=null,su=0,Pe&6)throw Error($(331));var r=Pe;for(Pe|=4,se=t.current;se!==null;){var s=se,i=s.child;if(se.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var l=o[a];for(se=l;se!==null;){var c=se;switch(c.tag){case 0:case 11:case 15:oa(8,c,s)}var d=c.child;if(d!==null)d.return=c,se=d;else for(;se!==null;){c=se;var f=c.sibling,h=c.return;if(GC(c),c===l){se=null;break}if(f!==null){f.return=h,se=f;break}se=h}}}var m=s.alternate;if(m!==null){var C=m.child;if(C!==null){m.child=null;do{var Q=C.sibling;C.sibling=null,C=Q}while(C!==null)}}se=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,se=i;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:oa(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,se=g;break e}se=s.return}}var p=t.current;for(se=p;se!==null;){i=se;var w=i.child;if(i.subtreeFlags&2064&&w!==null)w.return=i,se=w;else e:for(i=p;se!==null;){if(o=se,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:qu(9,o)}}catch(_){dt(o,o.return,_)}if(o===i){se=null;break e}var v=o.sibling;if(v!==null){v.return=o.return,se=v;break e}se=o.return}}if(Pe=r,os(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Wu,t)}catch{}n=!0}return n}finally{Ve=A,An.transition=e}}return!1}function EB(t,e,A){e=Xi(A,e),e=NC(t,e,1),t=Gr(t,e,1),e=pA(),t!==null&&(Al(t,1,e),UA(t,e))}function dt(t,e,A){if(t.tag===3)EB(t,t,A);else for(;e!==null;){if(e.tag===3){EB(e,t,A);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Wr===null||!Wr.has(n))){t=Xi(A,t),t=kC(e,t,1),e=Gr(e,t,1),t=pA(),e!==null&&(Al(e,1,t),UA(e,t));break}}e=e.return}}function LU(t,e,A){var n=t.pingCache;n!==null&&n.delete(e),e=pA(),t.pingedLanes|=t.suspendedLanes&A,Rt===t&&(Xt&A)===A&&(St===4||St===3&&(Xt&130023424)===Xt&&500>wt()-Ng?bs(t,0):Tg|=A),UA(t,e)}function ex(t,e){e===0&&(t.mode&1?(e=Il,Il<<=1,!(Il&130023424)&&(Il=4194304)):e=1);var A=pA();t=cr(t,e),t!==null&&(Al(t,e,A),UA(t,A))}function RU(t){var e=t.memoizedState,A=0;e!==null&&(A=e.retryLane),ex(t,A)}function PU(t,e){var A=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(A=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error($(314))}n!==null&&n.delete(e),ex(t,A)}var tx;tx=function(t,e,A){if(t!==null)if(t.memoizedProps!==e.pendingProps||IA.current)EA=!0;else{if(!(t.lanes&A)&&!(e.flags&128))return EA=!1,FU(t,e,A);EA=!!(t.flags&131072)}else EA=!1,it&&e.flags&1048576&&sC(e,Yc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;_c(t,e),t=e.pendingProps;var r=Wi(e,iA.current);Di(e,A),r=Fg(null,e,n,t,r,A);var s=Ig();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,QA(n)?(s=!0,$c(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,vg(e),r.updater=Zu,e.stateNode=r,r._reactInternals=e,kh(e,n,t,A),e=Lh(null,e,n,!0,s,A)):(e.tag=0,it&&s&&hg(e),hA(null,e,r,A),e=e.child),e;case 16:n=e.elementType;e:{switch(_c(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=OU(n),t=dn(n,t),r){case 0:e=Hh(null,e,n,t,A);break e;case 1:e=hB(null,e,n,t,A);break e;case 11:e=dB(null,e,n,t,A);break e;case 14:e=fB(null,e,n,dn(n.type,t),A);break e}throw Error($(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:dn(n,r),Hh(t,e,n,r,A);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:dn(n,r),hB(t,e,n,r,A);case 3:e:{if(RC(e),t===null)throw Error($(387));n=e.pendingProps,s=e.memoizedState,r=s.element,uC(t,e),qc(e,n,null,A);var i=e.memoizedState;if(n=i.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Xi(Error($(423)),e),e=pB(t,e,n,A,r);break e}else if(n!==r){r=Xi(Error($(424)),e),e=pB(t,e,n,A,r);break e}else for(LA=jr(e.stateNode.containerInfo.firstChild),RA=e,it=!0,hn=null,A=lC(e,null,n,A),e.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(zi(),n===r){e=ur(t,e,A);break e}hA(t,e,n,A)}e=e.child}return e;case 5:return dC(e),t===null&&Sh(e),n=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,i=r.children,Fh(n,r)?i=null:s!==null&&Fh(n,s)&&(e.flags|=32),LC(t,e),hA(t,e,i,A),e.child;case 6:return t===null&&Sh(e),null;case 13:return PC(t,e,A);case 4:return Cg(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Vi(e,null,n,A):hA(t,e,n,A),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:dn(n,r),dB(t,e,n,r,A);case 7:return hA(t,e,e.pendingProps,A),e.child;case 8:return hA(t,e,e.pendingProps.children,A),e.child;case 12:return hA(t,e,e.pendingProps.children,A),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,s=e.memoizedProps,i=r.value,At(Jc,n._currentValue),n._currentValue=i,s!==null)if(xn(s.value,i)){if(s.children===r.children&&!IA.current){e=ur(t,e,A);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){i=s.child;for(var a=o.firstContext;a!==null;){if(a.context===n){if(s.tag===1){a=rr(-1,A&-A),a.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?a.next=a:(a.next=c.next,c.next=a),l.pending=a}}s.lanes|=A,a=s.alternate,a!==null&&(a.lanes|=A),Th(s.return,A,e),o.lanes|=A;break}a=a.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error($(341));i.lanes|=A,o=i.alternate,o!==null&&(o.lanes|=A),Th(i,A,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}hA(t,e,r.children,A),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,Di(e,A),r=nn(r),n=n(r),e.flags|=1,hA(t,e,n,A),e.child;case 14:return n=e.type,r=dn(n,e.pendingProps),r=dn(n.type,r),fB(t,e,n,r,A);case 15:return DC(t,e,e.type,e.pendingProps,A);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:dn(n,r),_c(t,e),e.tag=1,QA(n)?(t=!0,$c(e)):t=!1,Di(e,A),TC(e,n,r),kh(e,n,r,A),Lh(null,e,n,!0,t,A);case 19:return MC(t,e,A);case 22:return HC(t,e,A)}throw Error($(156,e.tag))};function Ax(t,e){return Uv(t,e)}function MU(t,e,A,n){this.tag=t,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function JA(t,e,A,n){return new MU(t,e,A,n)}function Lg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OU(t){if(typeof t=="function")return Lg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ag)return 11;if(t===ng)return 14}return 2}function Vr(t,e){var A=t.alternate;return A===null?(A=JA(t.tag,e,t.key,t.mode),A.elementType=t.elementType,A.type=t.type,A.stateNode=t.stateNode,A.alternate=t,t.alternate=A):(A.pendingProps=e,A.type=t.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=t.flags&14680064,A.childLanes=t.childLanes,A.lanes=t.lanes,A.child=t.child,A.memoizedProps=t.memoizedProps,A.memoizedState=t.memoizedState,A.updateQueue=t.updateQueue,e=t.dependencies,A.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},A.sibling=t.sibling,A.index=t.index,A.ref=t.ref,A}function Qc(t,e,A,n,r,s){var i=2;if(n=t,typeof t=="function")Lg(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case mi:return Ss(A.children,r,s,e);case tg:i=8,r|=8;break;case rh:return t=JA(12,A,e,r|2),t.elementType=rh,t.lanes=s,t;case sh:return t=JA(13,A,e,r),t.elementType=sh,t.lanes=s,t;case ih:return t=JA(19,A,e,r),t.elementType=ih,t.lanes=s,t;case dv:return td(A,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cv:i=10;break e;case uv:i=9;break e;case Ag:i=11;break e;case ng:i=14;break e;case _r:i=16,n=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=JA(i,A,e,r),e.elementType=t,e.type=n,e.lanes=s,e}function Ss(t,e,A,n){return t=JA(7,t,n,e),t.lanes=A,t}function td(t,e,A,n){return t=JA(22,t,n,e),t.elementType=dv,t.lanes=A,t.stateNode={isHidden:!1},t}function ff(t,e,A){return t=JA(6,t,null,e),t.lanes=A,t}function hf(t,e,A){return e=JA(4,t.children!==null?t.children:[],t.key,e),e.lanes=A,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KU(t,e,A,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vd(0),this.expirationTimes=Vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vd(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Rg(t,e,A,n,r,s,i,o,a){return t=new KU(t,e,A,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=JA(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},vg(s),t}function jU(t,e,A){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gi,key:n==null?null:""+n,children:t,containerInfo:e,implementation:A}}function nx(t){if(!t)return ts;t=t._reactInternals;e:{if(Xs(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(QA(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var A=t.type;if(QA(A))return nC(t,A,e)}return e}function rx(t,e,A,n,r,s,i,o,a){return t=Rg(A,n,!0,t,r,s,i,o,a),t.context=nx(null),A=t.current,n=pA(),r=zr(A),s=rr(n,r),s.callback=e??null,Gr(A,s,r),t.current.lanes=r,Al(t,r,n),UA(t,n),t}function Ad(t,e,A,n){var r=e.current,s=pA(),i=zr(r);return A=nx(A),e.context===null?e.context=A:e.pendingContext=A,e=rr(s,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Gr(r,e,i),t!==null&&(yn(t,r,i,s),Cc(t,r,i)),i}function ou(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _B(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var A=t.retryLane;t.retryLane=A!==0&&A<e?A:e}}function Pg(t,e){_B(t,e),(t=t.alternate)&&_B(t,e)}function GU(){return null}var sx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mg(t){this._internalRoot=t}nd.prototype.render=Mg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Ad(t,e,null,null)};nd.prototype.unmount=Mg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ps(function(){Ad(null,t,null,null)}),e[lr]=null}};function nd(t){this._internalRoot=t}nd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hv();t={blockedOn:null,target:t,priority:e};for(var A=0;A<Ur.length&&e!==0&&e<Ur[A].priority;A++);Ur.splice(A,0,t),A===0&&Rv(t)}};function Og(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function FB(){}function WU(t,e,A,n,r){if(r){if(typeof n=="function"){var s=n;n=function(){var l=ou(i);s.call(l)}}var i=rx(e,n,t,0,null,!1,!1,"",FB);return t._reactRootContainer=i,t[lr]=i.current,Sa(t.nodeType===8?t.parentNode:t),Ps(),i}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var o=n;n=function(){var l=ou(a);o.call(l)}}var a=Rg(t,0,!1,null,null,!1,!1,"",FB);return t._reactRootContainer=a,t[lr]=a.current,Sa(t.nodeType===8?t.parentNode:t),Ps(function(){Ad(e,a,A,n)}),a}function sd(t,e,A,n,r){var s=A._reactRootContainer;if(s){var i=s;if(typeof r=="function"){var o=r;r=function(){var a=ou(i);o.call(a)}}Ad(e,i,t,r)}else i=WU(A,e,t,r,n);return ou(i)}kv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var A=Wo(e.pendingLanes);A!==0&&(ig(e,A|1),UA(e,wt()),!(Pe&6)&&(Yi=wt()+500,os()))}break;case 13:Ps(function(){var n=cr(t,1);if(n!==null){var r=pA();yn(n,t,1,r)}}),Pg(t,1)}};og=function(t){if(t.tag===13){var e=cr(t,134217728);if(e!==null){var A=pA();yn(e,t,134217728,A)}Pg(t,134217728)}};Dv=function(t){if(t.tag===13){var e=zr(t),A=cr(t,e);if(A!==null){var n=pA();yn(A,t,e,n)}Pg(t,e)}};Hv=function(){return Ve};Lv=function(t,e){var A=Ve;try{return Ve=t,e()}finally{Ve=A}};gh=function(t,e,A){switch(e){case"input":if(lh(t,A),e=A.name,A.type==="radio"&&e!=null){for(A=t;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<A.length;e++){var n=A[e];if(n!==t&&n.form===t.form){var r=Xu(n);if(!r)throw Error($(90));hv(n),lh(n,r)}}}break;case"textarea":gv(t,A);break;case"select":e=A.value,e!=null&&Si(t,!!A.multiple,e,!1)}};xv=kg;Ev=Ps;var zU={usingClientEntryPoint:!1,Events:[rl,vi,Xu,vv,Cv,kg]},No={findFiberByHostInstance:Es,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VU={bundleType:No.bundleType,version:No.version,rendererPackageName:No.rendererPackageName,rendererConfig:No.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Iv(t),t===null?null:t.stateNode},findFiberByHostInstance:No.findFiberByHostInstance||GU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{Wu=Rl.inject(VU),Dn=Rl}catch{}}OA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zU;OA.createPortal=function(t,e){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Og(e))throw Error($(200));return jU(t,e,null,A)};OA.createRoot=function(t,e){if(!Og(t))throw Error($(299));var A=!1,n="",r=sx;return e!=null&&(e.unstable_strictMode===!0&&(A=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Rg(t,1,!1,null,null,A,!1,n,r),t[lr]=e.current,Sa(t.nodeType===8?t.parentNode:t),new Mg(e)};OA.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Iv(e),t=t===null?null:t.stateNode,t};OA.flushSync=function(t){return Ps(t)};OA.hydrate=function(t,e,A){if(!rd(e))throw Error($(200));return sd(null,t,e,!0,A)};OA.hydrateRoot=function(t,e,A){if(!Og(t))throw Error($(405));var n=A!=null&&A.hydratedSources||null,r=!1,s="",i=sx;if(A!=null&&(A.unstable_strictMode===!0&&(r=!0),A.identifierPrefix!==void 0&&(s=A.identifierPrefix),A.onRecoverableError!==void 0&&(i=A.onRecoverableError)),e=rx(e,null,t,1,A??null,r,!1,s,i),t[lr]=e.current,Sa(t),n)for(t=0;t<n.length;t++)A=n[t],r=A._getVersion,r=r(A._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[A,r]:e.mutableSourceEagerHydrationData.push(A,r);return new nd(e)};OA.render=function(t,e,A){if(!rd(e))throw Error($(200));return sd(null,t,e,!1,A)};OA.unmountComponentAtNode=function(t){if(!rd(t))throw Error($(40));return t._reactRootContainer?(Ps(function(){sd(null,null,t,!1,function(){t._reactRootContainer=null,t[lr]=null})}),!0):!1};OA.unstable_batchedUpdates=kg;OA.unstable_renderSubtreeIntoContainer=function(t,e,A,n){if(!rd(A))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return sd(t,e,A,!1,n)};OA.version="18.3.1-next-f1338f8080-20240426";function ix(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ix)}catch(t){console.error(t)}}ix(),iv.exports=OA;var as=iv.exports,IB=as;Ah.createRoot=IB.createRoot,Ah.hydrateRoot=IB.hydrateRoot;const $U="modulepreload",XU=function(t){return"/refboard/"+t},QB={},Nn=function(e,A,n){let r=Promise.resolve();if(A&&A.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.allSettled(A.map(a=>{if(a=XU(a),a in QB)return;QB[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":$U,l||(d.as="script"),d.crossOrigin="",d.href=a,o&&d.setAttribute("nonce",o),document.head.appendChild(d),l)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return r.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},ox=E.createContext({scale:1,position:{x:0,y:0},isSelecting:!1}),id=()=>E.useContext(ox),YU=({connections:t,getItemPosition:e,tempConnection:A,onConnectionContextMenu:n,items:r,activeGenerationNodeIds:s=[]})=>{const{scale:i}=id(),o=(a,l,c,d,f,h=!1,m,C=!1)=>{const Q=Math.abs(c-a)*.5,g=a+Math.max(Q,50),p=l,w=c-Math.max(Q,50),_=`M ${a} ${l} C ${g} ${p}, ${w} ${d}, ${c} ${d}`;let F="#60a5fa";return h?F="#3b82f6":m==="input_0"?F="#10b981":m==="input_1"&&(F="#6b7280"),u.jsxs("g",{children:[!h&&u.jsx("path",{d:_,stroke:"transparent",strokeWidth:15/i,fill:"none",style:{pointerEvents:"stroke",cursor:"context-menu"},onContextMenu:U=>{n&&(U.preventDefault(),U.stopPropagation(),n(f,U))}}),u.jsx("path",{d:_,stroke:F,strokeWidth:h?2/i:3/i,strokeDasharray:h?"5,5":"none",fill:"none",style:{pointerEvents:"none",opacity:C?.3:1}}),C&&u.jsx("path",{d:_,stroke:"#ffffff",strokeWidth:4/i,strokeDasharray:`${20/i} ${150/i}`,strokeLinecap:"round",fill:"none",style:{pointerEvents:"none",filter:"drop-shadow(0 0 3px #10b981) drop-shadow(0 0 8px #10b981) drop-shadow(0 0 15px #10b981)",opacity:1},children:u.jsx("animate",{attributeName:"stroke-dashoffset",from:170/i,to:"0",dur:"1s",repeatCount:"indefinite"})})]},f)};return u.jsx("svg",{className:"absolute inset-0 pointer-events-none",style:{width:"100%",height:"100%",overflow:"visible",zIndex:5},children:u.jsxs("g",{children:[t.map(a=>{const l=e(a.fromNodeId,a.fromSocketId),c=e(a.toNodeId,a.toSocketId),d=s.includes(a.toNodeId);return l&&c?o(l.x,l.y,c.x,c.y,a.id,!1,a.toSocketId,d):null}),A&&(()=>{const a=e(A.fromNodeId,A.fromSocketId);return a?o(a.x,a.y,A.toPoint.x,A.toPoint.y,"temp",!0):null})()]})})},JU=Vt.memo(YU),ZU=({items:t,viewport:e,onNavigate:A})=>{const[o,a]=E.useState(!1),[l,c]=E.useState({x:window.innerWidth-270,y:window.innerHeight-320}),[d,f]=E.useState(!1),[h,m]=E.useState({x:0,y:0}),C=E.useRef(!1),Q=E.useRef({x:0,y:0}),[g,p]=E.useState({width:window.innerWidth,height:window.innerHeight}),w=Vt.useMemo(()=>{if(!t||t.length===0)return{minX:-500,minY:-500,maxX:500,maxY:500,width:1e3,height:1e3};let N=1/0,O=1/0,W=-1/0,Z=-1/0;if(t.forEach(xe=>{typeof xe.x=="number"&&typeof xe.y=="number"&&typeof xe.width=="number"&&typeof xe.height=="number"&&(N=Math.min(N,xe.x),O=Math.min(O,xe.y),W=Math.max(W,xe.x+xe.width),Z=Math.max(Z,xe.y+xe.height))}),N===1/0)return{minX:-500,minY:-500,maxX:500,maxY:500,width:1e3,height:1e3};const oe=200;N-=oe,O-=oe,W+=oe,Z+=oe;const ce=W-N,ve=Z-O,Te=Math.max(ce,ve);if(ce<Te){const xe=(Te-ce)/2;N-=xe,W+=xe}if(ve<Te){const xe=(Te-ve)/2;O-=xe,Z+=xe}return{minX:N,minY:O,maxX:W,maxY:Z,width:W-N,height:Z-O}},[t]),v=250/w.width;E.useEffect(()=>{const N=()=>{const O=window.innerWidth,W=window.innerHeight;p({width:O,height:W}),c(o?Z=>({x:O-44-20,y:Math.max(20,Math.min(W-44-20,Z.y))}):Z=>({x:O-250-20,y:Math.max(20,Math.min(W-250-40-20,Z.y))}))};return window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[o,250]);const _=l.x>=0&&l.y>=0&&l.x+250<=g.width&&l.y+250+40<=g.height,F={x:Math.min(g.width-44-12,l.x+250-44),y:Math.min(g.height-44-12,l.y)},U=o||!_,T=(N,O)=>({x:(N-w.minX)*v,y:(O-w.minY)*v}),D=(N,O)=>({x:N/v+w.minX,y:O/v+w.minY}),L=N=>{N.button===0&&(f(!0),C.current=!1,Q.current={x:N.clientX,y:N.clientY},m({x:N.clientX-l.x,y:N.clientY-l.y}))},R=N=>{if(C.current){N.preventDefault(),N.stopPropagation();return}N.stopPropagation();const O=N.currentTarget.getBoundingClientRect(),W=N.clientX-O.left,Z=N.clientY-O.top,oe=D(W,Z);A(oe.x,oe.y)};Vt.useEffect(()=>{if(!d)return;const N=W=>{const Z=Math.abs(W.clientX-Q.current.x),oe=Math.abs(W.clientY-Q.current.y);(Z>5||oe>5)&&(C.current=!0);const ce=W.clientY-h.y,ve=g.width-250-20,Te=Math.max(20,Math.min(g.height-250-40-20,ce));c({x:ve,y:Te})},O=()=>{setTimeout(()=>{f(!1),C.current=!1},0)};return window.addEventListener("mousemove",N),window.addEventListener("mouseup",O),()=>{window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",O)}},[d,h]);const z=-e.x/e.scale,j=-e.y/e.scale,ae=e.width/e.scale,q=e.height/e.scale,J=T(z,j),Ae={width:ae*v,height:q*v};return u.jsxs(u.Fragment,{children:[U&&u.jsxs("button",{onClick:()=>{a(!1),c(N=>{let O=N.x,W=N.y;return O+250>g.width&&(O=Math.max(12,g.width-250-12)),O<0&&(O=12),W+250+40>g.height&&(W=Math.max(12,g.height-250-40-12)),W<0&&(W=12),{x:O,y:W}})},className:"fixed z-[50] flex items-center justify-center bg-black/40 backdrop-blur-xl border border-white/10 ring-1 ring-white/5 rounded-xl shadow-2xl hover:shadow-lg hover:bg-white/10 text-gray-300 hover:text-white transition-all duration-300 -rotate-90 hover:rotate-0 active:scale-95 group",style:{left:F.x,top:F.y,width:44,height:44},children:[u.jsx("svg",{className:"w-6 h-6 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),u.jsx("span",{className:"absolute right-full mr-4 px-2 py-1 bg-gray-900 border border-gray-700 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Navigation"})]}),!o&&_&&u.jsx("div",{className:"fixed z-[50] transition-opacity duration-300 flex flex-col",style:{left:l.x,top:l.y,width:250},children:u.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-xl border-2 border-white/20 rounded-xl overflow-hidden shadow-2xl flex flex-col",children:[u.jsxs("div",{className:"drag-handle px-3 py-2 bg-white/10 border-b border-white/10 flex items-center justify-between cursor-grab active:cursor-grabbing",onMouseDown:L,children:[u.jsxs("div",{className:"flex items-center gap-2 text-white font-medium text-sm",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),u.jsx("span",{children:"Navigation"})]}),u.jsx("button",{onClick:N=>{N.stopPropagation(),a(!0)},className:"text-gray-400 hover:text-white transition-colors",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})]}),u.jsxs("div",{className:"relative",style:{width:250,height:250},onClick:R,children:[t.filter(N=>typeof N.x=="number"&&typeof N.y=="number"&&typeof N.width=="number"&&typeof N.height=="number").map((N,O)=>{const W=T(N.x,N.y),Z={width:Math.max(2,N.width*v),height:Math.max(2,N.height*v)};return u.jsx("div",{className:`absolute rounded-sm ${N.type==="text"?"bg-blue-400":N.type==="group"?"border-2 border-green-400/60 bg-green-400/10":"bg-gray-400"}`,style:{left:W.x,top:W.y,width:Z.width,height:Z.height,opacity:N.type==="group"?.6:.5,zIndex:N.type==="group"?0:1}},N.id||`item-${O}`)}),u.jsx("div",{className:"absolute border-2 border-dashed border-yellow-400 pointer-events-none",style:{left:J.x,top:J.y,width:Ae.width,height:Ae.height,boxShadow:"0 0 10px rgba(250, 204, 21, 0.5)"}})]})]})})]})},qU=({children:t,selectedItemId:e,getItemPosition:A,onSelectionBox:n,onCanvasClick:r,onCanvasDrop:s,onCanvasMouseDown:i,onCanvasMouseMove:o,onCanvasMouseUp:a,onContextMenu:l,panSettings:c={keys:["Alt"],button:"Middle"},zoomSettings:d={keys:["Alt"],button:"Right"},windowDragSettings:f={keys:[],button:"Right"},zoomWheelModifier:h="None",pressedKeys:m=new Set,activeTool:C="select",brushSize:Q=5,isEraser:g=!1,zoomToFit:p=null,opacity:w=1,onOpacityChange:v,opacityDragSettings:_={keys:["CTRL","ALT"],button:"Right"},items:F=[],onViewportChange:U,navigateTo:T,onNavigated:D,uiSettings:L={canvasBackgroundColor:"#1f1f1f",canvasBackgroundGradientColor:"#192024",dotPatternColor:"#999999"}})=>{const[R,z]=E.useState(1),[j,ae]=E.useState({x:0,y:0}),[q,J]=E.useState(!1),[Ae,N]=E.useState(!1),[O,W]=E.useState(!1),[Z,oe]=E.useState(!1),[ce,ve]=E.useState(0),[Te,xe]=E.useState(0),[Ie,NA]=E.useState(0),[Bt,oA]=E.useState(null),[Mt,Ot]=E.useState({x:0,y:0}),[Bo,ei]=E.useState({x:0,y:0}),le=E.useRef(null),[Gn,sn]=E.useState(!1),[aA,us]=E.useState({x:0,y:0}),[Zt,De]=E.useState({x:0,y:0}),[on,jA]=E.useState({x:0,y:0}),[lA,ds]=E.useState({width:1e3,height:1e3});E.useEffect(()=>{const H=()=>{if(le.current){const ee=le.current.getBoundingClientRect();ds({width:ee.width,height:ee.height})}};return H(),window.addEventListener("resize",H),()=>{window.removeEventListener("resize",H)}},[]),E.useEffect(()=>{if(T){const H=lA.width||window.innerWidth,ee=lA.height||window.innerHeight,ie=H/2-T.x*R,pe=ee/2-T.y*R;isFinite(ie)&&isFinite(pe)&&(ae({x:ie,y:pe}),D&&D())}},[T,R,lA.width,lA.height,D]),E.useEffect(()=>{U&&U({x:j.x,y:j.y,scale:R,width:lA.width,height:lA.height})},[j.x,j.y,R,lA.width,lA.height,U]),E.useEffect(()=>{const H=le.current;if(!H)return;const ee=ie=>{if(h!=="None"){const Le=h.toUpperCase();if(!(m.has(Le)||Le==="CTRL"&&(ie.ctrlKey||ie.metaKey)||Le==="ALT"&&ie.altKey||Le==="SHIFT"&&ie.shiftKey))return}ie.preventDefault();const pe=ie.deltaY*-.001,we=R+pe,Ne=Math.min(Math.max(.1,we),5);let Ee={x:ie.clientX,y:ie.clientY};if(e&&A){const Le=A(e);if(Le){const cA=j.x+(Le.x+Le.width/2)*R,uA=j.y+(Le.y+Le.height/2)*R;Ee={x:cA,y:uA}}}const Be=Ne/R,_e=Ee.x-(Ee.x-j.x)*Be,Ze=Ee.y-(Ee.y-j.y)*Be;z(Ne),ae({x:_e,y:Ze})};return H.addEventListener("wheel",ee,{passive:!1}),()=>{H.removeEventListener("wheel",ee)}},[R,j,e,A,h,m]),E.useEffect(()=>{if(!p||!A||!le.current)return;const{itemId:H,padding:ee=40}=p,ie=A(H);if(ie){const pe=le.current,we=pe.clientWidth,Ne=pe.clientHeight,Ee=(we-ee*2)/ie.width,Be=(Ne-ee*2)/ie.height,_e=Math.min(Math.max(.1,Math.min(Ee,Be)),5),Ze=ie.x+ie.width/2,Le=ie.y+ie.height/2,cA=we/2-Ze*_e,uA=Ne/2-Le*_e;z(_e),ae({x:cA,y:uA})}},[p,A]);const ti=H=>{var wr,Wn;const ee=H.target,ie=ee===H.currentTarget||ee.classList.contains("canvas-content")||ee.tagName.toLowerCase()==="svg";jA({x:H.clientX,y:H.clientY});let pe=!1;(c.button==="Left"&&H.button===0||c.button==="Middle"&&H.button===1||c.button==="Right"&&H.button===2)&&(pe=!0);let we=!1;if(c.keys.length===0||c.keys[0]==="None"?we=!0:we=c.keys.every(yt=>{const Oe=yt.toUpperCase();return m.has(Oe)||Oe==="ALT"&&H.altKey||Oe==="CTRL"&&(H.ctrlKey||H.metaKey)||Oe==="SHIFT"&&H.shiftKey}),pe&&we){H.preventDefault(),H.stopPropagation(),J(!0),Ot({x:H.clientX,y:H.clientY});return}let Ne=!1;(_.button==="Left"&&H.button===0||_.button==="Middle"&&H.button===1||_.button==="Right"&&H.button===2)&&(Ne=!0);let Ee=!1;if(_.keys.length===0||_.keys[0]==="None"?Ee=!H.altKey&&!H.ctrlKey&&!H.shiftKey&&!H.metaKey:Ee=_.keys.every(yt=>{const Oe=yt.toUpperCase();return m.has(Oe)||Oe==="ALT"&&H.altKey||Oe==="CTRL"&&(H.ctrlKey||H.metaKey)||Oe==="SHIFT"&&H.shiftKey}),Ne&&Ee&&v){H.preventDefault(),oe(!0),Ot({x:H.clientX,y:H.clientY});return}let Be=!1;(d.button==="Left"&&H.button===0||d.button==="Middle"&&H.button===1||d.button==="Right"&&H.button===2)&&(Be=!0);let _e=!1;d.keys.length===0||d.keys[0]==="None"?_e=!0:_e=d.keys.every(yt=>{const Oe=yt.toUpperCase();return m.has(Oe)||Oe==="ALT"&&H.altKey||Oe==="CTRL"&&(H.ctrlKey||H.metaKey)||Oe==="SHIFT"&&H.shiftKey});let Ze=!1;(f.button==="Left"&&H.button===0||f.button==="Middle"&&H.button===1||f.button==="Right"&&H.button===2)&&(Ze=!0);let Le=!1;if(f.keys.length===0||f.keys[0]==="None"?Le=!H.altKey&&!H.ctrlKey&&!H.shiftKey&&!H.metaKey:Le=f.keys.every(yt=>{const Oe=yt.toUpperCase();return m.has(Oe)||Oe==="ALT"&&H.altKey||Oe==="CTRL"&&(H.ctrlKey||H.metaKey)||Oe==="SHIFT"&&H.shiftKey}),Be&&_e){H.preventDefault(),N(!0),ei({x:H.clientX,y:H.clientY}),Ot({x:H.clientX,y:H.clientY});return}if(Ze){oA({x:H.screenX,y:H.screenY}),Ot({x:H.screenX,y:H.screenY}),Le&&H.preventDefault();return}if(pe&&we){H.preventDefault(),J(!0),Ot({x:H.clientX,y:H.clientY});return}if(i&&!q&&!Ae&&!O){const yt=(wr=le.current)==null?void 0:wr.getBoundingClientRect();if(yt){const Oe=(H.clientX-yt.left-j.x)/R,hs=(H.clientY-yt.top-j.y)/R,ps=Object.assign(H,{canvasX:Oe,canvasY:hs});if(i(ps),C==="pen"||C==="eraser")return}}const cA=H.target,uA=cA.closest("[data-item-id]")||cA.closest(".group");if(H.button===0&&!q&&!Ae&&!O&&C!=="pen"&&C!=="eraser"&&ie&&!uA){sn(!0);const yt=(Wn=le.current)==null?void 0:Wn.getBoundingClientRect();if(yt){const Oe=(H.clientX-yt.left-j.x)/R,hs=(H.clientY-yt.top-j.y)/R;us({x:Oe,y:hs}),De({x:Oe,y:hs})}}},an=H=>{var ee,ie,pe,we,Ne;if(Gn){const Ee=(ee=le.current)==null?void 0:ee.getBoundingClientRect();if(Ee){const Be=(H.clientX-Ee.left-j.x)/R,_e=(H.clientY-Ee.top-j.y)/R;De({x:Be,y:_e})}}else if(q){const Ee=H.clientX-Mt.x,Be=H.clientY-Mt.y;ae(_e=>({x:_e.x+Ee,y:_e.y+Be})),Ot({x:H.clientX,y:H.clientY})}else if(Ae){const _e=(H.clientX-Mt.x)*.005,Ze=Math.min(Math.max(.1,R+_e),30),Le=Bo,cA=Ze/R,uA=(ie=le.current)==null?void 0:ie.getBoundingClientRect();if(uA){const wr=Le.x-uA.left,Wn=Le.y-uA.top,yt=wr-(wr-j.x)*cA,Oe=Wn-(Wn-j.y)*cA;ae({x:yt,y:Oe})}z(Ze),Ot({x:H.clientX,y:H.clientY})}else if(Bt){const Ee=H.screenX-Bt.x,Be=H.screenY-Bt.y;Math.sqrt(Ee*Ee+Be*Be)>5&&!O&&(W(!0),(pe=window.electronAPI)!=null&&pe.startWindowMove&&window.electronAPI.startWindowMove(Bt.x,Bt.y)),O&&(we=window.electronAPI)!=null&&we.moveWindow&&window.electronAPI.moveWindow(H.screenX,H.screenY),Ot({x:H.screenX,y:H.screenY})}else if(Z&&v){const Be=(H.clientX-Mt.x)*.005,_e=Math.max(.1,Math.min(1,w+Be));v(_e),Ot({x:H.clientX,y:H.clientY})}else if(o&&!q&&!Ae&&!O&&!Z){const Ee=(Ne=le.current)==null?void 0:Ne.getBoundingClientRect();if(Ee){const Be=(H.clientX-Ee.left-j.x)/R,_e=(H.clientY-Ee.top-j.y)/R,Ze=Object.assign(H,{canvasX:Be,canvasY:_e});o(Ze)}}(C==="pen"||C==="eraser")&&jA({x:H.clientX,y:H.clientY})},mr=H=>{var pe,we,Ne,Ee;const ee=Gn,ie=Math.sqrt(Math.pow(Zt.x-aA.x,2)+Math.pow(Zt.y-aA.y,2));if(a){const Be=(pe=le.current)==null?void 0:pe.getBoundingClientRect();if(Be){const _e=(H.clientX-Be.left-j.x)/R,Ze=(H.clientY-Be.top-j.y)/R,Le=Object.assign(H,{canvasX:_e,canvasY:Ze});a(Le)}}if(ee&&n){const Be={x:Math.min(aA.x,Zt.x),y:Math.min(aA.y,Zt.y),width:Math.abs(Zt.x-aA.x),height:Math.abs(Zt.y-aA.y)};if(Be.width<5&&Be.height<5){if(r){const _e=(we=le.current)==null?void 0:we.getBoundingClientRect();if(_e){const Ze=(H.clientX-_e.left-j.x)/R,Le=(H.clientY-_e.top-j.y)/R,cA=Object.assign(H,{canvasX:Ze,canvasY:Le});r(cA)}else r(H)}}else n(Be)}else if(!ee&&!q&&!Ae&&!O&&ie<5&&r){const Be=(Ne=le.current)==null?void 0:Ne.getBoundingClientRect();if(Be){const _e=(H.clientX-Be.left-j.x)/R,Ze=(H.clientY-Be.top-j.y)/R,Le=Object.assign(H,{canvasX:_e,canvasY:Ze});r(Le)}else r(H)}if(sn(!1),J(!1),Ae&&xe(Date.now()),Z&&NA(Date.now()),N(!1),oe(!1),Bt){const Be=H.screenX-Bt.x,_e=H.screenY-Bt.y,Ze=Math.sqrt(Be*Be+_e*_e);(O||Ze>5)&&(O&&((Ee=window.electronAPI)!=null&&Ee.endWindowMove)&&window.electronAPI.endWindowMove(),ve(Date.now()))}W(!1),oA(null)},Kt=H=>{var Ee;if(O||Ae||Z){H.preventDefault(),H.stopPropagation();return}const ee=Date.now()-Te,ie=Date.now()-Ie;if(ee<300&&Te>0||ie<300&&Ie>0){H.preventDefault(),H.stopPropagation();return}if(Date.now()-ce<200&&ce>0){H.preventDefault();return}const we=H.target;if(we.closest("[data-item-id]")||we.closest(".group")||we.closest("img")||we.closest("video")||we.closest('[class*="MediaItem"]')||we.closest('[class*="TextItem"]'))return;if(Bt){const Be=H.screenX-Bt.x,_e=H.screenY-Bt.y;if(!(Math.sqrt(Be*Be+_e*_e)<5)){H.preventDefault();return}}if(H.preventDefault(),(we===H.currentTarget||we.classList.contains("canvas-content")||we.tagName.toLowerCase()==="svg")&&l){const Be=(Ee=le.current)==null?void 0:Ee.getBoundingClientRect();if(Be){const _e=(H.clientX-Be.left-j.x)/R,Ze=(H.clientY-Be.top-j.y)/R,Le=Object.assign(H,{canvasX:_e,canvasY:Ze});l(Le)}else l(H)}},fs=H=>{var ee;if(s){const ie=(ee=le.current)==null?void 0:ee.getBoundingClientRect();if(ie){const pe=(H.clientX-ie.left-j.x)/R,we=(H.clientY-ie.top-j.y)/R,Ne=Object.assign(H,{canvasX:pe,canvasY:we});s(Ne)}else s(H)}},G=H=>{H.preventDefault(),H.stopPropagation()},fe={left:Math.min(aA.x,Zt.x)*R+j.x,top:Math.min(aA.y,Zt.y)*R+j.y,width:Math.abs(Zt.x-aA.x)*R,height:Math.abs(Zt.y-aA.y)*R},Ce=Q*R,Me=E.useCallback((H,ee)=>{if(!le.current)return;const{width:ie,height:pe}=le.current.getBoundingClientRect(),we=ie/2-H*R,Ne=pe/2-ee*R;ae({x:we,y:Ne})},[R]);return u.jsxs("div",{ref:le,className:`canvas-container w-full h-full overflow-hidden bg-[#1e1e1e] relative touch-none select-none ${q?"cursor-grabbing":O?"cursor-move":Z?"cursor-ns-resize":m.has("ALT")||m.has(" ")?"cursor-grab":"cursor-default"}`,onMouseDown:ti,onMouseMove:an,onMouseUp:mr,onMouseLeave:mr,onPointerMove:H=>{var ee;if((C==="pen"||C==="eraser")&&H.buttons&1&&o){const ie=(ee=le.current)==null?void 0:ee.getBoundingClientRect();if(ie){const pe=(H.clientX-ie.left-j.x)/R,we=(H.clientY-ie.top-j.y)/R,Ne=H.pressure||.5,Ee=Object.assign(H,{canvasX:pe,canvasY:we,pressure:Ne});o(Ee)}}},onPointerUp:H=>{var ee;if((C==="pen"||C==="eraser")&&a){const ie=(ee=le.current)==null?void 0:ee.getBoundingClientRect();if(ie){const pe=(H.clientX-ie.left-j.x)/R,we=(H.clientY-ie.top-j.y)/R,Ne=H.pressure||.5,Ee=Object.assign(H,{canvasX:pe,canvasY:we,pressure:Ne});a(Ee)}}},onContextMenuCapture:Kt,onDrop:fs,onDragOver:G,children:[u.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(circle at center, #242424ff 0%, #131314ff 100%)",zIndex:0}}),(C==="pen"||C==="eraser")&&u.jsx("div",{className:"absolute pointer-events-none z-[10001]",style:{left:`${on.x}px`,top:`${on.y}px`,width:`${Ce}px`,height:`${Ce}px`,borderRadius:"50%",border:`2px solid ${g?"#ef4444":"#ffffff"}`,backgroundColor:g?"rgba(239, 68, 68, 0.2)":"rgba(255, 255, 255, 0.1)",transform:"translate(-50%, -50%)",transition:"none"}}),u.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{zIndex:0,backgroundImage:`radial-gradient(${L.dotPatternColor} 1px, transparent 2px)`,backgroundSize:"80px 80px",backgroundPosition:`${j.x}px ${j.y}px`,transform:`scale(${R})`,transformOrigin:"0 0",opacity:.7}}),u.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{zIndex:0,background:`radial-gradient(circle at center, ${L.canvasBackgroundColor} 0%, ${L.canvasBackgroundGradientColor||"#192024"} 100%)`,opacity:1}}),u.jsxs("div",{className:"absolute origin-top-left canvas-content",style:{transform:`translate(${j.x}px, ${j.y}px) scale(${R})`,transformOrigin:"0 0",width:"100%",height:"100%"},children:[u.jsx("div",{className:"absolute inset-[-1000%] opacity-70 pointer-events-none",style:{backgroundImage:"radial-gradient(#999 1px, transparent 2px)",backgroundSize:"80px 80px"}}),u.jsx(ox.Provider,{value:{scale:R,position:j,isSelecting:Gn},children:t})]}),Gn&&u.jsx("div",{className:"absolute border-2 border-blue-400 bg-blue-400/10 pointer-events-none z-[10000]",style:fe}),u.jsxs("div",{className:"absolute bottom-4 left-4 bg-black/50 text-white px-3 py-1 rounded backdrop-blur-sm text-xs pointer-events-none z-[50]",children:["Zoom: ",Math.round(R*100),"% | Pan: ",c.keys.join("+"),"+",c.button," | Zoom: ",d.keys.join("+"),"+",d.button]}),u.jsx(ZU,{items:F,viewport:{x:j.x,y:j.y,scale:R,width:lA.width,height:lA.height},onNavigate:Me})]})};var od={exports:{}},ax={},lx={exports:{}},e1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",t1=e1,A1=t1;function cx(){}function ux(){}ux.resetWarningCache=cx;var n1=function(){function t(n,r,s,i,o,a){if(a!==A1){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var A={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ux,resetWarningCache:cx};return A.PropTypes=A,A};lx.exports=n1();var dx=lx.exports;function fx(t){var e,A,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(A=fx(t[e]))&&(n&&(n+=" "),n+=A);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function UB(){for(var t,e,A=0,n="";A<arguments.length;)(t=arguments[A++])&&(e=fx(t))&&(n&&(n+=" "),n+=e);return n}const r1=Object.freeze(Object.defineProperty({__proto__:null,clsx:UB,default:UB},Symbol.toStringTag,{value:"Module"})),s1=CI(r1);var pt={},Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.dontSetMe=c1;Pn.findInArray=i1;Pn.int=l1;Pn.isFunction=o1;Pn.isNum=a1;function i1(t,e){for(let A=0,n=t.length;A<n;A++)if(e.apply(e,[t[A],A,t]))return t[A]}function o1(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function a1(t){return typeof t=="number"&&!isNaN(t)}function l1(t){return parseInt(t,10)}function c1(t,e,A){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(A," - do not set this, set it on the child."))}var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.browserPrefixToKey=px;Ys.browserPrefixToStyle=u1;Ys.default=void 0;Ys.getPrefix=hx;const pf=["Moz","Webkit","O","ms"];function hx(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const A=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!A||e in A)return"";for(let n=0;n<pf.length;n++)if(px(e,pf[n])in A)return pf[n];return""}function px(t,e){return e?"".concat(e).concat(d1(t)):t}function u1(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function d1(t){let e="",A=!0;for(let n=0;n<t.length;n++)A?(e+=t[n].toUpperCase(),A=!1):t[n]==="-"?A=!0:e+=t[n];return e}Ys.default=hx();Object.defineProperty(pt,"__esModule",{value:!0});pt.addClassName=wx;pt.addEvent=p1;pt.addUserSelectStyles=F1;pt.createCSSTransform=C1;pt.createSVGTransform=x1;pt.getTouch=E1;pt.getTouchIdentifier=_1;pt.getTranslation=Kg;pt.innerHeight=B1;pt.innerWidth=y1;pt.matchesSelector=mx;pt.matchesSelectorAndParentsTo=h1;pt.offsetXYFromParent=v1;pt.outerHeight=m1;pt.outerWidth=w1;pt.removeClassName=Bx;pt.removeEvent=g1;pt.removeUserSelectStyles=I1;var PA=Pn,bB=f1(Ys);function gx(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,A=new WeakMap;return(gx=function(n){return n?A:e})(t)}function f1(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var A=gx(e);if(A&&A.has(t))return A.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var i=r?Object.getOwnPropertyDescriptor(t,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=t[s]}return n.default=t,A&&A.set(t,n),n}let Pl="";function mx(t,e){return Pl||(Pl=(0,PA.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(A){return(0,PA.isFunction)(t[A])})),(0,PA.isFunction)(t[Pl])?t[Pl](e):!1}function h1(t,e,A){let n=t;do{if(mx(n,e))return!0;if(n===A)return!1;n=n.parentNode}while(n);return!1}function p1(t,e,A,n){if(!t)return;const r={capture:!0,...n};t.addEventListener?t.addEventListener(e,A,r):t.attachEvent?t.attachEvent("on"+e,A):t["on"+e]=A}function g1(t,e,A,n){if(!t)return;const r={capture:!0,...n};t.removeEventListener?t.removeEventListener(e,A,r):t.detachEvent?t.detachEvent("on"+e,A):t["on"+e]=null}function m1(t){let e=t.clientHeight;const A=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,PA.int)(A.borderTopWidth),e+=(0,PA.int)(A.borderBottomWidth),e}function w1(t){let e=t.clientWidth;const A=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,PA.int)(A.borderLeftWidth),e+=(0,PA.int)(A.borderRightWidth),e}function B1(t){let e=t.clientHeight;const A=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,PA.int)(A.paddingTop),e-=(0,PA.int)(A.paddingBottom),e}function y1(t){let e=t.clientWidth;const A=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,PA.int)(A.paddingLeft),e-=(0,PA.int)(A.paddingRight),e}function v1(t,e,A){const r=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),s=(t.clientX+e.scrollLeft-r.left)/A,i=(t.clientY+e.scrollTop-r.top)/A;return{x:s,y:i}}function C1(t,e){const A=Kg(t,e,"px");return{[(0,bB.browserPrefixToKey)("transform",bB.default)]:A}}function x1(t,e){return Kg(t,e,"")}function Kg(t,e,A){let{x:n,y:r}=t,s="translate(".concat(n).concat(A,",").concat(r).concat(A,")");if(e){const i="".concat(typeof e.x=="string"?e.x:e.x+A),o="".concat(typeof e.y=="string"?e.y:e.y+A);s="translate(".concat(i,", ").concat(o,")")+s}return s}function E1(t,e){return t.targetTouches&&(0,PA.findInArray)(t.targetTouches,A=>e===A.identifier)||t.changedTouches&&(0,PA.findInArray)(t.changedTouches,A=>e===A.identifier)}function _1(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function F1(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&wx(t.body,"react-draggable-transparent-selection")}function I1(t){if(t)try{if(t.body&&Bx(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function wx(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function Bx(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.canDragX=b1;Mn.canDragY=S1;Mn.createCoreData=N1;Mn.createDraggableData=k1;Mn.getBoundPosition=Q1;Mn.getControlPosition=T1;Mn.snapToGrid=U1;var kA=Pn,Qi=pt;function Q1(t,e,A){if(!t.props.bounds)return[e,A];let{bounds:n}=t.props;n=typeof n=="string"?n:D1(n);const r=jg(t);if(typeof n=="string"){const{ownerDocument:s}=r,i=s.defaultView;let o;if(n==="parent"?o=r.parentNode:o=s.querySelector(n),!(o instanceof i.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const a=o,l=i.getComputedStyle(r),c=i.getComputedStyle(a);n={left:-r.offsetLeft+(0,kA.int)(c.paddingLeft)+(0,kA.int)(l.marginLeft),top:-r.offsetTop+(0,kA.int)(c.paddingTop)+(0,kA.int)(l.marginTop),right:(0,Qi.innerWidth)(a)-(0,Qi.outerWidth)(r)-r.offsetLeft+(0,kA.int)(c.paddingRight)-(0,kA.int)(l.marginRight),bottom:(0,Qi.innerHeight)(a)-(0,Qi.outerHeight)(r)-r.offsetTop+(0,kA.int)(c.paddingBottom)-(0,kA.int)(l.marginBottom)}}return(0,kA.isNum)(n.right)&&(e=Math.min(e,n.right)),(0,kA.isNum)(n.bottom)&&(A=Math.min(A,n.bottom)),(0,kA.isNum)(n.left)&&(e=Math.max(e,n.left)),(0,kA.isNum)(n.top)&&(A=Math.max(A,n.top)),[e,A]}function U1(t,e,A){const n=Math.round(e/t[0])*t[0],r=Math.round(A/t[1])*t[1];return[n,r]}function b1(t){return t.props.axis==="both"||t.props.axis==="x"}function S1(t){return t.props.axis==="both"||t.props.axis==="y"}function T1(t,e,A){const n=typeof e=="number"?(0,Qi.getTouch)(t,e):null;if(typeof e=="number"&&!n)return null;const r=jg(A),s=A.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,Qi.offsetXYFromParent)(n||t,s,A.props.scale)}function N1(t,e,A){const n=!(0,kA.isNum)(t.lastX),r=jg(t);return n?{node:r,deltaX:0,deltaY:0,lastX:e,lastY:A,x:e,y:A}:{node:r,deltaX:e-t.lastX,deltaY:A-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:A}}function k1(t,e){const A=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/A,y:t.state.y+e.deltaY/A,deltaX:e.deltaX/A,deltaY:e.deltaY/A,lastX:t.state.x,lastY:t.state.y}}function D1(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function jg(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var ad={},ld={};Object.defineProperty(ld,"__esModule",{value:!0});ld.default=H1;function H1(){}Object.defineProperty(ad,"__esModule",{value:!0});ad.default=void 0;var gf=R1(E),vA=Gg(dx),L1=Gg(as),AA=pt,yr=Mn,mf=Pn,ko=Gg(ld);function Gg(t){return t&&t.__esModule?t:{default:t}}function yx(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,A=new WeakMap;return(yx=function(n){return n?A:e})(t)}function R1(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var A=yx(e);if(A&&A.has(t))return A.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var i=r?Object.getOwnPropertyDescriptor(t,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=t[s]}return n.default=t,A&&A.set(t,n),n}function dA(t,e,A){return e=P1(e),e in t?Object.defineProperty(t,e,{value:A,enumerable:!0,configurable:!0,writable:!0}):t[e]=A,t}function P1(t){var e=M1(t,"string");return typeof e=="symbol"?e:String(e)}function M1(t,e){if(typeof t!="object"||t===null)return t;var A=t[Symbol.toPrimitive];if(A!==void 0){var n=A.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const cn={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let vr=cn.mouse,cd=class extends gf.Component{constructor(){super(...arguments),dA(this,"dragging",!1),dA(this,"lastX",NaN),dA(this,"lastY",NaN),dA(this,"touchIdentifier",null),dA(this,"mounted",!1),dA(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const A=this.findDOMNode();if(!A||!A.ownerDocument||!A.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=A;if(this.props.disabled||!(e.target instanceof n.defaultView.Node)||this.props.handle&&!(0,AA.matchesSelectorAndParentsTo)(e.target,this.props.handle,A)||this.props.cancel&&(0,AA.matchesSelectorAndParentsTo)(e.target,this.props.cancel,A))return;e.type==="touchstart"&&e.preventDefault();const r=(0,AA.getTouchIdentifier)(e);this.touchIdentifier=r;const s=(0,yr.getControlPosition)(e,r,this);if(s==null)return;const{x:i,y:o}=s,a=(0,yr.createCoreData)(this,i,o);(0,ko.default)("DraggableCore: handleDragStart: %j",a),(0,ko.default)("calling",this.props.onStart),!(this.props.onStart(e,a)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,AA.addUserSelectStyles)(n),this.dragging=!0,this.lastX=i,this.lastY=o,(0,AA.addEvent)(n,vr.move,this.handleDrag),(0,AA.addEvent)(n,vr.stop,this.handleDragStop))}),dA(this,"handleDrag",e=>{const A=(0,yr.getControlPosition)(e,this.touchIdentifier,this);if(A==null)return;let{x:n,y:r}=A;if(Array.isArray(this.props.grid)){let o=n-this.lastX,a=r-this.lastY;if([o,a]=(0,yr.snapToGrid)(this.props.grid,o,a),!o&&!a)return;n=this.lastX+o,r=this.lastY+a}const s=(0,yr.createCoreData)(this,n,r);if((0,ko.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(e,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const a=document.createEvent("MouseEvents");a.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(a)}return}this.lastX=n,this.lastY=r}),dA(this,"handleDragStop",e=>{if(!this.dragging)return;const A=(0,yr.getControlPosition)(e,this.touchIdentifier,this);if(A==null)return;let{x:n,y:r}=A;if(Array.isArray(this.props.grid)){let a=n-this.lastX||0,l=r-this.lastY||0;[a,l]=(0,yr.snapToGrid)(this.props.grid,a,l),n=this.lastX+a,r=this.lastY+l}const s=(0,yr.createCoreData)(this,n,r);if(this.props.onStop(e,s)===!1||this.mounted===!1)return!1;const o=this.findDOMNode();o&&this.props.enableUserSelectHack&&(0,AA.removeUserSelectStyles)(o.ownerDocument),(0,ko.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,o&&((0,ko.default)("DraggableCore: Removing handlers"),(0,AA.removeEvent)(o.ownerDocument,vr.move,this.handleDrag),(0,AA.removeEvent)(o.ownerDocument,vr.stop,this.handleDragStop))}),dA(this,"onMouseDown",e=>(vr=cn.mouse,this.handleDragStart(e))),dA(this,"onMouseUp",e=>(vr=cn.mouse,this.handleDragStop(e))),dA(this,"onTouchStart",e=>(vr=cn.touch,this.handleDragStart(e))),dA(this,"onTouchEnd",e=>(vr=cn.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,AA.addEvent)(e,cn.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:A}=e;(0,AA.removeEvent)(A,cn.mouse.move,this.handleDrag),(0,AA.removeEvent)(A,cn.touch.move,this.handleDrag),(0,AA.removeEvent)(A,cn.mouse.stop,this.handleDragStop),(0,AA.removeEvent)(A,cn.touch.stop,this.handleDragStop),(0,AA.removeEvent)(e,cn.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,AA.removeUserSelectStyles)(A)}}findDOMNode(){var e,A;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(A=this.props)===null||A===void 0||(A=A.nodeRef)===null||A===void 0?void 0:A.current:L1.default.findDOMNode(this)}render(){return gf.cloneElement(gf.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};ad.default=cd;dA(cd,"displayName","DraggableCore");dA(cd,"propTypes",{allowAnyClick:vA.default.bool,children:vA.default.node.isRequired,disabled:vA.default.bool,enableUserSelectHack:vA.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:vA.default.arrayOf(vA.default.number),handle:vA.default.string,cancel:vA.default.string,nodeRef:vA.default.object,onStart:vA.default.func,onDrag:vA.default.func,onStop:vA.default.func,onMouseDown:vA.default.func,scale:vA.default.number,className:mf.dontSetMe,style:mf.dontSetMe,transform:mf.dontSetMe});dA(cd,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return a.default}}),t.default=void 0;var e=f(E),A=c(dx),n=c(as),r=c(s1),s=pt,i=Mn,o=Pn,a=c(ad),l=c(ld);function c(p){return p&&p.__esModule?p:{default:p}}function d(p){if(typeof WeakMap!="function")return null;var w=new WeakMap,v=new WeakMap;return(d=function(_){return _?v:w})(p)}function f(p,w){if(p&&p.__esModule)return p;if(p===null||typeof p!="object"&&typeof p!="function")return{default:p};var v=d(w);if(v&&v.has(p))return v.get(p);var _={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var U in p)if(U!=="default"&&Object.prototype.hasOwnProperty.call(p,U)){var T=F?Object.getOwnPropertyDescriptor(p,U):null;T&&(T.get||T.set)?Object.defineProperty(_,U,T):_[U]=p[U]}return _.default=p,v&&v.set(p,_),_}function h(){return h=Object.assign?Object.assign.bind():function(p){for(var w=1;w<arguments.length;w++){var v=arguments[w];for(var _ in v)Object.prototype.hasOwnProperty.call(v,_)&&(p[_]=v[_])}return p},h.apply(this,arguments)}function m(p,w,v){return w=C(w),w in p?Object.defineProperty(p,w,{value:v,enumerable:!0,configurable:!0,writable:!0}):p[w]=v,p}function C(p){var w=Q(p,"string");return typeof w=="symbol"?w:String(w)}function Q(p,w){if(typeof p!="object"||p===null)return p;var v=p[Symbol.toPrimitive];if(v!==void 0){var _=v.call(p,w);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(p)}class g extends e.Component{static getDerivedStateFromProps(w,v){let{position:_}=w,{prevPropsPosition:F}=v;return _&&(!F||_.x!==F.x||_.y!==F.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:F}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(w){super(w),m(this,"onDragStart",(v,_)=>{if((0,l.default)("Draggable: onDragStart: %j",_),this.props.onStart(v,(0,i.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),m(this,"onDrag",(v,_)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",_);const F=(0,i.createDraggableData)(this,_),U={x:F.x,y:F.y,slackX:0,slackY:0};if(this.props.bounds){const{x:D,y:L}=U;U.x+=this.state.slackX,U.y+=this.state.slackY;const[R,z]=(0,i.getBoundPosition)(this,U.x,U.y);U.x=R,U.y=z,U.slackX=this.state.slackX+(D-U.x),U.slackY=this.state.slackY+(L-U.y),F.x=U.x,F.y=U.y,F.deltaX=U.x-this.state.x,F.deltaY=U.y-this.state.y}if(this.props.onDrag(v,F)===!1)return!1;this.setState(U)}),m(this,"onDragStop",(v,_)=>{if(!this.state.dragging||this.props.onStop(v,(0,i.createDraggableData)(this,_))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",_);const U={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:D,y:L}=this.props.position;U.x=D,U.y=L}this.setState(U)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var w,v;return(w=(v=this.props)===null||v===void 0||(v=v.nodeRef)===null||v===void 0?void 0:v.current)!==null&&w!==void 0?w:n.default.findDOMNode(this)}render(){const{axis:w,bounds:v,children:_,defaultPosition:F,defaultClassName:U,defaultClassNameDragging:T,defaultClassNameDragged:D,position:L,positionOffset:R,scale:z,...j}=this.props;let ae={},q=null;const Ae=!!!L||this.state.dragging,N=L||F,O={x:(0,i.canDragX)(this)&&Ae?this.state.x:N.x,y:(0,i.canDragY)(this)&&Ae?this.state.y:N.y};this.state.isElementSVG?q=(0,s.createSVGTransform)(O,R):ae=(0,s.createCSSTransform)(O,R);const W=(0,r.default)(_.props.className||"",U,{[T]:this.state.dragging,[D]:this.state.dragged});return e.createElement(a.default,h({},j,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(_),{className:W,style:{..._.props.style,...ae},transform:q}))}}t.default=g,m(g,"displayName","Draggable"),m(g,"propTypes",{...a.default.propTypes,axis:A.default.oneOf(["both","x","y","none"]),bounds:A.default.oneOfType([A.default.shape({left:A.default.number,right:A.default.number,top:A.default.number,bottom:A.default.number}),A.default.string,A.default.oneOf([!1])]),defaultClassName:A.default.string,defaultClassNameDragging:A.default.string,defaultClassNameDragged:A.default.string,defaultPosition:A.default.shape({x:A.default.number,y:A.default.number}),positionOffset:A.default.shape({x:A.default.oneOfType([A.default.number,A.default.string]),y:A.default.oneOfType([A.default.number,A.default.string])}),position:A.default.shape({x:A.default.number,y:A.default.number}),className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),m(g,"defaultProps",{...a.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(ax);const{default:vx,DraggableCore:O1}=ax;od.exports=vx;od.exports.default=vx;od.exports.DraggableCore=O1;var K1=od.exports;const j1=$y(K1);var Et=function(){return Et=Object.assign||function(t){for(var e,A=1,n=arguments.length;A<n;A++){e=arguments[A];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Et.apply(this,arguments)},SB={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},TB={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Ml={width:"20px",height:"20px",position:"absolute",zIndex:1},G1={top:Et(Et({},SB),{top:"-5px"}),right:Et(Et({},TB),{left:void 0,right:"-5px"}),bottom:Et(Et({},SB),{top:void 0,bottom:"-5px"}),left:Et(Et({},TB),{left:"-5px"}),topRight:Et(Et({},Ml),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Et(Et({},Ml),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Et(Et({},Ml),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Et(Et({},Ml),{left:"-10px",top:"-10px",cursor:"nw-resize"})},W1=E.memo(function(t){var e=t.onResizeStart,A=t.direction,n=t.children,r=t.replaceStyles,s=t.className,i=E.useCallback(function(l){e(l,A)},[e,A]),o=E.useCallback(function(l){e(l,A)},[e,A]),a=E.useMemo(function(){return Et(Et({position:"absolute",userSelect:"none"},G1[A]),r??{})},[r,A]);return u.jsx("div",{className:s||void 0,style:a,onMouseDown:i,onTouchStart:o,children:n})}),z1=function(){var t=function(e,A){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},t(e,A)};return function(e,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");t(e,A);function n(){this.constructor=e}e.prototype=A===null?Object.create(A):(n.prototype=A.prototype,new n)}}(),Sn=function(){return Sn=Object.assign||function(t){for(var e,A=1,n=arguments.length;A<n;A++){e=arguments[A];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Sn.apply(this,arguments)},V1={width:"auto",height:"auto"},Ol=function(t,e,A){return Math.max(Math.min(t,A),e)},NB=function(t,e,A){var n=Math.round(t/e);return n*e+A*(n-1)},ii=function(t,e){return new RegExp(t,"i").test(e)},Kl=function(t){return!!(t.touches&&t.touches.length)},$1=function(t){return!!((t.clientX||t.clientX===0)&&(t.clientY||t.clientY===0))},kB=function(t,e,A){A===void 0&&(A=0);var n=e.reduce(function(s,i,o){return Math.abs(i-t)<Math.abs(e[s]-t)?o:s},0),r=Math.abs(e[n]-t);return A===0||r<A?e[n]:t},wf=function(t){return t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:"".concat(t,"px")},jl=function(t,e,A,n){if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var r=Number(t.replace("%",""))/100;return e*r}if(t.endsWith("vw")){var r=Number(t.replace("vw",""))/100;return A*r}if(t.endsWith("vh")){var r=Number(t.replace("vh",""))/100;return n*r}}return t},X1=function(t,e,A,n,r,s,i){return n=jl(n,t.width,e,A),r=jl(r,t.height,e,A),s=jl(s,t.width,e,A),i=jl(i,t.height,e,A),{maxWidth:typeof n>"u"?void 0:Number(n),maxHeight:typeof r>"u"?void 0:Number(r),minWidth:typeof s>"u"?void 0:Number(s),minHeight:typeof i>"u"?void 0:Number(i)}},Y1=function(t){return Array.isArray(t)?t:[t,t]},J1=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],DB="__resizable_base__",Z1=function(t){z1(e,t);function e(A){var n,r,s,i,o=t.call(this,A)||this;return o.ratio=1,o.resizable=null,o.parentLeft=0,o.parentTop=0,o.resizableLeft=0,o.resizableRight=0,o.resizableTop=0,o.resizableBottom=0,o.targetLeft=0,o.targetTop=0,o.delta={width:0,height:0},o.appendBase=function(){if(!o.resizable||!o.window)return null;var a=o.parentNode;if(!a)return null;var l=o.window.document.createElement("div");return l.style.width="100%",l.style.height="100%",l.style.position="absolute",l.style.transform="scale(0, 0)",l.style.left="0",l.style.flex="0 0 100%",l.classList?l.classList.add(DB):l.className+=DB,a.appendChild(l),l},o.removeBase=function(a){var l=o.parentNode;l&&l.removeChild(a)},o.state={isResizing:!1,width:(r=(n=o.propsSize)===null||n===void 0?void 0:n.width)!==null&&r!==void 0?r:"auto",height:(i=(s=o.propsSize)===null||s===void 0?void 0:s.height)!==null&&i!==void 0?i:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},o.onResizeStart=o.onResizeStart.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||V1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var A=0,n=0;if(this.resizable&&this.window){var r=this.resizable.offsetWidth,s=this.resizable.offsetHeight,i=this.resizable.style.position;i!=="relative"&&(this.resizable.style.position="relative"),A=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:r,n=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:s,this.resizable.style.position=i}return{width:A,height:n}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var A=this,n=this.props.size,r=function(o){var a;if(typeof A.state[o]>"u"||A.state[o]==="auto")return"auto";if(A.propsSize&&A.propsSize[o]&&(!((a=A.propsSize[o])===null||a===void 0)&&a.toString().endsWith("%"))){if(A.state[o].toString().endsWith("%"))return A.state[o].toString();var l=A.getParentSize(),c=Number(A.state[o].toString().replace("px","")),d=c/l[o]*100;return"".concat(d,"%")}return wf(A.state[o])},s=n&&typeof n.width<"u"&&!this.state.isResizing?wf(n.width):r("width"),i=n&&typeof n.height<"u"&&!this.state.isResizing?wf(n.height):r("height");return{width:s,height:i}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var A=this.appendBase();if(!A)return{width:0,height:0};var n=!1,r=this.parentNode.style.flexWrap;r!=="wrap"&&(n=!0,this.parentNode.style.flexWrap="wrap"),A.style.position="relative",A.style.minWidth="100%",A.style.minHeight="100%";var s={width:A.offsetWidth,height:A.offsetHeight};return n&&(this.parentNode.style.flexWrap=r),this.removeBase(A),s},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var A=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:A.flexBasis!=="auto"?A.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(A,n){var r=this.propsSize&&this.propsSize[n];return this.state[n]==="auto"&&this.state.original[n]===A&&(typeof r>"u"||r==="auto")?"auto":A},e.prototype.calculateNewMaxFromBoundary=function(A,n){var r=this.props.boundsByDirection,s=this.state.direction,i=r&&ii("left",s),o=r&&ii("top",s),a,l;if(this.props.bounds==="parent"){var c=this.parentNode;c&&(a=i?this.resizableRight-this.parentLeft:c.offsetWidth+(this.parentLeft-this.resizableLeft),l=o?this.resizableBottom-this.parentTop:c.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(a=i?this.resizableRight:this.window.innerWidth-this.resizableLeft,l=o?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(a=i?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),l=o?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return a&&Number.isFinite(a)&&(A=A&&A<a?A:a),l&&Number.isFinite(l)&&(n=n&&n<l?n:l),{maxWidth:A,maxHeight:n}},e.prototype.calculateNewSizeFromDirection=function(A,n){var r=this.props.scale||1,s=Y1(this.props.resizeRatio||1),i=s[0],o=s[1],a=this.state,l=a.direction,c=a.original,d=this.props,f=d.lockAspectRatio,h=d.lockAspectRatioExtraHeight,m=d.lockAspectRatioExtraWidth,C=c.width,Q=c.height,g=h||0,p=m||0;return ii("right",l)&&(C=c.width+(A-c.x)*i/r,f&&(Q=(C-p)/this.ratio+g)),ii("left",l)&&(C=c.width-(A-c.x)*i/r,f&&(Q=(C-p)/this.ratio+g)),ii("bottom",l)&&(Q=c.height+(n-c.y)*o/r,f&&(C=(Q-g)*this.ratio+p)),ii("top",l)&&(Q=c.height-(n-c.y)*o/r,f&&(C=(Q-g)*this.ratio+p)),{newWidth:C,newHeight:Q}},e.prototype.calculateNewSizeFromAspectRatio=function(A,n,r,s){var i=this.props,o=i.lockAspectRatio,a=i.lockAspectRatioExtraHeight,l=i.lockAspectRatioExtraWidth,c=typeof s.width>"u"?10:s.width,d=typeof r.width>"u"||r.width<0?A:r.width,f=typeof s.height>"u"?10:s.height,h=typeof r.height>"u"||r.height<0?n:r.height,m=a||0,C=l||0;if(o){var Q=(f-m)*this.ratio+C,g=(h-m)*this.ratio+C,p=(c-C)/this.ratio+m,w=(d-C)/this.ratio+m,v=Math.max(c,Q),_=Math.min(d,g),F=Math.max(f,p),U=Math.min(h,w);A=Ol(A,v,_),n=Ol(n,F,U)}else A=Ol(A,c,d),n=Ol(n,f,h);return{newWidth:A,newHeight:n}},e.prototype.setBoundingClientRect=function(){var A=1/(this.props.scale||1);if(this.props.bounds==="parent"){var n=this.parentNode;if(n){var r=n.getBoundingClientRect();this.parentLeft=r.left*A,this.parentTop=r.top*A}}if(this.props.bounds&&typeof this.props.bounds!="string"){var s=this.props.bounds.getBoundingClientRect();this.targetLeft=s.left*A,this.targetTop=s.top*A}if(this.resizable){var i=this.resizable.getBoundingClientRect(),o=i.left,a=i.top,l=i.right,c=i.bottom;this.resizableLeft=o*A,this.resizableRight=l*A,this.resizableTop=a*A,this.resizableBottom=c*A}},e.prototype.onResizeStart=function(A,n){if(!(!this.resizable||!this.window)){var r=0,s=0;if(A.nativeEvent&&$1(A.nativeEvent)?(r=A.nativeEvent.clientX,s=A.nativeEvent.clientY):A.nativeEvent&&Kl(A.nativeEvent)&&(r=A.nativeEvent.touches[0].clientX,s=A.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var i=this.props.onResizeStart(A,n,this.resizable);if(i===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var o,a=this.window.getComputedStyle(this.resizable);if(a.flexBasis!=="auto"){var l=this.parentNode;if(l){var c=this.window.getComputedStyle(l).flexDirection;this.flexDir=c.startsWith("row")?"row":"column",o=a.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var d={original:{x:r,y:s,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Sn(Sn({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(A.target).cursor||"auto"}),direction:n,flexBasis:o};this.setState(d)}},e.prototype.onMouseMove=function(A){var n=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Kl(A))try{A.preventDefault(),A.stopPropagation()}catch{}var r=this.props,s=r.maxWidth,i=r.maxHeight,o=r.minWidth,a=r.minHeight,l=Kl(A)?A.touches[0].clientX:A.clientX,c=Kl(A)?A.touches[0].clientY:A.clientY,d=this.state,f=d.direction,h=d.original,m=d.width,C=d.height,Q=this.getParentSize(),g=X1(Q,this.window.innerWidth,this.window.innerHeight,s,i,o,a);s=g.maxWidth,i=g.maxHeight,o=g.minWidth,a=g.minHeight;var p=this.calculateNewSizeFromDirection(l,c),w=p.newHeight,v=p.newWidth,_=this.calculateNewMaxFromBoundary(s,i);this.props.snap&&this.props.snap.x&&(v=kB(v,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(w=kB(w,this.props.snap.y,this.props.snapGap));var F=this.calculateNewSizeFromAspectRatio(v,w,{width:_.maxWidth,height:_.maxHeight},{width:o,height:a});if(v=F.newWidth,w=F.newHeight,this.props.grid){var U=NB(v,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),T=NB(w,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),D=this.props.snapGap||0,L=D===0||Math.abs(U-v)<=D?U:v,R=D===0||Math.abs(T-w)<=D?T:w;v=L,w=R}var z={width:v-h.width,height:w-h.height};if(this.delta=z,m&&typeof m=="string"){if(m.endsWith("%")){var j=v/Q.width*100;v="".concat(j,"%")}else if(m.endsWith("vw")){var ae=v/this.window.innerWidth*100;v="".concat(ae,"vw")}else if(m.endsWith("vh")){var q=v/this.window.innerHeight*100;v="".concat(q,"vh")}}if(C&&typeof C=="string"){if(C.endsWith("%")){var j=w/Q.height*100;w="".concat(j,"%")}else if(C.endsWith("vw")){var ae=w/this.window.innerWidth*100;w="".concat(ae,"vw")}else if(C.endsWith("vh")){var q=w/this.window.innerHeight*100;w="".concat(q,"vh")}}var J={width:this.createSizeForCssProperty(v,"width"),height:this.createSizeForCssProperty(w,"height")};this.flexDir==="row"?J.flexBasis=J.width:this.flexDir==="column"&&(J.flexBasis=J.height);var Ae=this.state.width!==J.width,N=this.state.height!==J.height,O=this.state.flexBasis!==J.flexBasis,W=Ae||N||O;W&&as.flushSync(function(){n.setState(J)}),this.props.onResize&&W&&this.props.onResize(A,f,this.resizable,z)}},e.prototype.onMouseUp=function(A){var n,r,s=this.state,i=s.isResizing,o=s.direction;s.original,!(!i||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(A,o,this.resizable,this.delta),this.props.size&&this.setState({width:(n=this.props.size.width)!==null&&n!==void 0?n:"auto",height:(r=this.props.size.height)!==null&&r!==void 0?r:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Sn(Sn({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(A){var n,r;this.setState({width:(n=A.width)!==null&&n!==void 0?n:"auto",height:(r=A.height)!==null&&r!==void 0?r:"auto"})},e.prototype.renderResizer=function(){var A=this,n=this.props,r=n.enable,s=n.handleStyles,i=n.handleClasses,o=n.handleWrapperStyle,a=n.handleWrapperClass,l=n.handleComponent;if(!r)return null;var c=Object.keys(r).map(function(d){return r[d]!==!1?u.jsx(W1,{direction:d,onResizeStart:A.onResizeStart,replaceStyles:s&&s[d],className:i&&i[d],children:l&&l[d]?l[d]:null},d):null});return u.jsx("div",{className:a,style:o,children:c})},e.prototype.render=function(){var A=this,n=Object.keys(this.props).reduce(function(i,o){return J1.indexOf(o)!==-1||(i[o]=A.props[o]),i},{}),r=Sn(Sn(Sn({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(r.flexBasis=this.state.flexBasis);var s=this.props.as||"div";return u.jsxs(s,Sn({style:r,className:this.props.className},n,{ref:function(i){i&&(A.resizable=i)},children:[this.state.isResizing&&u.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(E.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Xh=function(t,e){return Xh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,n){A.__proto__=n}||function(A,n){for(var r in n)n.hasOwnProperty(r)&&(A[r]=n[r])},Xh(t,e)};function q1(t,e){Xh(t,e);function A(){this.constructor=t}t.prototype=e===null?Object.create(e):(A.prototype=e.prototype,new A)}var Qt=function(){return Qt=Object.assign||function(e){for(var A,n=1,r=arguments.length;n<r;n++){A=arguments[n];for(var s in A)Object.prototype.hasOwnProperty.call(A,s)&&(e[s]=A[s])}return e},Qt.apply(this,arguments)};function eb(t,e){var A={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(A[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(A[n[r]]=t[n[r]]);return A}var tb={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},Ab=function(t){return{bottom:t,bottomLeft:t,bottomRight:t,left:t,right:t,top:t,topLeft:t,topRight:t}},Wg=function(t){q1(e,t);function e(A){var n=t.call(this,A)||this;return n.resizingPosition={x:0,y:0},n.offsetFromParent={left:0,top:0},n.resizableElement={current:null},n.originalPosition={x:0,y:0},n.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:A.maxWidth,maxHeight:A.maxHeight},n.onResizeStart=n.onResizeStart.bind(n),n.onResize=n.onResize.bind(n),n.onResizeStop=n.onResizeStop.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDrag=n.onDrag.bind(n),n.onDragStop=n.onDragStop.bind(n),n.getMaxSizesFromProps=n.getMaxSizesFromProps.bind(n),n}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var A=this.offsetFromParent,n=A.left,r=A.top,s=this.getDraggablePosition(),i=s.x,o=s.y;this.draggable.setState({x:i-n,y:o-r}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var A=this.draggable.state,n=A.x,r=A.y;return{x:n,y:r}},e.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var A=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,n=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:A,maxHeight:n}},e.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},e.prototype.getOffsetHeight=function(A){var n=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/n;case"body":return document.body.offsetHeight/n;default:return A.offsetHeight}},e.prototype.getOffsetWidth=function(A){var n=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/n;case"body":return document.body.offsetWidth/n;default:return A.offsetWidth}},e.prototype.onDragStart=function(A,n){this.props.onDragStart&&this.props.onDragStart(A,n);var r=this.getDraggablePosition();if(this.originalPosition=r,!!this.props.bounds){var s=this.getParent(),i=this.props.scale,o;if(this.props.bounds==="parent")o=s;else if(this.props.bounds==="body"){var a=s.getBoundingClientRect(),l=a.left,c=a.top,d=document.body.getBoundingClientRect(),f=-(l-s.offsetLeft*i-d.left)/i,h=-(c-s.offsetTop*i-d.top)/i,m=(document.body.offsetWidth-this.resizable.size.width*i)/i+f,C=(document.body.offsetHeight-this.resizable.size.height*i)/i+h;return this.setState({bounds:{top:h,right:m,bottom:C,left:f}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var Q=s.getBoundingClientRect(),g=Q.left,p=Q.top,w=-(g-s.offsetLeft*i)/i,v=-(p-s.offsetTop*i)/i,m=(window.innerWidth-this.resizable.size.width*i)/i+w,C=(window.innerHeight-this.resizable.size.height*i)/i+v;return this.setState({bounds:{top:v,right:m,bottom:C,left:w}})}else typeof this.props.bounds=="string"?o=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(o=this.props.bounds);if(!(!(o instanceof HTMLElement)||!(s instanceof HTMLElement))){var _=o.getBoundingClientRect(),F=_.left,U=_.top,T=s.getBoundingClientRect(),D=T.left,L=T.top,R=(F-D)/i,z=U-L;if(this.resizable){this.updateOffsetFromParent();var j=this.offsetFromParent;this.setState({bounds:{top:z-j.top,right:R+(o.offsetWidth-this.resizable.size.width)-j.left/i,bottom:z+(o.offsetHeight-this.resizable.size.height)-j.top,left:R-j.left/i}})}}}},e.prototype.onDrag=function(A,n){if(this.props.onDrag){var r=this.offsetFromParent,s=r.left,i=r.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(A,Qt(Qt({},n),{x:n.x+s,y:n.y+i}));if(this.props.dragAxis==="x")return this.props.onDrag(A,Qt(Qt({},n),{x:n.x+s,y:this.originalPosition.y+i,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(A,Qt(Qt({},n),{x:this.originalPosition.x+s,y:n.y+i,deltaX:0}))}},e.prototype.onDragStop=function(A,n){if(this.props.onDragStop){var r=this.offsetFromParent,s=r.left,i=r.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(A,Qt(Qt({},n),{x:n.x+s,y:n.y+i}));if(this.props.dragAxis==="x")return this.props.onDragStop(A,Qt(Qt({},n),{x:n.x+s,y:this.originalPosition.y+i,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(A,Qt(Qt({},n),{x:this.originalPosition.x+s,y:n.y+i,deltaX:0}))}},e.prototype.onResizeStart=function(A,n,r){A.stopPropagation(),this.setState({resizing:!0});var s=this.props.scale,i=this.offsetFromParent,o=this.getDraggablePosition();if(this.resizingPosition={x:o.x+i.left,y:o.y+i.top},this.originalPosition=o,this.props.bounds){var a=this.getParent(),l=void 0;this.props.bounds==="parent"?l=a:this.props.bounds==="body"?l=document.body:this.props.bounds==="window"?l=window:typeof this.props.bounds=="string"?l=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(l=this.props.bounds);var c=this.getSelfElement();if(c instanceof Element&&(l instanceof HTMLElement||l===window)&&a instanceof HTMLElement){var d=this.getMaxSizesFromProps(),f=d.maxWidth,h=d.maxHeight,m=this.getParentSize();if(f&&typeof f=="string")if(f.endsWith("%")){var C=Number(f.replace("%",""))/100;f=m.width*C}else f.endsWith("px")&&(f=Number(f.replace("px","")));if(h&&typeof h=="string")if(h.endsWith("%")){var C=Number(h.replace("%",""))/100;h=m.height*C}else h.endsWith("px")&&(h=Number(h.replace("px","")));var Q=c.getBoundingClientRect(),g=Q.left,p=Q.top,w=this.props.bounds==="window"?{left:0,top:0}:l.getBoundingClientRect(),v=w.left,_=w.top,F=this.getOffsetWidth(l),U=this.getOffsetHeight(l),T=n.toLowerCase().endsWith("left"),D=n.toLowerCase().endsWith("right"),L=n.startsWith("top"),R=n.startsWith("bottom");if((T||L)&&this.resizable){var z=(g-v)/s+this.resizable.size.width;this.setState({maxWidth:z>Number(f)?f:z})}if(D||this.props.lockAspectRatio&&!T&&!L){var z=F+(v-g)/s;this.setState({maxWidth:z>Number(f)?f:z})}if((L||T)&&this.resizable){var z=(p-_)/s+this.resizable.size.height;this.setState({maxHeight:z>Number(h)?h:z})}if(R||this.props.lockAspectRatio&&!L&&!T){var z=U+(_-p)/s;this.setState({maxHeight:z>Number(h)?h:z})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(A,n,r)},e.prototype.onResize=function(A,n,r,s){var i=this,o={x:this.originalPosition.x,y:this.originalPosition.y},a=-s.width,l=-s.height,c=["top","left","topLeft","bottomLeft","topRight"];c.includes(n)&&(n==="bottomLeft"?o.x+=a:(n==="topRight"||(o.x+=a),o.y+=l));var d=this.draggable.state;(o.x!==d.x||o.y!==d.y)&&as.flushSync(function(){i.draggable.setState(o)}),this.updateOffsetFromParent();var f=this.offsetFromParent,h=this.getDraggablePosition().x+f.left,m=this.getDraggablePosition().y+f.top;this.resizingPosition={x:h,y:m},this.props.onResize&&this.props.onResize(A,n,r,s,{x:h,y:m})},e.prototype.onResizeStop=function(A,n,r,s){this.setState({resizing:!1});var i=this.getMaxSizesFromProps(),o=i.maxWidth,a=i.maxHeight;this.setState({maxWidth:o,maxHeight:a}),this.props.onResizeStop&&this.props.onResizeStop(A,n,r,s,this.resizingPosition)},e.prototype.updateSize=function(A){this.resizable&&this.resizable.updateSize({width:A.width,height:A.height})},e.prototype.updatePosition=function(A){this.draggable.setState(A)},e.prototype.updateOffsetFromParent=function(){var A=this.props.scale,n=this.getParent(),r=this.getSelfElement();if(!n||r===null)return{top:0,left:0};var s=n.getBoundingClientRect(),i=s.left,o=s.top,a=r.getBoundingClientRect(),l=this.getDraggablePosition(),c=n.scrollLeft,d=n.scrollTop;this.offsetFromParent={left:a.left-i+c-l.x*A,top:a.top-o+d-l.y*A}},e.prototype.render=function(){var A=this,n=this.props,r=n.disableDragging,s=n.style,i=n.dragHandleClassName,o=n.position,a=n.onMouseDown,l=n.onMouseUp,c=n.dragAxis,d=n.dragGrid,f=n.bounds,h=n.enableUserSelectHack,m=n.cancel,C=n.children;n.onResizeStart,n.onResize,n.onResizeStop,n.onDragStart,n.onDrag,n.onDragStop;var Q=n.resizeHandleStyles,g=n.resizeHandleClasses,p=n.resizeHandleComponent,w=n.enableResizing,v=n.resizeGrid,_=n.resizeHandleWrapperClass,F=n.resizeHandleWrapperStyle,U=n.scale,T=n.allowAnyClick,D=n.dragPositionOffset,L=eb(n,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),R=this.props.default?Qt({},this.props.default):void 0;delete L.default;var z=r||i?{cursor:"auto"}:{cursor:"move"},j=Qt(Qt(Qt({},tb),z),s),ae=this.offsetFromParent,q=ae.left,J=ae.top,Ae;o&&(Ae={x:o.x-q,y:o.y-J});var N=this.state.resizing?void 0:Ae,O=this.state.resizing?"both":c;return E.createElement(j1,{ref:function(W){W&&(A.draggable=W)},handle:i?".".concat(i):void 0,defaultPosition:R,onMouseDown:a,onMouseUp:l,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:O,disabled:r,grid:d,bounds:f?this.state.bounds:void 0,position:N,enableUserSelectHack:h,cancel:m,scale:U,allowAnyClick:T,nodeRef:this.resizableElement,positionOffset:D},E.createElement(Z1,Qt({},L,{ref:function(W){W&&(A.resizable=W,A.resizableElement.current=W.resizable)},defaultSize:R,size:this.props.size,enable:typeof w=="boolean"?Ab(w):w,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:j,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:v,handleWrapperClass:_,handleWrapperStyle:F,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:Q,handleClasses:g,handleComponent:p,scale:this.props.scale}),C))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e}(E.PureComponent);let HB=null;function nb(){if(!document.getElementById("gis-script")){const t=document.createElement("script");t.id="gis-script",t.src="https://accounts.google.com/gsi/client",t.async=!0,t.defer=!0,document.head.appendChild(t)}}async function Yh(t){return new Promise((e,A)=>{const n=setInterval(()=>{var r,s;(s=(r=window.google)==null?void 0:r.accounts)!=null&&s.oauth2&&(clearInterval(n),window.electronAPI?(HB=window.google.accounts.oauth2.initCodeClient({client_id:t,scope:"https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/cloud-platform",ux_mode:"popup",callback:async i=>{var o;if(i.error){console.error("GIS auth error:",i),A(new Error(i.error));return}if(i.code){console.log("Got auth code, exchanging via Electron...");try{const a=await window.electronAPI.exchangeGoogleAuthCode(i.code);if(a.success&&((o=a.tokens)!=null&&o.access_token)){const l=a.tokens.access_token;sessionStorage.setItem("google_access_token",l),console.log(" Offline Access setup complete. Token cached (session)."),e(l)}else console.error("Token exchange failed:",a.error),A(new Error(a.error||"Exchange failed"))}catch(a){console.error("Electron IPC error:",a),A(a)}}}}),HB.requestCode()):window.google.accounts.oauth2.initTokenClient({client_id:t,scope:"https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/cloud-platform",callback:o=>{if(o.error){console.error("GIS auth error (Web):",o),A(new Error(o.error));return}o.access_token&&(sessionStorage.setItem("google_access_token",o.access_token),console.log(" Web Access setup complete. Token cached (session)."),e(o.access_token))}}).requestAccessToken())},100);setTimeout(()=>{clearInterval(n),A(new Error("GIS init timeout"))},1e4)})}async function Jh(t,e=!1){if(window.electronAPI)try{console.log("Requesting fresh token from Electron...");const A=await window.electronAPI.getGoogleAccessToken();if(A.success&&A.token)return sessionStorage.setItem("google_access_token",A.token),console.log(" Token refreshed via Electron"),!0;if(console.warn("Background refresh failed:",A.error),e){console.log("Attempting interactive re-login...");try{return await Yh(t),!0}catch{return!1}}return!1}catch(A){return console.error("Electron refresh error:",A),!1}else{if(e)try{return await Yh(t),!0}catch{return!1}return!1}}const au=Object.freeze(Object.defineProperty({__proto__:null,initGoogleIdentityServices:nb,refreshDriveAccessToken:Jh,requestDriveAccess:Yh},Symbol.toStringTag,{value:"Module"})),LB="RefBoard",Ma="application/vnd.google-apps.folder",zg="application/json",RB="145147670860-l0bu8h9lvmf1gjqd09q66g4jbb4i69q2.apps.googleusercontent.com";function sr(){return sessionStorage.getItem("google_access_token")}async function Ms(t,e={},A=0){let n=sr();!n&&A===0&&await Jh(RB,!1)&&(n=sr());const r=new Headers(e.headers||{});n&&(r.has("Authorization")||r.set("Authorization",`Bearer ${n}`));const s={...e,headers:r},i=await fetch(t,s);if(i.status===401&&A<1){if(console.log("401 Unauthorized, attempting interactive refresh..."),await Jh(RB,!0)){const a=sr();if(a)return r.set("Authorization",`Bearer ${a}`),Ms(t,{...e,headers:r},A+1)}sessionStorage.removeItem("google_access_token"),window.dispatchEvent(new Event("google_auth_error"))}return i}async function Pt(t,e={}){const A=await Ms(`https://www.googleapis.com/drive/v3/${t}`,{...e,headers:{"Content-Type":"application/json",...e.headers}});if(!A.ok){const n=await A.text().catch(()=>"");throw new Error(`Drive API error (${A.status}): ${A.statusText} ${n}`)}return A.status===204?null:A.json()}async function ud(){const t=`name='${LB}' and mimeType='${Ma}' and trashed=false`,e=await Pt(`files?q=${encodeURIComponent(t)}&fields=files(id,name)`);return e.files&&e.files.length>0?e.files[0].id:(await Pt("files",{method:"POST",body:JSON.stringify({name:LB,mimeType:Ma})})).id}async function Zh(t,e,A,n){const r=await ud(),s={name:e,mimeType:zg,parents:A?void 0:[r]};n&&(s.contentHints={thumbnail:{image:n.replace(/^data:image\/(png|jpeg|jpg);base64,/,""),mimeType:"image/png"}});const i="-------314159265358979323846",o=`\r
--${i}\r
`,a=`\r
--${i}--`,l=o+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(s)+o+`Content-Type: application/json\r
\r
`+JSON.stringify(t)+a;if(!sr())throw new Error("No access token");const d=A?`https://www.googleapis.com/upload/drive/v3/files/${A}?uploadType=multipart`:"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",f=await Ms(d,{method:A?"PATCH":"POST",headers:{"Content-Type":`multipart/related; boundary=${i}`},body:l});if(!f.ok)throw new Error(`Failed to save: ${f.statusText}`);return(await f.json()).id}async function Cx(t){if(!sr())throw new Error("No access token");const A=await Ms(`https://www.googleapis.com/drive/v3/files/${t}?alt=media`);if(!A.ok)throw new Error(`Failed to load: ${A.statusText}`);return A.json()}async function xx(){const e=`'${await ud()}' in parents and mimeType='${zg}' and trashed=false`;return((await Pt(`files?q=${encodeURIComponent(e)}&fields=files(id,name,modifiedTime,thumbnailLink)&orderBy=modifiedTime desc`)).files||[]).map(n=>({...n,thumbnail:n.thumbnailLink}))}async function Ex(t){await Pt(`files/${t}`,{method:"DELETE"});try{const e=await ud(),n=`name='${`${t}_images`}' and mimeType='${Ma}' and '${e}' in parents and trashed=false`,r=await Pt(`files?q=${encodeURIComponent(n)}&fields=files(id,name)`);if(r.files&&r.files.length>0){const s=r.files[0].id;await Pt(`files/${s}`,{method:"DELETE"}),console.log(`Deleted images folder for board ${t}`)}}catch(e){console.warn("Failed to delete images folder:",e)}}async function _x(t,e,A){try{await Pt(`files/${t}`,{method:"DELETE"}),console.log("Image deleted from Drive:",t)}catch(n){throw console.error("Failed to delete image from Drive:",n),n}}async function Vg(t,e,A){const n={type:"user",role:A,emailAddress:e};await Pt(`files/${t}/permissions?sendNotificationEmail=true`,{method:"POST",body:JSON.stringify(n)})}async function Fx(t){return(await Pt(`files/${t}/permissions?fields=permissions(id,emailAddress,displayName,role,type)`)).permissions||[]}async function Ix(t,e){await Pt(`files/${t}/permissions/${e}`,{method:"DELETE"})}async function Qx(){const t=`sharedWithMe=true and mimeType='${zg}' and trashed=false`;return((await Pt(`files?q=${encodeURIComponent(t)}&fields=files(id,name,modifiedTime,thumbnailLink,owners(displayName,emailAddress))&orderBy=modifiedTime desc`)).files||[]).map(A=>({...A,thumbnail:A.thumbnailLink}))}async function il(t,e){const A=await ud(),n=`${t}_images`,r=`name='${n.replace(/'/g,"\\'")}' and mimeType='${Ma}' and '${A}' in parents and trashed=false`,s=await Pt(`files?q=${encodeURIComponent(r)}&fields=files(id,name)`);return s.files&&s.files.length>0?s.files[0].id:(await Pt("files",{method:"POST",body:JSON.stringify({name:n,mimeType:Ma,parents:[A]})})).id}async function Ux(){return il("default")}async function lu(t,e){try{const A=`name='${e}' and '${t}' in parents and trashed=false`,n=await Pt(`files?q=${encodeURIComponent(A)}&fields=files(id,name)`);return n.files&&n.files.length>0?n.files[0].id:null}catch(A){return console.error("Failed to find file:",A),null}}async function bx(t,e){const A=e.split(".").pop()||"",n=e.replace(`.${A}`,"");if(!await lu(t,e))return e;let s=1,i;do{if(i=`${n}_copy${s.toString().padStart(2,"0")}.${A}`,!await lu(t,i))return i;s++}while(s<1e3);return`${n}_copy${Date.now()}.${A}`}async function qh(t,e,A=!1,n=!1,r,s){var F;const i=r?await il(r):await Ux();if(!sr())throw new Error("No access token");let a=e;A||(a=await bx(i,e));const l=A?await lu(i,a):null;let c,d;if(t instanceof File){c=t.type||(n?"video/mp4":"image/png");const U=await t.arrayBuffer();d=new Uint8Array(U)}else{if(c="image/png",t.startsWith("data:")){const L=t.match(/data:([^;]+)/);L&&(c=L[1])}else{const L=(F=e.split(".").pop())==null?void 0:F.toLowerCase();L==="jpg"||L==="jpeg"?c="image/jpeg":L==="gif"?c="image/gif":L==="webp"?c="image/webp":L==="mp4"?c="video/mp4":L==="webm"?c="video/webm":L==="mov"&&(c="video/quicktime")}let U;t.startsWith("data:")?U=t.split(",")[1]:U=t;const T=atob(U),D=new Array(T.length);for(let L=0;L<T.length;L++)D[L]=T.charCodeAt(L);d=new Uint8Array(D)}const f="-------314159265358979323846",h=`\r
--${f}\r
`,m=`\r
--${f}--`,C={name:a,mimeType:c};l||(C.parents=[i]);const Q=JSON.stringify(C),g=new TextEncoder,p=[];p.push(g.encode(h)),p.push(g.encode(`Content-Type: application/json; charset=UTF-8\r
\r
`)),p.push(g.encode(Q)),p.push(g.encode(h)),p.push(g.encode(`Content-Type: ${c}\r
\r
`)),p.push(d),p.push(g.encode(m));let w=0;for(const U of p)w+=U.length;const v=new Uint8Array(w);let _=0;for(const U of p)v.set(U,_),_+=U.length;try{if(l){const U=await Ms(`https://www.googleapis.com/upload/drive/v3/files/${l}?uploadType=multipart`,{method:"PATCH",headers:{"Content-Type":`multipart/related; boundary=${f}`,"Content-Length":w.toString()},body:v});if(!U.ok){const D=await U.text();let L;try{L=JSON.parse(D)}catch{L={message:D}}throw new Error(`Failed to update media: ${JSON.stringify(L)}`)}const T=await U.json();if(!T.id||T.id.trim()==="")throw new Error(`Update succeeded but no file ID returned: ${JSON.stringify(T)}`);console.log("Media updated successfully, file ID:",T.id);try{await Pt(`files/${T.id}/permissions`,{method:"POST",body:JSON.stringify({role:"reader",type:"anyone"})}),console.log("Refreshed public read permission for file:",T.id)}catch(D){console.warn("Note: Failed to refresh permission for file (might already exist):",T.id,D)}return T.id}else{const U=await Ms("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{"Content-Type":`multipart/related; boundary=${f}`,"Content-Length":w.toString()},body:v});if(!U.ok){const D=await U.text();let L;try{L=JSON.parse(D)}catch{L={message:D}}throw new Error(`Failed to upload media: ${JSON.stringify(L)}`)}const T=await U.json();if(!T.id)throw new Error(`Upload succeeded but no file ID returned: ${JSON.stringify(T)}`);console.log("Media uploaded successfully, file ID:",T.id);try{await Pt(`files/${T.id}/permissions`,{method:"POST",body:JSON.stringify({role:"reader",type:"anyone"})}),console.log("Set public read permission for file:",T.id)}catch(D){console.warn("Failed to set public permission for file:",T.id,D)}return T.id}}catch(U){throw console.error("Error uploading/updating media in Drive:",U),U}}async function Ir(t,e,A=!1,n,r){var R;const s=n?await il(n):await Ux(),i=sr();if(!i)throw new Error("No access token");let o=e;A||(o=await bx(s,e));const a=A?await lu(s,o):null;let l="image/png";if(t.startsWith("data:")){const z=t.match(/data:([^;]+)/);z&&(l=z[1])}else{const z=(R=e.split(".").pop())==null?void 0:R.toLowerCase();z==="jpg"||z==="jpeg"?l="image/jpeg":z==="gif"?l="image/gif":z==="webp"&&(l="image/webp")}let c;t.startsWith("data:")?c=t.split(",")[1]:c=t;const d=atob(c),f=new Array(d.length);for(let z=0;z<d.length;z++)f[z]=d.charCodeAt(z);const h=new Uint8Array(f),m="-------314159265358979323846",C=`\r
--${m}\r
`,Q=`\r
--${m}--`,g={name:o,mimeType:l};a||(g.parents=[s]);const p=JSON.stringify(g),w=new TextEncoder,v=[];v.push(w.encode(C)),v.push(w.encode(`Content-Type: application/json; charset=UTF-8\r
\r
`)),v.push(w.encode(p)),v.push(w.encode(C)),v.push(w.encode(`Content-Type: ${l}\r
\r
`)),v.push(h),v.push(w.encode(Q));let _=0;for(const z of v)_+=z.length;const F=new Uint8Array(_);let U=0;for(const z of v)F.set(z,U),U+=z.length;const T=a?`https://www.googleapis.com/upload/drive/v3/files/${a}?uploadType=multipart`:"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",D=await fetch(T,{method:a?"PATCH":"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":`multipart/related; boundary=${m}`},body:F});if(!D.ok){const z=await D.text();throw new Error(`Failed to ${a?"update":"upload"} image: ${D.statusText} - ${z}`)}const L=await D.json();try{await Pt(`files/${L.id}/permissions`,{method:"POST",body:JSON.stringify({role:"reader",type:"anyone"})}),console.log("Set public read permission for image:",L.id)}catch(z){console.warn("Failed to set public permission for image:",L.id,z)}return L.id}async function Vo(t,e,A,n){return Ir(t,e,!1,A)}async function Sx(t,e=!1){if(!sr())throw new Error("No access token");try{const n=e?`https://www.googleapis.com/drive/v3/files/${t}?alt=media&t=${Date.now()}`:`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,r=await Ms(n,{headers:{},cache:e?"no-cache":"default"});if(!r.ok){if(r.status===403)throw new Error(`Media is not accessible (403 Forbidden). File ID: ${t}. Please ask the board owner to share the media files.`);if(r.status===404)throw new Error(`Media file not found (404 Not Found). File ID: ${t}. The file may have been deleted, the ID is incorrect, or you do not have permission to view it.`);const i=await r.text().catch(()=>"Unknown error");throw new Error(`Failed to load media (${r.status}): ${r.statusText}. File ID: ${t}. Error: ${i}`)}const s=await r.blob();return URL.createObjectURL(s)}catch(n){throw console.error("Error loading media from Drive:",n),n}}async function Oa(t,e=!1){if(sr())return Sx(t,e);const n=`https://drive.google.com/uc?id=${t}&export=download${e?`&t=${Date.now()}`:""}`;try{const r=await fetch(n,{cache:e?"no-cache":"default"});if(r.ok){const s=await r.blob();return console.log(`Loaded media via public URL: ${t}`),URL.createObjectURL(s)}console.log(`Public URL returned ${r.status}`)}catch(r){console.warn("Public URL fetch failed:",r)}throw new Error(`Cannot load media. File may not have public access or CORS is blocking it. File ID: ${t}`)}async function Tx(t,e,A){await Vg(t,e,A)}async function Nx(t,e,A){await Promise.all(t.map(n=>Tx(n,e,A)))}async function kx(t){let e=0,A=0;const n=5;for(let r=0;r<t.length;r+=n){const s=t.slice(r,r+n);await Promise.all(s.map(async i=>{try{await Pt(`files/${i}/permissions`,{method:"POST",body:JSON.stringify({role:"reader",type:"anyone"})}),e++}catch(o){console.warn(`Failed to fix permission for file ${i}:`,o),A++}}))}return{success:e,failed:A}}const rb=Object.freeze(Object.defineProperty({__proto__:null,deleteBoard:Ex,deleteImageFromDrive:_x,fixMediaPermissions:kx,getBoardPermissions:Fx,getOrCreateBoardImagesFolder:il,listBoards:xx,listSharedBoards:Qx,loadBoardFromDrive:Cx,loadImageFromDrive:Oa,loadMediaFromDrive:Sx,removeBoardPermission:Ix,saveBoardToDrive:Zh,shareBoard:Vg,shareImage:Tx,shareImages:Nx,uploadImageToDrive:Vo,uploadOrUpdateImageInDrive:Ir,uploadOrUpdateMediaInDrive:qh},Symbol.toStringTag,{value:"Module"})),sb=({item:t,onUpdate:e})=>{const[A,n]=E.useState(!1),r=E.useRef(null);E.useEffect(()=>{A&&r.current&&(r.current.focus(),r.current.select())},[A]);const s=o=>{o.stopPropagation(),n(!0)},i=()=>{n(!1)};return u.jsxs("div",{className:"w-full h-full bg-[#1a1a1a] border-2 border-blue-500 rounded-2xl flex flex-col overflow-hidden shadow-xl",onDoubleClick:s,children:[u.jsx("div",{className:"h-8 bg-[#252525] border-b border-gray-700 flex items-center px-3 cursor-move",children:u.jsxs("span",{className:"text-[10px] text-gray-400 font-medium",children:[" Text #",t.id.slice(-2)]})}),u.jsx("div",{className:"flex-grow p-3 flex flex-col",children:u.jsx("textarea",{ref:r,className:`w-full h-full bg-transparent text-gray-300 text-sm p-0 rounded resize-none focus:outline-none placeholder-gray-600 ${A?"cursor-text":"cursor-move pointer-events-none"}`,placeholder:"Double-click to edit...",value:t.promptText||"",onChange:o=>e(t.id,{promptText:o.target.value}),onMouseDown:o=>{A&&o.stopPropagation()},onBlur:i,readOnly:!A})})]})},ib=({item:t,onGenerate:e,onUpdate:A,isGenerating:n=!1,driveImageUrl:r,activeTool:s="select"})=>{var g,p;const[i,o]=E.useState(!1),[a,l]=E.useState(localStorage.getItem("gemini_api_key")||""),c=t.generationParams||{aspectRatio:"2:3",resolution:"1k",model:"gemini-2.5"},d=(w,v)=>{const F={generationParams:{...c,[w]:v}};if(w==="aspectRatio"){const[U,T]=v.split(":").map(Number),D=U/T,L=400;let R=Math.max(t.width,L),z=Math.round(R/D);z<L&&(z=L,R=Math.round(z*D)),F.width=R,F.height=z}A(t.id,F)};E.useEffect(()=>{var _,F;const w=((_=t.generationParams)==null?void 0:_.model)||"gemini-2.5",v=((F=t.generationParams)==null?void 0:F.resolution)||"1k";w==="gemini-2.5"&&v!=="1k"&&A(t.id,{generationParams:{...t.generationParams||{aspectRatio:"2:3",resolution:"1k",model:"gemini-2.5"},resolution:"1k"}})},[(g=t.generationParams)==null?void 0:g.model,(p=t.generationParams)==null?void 0:p.resolution,t.id,A]);const[f,h]=E.useState(0);E.useEffect(()=>{if(n){h(0);const w=setInterval(()=>h(v=>v+1),1e3);return()=>clearInterval(w)}else h(0)},[n]);const m=w=>`${w}s`,C=()=>{a.trim()?localStorage.setItem("gemini_api_key",a.trim()):localStorage.removeItem("gemini_api_key"),o(!1)},Q=async()=>{try{const w=t.driveFileId&&r?r:t.src;if(!w)return;const v=document.createElement("a");v.href=w,v.download=t.fileName||`generated_${t.id}.png`,v.click()}catch(w){console.error("Failed to download image:",w)}};return u.jsxs("div",{className:"absolute inset-0 flex flex-col overflow-hidden pointer-events-none",children:[u.jsx("div",{className:`absolute inset-0 z-0 ${s==="pen"||s==="eraser"?"pointer-events-none":"pointer-events-auto"} flex items-center justify-center bg-[#111]`,children:r?u.jsx("img",{src:r,alt:"Generated",className:"w-full h-full object-contain",draggable:!1}):t.src?u.jsx("img",{src:t.src,alt:"Generated",className:"w-full h-full object-contain",draggable:!1,onError:w=>{console.error("Failed to load base64 image"),w.currentTarget.style.display="none"}}):null}),!n&&u.jsx("div",{className:`absolute top-2 left-2 right-2 h-10 flex items-center justify-between gap-2 z-50 ${s==="pen"||s==="eraser"?"pointer-events-none":"pointer-events-auto"}`,children:u.jsxs("div",{className:"bg-black/60 backdrop-blur-md rounded-lg shadow-lg px-3 py-1.5 flex items-center gap-2 border border-white/20 flex-1",children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[u.jsxs("select",{value:c.model,onChange:w=>d("model",w.target.value),onPointerDown:w=>w.stopPropagation(),className:"bg-transparent text-white text-[11px] font-medium border-none outline-none cursor-pointer hover:text-gray-200 truncate max-w-[120px]",children:[u.jsx("option",{value:"gemini-2.5",className:"bg-gray-800",children:"NanoBanana"}),u.jsx("option",{value:"gemini-3.0",className:"bg-gray-800",children:"NanoBanana Pro"})]}),u.jsx("svg",{className:"w-3 h-3 text-white/60 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"flex items-center gap-1 border-l border-white/20 pl-2",children:[u.jsx("svg",{className:"w-3 h-3 text-white/60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsx("select",{value:c.resolution,onChange:w=>d("resolution",w.target.value),onPointerDown:w=>w.stopPropagation(),className:"bg-transparent text-white text-[11px] font-medium border-none outline-none cursor-pointer hover:text-gray-200 w-12",children:c.model==="gemini-2.5"?u.jsx("option",{value:"1k",className:"bg-gray-800",children:"1K"}):u.jsxs(u.Fragment,{children:[u.jsx("option",{value:"1k",className:"bg-gray-800",children:"1K"}),u.jsx("option",{value:"2k",className:"bg-gray-800",children:"2K"}),u.jsx("option",{value:"4k",className:"bg-gray-800",children:"4K"})]})})]}),u.jsxs("div",{className:"flex items-center gap-1 border-l border-white/20 pl-2",children:[u.jsx("svg",{className:"w-3 h-3 text-white/60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),u.jsxs("select",{value:c.aspectRatio,onChange:w=>d("aspectRatio",w.target.value),onPointerDown:w=>w.stopPropagation(),className:"bg-transparent text-white text-[11px] font-medium border-none outline-none cursor-pointer hover:text-gray-200 w-14",children:[u.jsx("option",{value:"1:1",className:"bg-gray-800",children:"1:1"}),u.jsx("option",{value:"2:3",className:"bg-gray-800",children:"2:3"}),u.jsx("option",{value:"3:2",className:"bg-gray-800",children:"3:2"}),u.jsx("option",{value:"3:4",className:"bg-gray-800",children:"3:4"}),u.jsx("option",{value:"4:3",className:"bg-gray-800",children:"4:3"}),u.jsx("option",{value:"4:5",className:"bg-gray-800",children:"4:5"}),u.jsx("option",{value:"5:4",className:"bg-gray-800",children:"5:4"}),u.jsx("option",{value:"9:16",className:"bg-gray-800",children:"9:16"}),u.jsx("option",{value:"16:9",className:"bg-gray-800",children:"16:9"}),u.jsx("option",{value:"21:9",className:"bg-gray-800",children:"21:9"})]})]})]}),u.jsx("div",{className:"flex-grow"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:"text-white/80 hover:text-white p-1 transition-colors",onPointerDown:w=>w.stopPropagation(),onClick:w=>{w.stopPropagation(),o(!i)},title:"Settings (API Key)",children:u.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),r&&!n&&u.jsx("button",{onClick:w=>{var _;w.stopPropagation();const v=((_=t.fileName)==null?void 0:_.split("?")[0])||`generated_${t.id}.png`;A(t.id,{fileName:`${v}?t=${Date.now()}`})},className:"w-7 h-7 rounded-lg flex items-center justify-center bg-white/20 hover:bg-white/30 text-white transition-all",title:"Refresh Image",children:u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),r&&!n&&u.jsx("button",{onClick:w=>{w.stopPropagation(),Q()},className:"w-7 h-7 rounded-lg flex items-center justify-center bg-white/20 hover:bg-white/30 text-white transition-all",title:"Download",children:u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),u.jsx("button",{onClick:w=>{w.stopPropagation(),e()},disabled:n,className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${n?"bg-white/30 cursor-not-allowed text-white/50":"bg-white hover:bg-white/90 text-black shadow-lg"}`,title:"Generate",children:n?u.jsx("div",{className:"w-3 h-3 border-2 border-white/50 border-t-white rounded-full animate-spin"}):u.jsx("svg",{className:"w-4 h-4 ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M8 5v14l11-7z"})})})]})]})}),!r&&!n&&u.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[u.jsxs("div",{className:"text-white/60 flex flex-col items-center gap-2 select-none bg-black/40 backdrop-blur-sm rounded-lg px-6 py-4 border border-white/10",children:[u.jsx("svg",{className:"w-12 h-12 text-white/80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),u.jsx("span",{className:"text-xs font-medium tracking-wide",children:"Connect inputs & generate"})]}),u.jsx("div",{className:`absolute top-2 right-2 ${s==="pen"||s==="eraser"?"pointer-events-none":"pointer-events-auto"}`,children:u.jsx("button",{onClick:w=>{w.stopPropagation(),e()},className:"w-8 h-8 rounded-full flex items-center justify-center transition-all bg-white hover:bg-white/90 text-black shadow-lg",title:"Generate",children:u.jsx("svg",{className:"w-4 h-4 ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),n&&u.jsxs("div",{className:"absolute inset-0 bg-[#1a1a1a] flex flex-col justify-end p-6 z-20 pointer-events-none overflow-hidden rounded-xl",children:[u.jsx("style",{children:`
                        @keyframes border-flow {
                            0% { transform: rotate(0deg); }
                            100% { transform: rotate(360deg); }
                        }
                        `}),u.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[u.jsx("div",{className:"absolute -inset-[150%] opacity-100",style:{background:"conic-gradient(from 0deg, transparent 0deg, transparent 80deg, #10b981 120deg, transparent 180deg)",animation:"border-flow 3s linear infinite"}}),u.jsx("div",{className:"absolute inset-[2px] bg-[#1a1a1a] rounded-lg"})]}),u.jsxs("div",{className:"relative z-10 w-full flex justify-between items-end",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-gray-300 text-sm font-light tracking-wide opacity-90",children:"Generating image..."}),u.jsx("span",{className:"text-gray-500 text-xs font-mono",children:m(f)})]}),u.jsx("div",{className:"w-8 h-8 rounded-full bg-[#2a2a2a] flex items-center justify-center border border-gray-700 opacity-80",children:u.jsx("div",{className:"w-2.5 h-2.5 bg-gray-400 rounded-sm"})})]})]}),i&&u.jsx("div",{className:`absolute inset-0 bg-black/80 backdrop-blur-sm flex flex-col justify-center items-center z-30 p-4 ${s==="pen"||s==="eraser"?"pointer-events-none":"pointer-events-auto"}`,children:u.jsxs("div",{className:"bg-[#252525] border border-gray-600 rounded-lg p-4 w-full max-w-md",children:[u.jsxs("h3",{className:"text-white text-sm font-bold mb-2 flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"Gemini API Key"]}),u.jsxs("p",{className:"text-gray-400 text-xs mb-3",children:["Get free key: ",u.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 underline",children:"aistudio.google.com"})]}),u.jsx("input",{type:"password",value:a,onChange:w=>l(w.target.value),placeholder:"AIza...",className:"w-full bg-[#1e1e1e] text-white text-xs px-3 py-2 rounded border border-gray-700 focus:border-purple-500 outline-none mb-3",onPointerDown:w=>w.stopPropagation()}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:C,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white text-xs py-2 rounded font-medium",children:"Save"}),u.jsx("button",{onClick:()=>o(!1),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white text-xs py-2 rounded font-medium",children:"Cancel"})]})]})})]})},ob=Vt.memo(({item:t,isSelected:e,onUpdate:A,onDragStop:n,onDragStart:r,onSelect:s,onGroup:i,activeTool:o="select",canGroup:a,isCtrlPressed:l,onDoubleClick:c,onRefreshPSD:d,onSocketMouseDown:f,onSocketMouseUp:h,onGenerate:m,isGenerating:C,onSaveCoordinate:Q})=>{var fs;const[g,p]=E.useState({visible:!1,x:0,y:0}),w=E.useRef(!1),[v,_]=E.useState(!1),[F,U]=E.useState(!1),[T,D]=E.useState(!1),[L,R]=E.useState(!1),[z,j]=E.useState(null),[ae,q]=E.useState(null),[J,Ae]=E.useState(!1),[N,O]=E.useState(null),[W,Z]=E.useState("stopped"),oe=E.useRef(null),ce=E.useRef(null),ve=E.useRef(null),{scale:Te,isSelecting:xe}=id(),Ie=E.useRef(t),NA=E.useRef(A);E.useEffect(()=>{Ie.current=t,NA.current=A},[t,A]),E.useEffect(()=>{let G=!1;if(t.driveFileId&&(t.type==="image"||t.type==="video"||t.type==="generation_node")){if(t.type==="generation_node"&&t.src&&t.src.startsWith("data:"),t.src&&t.src.startsWith("data:")&&t.type!=="generation_node"){q(t.src),Ae(!1);return}Ae(!0),O(null);const fe=t.type==="generation_node"||!t.src||t.src==="";t.type==="video"?Oa(t.driveFileId,fe).then(Ce=>{G||(q(Ce),Ae(!1))}).catch(Ce=>{if(console.warn("Authenticated video load failed, falling back to direct URL:",Ce),!G){const Me=`https://drive.google.com/uc?export=download&id=${t.driveFileId}`;q(Me),Ae(!1)}}):Oa(t.driveFileId,fe).then(Ce=>{G||(q(Ce),Ae(!1))}).catch(Ce=>{if(!G){const Me=Ce instanceof Error?Ce.message:String(Ce);console.error("Failed to load media from Drive:",{itemId:t.id,fileName:t.fileName,type:t.type,driveFileId:t.driveFileId,error:Me}),Ae(!1),O(Me),t.src&&!t.src.startsWith("blob:")&&t.src!==""?q(t.src):q(null)}})}else!t.src||t.src===""?(q(null),Ae(!1)):t.src&&t.src.startsWith("blob:")?(console.warn("Ignoring blob URL for item without driveFileId:",t.id,t.fileName),q(null),Ae(!1)):(q(null),Ae(!1));return()=>{G=!0}},[t.driveFileId,t.src,t.type,t.fileName]),E.useEffect(()=>{D(!1)},[t.src,ae]),E.useEffect(()=>()=>{ve.current&&(clearInterval(ve.current),ve.current=null)},[]),E.useEffect(()=>{if(T)return;const fe=setTimeout(()=>{let Ce,Me;if(t.type==="image"&&oe.current){if(!oe.current.complete)return;Ce=oe.current.naturalWidth,Me=oe.current.naturalHeight}else if(t.type==="video"&&ce.current){if(ce.current.readyState<2)return;Ce=ce.current.videoWidth,Me=ce.current.videoHeight}else return;if(Ce>0&&Me>0){const H=Ce/Me,ee=t.width/t.height;if(Math.abs(H-ee)>.01){const ie=t.width/H;A(t.id,{height:ie}),D(!0)}else D(!0)}},0);return()=>clearTimeout(fe)},[t,T,A]),E.useEffect(()=>{if(!e||t.type!=="video")return;const G=fe=>{if((fe.key==="ArrowLeft"||fe.key==="ArrowRight")&&(fe.preventDefault(),ce.current)){ce.current.paused||ce.current.pause(),Z("paused");const Ce=1/30;fe.key==="ArrowLeft"?ce.current.currentTime=Math.max(0,ce.current.currentTime-Ce):ce.current.currentTime=Math.min(ce.current.duration||0,ce.current.currentTime+Ce)}};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[e,t.type]);const Bt=G=>{e&&(G.preventDefault(),G.stopPropagation(),p({visible:!0,x:G.clientX,y:G.clientY}))},oA=()=>{p({visible:!1,x:0,y:0})},Mt=()=>{A(t.id,{flipHorizontal:!t.flipHorizontal}),oA()},Ot=()=>{A(t.id,{flipVertical:!t.flipVertical}),oA()},Bo=G=>{G.stopPropagation(),i&&i(),oA()},ei=async()=>{var G,fe,Ce,Me;if(oA(),!window.electronAPI){alert(`      .
          .`);return}if(t.type==="image"&&((G=t.fileName)!=null&&G.toLowerCase().endsWith(".psd"))&&t.originalFilePath){(fe=window.electronAPI)!=null&&fe.openInPhotoshop&&await window.electronAPI.openInPhotoshop(t.originalFilePath);return}try{let H=null,ee=t.fileName||`image_${t.id}.png`;if(ae)H=await(await fetch(ae)).blob();else if(t.driveFileId){const{loadImageFromDrive:pe}=await Nn(async()=>{const{loadImageFromDrive:Ee}=await Promise.resolve().then(()=>rb);return{loadImageFromDrive:Ee}},void 0),we=await pe(t.driveFileId);H=await(await fetch(we)).blob()}else t.src&&(t.src.startsWith("data:")?H=await(await fetch(t.src)).blob():t.src.startsWith("blob:")&&(H=await(await fetch(t.src)).blob()));if(!H){alert("   .");return}const ie=await H.arrayBuffer();if((Ce=window.electronAPI)!=null&&Ce.savePSDFile){const pe=await window.electronAPI.savePSDFile(ie,ee);pe.success&&pe.path?(Me=window.electronAPI)!=null&&Me.openInPhotoshop&&await window.electronAPI.openInPhotoshop(pe.path):alert(`  : ${pe.error||"Unknown error"}`)}else alert("     .")}catch(H){console.error("Failed to open image in Photoshop:",H),alert(`  : ${H instanceof Error?H.message:"Unknown error"}`)}},[le,Gn]=E.useState(t.rotation||0),sn=E.useRef(G=>{const fe=G.movementX;Gn(Ce=>{let Me=Ce+fe*.5;return G.shiftKey&&(Me=Math.round(Me/22.5)*22.5),Me})}).current,aA=E.useRef(()=>{_(!1),window.removeEventListener("mousemove",sn),window.removeEventListener("mouseup",aA),document.body.style.cursor=""}).current,us=E.useRef(t.rotation||0);E.useEffect(()=>{v&&(us.current=le)},[le,v]);const Zt=E.useCallback(()=>{_(!1),window.removeEventListener("mousemove",sn),window.removeEventListener("mouseup",Zt),document.body.style.cursor="",NA.current(Ie.current.id,{rotation:us.current})},[]),De=G=>{G.stopPropagation(),G.preventDefault();const fe=t.rotation||0;Gn(fe),us.current=fe,_(!0),window.addEventListener("mousemove",sn),window.addEventListener("mouseup",Zt),document.body.style.cursor="ew-resize"},on=E.useRef(null),jA=G=>{if(!on.current)return;const{width:fe,height:Ce,x:Me}=on.current,H=(G.clientX-Me)/Te,ee=fe/Ce;let ie=Math.max(20,fe+H),pe=ie/ee;NA.current(Ie.current.id,{width:ie,height:pe})},lA=()=>{U(!1),window.removeEventListener("mousemove",jA),window.removeEventListener("mouseup",lA),document.body.style.cursor="",on.current=null},ds=G=>{G.stopPropagation(),G.preventDefault(),U(!0),on.current={width:t.width,height:t.height,x:G.clientX,y:G.clientY},window.addEventListener("mousemove",jA),window.addEventListener("mouseup",lA),document.body.style.cursor="se-resize"},ti=`
        scaleX(${t.flipHorizontal?-1:1})
        scaleY(${t.flipVertical?-1:1})
    `,an=(G,fe=!1,Ce,Me)=>{const H=t.nodeInputs&&t.nodeInputs[G];let ee={};if(t.type==="generation_node")fe?ee={right:-12,top:"10%",transform:"translate(50%, -50%)"}:G==="input_0"?ee={left:-12,bottom:"30%",transform:"translate(-50%, 50%)"}:G==="input_1"&&(ee={left:-12,bottom:"10%",transform:"translate(-50%, 50%)"});else if(fe)ee={right:-12,top:"10%",transform:"translate(50%, -50%)"};else{const ie=parseInt(G.split("_")[1]||"0");ee={left:-12,top:`${100/(3+1)*(ie+1)}%`,transform:"translate(-50%, -50%)"}}return u.jsx("div",{className:`absolute w-6 h-6 rounded-full border border-gray-600 z-50 cursor-pointer transition-colors group flex items-center justify-center
                    ${H?"bg-blue-600":"bg-gray-800 hover:bg-blue-500"}`,style:ee,onMouseDown:ie=>{ie.stopPropagation(),ie.preventDefault(),f&&f(t.id,G,ie)},onMouseUp:ie=>{ie.stopPropagation(),console.log("Socket MouseUp:",t.id,G),h&&h(t.id,G)},title:Ce||(fe?"Output":"Input"),children:Me?u.jsx("span",{className:"text-[10px] text-white pointer-events-none",children:Me}):u.jsx("div",{className:"w-2 h-2 bg-white rounded-full opacity-50 pointer-events-none"})},G)},[mr,Kt]=E.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsx(Wg,{size:{width:t.width,height:t.height},position:mr?void 0:{x:t.x,y:t.y},scale:Te,bounds:o==="pen"||o==="eraser"?"parent":void 0,enableResizing:e&&o!=="pen"&&o!=="eraser",onDragStart:(G,fe)=>{if(Kt(!0),o==="pen"||o==="eraser")return;const Ce=w.current;!e&&!Ce&&s(t.id,l,!1),r&&r(t.id)},onDrag:(G,fe)=>{},onDragStop:(G,fe)=>{Kt(!1),n?n(t.id,fe.x,fe.y):A(t.id,{x:fe.x,y:fe.y})},onMouseDownCapture:G=>{const fe=G.target;fe.className&&typeof fe.className=="string"&&fe.className.includes("react-resizable-handle")&&G.button!==0&&(G.preventDefault(),G.stopPropagation())},onResizeStart:G=>{if(!e||(G.originalEvent||G).button!==0)return!1;G.stopPropagation()},onResizeStop:(G,fe,Ce,Me,H)=>{const ee=parseInt(Ce.style.width),ie=parseInt(Ce.style.height);t.type==="generation_node"?A(t.id,{width:Math.max(ee,470),height:Math.max(ie,470),...H}):A(t.id,{width:ee,height:ie,...H})},minWidth:t.type==="generation_node"?470:void 0,minHeight:t.type==="generation_node"?470:void 0,onMouseDown:G=>{const fe=G.button===1,Ce=G.button===2&&G.altKey,Me=G.button===2&&!G.altKey&&!G.ctrlKey&&!G.shiftKey;if(fe||Ce||Me)return;if(o==="pen"||o==="eraser"){G.stopPropagation(),G.preventDefault();return}const H=G.shiftKey;if(H&&G.button===0){G.stopPropagation(),w.current=!0,console.log("Shift+Click detected in MediaItem, calling onSelect"),s(t.id,!1,!0);return}l&&!H?G.altKey?ds(G):De(G):(G.stopPropagation(),w.current=G.shiftKey,G.button===0&&!H&&(e||s(t.id,l,!1)))},lockAspectRatio:!0,className:`absolute select-none ${o==="pen"||o==="eraser"?"pointer-events-none":""}`,style:{zIndex:t.zIndex,cursor:l?"ew-resize":"move",overflow:t.type==="generation_node"&&C?"visible":void 0},resizeHandleStyles:{topLeft:{cursor:e?"nwse-resize":"default"},topRight:{cursor:e?"nesw-resize":"default"},bottomLeft:{cursor:e?"nesw-resize":"default"},bottomRight:{cursor:e?"nwse-resize":"default"}},onContextMenu:Bt,disableDragging:v||F||l||o==="pen"||o==="eraser","data-item-id":t.id,children:u.jsx("div",{className:"w-full h-full relative","data-item-id":t.id,onDoubleClick:G=>{G.stopPropagation(),c&&o==="select"&&c(t.id)},children:u.jsxs("div",{className:"w-full h-full relative rounded shadow-sm select-none !overflow-visible",style:{transform:`rotate(${v?le:t.rotation||0}deg)`,overflow:"visible",...e&&!xe?{boxShadow:`0 0 0 ${Math.max(2,4/Te)}px rgb(59 130 246)`}:{}},children:[u.jsxs("div",{className:`w-full h-full relative ${["image","video","ad"].includes(t.type)?"overflow-hidden rounded":""}`,children:[J&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/50 backdrop-blur-sm z-10",children:u.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}),N&&u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-900/80 p-4 z-10 text-center pointer-events-auto",onClick:G=>G.stopPropagation(),children:[u.jsx("span",{className:"text-red-500 text-2xl mb-2",children:""}),u.jsx("p",{className:"text-red-400 text-sm font-medium mb-1",children:"Media Load Failed"}),u.jsx("p",{className:"text-gray-400 text-xs break-all line-clamp-3",title:N,children:N})]}),t.type==="prompt_node"&&u.jsx(sb,{item:t,onUpdate:A}),t.type==="generation_node"&&u.jsxs(u.Fragment,{children:[ae&&u.jsx("img",{src:ae,alt:"Generated",className:"absolute inset-0 w-full h-full object-fill pointer-events-none",draggable:!1}),u.jsx(ib,{item:t,onGenerate:()=>m&&m(t.id),onUpdate:A,isGenerating:C,driveImageUrl:ae||null,activeTool:o})]}),t.type==="image"&&u.jsx("img",{src:ae||(t.driveFileId&&t.src&&t.src.startsWith("blob:")?void 0:t.src),alt:t.fileName||"Image",className:"w-full h-full object-fill pointer-events-none",style:{transform:ti,opacity:L?.5:1},draggable:!1,onError:()=>{console.error("Image load error:",t.src),O("Failed to load image")}}),t.type==="video"&&u.jsxs(u.Fragment,{children:[u.jsx("video",{ref:ce,src:ae||(t.driveFileId&&t.src&&t.src.startsWith("blob:")?void 0:t.src),className:"w-full h-full object-cover cursor-pointer",style:{transform:ti},loop:!0,muted:!0,playsInline:!0,draggable:!1,onClick:G=>{G.stopPropagation(),ce.current&&(W==="playing"?(ce.current.pause(),ce.current.currentTime=0,Z("stopped")):(ce.current.play(),Z("playing")))},onPlay:()=>Z("playing"),onPause:()=>{},onError:()=>{console.warn("Video load error (retrying?):",ae)}}),W==="stopped"&&!N&&u.jsxs("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer",onClick:G=>{G.stopPropagation(),ce.current&&(ce.current.play(),Z("playing"))},style:{pointerEvents:o==="pen"||o==="eraser"?"none":"auto"},children:[u.jsx("div",{className:"absolute top-4 left-4 px-3 py-1.5 bg-black/70 backdrop-blur-sm text-white text-xs font-semibold rounded-lg border border-white/20",children:"VIDEO"}),u.jsx("div",{className:"w-20 h-20 rounded-full bg-black/60 backdrop-blur-md flex items-center justify-center border-2 border-white/30 hover:bg-black/80 hover:scale-110 transition-all",children:u.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M8 5v14l11-7z"})})})]})]}),t.type==="ad"&&u.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center text-gray-500 text-xs",children:"Ad Banner"})]}),t.type==="prompt_node"&&an("output",!0,"Output","T"),t.type==="generation_node"&&u.jsxs(u.Fragment,{children:[an("input_0",!1,"Text","T"),an("input_1",!1,"Image",""),an("output",!0,"Image","")]}),t.type==="image"&&an("output",!0,"Image",""),t.type==="image"&&((fs=t.fileName)==null?void 0:fs.toLowerCase().endsWith(".psd"))&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:async G=>{var Ce,Me,H;G.stopPropagation();const fe=t.originalFilePath;if(!fe){window.electronAPI?alert(`     .
    .`):alert(`      .
          .`),console.warn("PSD file path not available:",t.fileName,t.originalFilePath);return}if((Ce=window.electronAPI)!=null&&Ce.openInPhotoshop){if(await window.electronAPI.openInPhotoshop(fe),(Me=window.electronAPI)!=null&&Me.watchPSDFile)try{await window.electronAPI.watchPSDFile(fe),console.log("Started watching PSD file:",fe)}catch(ee){console.error("Failed to watch PSD file:",ee)}if((H=window.electronAPI)!=null&&H.checkPSDFileModified){R(!0);try{const ee=await window.electronAPI.checkPSDFileModified(fe);ee.success&&ee.modifiedTime&&j(ee.modifiedTime)}catch(ee){console.error("Failed to get initial file stats:",ee)}ve.current&&clearInterval(ve.current),ve.current=setInterval(async()=>{try{const ee=await window.electronAPI.checkPSDFileModified(fe);ee.success&&ee.modifiedTime&&(z&&ee.modifiedTime>z?(console.log("PSD file changed detected via polling"),d&&d(t.id),j(ee.modifiedTime)):z||j(ee.modifiedTime))}catch(ee){console.error("Polling error:",ee)}},2e3)}}},className:`absolute top-2 right-2 z-[100] bg-blue-600 hover:bg-blue-700 text-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg transition-colors pointer-events-auto ${t.originalFilePath?"":"opacity-50"}`,style:{zIndex:1e4},title:t.originalFilePath?"Open in Photoshop":"  ( )",children:u.jsx("span",{className:"text-xs font-bold",children:"PS"})}),t.originalFilePath&&u.jsx("button",{onClick:async G=>{G.stopPropagation(),d&&d(t.id)},className:"absolute top-2 right-12 z-[100] bg-green-600 hover:bg-green-700 text-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg transition-colors pointer-events-auto",style:{zIndex:1e4},title:" (   )"}),L&&u.jsx("div",{className:"absolute top-2 right-24 z-[100] bg-yellow-600 rounded-full w-2 h-2 animate-pulse pointer-events-none",style:{zIndex:1e4},title:"  ..."})]}),e&&(t.type==="image"||t.type==="video")&&u.jsx("div",{style:{pointerEvents:"none",position:"absolute",top:"-32px",left:"50%",transform:"translateX(-50%)",zIndex:10},children:u.jsx("div",{onMouseDown:De,onClick:G=>G.stopPropagation(),className:"w-6 h-6 rounded-full cursor-ew-resize flex items-center justify-center text-white text-xs shadow-lg transition-all bg-blue-500 opacity-100",style:{pointerEvents:"auto"},title:"Drag Left/Right to rotate (Shift for 22.5 snap)",children:""})})]})})}),g.visible&&as.createPortal(u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:oA,onContextMenu:G=>G.preventDefault()}),u.jsxs("div",{className:"fixed bg-gray-800 border border-gray-700 rounded shadow-lg py-1 z-[9999] min-w-[160px]",style:{left:g.x,top:g.y},children:[a&&u.jsxs("button",{onClick:Bo,className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-2 border-b border-gray-700",children:[u.jsx("span",{children:"Group"}),u.jsx("span",{className:"text-xs text-gray-400",children:"Ctrl+G"})]}),u.jsx("button",{onClick:()=>{Q&&Q(t.id),oA()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-2",children:u.jsx("span",{children:" Save Coordinate"})}),u.jsx("button",{onClick:Mt,className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-2",children:u.jsx("span",{children:" Flip Horizontal"})}),u.jsx("button",{onClick:Ot,className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-2",children:u.jsx("span",{children:" Flip Vertical"})}),t.type==="image"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-px bg-gray-700 my-1"}),u.jsx("button",{onClick:ei,className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-2",children:u.jsx("span",{children:"Open in Photoshop"})})]})]})]}),document.body)]})}),ab=({group:t,isSelected:e,onUpdate:A,onDrag:n,onDragStart:r,onSelect:s,onNameChange:i,onFormatMenuOpen:o,onUngroup:a,activeTool:l="select",onSaveCoordinate:c})=>{const[d,f]=E.useState(!1),[h,m]=E.useState(t.name),[C,Q]=E.useState({visible:!1,x:0,y:0}),g=Vt.useRef(null),p=Vt.useRef(null),{scale:w}=id(),v=T=>{T.stopPropagation(),f(!0),o&&o(t.id)},_=T=>{T.stopPropagation(),s(t.id)},F=T=>{l==="pen"||l==="eraser"||(T.preventDefault(),T.stopPropagation(),Q({visible:!0,x:T.clientX,y:T.clientY}))},U=()=>{Q({visible:!1,x:0,y:0})};return u.jsxs(u.Fragment,{children:[u.jsxs(Wg,{size:{width:t.width,height:t.height},position:{x:t.x,y:t.y},scale:w,enableResizing:e&&l!=="pen"&&l!=="eraser",onDragStart:()=>{if(l==="pen"||l==="eraser")return!1;r&&r(t.id)},onDrag:(T,D)=>{if(l==="pen"||l==="eraser")return!1;n&&n(t.id,{x:D.x,y:D.y})},onDragStop:(T,D)=>{if(l==="pen"||l==="eraser")return!1;A(t.id,{x:D.x,y:D.y})},onResizeStop:(T,D,L,R,z)=>{A(t.id,{width:parseInt(L.style.width),height:parseInt(L.style.height),...z})},onMouseDown:T=>{var R;const D=T.button===1,L=T.button===2&&T.altKey;if(!(D||L)){if(l==="pen"||l==="eraser"){T.stopPropagation(),T.preventDefault();return}(R=p.current)!=null&&R.contains(T.target)||(T.stopPropagation(),s(t.id))}},onContextMenu:F,className:`absolute ${e?"ring-4 ring-yellow-400/50":"ring-2 ring-gray-500/30"} ${l==="pen"||l==="eraser"?"pointer-events-none":""}`,style:{zIndex:0},"data-item-id":t.id,children:[u.jsx("div",{ref:p,className:"absolute -top-8 left-0 w-full h-8 bg-gray-800 border-2 border-gray-600 rounded-t-lg pointer-events-none flex items-center px-2",style:{borderBottom:"none",zIndex:1e3},children:u.jsx("div",{ref:g,className:`flex-1 text-white text-xs font-medium cursor-pointer ${l==="pen"||l==="eraser"?"pointer-events-none":"pointer-events-auto"}`,onClick:T=>{T.stopPropagation(),_(T)},onMouseDown:T=>{T.stopPropagation()},onDoubleClick:v,style:{fontSize:`${t.fontSize||12}px`,color:t.color||"#ffffff",fontFamily:t.fontFamily||"Inter, sans-serif"},children:d?u.jsx("input",{type:"text",value:h,onChange:T=>m(T.target.value),onBlur:()=>{f(!1),i(t.id,h)},onKeyDown:T=>{T.stopPropagation(),T.key==="Enter"?(f(!1),i(t.id,h)):T.key==="Escape"&&(f(!1),m(t.name))},onClick:T=>{T.stopPropagation()},autoFocus:!0,className:"bg-gray-700 px-1 outline-none w-full",style:{fontSize:`${t.fontSize||12}px`,color:t.color||"#ffffff",fontFamily:t.fontFamily||"Inter, sans-serif"}}):t.name})}),u.jsx("div",{className:"w-full h-full border-2 border-dashed border-gray-500/50 rounded-b-lg pointer-events-none",style:{backgroundColor:(()=>{const T=t.backgroundColor||"#000000",D=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(T);return D?`rgba(${parseInt(D[1],16)}, ${parseInt(D[2],16)}, ${parseInt(D[3],16)}, 0.3)`:"rgba(0, 0, 0, 0.3)"})(),borderTop:"none"}}),e&&u.jsxs("div",{className:"absolute -top-16 left-1/2 flex items-center gap-2 bg-gray-800 rounded-full shadow-xl border border-gray-600 px-3 py-1.5 z-[10002]",style:{transform:`translateX(-50%) scale(${1/w})`,transformOrigin:"bottom center",pointerEvents:l==="pen"||l==="eraser"?"none":"auto"},onMouseDown:T=>T.stopPropagation(),onClick:T=>T.stopPropagation(),children:[u.jsxs("div",{className:"relative group/color w-5 h-5 cursor-pointer hover:scale-110 transition-transform",title:" ",children:[u.jsx("div",{className:"w-full h-full rounded-full border border-gray-400 shadow-sm",style:{backgroundColor:t.backgroundColor||"#374151"}}),u.jsx("input",{type:"color",value:t.backgroundColor||"#000000",onChange:T=>A(t.id,{backgroundColor:T.target.value}),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),u.jsx("div",{className:"w-px h-4 bg-gray-600"}),u.jsx("button",{onClick:T=>{T.stopPropagation(),a&&a(t.id)},className:"text-gray-300 hover:text-red-400 transition-colors flex items-center justify-center p-0.5",title:" ",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polyline",{points:"3 6 5 6 21 6"}),u.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]}),C.visible&&as.createPortal(u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:U,onContextMenu:T=>T.preventDefault()}),u.jsxs("div",{className:"fixed bg-gray-800 border border-gray-700 rounded shadow-lg py-1 z-[9999] min-w-[160px]",style:{left:C.x,top:C.y},children:[u.jsxs("button",{onClick:()=>{a&&a(t.id),U()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-2 border-b border-gray-700",children:[u.jsx("span",{children:"Ungroup"}),u.jsx("span",{className:"text-xs text-gray-400",children:"Ctrl+Shift+G"})]}),u.jsx("button",{onClick:()=>{c&&c(t.id),U()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-2",children:u.jsx("span",{children:" Save Coordinate"})})]})]}),document.body)]})},lb=Vt.memo(ab),cb=Vt.memo(({item:t,isSelected:e,onUpdate:A,onDragStop:n,onSelect:r,onGroup:s,activeTool:i="select",canGroup:o,isCtrlPressed:a,isNewlyCreated:l=!1,onEditStart:c,onFormatMenuOpen:d,onSaveCoordinate:f})=>{const[h,m]=E.useState(!1),[C,Q]=E.useState(t.content),[g,p]=E.useState({visible:!1,x:0,y:0}),[w,v]=E.useState(!1),[_,F]=E.useState(null),U=E.useRef(null),T=E.useRef(null),D=E.useRef(0),{scale:L}=id();E.useEffect(()=>{h&&U.current&&(U.current.textContent!==t.content&&(U.current.textContent=t.content),setTimeout(()=>{var N,O,W;if(U.current){U.current.focus();const Z=document.createRange(),oe=window.getSelection();let ce=U.current,ve=0;if(U.current.childNodes.length>0){let Te=U.current.childNodes[U.current.childNodes.length-1];Te.nodeType===Node.TEXT_NODE?(ce=Te,ve=((N=Te.textContent)==null?void 0:N.length)||0):(ce=U.current,ve=((O=U.current.textContent)==null?void 0:O.length)||0)}else ve=((W=U.current.textContent)==null?void 0:W.length)||0;Z.setStart(ce,ve),Z.setEnd(ce,ve),oe==null||oe.removeAllRanges(),oe==null||oe.addRange(Z)}},0))},[h]),E.useEffect(()=>{l&&U.current&&(m(!0),c&&c(t.id))},[l,t.id,c]);const R=N=>{N.stopPropagation(),N.preventDefault(),T.current&&(clearTimeout(T.current),T.current=null),m(!0),Q(t.content),d&&d(t.id)},z=N=>{N.preventDefault(),N.stopPropagation(),h&&p({visible:!0,x:N.clientX,y:N.clientY})},j=()=>{p({visible:!1,x:0,y:0})},ae=N=>{N.stopPropagation(),s&&s(),j()},q=()=>{m(!1);const N=C.trim()===""?"Text":C;Q(N),A(t.id,{content:N})};E.useEffect(()=>{if(U.current&&!w){U.current.style.height="auto",U.current.style.width="auto";const N=U.current.scrollWidth+20,O=U.current.scrollHeight+10;(N!==t.width||O!==t.height)&&A(t.id,{width:N,height:O})}},[t.content,t.fontSize,t.fontFamily,w]),E.useEffect(()=>()=>{T.current&&clearTimeout(T.current)},[]);const[J,Ae]=E.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsx(Wg,{size:{width:t.width,height:t.height},position:J?void 0:{x:t.x,y:t.y},scale:L,onDragStart:(N,O)=>{Ae(!0)},onDrag:(N,O)=>{},onDragStop:(N,O)=>{Ae(!1),n?n(t.id,O.x,O.y):A(t.id,{x:O.x,y:O.y})},enableResizing:e&&!h&&i!=="pen"&&i!=="eraser",minWidth:50,minHeight:30,onResizeStart:()=>{v(!0),F({width:t.width,height:t.height,fontSize:t.fontSize,letterSpacing:t.letterSpacing||0})},onResizeStop:(N,O,W,Z,oe)=>{const ce=parseInt(W.style.width),ve=parseInt(W.style.height);if(_){const Te=ce/_.width,xe=ve/_.height,Ie=Math.abs(Te-1)>.05&&Math.abs(xe-1)<.05;let NA={width:ce,height:ve,...oe};if(Ie){const Bt=ce-_.width,oA=t.content.length||1,Mt=Bt/oA,Ot=(_.letterSpacing||0)+Mt;NA.letterSpacing=Math.max(0,Ot)}else{const Bt=(Te+xe)/2,oA=Math.max(8,Math.round(_.fontSize*Bt));NA.fontSize=oA}A(t.id,NA)}else A(t.id,{width:ce,height:ve,...oe});v(!1),F(null)},resizeHandleComponent:e?{bottomRight:u.jsx("div",{className:"w-3 h-3 bg-white border-[3px] border-[#3b82f6] rounded-full shadow-md absolute bottom-0 right-0 translate-x-1/2 translate-y-1/2 cursor-nwse-resize"}),bottomLeft:u.jsx("div",{className:"w-3 h-3 bg-white border-[3px] border-[#3b82f6] rounded-full shadow-md absolute bottom-0 left-0 -translate-x-1/2 translate-y-1/2 cursor-nesw-resize"}),topRight:u.jsx("div",{className:"w-3 h-3 bg-white border-[3px] border-[#3b82f6] rounded-full shadow-md absolute top-0 right-0 translate-x-1/2 -translate-y-1/2 cursor-nesw-resize"}),topLeft:u.jsx("div",{className:"w-3 h-3 bg-white border-[3px] border-[#3b82f6] rounded-full shadow-md absolute top-0 left-0 -translate-x-1/2 -translate-y-1/2 cursor-nwse-resize"})}:void 0,onMouseDown:N=>{const O=N.button===1,W=N.button===2&&N.altKey;if(!(O||W)){if(i==="pen"||i==="eraser"){N.stopPropagation(),N.preventDefault();return}if(N.stopPropagation(),!h){r(t.id,a,N.shiftKey);const Z=Date.now();Z-D.current<300&&N.button===0?(T.current&&(clearTimeout(T.current),T.current=null),m(!0),Q(t.content),d&&d(t.id),D.current=0):(D.current=Z,T.current=setTimeout(()=>{T.current=null},300))}}},onMouseDownCapture:N=>{const O=N.target;O.className&&typeof O.className=="string"&&O.className.includes("react-resizable-handle")&&N.button!==0&&(N.preventDefault(),N.stopPropagation())},className:`absolute ${e?"border-2 border-[#3b82f6]":""} ${i==="pen"||i==="eraser"?"pointer-events-none":""}`,style:{zIndex:t.zIndex},disableDragging:h||i==="pen"||i==="eraser","data-item-id":t.id,children:u.jsx("div",{ref:U,contentEditable:h,suppressContentEditableWarning:!0,onDoubleClick:N=>{N.stopPropagation(),N.preventDefault(),R(N)},onClick:N=>{h&&N.stopPropagation()},onContextMenu:N=>{N.stopPropagation(),z(N)},onBlur:q,onInput:N=>{Q(N.currentTarget.textContent||"")},onKeyDown:N=>{var O;(N.ctrlKey||N.metaKey)&&["c","v","a","x","C","V","A","X"].includes(N.key)||((N.key==="Delete"||N.key==="Backspace")&&N.stopPropagation(),N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),(O=U.current)==null||O.blur()))},className:`w-full h-full p-2 outline-none ${h?"bg-white/10":""}`,style:{fontSize:`${t.fontSize}px`,color:t.color,fontFamily:t.fontFamily,letterSpacing:t.letterSpacing?`${t.letterSpacing}px`:"normal",cursor:h?"text":"move",whiteSpace:"pre",overflow:"hidden",userSelect:h?"text":"none"},children:!h&&t.content})}),g.visible&&as.createPortal(u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:j,onContextMenu:N=>N.preventDefault()}),u.jsxs("div",{className:"fixed bg-gray-800 border border-gray-700 rounded shadow-lg py-1 z-[9999] min-w-[160px]",style:{left:g.x,top:g.y},children:[o&&u.jsxs("button",{onClick:ae,className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-2 border-b border-gray-700",children:[u.jsx("span",{children:"Group"}),u.jsx("span",{className:"text-xs text-gray-400",children:"Ctrl+G"})]}),u.jsx("button",{onClick:()=>{f&&f(t.id),j()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-2",children:u.jsx("span",{children:" Save Coordinate"})}),!o&&u.jsx("div",{className:"px-4 py-2 text-sm text-gray-500 italic",children:"Select 2+ items to group"})]})]}),document.body)]})}),ub=({arrow:t,getItemPosition:e,isSelected:A=!1,onSelect:n,items:r,scale:s=1})=>{const i=E.useMemo(()=>e(t.sourceId),[e,t.sourceId,r]),o=E.useMemo(()=>e(t.targetId),[e,t.targetId,r]);if(!i||!o)return null;const a=i.x+i.width,l=i.y+i.height/2,c=o.x,d=o.y+o.height/2,f=Math.abs(c-a),h=Math.max(f*.5,50),m=a+h,C=l,Q=c-h,g=d,p=`M ${a} ${l} C ${m} ${C}, ${Q} ${g}, ${c} ${d}`,w=`M ${a} ${l} C ${m} ${C}, ${Q} ${g}, ${c} ${d}`,v=Math.max(t.strokeWidth/s,1.5),_=F=>{F.stopPropagation(),n&&n(t.id)};return u.jsxs("g",{children:[u.jsx("defs",{children:u.jsx("marker",{id:`arrowhead-${t.id}`,markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:u.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:t.color})})}),u.jsx("path",{d:w,stroke:"transparent",strokeWidth:Math.max(v*3,10),fill:"none",onClick:_,style:{cursor:"pointer",pointerEvents:"stroke"}}),u.jsx("path",{d:p,stroke:A?"#60a5fa":t.color,strokeWidth:A?v+1:v,fill:"none",markerEnd:`url(#arrowhead-${t.id})`,onClick:_,style:{cursor:"pointer",pointerEvents:"none"}})]})},db=Vt.memo(ub),fb=({onBackToList:t,onShare:e,onSave:A,opacity:n,onOpacityChange:r,isAlwaysOnTop:s,onToggleAlwaysOnTop:i})=>u.jsxs("div",{className:"absolute top-6 left-6 z-50 flex gap-4 items-center select-none",children:[u.jsxs("div",{className:"flex items-center gap-1 bg-black/40 backdrop-blur-xl rounded-2xl p-2 shadow-2xl border border-white/10 ring-1 ring-white/5",children:[t&&u.jsxs("button",{onClick:t,className:"px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 text-gray-300 hover:text-white hover:bg-white/10 hover:shadow-lg hover:-translate-y-0.5 flex items-center gap-2",title:"Back to List",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M19 12H5"}),u.jsx("path",{d:"M12 19l-7-7 7-7"})]}),u.jsx("span",{className:"hidden sm:inline",children:"List"})]}),e&&u.jsxs("button",{onClick:e,className:"px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 text-gray-300 hover:text-white hover:bg-blue-600/20 hover:text-blue-200 hover:shadow-lg hover:-translate-y-0.5 flex items-center gap-2",title:"Share Board",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),u.jsx("span",{className:"hidden sm:inline",children:"Share"})]}),u.jsxs("button",{onClick:i,className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 flex items-center gap-2 ${s?"bg-blue-600/90 text-white shadow-[0_0_15px_rgba(37,99,235,0.4)] ring-1 ring-blue-400/50":"text-gray-300 hover:text-white hover:bg-white/10 hover:shadow-lg hover:-translate-y-0.5"}`,title:"Toggle Always on Top",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s?"fill-white/20":"",children:[u.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"22"}),u.jsx("path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"})]}),u.jsx("span",{className:"hidden sm:inline",children:s?"On Top":"Pin"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 bg-black/40 backdrop-blur-xl rounded-2xl px-4 py-3 shadow-2xl border border-white/10 ring-1 ring-white/5 h-full group transition-all duration-300 hover:bg-black/60",children:[u.jsx("span",{className:"text-xs font-medium text-gray-400 group-hover:text-gray-200 transition-colors uppercase tracking-wider",children:"Opacity"}),u.jsx("input",{type:"range",min:"0.01",max:"1",step:"0.01",value:n,onChange:o=>r(parseFloat(o.target.value)),className:"w-24 h-1.5 bg-gray-700/50 rounded-lg appearance-none cursor-pointer slider hover:h-2 transition-all duration-200",style:{background:`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${n*100}%, #374151 ${n*100}%, #374151 100%)`}}),u.jsxs("span",{className:"text-xs font-mono text-gray-400 w-9 text-right group-hover:text-white transition-colors",children:[Math.round(n*100),"%"]})]})]}),hb=({activeTool:t,onToolChange:e,onSettingsClick:A})=>{const n=[{id:"select",icon:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"})}),label:"Select (V)"},{id:"text",icon:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polyline",{points:"4 7 4 4 20 4 20 7"}),u.jsx("line",{x1:"9",y1:"20",x2:"15",y2:"20"}),u.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"20"})]}),label:"Text (T)"},{id:"arrow",icon:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),u.jsx("polyline",{points:"12 5 19 12 12 19"})]}),label:"Arrow (A)"},{id:"pen",icon:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),label:"Pen (P)"},{id:"eraser",icon:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M2.5 12.5l7-7 12 12-7 7-12-12z"}),u.jsx("line",{x1:"12",y1:"19",x2:"22",y2:"19"})]}),label:"Eraser (E)"}];return u.jsxs("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 z-50 flex flex-col gap-6 select-none pointer-events-none",children:[u.jsx("div",{className:"flex flex-col gap-3 bg-black/40 backdrop-blur-xl rounded-2xl p-3 shadow-2xl border border-white/10 ring-1 ring-white/5 pointer-events-auto",children:n.map(r=>u.jsxs("button",{onClick:()=>e(r.id),className:`w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-300 group relative ${t===r.id?"bg-blue-600 text-white shadow-[0_0_20px_rgba(37,99,235,0.6)] scale-105 ring-1 ring-blue-400/50":"text-gray-400 hover:text-white hover:bg-white/10 hover:scale-110"}`,title:r.label,children:[r.icon,u.jsx("span",{className:"absolute left-full ml-4 px-2 py-1 bg-gray-900 border border-gray-700 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50",children:r.label})]},r.id))}),u.jsx("div",{className:"flex flex-col gap-1 bg-black/40 backdrop-blur-xl rounded-2xl p-3 shadow-2xl border border-white/10 ring-1 ring-white/5 pointer-events-auto",children:u.jsxs("button",{onClick:A,className:"w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-300 text-gray-400 hover:text-white hover:bg-white/10 hover:scale-110 rotate-90 hover:rotate-0 group relative",title:"Settings",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"12",cy:"12",r:"3"}),u.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),u.jsx("span",{className:"absolute left-full ml-4 px-2 py-1 bg-gray-900 border border-gray-700 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50",children:"Settings"})]})})]})},$n=({label:t,value:e,onRecord:A,mode:n})=>{const[r,s]=E.useState(!1),i=E.useRef(null),o=E.useRef(new Set);E.useEffect(()=>{r&&i.current&&i.current.focus()},[r]);const a=d=>{d.preventDefault(),d.stopPropagation();let f=d.key;if(f==="Control"&&(f="Ctrl"),f==="Alt"&&(f="Alt"),f==="Shift"&&(f="Shift"),f===" "&&(f="Space"),f==="Escape"){s(!1),o.current.clear();return}if(o.current.add(f.toUpperCase()),n==="modifier"){let h=f;f==="Control"&&(h="Ctrl"),f==="Alt"&&(h="Alt"),f==="Shift"&&(h="Shift"),A({keys:[h],combo:h}),s(!1),o.current.clear()}else if(n==="shortcut"&&!["CTRL","ALT","SHIFT","META"].includes(f.toUpperCase())){const C=Array.from(o.current).join("+");A({keys:[],combo:C}),s(!1),o.current.clear()}},l=d=>{if(n==="shortcut")return;let f=d.key;f==="Control"&&(f="Ctrl"),f==="Alt"&&(f="Alt"),f==="Shift"&&(f="Shift"),f===" "&&(f="Space"),o.current.delete(f.toUpperCase())},c=d=>{if(n!=="pan"||!r)return;d.preventDefault(),d.stopPropagation();let f="Left";d.button===0?f="Left":d.button===1?f="Middle":d.button===2&&(f="Right");const h=Array.from(o.current).map(m=>m==="CTRL"?"Ctrl":m==="ALT"?"Alt":m==="SHIFT"?"Shift":m);A({keys:h,button:f}),s(!1),o.current.clear()};return u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm text-gray-400 font-medium",children:t}),u.jsx("div",{className:"relative",children:u.jsx("input",{ref:i,type:"text",readOnly:!0,value:r?"":e||"None",placeholder:r?"Press keys...":"",onClick:()=>s(!0),onKeyDown:a,onKeyUp:l,onMouseDown:c,onBlur:()=>{s(!1),o.current.clear()},className:`
                        w-full bg-gray-900 p-3 rounded-lg border cursor-pointer transition-all
                        text-sm font-mono text-white outline-none
                        ${r?"border-blue-500 ring-2 ring-blue-500/20 placeholder-blue-400":"border-gray-700 hover:border-gray-600"}
                    `})})]})},pb=({isOpen:t,onClose:e,settings:A,uiSettings:n,onSave:r})=>{const[s,i]=E.useState("shortcuts"),[o,a]=E.useState(A),[l,c]=E.useState(n);if(E.useEffect(()=>{t&&(a(A),c(n||{canvasBackgroundColor:"#1f1f1f",canvasBackgroundGradientColor:"#192024",dotPatternColor:"#999999"}))},[t,A,n]),!t)return null;const d=async()=>{var Q;if(o.photoshopPath&&((Q=window.electronAPI)!=null&&Q.setPhotoshopPath))try{await window.electronAPI.setPhotoshopPath(o.photoshopPath)}catch(g){console.error("Failed to save Photoshop path:",g)}r(o,l),e()},f=()=>{const Q=o.pan.keys.join(" + "),g=o.pan.button+" Click";return Q?`${Q} + ${g} Drag`:g+" Drag"},h=()=>{const Q=o.zoom.keys.join(" + "),g=o.zoom.button+" Click";return Q?`${Q} + ${g} Drag`:g+" Drag"},m=()=>{var p,w;const Q=((p=o.windowDrag)==null?void 0:p.keys.join(" + "))||"",g=(((w=o.windowDrag)==null?void 0:w.button)||"Right")+" Click";return Q?`${Q} + ${g} Drag`:g+" Drag"},C=()=>{var p,w;const Q=((p=o.opacityDrag)==null?void 0:p.keys.join(" + "))||"",g=(((w=o.opacityDrag)==null?void 0:w.button)||"Right")+" Click";return Q?`${Q} + ${g} Drag`:g+" Drag"};return u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] flex items-center justify-center",onMouseDown:Q=>{Q.target===Q.currentTarget&&e()},children:u.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl w-[500px] shadow-2xl flex flex-col max-h-[85vh]",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 pb-2 border-b border-gray-700",children:[u.jsx("h2",{className:"text-xl font-bold text-white",children:"Settings"}),u.jsxs("div",{className:"flex bg-gray-900 rounded-lg p-1",children:[u.jsx("button",{onClick:()=>i("shortcuts"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${s==="shortcuts"?"bg-gray-700 text-white shadow":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:"Shortcuts"}),u.jsx("button",{onClick:()=>i("ui"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${s==="ui"?"bg-gray-700 text-white shadow":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:"UI"})]})]}),u.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar flex-1",children:[s==="shortcuts"&&u.jsxs("div",{className:"space-y-6",children:[u.jsx($n,{label:"Pan Board",value:f(),mode:"pan",onRecord:Q=>a(g=>({...g,pan:{keys:Q.keys,button:Q.button||"Left"}}))}),u.jsx($n,{label:"Zoom Board (Drag)",value:h(),mode:"pan",onRecord:Q=>a(g=>({...g,zoom:{keys:Q.keys,button:Q.button||"Right"}}))}),u.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[u.jsx("h3",{className:"text-sm font-bold text-gray-300 mb-3",children:"Additional Zoom Controls"}),u.jsx($n,{label:"Wheel Modifier",value:o.zoomWheelModifier+" + Mouse Wheel",mode:"modifier",onRecord:Q=>a(g=>({...g,zoomWheelModifier:Q.combo||"None"}))})]}),u.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[u.jsx("h3",{className:"text-sm font-bold text-gray-300 mb-3",children:"Window Management"}),u.jsx($n,{label:"Move Window",value:m(),mode:"pan",onRecord:Q=>a(g=>({...g,windowDrag:{keys:Q.keys,button:Q.button||"Right"}}))}),u.jsx("div",{className:"h-4"}),u.jsx($n,{label:"Toggle Always On Top",value:o.alwaysOnTop||"",mode:"shortcut",onRecord:Q=>a(g=>({...g,alwaysOnTop:Q.combo}))}),u.jsx("div",{className:"h-4"}),u.jsx($n,{label:"Toggle Window Opacity (Ghost Mode)",value:o.opacity||"",mode:"shortcut",onRecord:Q=>a(g=>({...g,opacity:Q.combo}))}),u.jsx("div",{className:"h-4"}),u.jsx($n,{label:"Adjust Opacity (Drag)",value:C(),mode:"pan",onRecord:Q=>a(g=>({...g,opacityDrag:{keys:Q.keys,button:Q.button||"Right"}}))})]}),u.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[u.jsx("h3",{className:"text-sm font-bold text-gray-300 mb-3",children:"Drawing Tools"}),u.jsx($n,{label:"Decrease Brush Size",value:o.brushSizeDecrease||"",mode:"shortcut",onRecord:Q=>a(g=>({...g,brushSizeDecrease:Q.combo}))}),u.jsx("div",{className:"h-4"}),u.jsx($n,{label:"Increase Brush Size",value:o.brushSizeIncrease||"",mode:"shortcut",onRecord:Q=>a(g=>({...g,brushSizeIncrease:Q.combo}))})]}),u.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[u.jsx("h3",{className:"text-sm font-bold text-gray-300 mb-3",children:"External Applications"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm text-gray-400 font-medium",children:"Photoshop Executable Path"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:o.photoshopPath||"",onChange:Q=>a(g=>({...g,photoshopPath:Q.target.value})),placeholder:"C:\\\\Program Files\\\\Adobe\\\\Adobe Photoshop 2024\\\\Photoshop.exe",className:"flex-1 bg-gray-900 p-3 rounded-lg border border-gray-700 hover:border-gray-600 text-sm text-white outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20"}),u.jsx("button",{type:"button",onClick:async Q=>{var g;Q.preventDefault(),Q.stopPropagation(),console.log("Browse button clicked");try{if((g=window.electronAPI)!=null&&g.selectPhotoshopPath){const p=await window.electronAPI.selectPhotoshopPath();p.success&&p.path?a(w=>({...w,photoshopPath:p.path})):p.error&&alert(`Error: ${p.error}`)}else alert("File picker is only available in desktop app")}catch(p){console.error("Error selecting Photoshop path:",p),alert(`Error: ${p instanceof Error?p.message:"Unknown error"}`)}},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white transition-colors whitespace-nowrap cursor-pointer",children:"Browse"})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to auto-detect Photoshop installation"})]})]})]}),s==="ui"&&u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-sm font-bold text-gray-300 border-b border-gray-700 pb-2",children:"Canvas Colors"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{className:"text-sm text-gray-400 font-medium",children:"Spotlight Base Color"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"relative group/color w-8 h-8 cursor-pointer rounded-full overflow-hidden border border-gray-600 shadow-md hover:scale-110 transition-transform",children:[u.jsx("input",{type:"color",value:l.canvasBackgroundColor||"#1f1f1f",onChange:Q=>c(g=>({...g,canvasBackgroundColor:Q.target.value})),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),u.jsx("div",{className:"w-full h-full",style:{backgroundColor:l.canvasBackgroundColor||"#1f1f1f"}})]}),u.jsx("span",{className:"text-xs font-mono text-gray-500 w-16 text-right uppercase",children:l.canvasBackgroundColor||"#1f1f1f"})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{className:"text-sm text-gray-400 font-medium",children:"Spotlight Outer Color"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"relative group/color w-8 h-8 cursor-pointer rounded-full overflow-hidden border border-gray-600 shadow-md hover:scale-110 transition-transform",children:[u.jsx("input",{type:"color",value:l.canvasBackgroundGradientColor||"#000000",onChange:Q=>c(g=>({...g,canvasBackgroundGradientColor:Q.target.value})),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),u.jsx("div",{className:"w-full h-full",style:{backgroundColor:l.canvasBackgroundGradientColor||"#000000"}})]}),u.jsx("span",{className:"text-xs font-mono text-gray-500 w-16 text-right uppercase",children:l.canvasBackgroundGradientColor||"#000000"})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{className:"text-sm text-gray-400 font-medium",children:"Grid Pattern Color"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"relative group/color w-8 h-8 cursor-pointer rounded-full overflow-hidden border border-gray-600 shadow-md hover:scale-110 transition-transform",children:[u.jsx("input",{type:"color",value:l.dotPatternColor||"#999999",onChange:Q=>c(g=>({...g,dotPatternColor:Q.target.value})),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),u.jsx("div",{className:"w-full h-full",style:{backgroundColor:l.dotPatternColor||"#999999"}})]}),u.jsx("span",{className:"text-xs font-mono text-gray-500 w-16 text-right uppercase",children:l.dotPatternColor||"#999999"})]})]}),u.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:u.jsx("p",{className:"text-xs text-blue-200",children:" The spotlight effect creates a dynamic radial gradient from the Base Color (Center) to the Outer Color (Edge)."})})]})})]}),u.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-700 bg-gray-800 rounded-b-xl",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 rounded text-gray-300 hover:bg-gray-700 transition-colors text-sm",children:"Cancel"}),u.jsx("button",{onClick:d,className:"px-4 py-2 rounded bg-blue-500 text-white hover:bg-blue-600 transition-colors font-medium text-sm shadow-lg shadow-blue-500/20",children:"Save Changes"})]})]})})},gb=({color:t,size:e,isEraser:A=!1,onColorChange:n,onSizeChange:r})=>{const s=["#ffffff","#ef4444","#f59e0b","#eab308","#22c55e","#3b82f6","#a855f7","#ec4899"];return u.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-gray-900/90 border border-gray-700 rounded-lg p-2 flex items-center gap-4 shadow-xl z-50",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs text-gray-400",children:A?"Eraser Size":"Size"}),u.jsx("input",{type:"range",min:"1",max:"50",value:e,onChange:i=>r(parseInt(i.target.value)),className:"w-24 h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),u.jsx("span",{className:"text-xs text-gray-400 w-4",children:e})]}),!A&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-px h-6 bg-gray-700"}),u.jsxs("div",{className:"flex items-center gap-2",children:[s.map(i=>u.jsx("button",{onClick:()=>n(i),className:`w-6 h-6 rounded-full border-2 transition-all ${t===i?"border-white scale-110":"border-transparent hover:scale-105"}`,style:{backgroundColor:i}},i)),u.jsx("div",{className:"relative w-6 h-6 rounded-full overflow-hidden border-2 border-gray-600 ml-1",children:u.jsx("input",{type:"color",value:t,onChange:i=>n(i.target.value),className:"absolute inset-[-50%] w-[200%] h-[200%] cursor-pointer"})})]})]})]})},mb=Vt.memo(Vt.forwardRef(({paths:t,currentPath:e},A)=>{const[n,r]=Vt.useState(null);Vt.useImperativeHandle(A,()=>({startPath:a=>{r(a)},updatePath:a=>{r(l=>l?{...l,points:[...l.points,a]}:null)},endPath:()=>{r(null)}}));const s=a=>{const l=a.length;if(l<2)return"";if(l===2)return`M ${a[0].x} ${a[0].y} L ${a[1].x} ${a[1].y}`;let c=`M ${a[0].x} ${a[0].y}`;for(let f=1;f<l-1;f++){const h=a[f],m=a[f+1],C=(h.x+m.x)/2,Q=(h.y+m.y)/2;c+=` Q ${h.x} ${h.y} ${C} ${Q}`}const d=a[l-1];return c+=` L ${d.x} ${d.y}`,c},i=a=>{if(a.points.length<2)return null;if(a.points.some(c=>c.pressure!==void 0)&&a.points.some(d=>Math.abs((d.pressure||.5)-.5)>.01)){const d=[];for(let f=0;f<a.points.length-1;f++){const h=a.points[f],m=a.points[f+1],C=h.pressure??.5,Q=m.pressure??.5,g=a.size*(.3+C*.7),p=a.size*(.3+Q*.7),w=m.x-h.x,v=m.y-h.y,_=Math.sqrt(w*w+v*v);if(_>0){const F=-v/_,U=w/_,T=h.x+F*g/2,D=h.y+U*g/2,L=h.x-F*g/2,R=h.y-U*g/2,z=m.x-F*p/2,j=m.y-U*p/2,ae=m.x+F*p/2,q=m.y+U*p/2;d.push(u.jsx("path",{d:`M ${T} ${D} L ${L} ${R} L ${z} ${j} L ${ae} ${q} Z`,fill:a.isEraser?"rgba(255,200,200,0.5)":a.color,stroke:"none"},f))}}return u.jsx("g",{children:d},a.id)}const l=s(a.points);return u.jsx("path",{d:l,stroke:a.isEraser?"rgba(255,0,0,0.3)":a.color,strokeWidth:a.size,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"},a.id)},o=n||e;return u.jsxs("svg",{className:"absolute inset-0 pointer-events-none",style:{width:"100%",height:"100%",overflow:"visible",zIndex:2e4},children:[t.map(a=>i(a)),o&&i(o)]})})),wb=({onLogin:t})=>{const[e,A]=E.useState(!1),[n,r]=E.useState(null),[s,i]=E.useState(!1),o=async()=>{A(!0),r(null);try{const{signInWithGoogle:l}=await Nn(async()=>{const{signInWithGoogle:d}=await Promise.resolve().then(()=>W_);return{signInWithGoogle:d}},void 0),c=await l();if(c.success&&c.user){console.log("Logged in as:",c.user.displayName,c.user.email);try{const{initGoogleIdentityServices:d,requestDriveAccess:f}=await Nn(async()=>{const{initGoogleIdentityServices:m,requestDriveAccess:C}=await Promise.resolve().then(()=>au);return{initGoogleIdentityServices:m,requestDriveAccess:C}},void 0);d();const h="145147670860-l0bu8h9lvmf1gjqd09q66g4jbb4i69q2.apps.googleusercontent.com";console.log("Requesting Drive access..."),await f(h),console.log(" Drive access granted!"),t()}catch(d){console.error("Drive access error:",d),i(!0),r("Google Drive   .     .")}}else r(c.error||"Login failed")}catch(l){r(l instanceof Error?l.message:"Unknown error occurred")}finally{A(!1)}},a=async()=>{try{const{requestDriveAccess:l}=await Nn(async()=>{const{requestDriveAccess:d}=await Promise.resolve().then(()=>au);return{requestDriveAccess:d}},void 0);await l("145147670860-l0bu8h9lvmf1gjqd09q66g4jbb4i69q2.apps.googleusercontent.com"),t()}catch{r("  .  .")}};return u.jsx("div",{className:"w-screen h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 to-blue-800",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"RefBoard"}),u.jsx("p",{className:"text-gray-600",children:"  "})]}),u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[u.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"RefBoard :"}),u.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[u.jsx("li",{children:" Google Drive  "}),u.jsx("li",{children:"   "}),u.jsx("li",{children:"   "})]})]})}),s?u.jsx("button",{onClick:a,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-3",children:"Google Drive  "}):u.jsx("button",{onClick:o,disabled:e,className:"w-full bg-white border-2 border-gray-300 hover:border-blue-500 text-gray-700 font-semibold py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})," ..."]}):u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google "]})}),n&&u.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:n}),u.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[""," ",u.jsx("a",{href:"https://refboard.github.io/terms.html",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:""})," ",""," ",u.jsx("a",{href:"https://refboard.github.io/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:""}),"  ."]})]})})},Bb=()=>{};var PB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y=function(t,e){if(!t)throw lo(e)},lo=function(t){return new Error("Firebase Database ("+Dx.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=function(t){const e=[];let A=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e[A++]=r:r<2048?(e[A++]=r>>6|192,e[A++]=r&63|128):(r&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++n)&1023),e[A++]=r>>18|240,e[A++]=r>>12&63|128,e[A++]=r>>6&63|128,e[A++]=r&63|128):(e[A++]=r>>12|224,e[A++]=r>>6&63|128,e[A++]=r&63|128)}return e},yb=function(t){const e=[];let A=0,n=0;for(;A<t.length;){const r=t[A++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[A++];e[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[A++],i=t[A++],o=t[A++],a=((r&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(a>>10)),e[n++]=String.fromCharCode(56320+(a&1023))}else{const s=t[A++],i=t[A++];e[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|i&63)}}return e.join("")},$g={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<t.length;r+=3){const s=t[r],i=r+1<t.length,o=i?t[r+1]:0,a=r+2<t.length,l=a?t[r+2]:0,c=s>>2,d=(s&3)<<4|o>>4;let f=(o&15)<<2|l>>6,h=l&63;a||(h=64,i||(f=64)),n.push(A[c],A[d],A[f],A[h])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Hx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const A=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<t.length;){const s=A[t.charAt(r++)],o=r<t.length?A[t.charAt(r)]:0;++r;const l=r<t.length?A[t.charAt(r)]:64;++r;const d=r<t.length?A[t.charAt(r)]:64;if(++r,s==null||o==null||l==null||d==null)throw new vb;const f=s<<2|o>>4;if(n.push(f),l!==64){const h=o<<4&240|l>>2;if(n.push(h),d!==64){const m=l<<6&192|d;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lx=function(t){const e=Hx(t);return $g.encodeByteArray(e,!0)},cu=function(t){return Lx(t).replace(/\./g,"")},uu=function(t){try{return $g.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(t){return Rx(void 0,t)}function Rx(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const A=e;return new Date(A.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const A in e)!e.hasOwnProperty(A)||!xb(A)||(t[A]=Rx(t[A],e[A]));return t}function xb(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=()=>Eb().__FIREBASE_DEFAULTS__,Fb=()=>{if(typeof process>"u"||typeof PB>"u")return;const t=PB.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ib=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uu(t[1]);return e&&JSON.parse(e)},Xg=()=>{try{return Bb()||_b()||Fb()||Ib()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Px=t=>{var e,A;return(A=(e=Xg())==null?void 0:e.emulatorHosts)==null?void 0:A[t]},Qb=t=>{const e=Px(t);if(!e)return;const A=e.lastIndexOf(":");if(A<=0||A+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(A+1),10);return e[0]==="["?[e.substring(1,A-1),n]:[e.substring(0,A),n]},Mx=()=>{var t;return(t=Xg())==null?void 0:t.config},Ox=t=>{var e;return(e=Xg())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,A)=>{this.resolve=e,this.reject=A})}wrapCallback(e){return(A,n)=>{A?this.reject(A):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(A):e(A,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const A={alg:"none",type:"JWT"},n=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[cu(JSON.stringify(A)),cu(JSON.stringify(i)),""].join(".")}const ca={};function bb(){const t={prod:[],emulator:[]};for(const e of Object.keys(ca))ca[e]?t.emulator.push(e):t.prod.push(e);return t}function Sb(t){let e=document.getElementById(t),A=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),A=!0),{created:A,element:e}}let MB=!1;function jx(t,e){if(typeof window>"u"||typeof document>"u"||!co(window.location.host)||ca[t]===e||ca[t]||MB)return;ca[t]=e;function A(f){return`__firebase__banner__${f}`}const n="__firebase__banner",s=bb().prod.length>0;function i(){const f=document.getElementById(n);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function a(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{MB=!0,i()},f}function c(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=Sb(n),h=A("text"),m=document.getElementById(h)||document.createElement("span"),C=A("learnmore"),Q=document.getElementById(C)||document.createElement("a"),g=A("preprendIcon"),p=document.getElementById(g)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;o(w),c(Q,C);const v=l();a(p,g),w.append(p,m,Q,v),document.body.appendChild(w)}s?(m.innerText="Preview backend disconnected.",p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mA())}function Tb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Nb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Gx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kb(){const t=mA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Db(){return Dx.NODE_ADMIN===!0}function Hb(){try{return typeof indexedDB=="object"}catch{return!1}}function Lb(){return new Promise((t,e)=>{try{let A=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),A||self.indexedDB.deleteDatabase(n),t(!0)},r.onupgradeneeded=()=>{A=!1},r.onerror=()=>{var s;e(((s=r.error)==null?void 0:s.message)||"")}}catch(A){e(A)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="FirebaseError";class ls extends Error{constructor(e,A,n){super(A),this.code=e,this.customData=n,this.name=Rb,Object.setPrototypeOf(this,ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,al.prototype.create)}}class al{constructor(e,A,n){this.service=e,this.serviceName=A,this.errors=n}create(e,...A){const n=A[0]||{},r=`${this.service}/${e}`,s=this.errors[e],i=s?Pb(s,n):"Error",o=`${this.serviceName}: ${i} (${r}).`;return new ls(r,o,n)}}function Pb(t,e){return t.replace(Mb,(A,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const Mb=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t){return JSON.parse(t)}function Lt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=function(t){let e={},A={},n={},r="";try{const s=t.split(".");e=Ka(uu(s[0])||""),A=Ka(uu(s[1])||""),r=s[2],n=A.d||{},delete A.d}catch{}return{header:e,claims:A,data:n,signature:r}},Ob=function(t){const e=Wx(t),A=e.claims;return!!A&&typeof A=="object"&&A.hasOwnProperty("iat")},Kb=function(t){const e=Wx(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ji(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ep(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function du(t,e,A){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=e.call(A,t[r],r,t));return n}function Os(t,e){if(t===e)return!0;const A=Object.keys(t),n=Object.keys(e);for(const r of A){if(!n.includes(r))return!1;const s=t[r],i=e[r];if(OB(s)&&OB(i)){if(!Os(s,i))return!1}else if(s!==i)return!1}for(const r of n)if(!A.includes(r))return!1;return!0}function OB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t){const e=[];for(const[A,n]of Object.entries(t))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(A)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(A)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,A){A||(A=0);const n=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)n[d]=e.charCodeAt(A)<<24|e.charCodeAt(A+1)<<16|e.charCodeAt(A+2)<<8|e.charCodeAt(A+3),A+=4;else for(let d=0;d<16;d++)n[d]=e[A]<<24|e[A+1]<<16|e[A+2]<<8|e[A+3],A+=4;for(let d=16;d<80;d++){const f=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=(f<<1|f>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],i=this.chain_[2],o=this.chain_[3],a=this.chain_[4],l,c;for(let d=0;d<80;d++){d<40?d<20?(l=o^s&(i^o),c=1518500249):(l=s^i^o,c=1859775393):d<60?(l=s&i|o&(s|i),c=2400959708):(l=s^i^o,c=3395469782);const f=(r<<5|r>>>27)+l+a+c+n[d]&4294967295;a=o,o=i,i=(s<<30|s>>>2)&4294967295,s=r,r=f}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+i&4294967295,this.chain_[3]=this.chain_[3]+o&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,A){if(e==null)return;A===void 0&&(A=e.length);const n=A-this.blockSize;let r=0;const s=this.buf_;let i=this.inbuf_;for(;r<A;){if(i===0)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<A;)if(s[i]=e.charCodeAt(r),++i,++r,i===this.blockSize){this.compress_(s),i=0;break}}else for(;r<A;)if(s[i]=e[r],++i,++r,i===this.blockSize){this.compress_(s),i=0;break}}this.inbuf_=i,this.total_+=A}digest(){const e=[];let A=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=A&255,A/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[n]=this.chain_[r]>>s&255,++n;return e}}function Gb(t,e){const A=new Wb(t,e);return A.subscribe.bind(A)}class Wb{constructor(e,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(A=>{A.next(e)})}error(e){this.forEachObserver(A=>{A.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,A,n){let r;if(e===void 0&&A===void 0&&n===void 0)throw new Error("Missing Observer.");zb(e,["next","error","complete"])?r=e:r={next:e,error:A,complete:n},r.next===void 0&&(r.next=Bf),r.error===void 0&&(r.error=Bf),r.complete===void 0&&(r.complete=Bf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,e)}sendOne(e,A){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{A(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zb(t,e){if(typeof t!="object"||t===null)return!1;for(const A of e)if(A in t&&typeof t[A]=="function")return!0;return!1}function Bf(){}function dd(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=function(t){const e=[];let A=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r>=55296&&r<=56319){const s=r-55296;n++,Y(n<t.length,"Surrogate pair missing trail surrogate.");const i=t.charCodeAt(n)-56320;r=65536+(s<<10)+i}r<128?e[A++]=r:r<2048?(e[A++]=r>>6|192,e[A++]=r&63|128):r<65536?(e[A++]=r>>12|224,e[A++]=r>>6&63|128,e[A++]=r&63|128):(e[A++]=r>>18|240,e[A++]=r>>12&63|128,e[A++]=r>>6&63|128,e[A++]=r&63|128)}return e},fd=function(t){let e=0;for(let A=0;A<t.length;A++){const n=t.charCodeAt(A);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,A++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t){return t&&t._delegate?t._delegate:t}class Ks{constructor(e,A,n){this.name=e,this.instanceFactory=A,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,A){this.name=e,this.container=A,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const A=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(A)){const n=new ol;if(this.instancesDeferred.set(A,n),this.isInitialized(A)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:A});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(A).promise}getImmediate(e){const A=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(A)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:A})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Yb(e))try{this.getOrInitializeService({instanceIdentifier:vs})}catch{}for(const[A,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(A);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(e=vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(A=>"INTERNAL"in A).map(A=>A.INTERNAL.delete()),...e.filter(A=>"_delete"in A).map(A=>A._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vs){return this.instances.has(e)}getOptions(e=vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:A={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:A});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(r)}return r}onInit(e,A){const n=this.normalizeInstanceIdentifier(A),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const s=this.instances.get(n);return s&&e(s,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,A){const n=this.onInitCallbacks.get(A);if(n)for(const r of n)try{r(e,A)}catch{}}getOrInitializeService({instanceIdentifier:e,options:A={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Xb(e),options:A}),this.instances.set(e,n),this.instancesOptions.set(e,A),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=vs){return this.component?this.component.multipleInstances?e:vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Xb(t){return t===vs?void 0:t}function Yb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const A=this.getProvider(e.name);if(A.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);A.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const A=new $b(e,this);return this.providers.set(e,A),A}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const Zb={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},qb=Xe.INFO,eS={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},tS=(t,e,...A)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),r=eS[e];if(r)console[r](`[${n}]  ${t.name}:`,...A);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Jg=class{constructor(e){this.name=e,this._logLevel=qb,this._logHandler=tS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}};const AS=(t,e)=>e.some(A=>t instanceof A);let KB,jB;function nS(){return KB||(KB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rS(){return jB||(jB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zx=new WeakMap,tp=new WeakMap,Vx=new WeakMap,yf=new WeakMap,Zg=new WeakMap;function sS(t){const e=new Promise((A,n)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{A($r(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(A=>{A instanceof IDBCursor&&zx.set(A,t)}).catch(()=>{}),Zg.set(e,t),e}function iS(t){if(tp.has(t))return;const e=new Promise((A,n)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{A(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});tp.set(t,e)}let Ap={get(t,e,A){if(t instanceof IDBTransaction){if(e==="done")return tp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vx.get(t);if(e==="store")return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return $r(t[e])},set(t,e,A){return t[e]=A,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oS(t){Ap=t(Ap)}function aS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...A){const n=t.call(vf(this),e,...A);return Vx.set(n,e.sort?e.sort():[e]),$r(n)}:rS().includes(t)?function(...e){return t.apply(vf(this),e),$r(zx.get(this))}:function(...e){return $r(t.apply(vf(this),e))}}function lS(t){return typeof t=="function"?aS(t):(t instanceof IDBTransaction&&iS(t),AS(t,nS())?new Proxy(t,Ap):t)}function $r(t){if(t instanceof IDBRequest)return sS(t);if(yf.has(t))return yf.get(t);const e=lS(t);return e!==t&&(yf.set(t,e),Zg.set(e,t)),e}const vf=t=>Zg.get(t);function cS(t,e,{blocked:A,upgrade:n,blocking:r,terminated:s}={}){const i=indexedDB.open(t,e),o=$r(i);return n&&i.addEventListener("upgradeneeded",a=>{n($r(i.result),a.oldVersion,a.newVersion,$r(i.transaction),a)}),A&&i.addEventListener("blocked",a=>A(a.oldVersion,a.newVersion,a)),o.then(a=>{s&&a.addEventListener("close",()=>s()),r&&a.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const uS=["get","getKey","getAll","getAllKeys","count"],dS=["put","add","delete","clear"],Cf=new Map;function GB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cf.get(e))return Cf.get(e);const A=e.replace(/FromIndex$/,""),n=e!==A,r=dS.includes(A);if(!(A in(n?IDBIndex:IDBObjectStore).prototype)||!(r||uS.includes(A)))return;const s=async function(i,...o){const a=this.transaction(i,r?"readwrite":"readonly");let l=a.store;return n&&(l=l.index(o.shift())),(await Promise.all([l[A](...o),r&&a.done]))[0]};return Cf.set(e,s),s}oS(t=>({...t,get:(e,A,n)=>GB(e,A)||t.get(e,A,n),has:(e,A)=>!!GB(e,A)||t.has(e,A)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(A=>{if(hS(A)){const n=A.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(A=>A).join(" ")}}function hS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const np="@firebase/app",WB="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new Jg("@firebase/app"),pS="@firebase/app-compat",gS="@firebase/analytics-compat",mS="@firebase/analytics",wS="@firebase/app-check-compat",BS="@firebase/app-check",yS="@firebase/auth",vS="@firebase/auth-compat",CS="@firebase/database",xS="@firebase/data-connect",ES="@firebase/database-compat",_S="@firebase/functions",FS="@firebase/functions-compat",IS="@firebase/installations",QS="@firebase/installations-compat",US="@firebase/messaging",bS="@firebase/messaging-compat",SS="@firebase/performance",TS="@firebase/performance-compat",NS="@firebase/remote-config",kS="@firebase/remote-config-compat",DS="@firebase/storage",HS="@firebase/storage-compat",LS="@firebase/firestore",RS="@firebase/ai",PS="@firebase/firestore-compat",MS="firebase",OS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="[DEFAULT]",KS={[np]:"fire-core",[pS]:"fire-core-compat",[mS]:"fire-analytics",[gS]:"fire-analytics-compat",[BS]:"fire-app-check",[wS]:"fire-app-check-compat",[yS]:"fire-auth",[vS]:"fire-auth-compat",[CS]:"fire-rtdb",[xS]:"fire-data-connect",[ES]:"fire-rtdb-compat",[_S]:"fire-fn",[FS]:"fire-fn-compat",[IS]:"fire-iid",[QS]:"fire-iid-compat",[US]:"fire-fcm",[bS]:"fire-fcm-compat",[SS]:"fire-perf",[TS]:"fire-perf-compat",[NS]:"fire-rc",[kS]:"fire-rc-compat",[DS]:"fire-gcs",[HS]:"fire-gcs-compat",[LS]:"fire-fst",[PS]:"fire-fst-compat",[RS]:"fire-vertex","fire-js":"fire-js",[MS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=new Map,jS=new Map,sp=new Map;function zB(t,e){try{t.container.addComponent(e)}catch(A){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,A)}}function Zi(t){const e=t.name;if(sp.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;sp.set(e,t);for(const A of fu.values())zB(A,t);for(const A of jS.values())zB(A,t);return!0}function qg(t,e){const A=t.container.getProvider("heartbeat").getImmediate({optional:!0});return A&&A.triggerHeartbeat(),t.container.getProvider(e)}function pn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new al("app","Firebase",GS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,A,n){this._isDeleted=!1,this._options={...e},this._config={...A},this._name=A.name,this._automaticDataCollectionEnabled=A.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=OS;function $x(t,e={}){let A=t;typeof e!="object"&&(e={name:e});const n={name:rp,automaticDataCollectionEnabled:!0,...e},r=n.name;if(typeof r!="string"||!r)throw Xr.create("bad-app-name",{appName:String(r)});if(A||(A=Mx()),!A)throw Xr.create("no-options");const s=fu.get(r);if(s){if(Os(A,s.options)&&Os(n,s.config))return s;throw Xr.create("duplicate-app",{appName:r})}const i=new Jb(r);for(const a of sp.values())i.addComponent(a);const o=new WS(A,n,i);return fu.set(r,o),o}function Xx(t=rp){const e=fu.get(t);if(!e&&t===rp&&Mx())return $x();if(!e)throw Xr.create("no-app",{appName:t});return e}function Yr(t,e,A){let n=KS[t]??t;A&&(n+=`-${A}`);const r=n.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const i=[`Unable to register library "${n}" with version "${e}":`];r&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&s&&i.push("and"),s&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(i.join(" "));return}Zi(new Ks(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="firebase-heartbeat-database",VS=1,ja="firebase-heartbeat-store";let xf=null;function Yx(){return xf||(xf=cS(zS,VS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ja)}catch(A){console.warn(A)}}}}).catch(t=>{throw Xr.create("idb-open",{originalErrorMessage:t.message})})),xf}async function $S(t){try{const A=(await Yx()).transaction(ja),n=await A.objectStore(ja).get(Jx(t));return await A.done,n}catch(e){if(e instanceof ls)dr.warn(e.message);else{const A=Xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dr.warn(A.message)}}}async function VB(t,e){try{const n=(await Yx()).transaction(ja,"readwrite");await n.objectStore(ja).put(e,Jx(t)),await n.done}catch(A){if(A instanceof ls)dr.warn(A.message);else{const n=Xr.create("idb-set",{originalErrorMessage:A==null?void 0:A.message});dr.warn(n.message)}}}function Jx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=1024,YS=30;class JS{constructor(e){this.container=e,this._heartbeatsCache=null;const A=this.container.getProvider("app").getImmediate();this._storage=new qS(A),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,A;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$B();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((A=this._heartbeatsCache)==null?void 0:A.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>YS){const i=eT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){dr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const A=$B(),{heartbeatsToSend:n,unsentEntries:r}=ZS(this._heartbeatsCache.heartbeats),s=cu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=A,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(A){return dr.warn(A),""}}}function $B(){return new Date().toISOString().substring(0,10)}function ZS(t,e=XS){const A=[];let n=t.slice();for(const r of t){const s=A.find(i=>i.agent===r.agent);if(s){if(s.dates.push(r.date),XB(A)>e){s.dates.pop();break}}else if(A.push({agent:r.agent,dates:[r.date]}),XB(A)>e){A.pop();break}n=n.slice(1)}return{heartbeatsToSend:A,unsentEntries:n}}class qS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hb()?Lb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const A=await $S(this.app);return A!=null&&A.heartbeats?A:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return VB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return VB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function XB(t){return cu(JSON.stringify({version:2,heartbeats:t})).length}function eT(t){if(t.length===0)return-1;let e=0,A=t[0].date;for(let n=1;n<t.length;n++)t[n].date<A&&(A=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t){Zi(new Ks("platform-logger",e=>new fS(e),"PRIVATE")),Zi(new Ks("heartbeat",e=>new JS(e),"PRIVATE")),Yr(np,WB,t),Yr(np,WB,"esm2020"),Yr("fire-js","")}tT("");var AT="firebase",nT="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yr(AT,nT,"app");function Zx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rT=Zx,qx=new al("auth","Firebase",Zx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=new Jg("@firebase/auth");function sT(t,...e){hu.logLevel<=Xe.WARN&&hu.warn(`Auth (${fo}): ${t}`,...e)}function Uc(t,...e){hu.logLevel<=Xe.ERROR&&hu.error(`Auth (${fo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,...e){throw tm(t,...e)}function vn(t,...e){return tm(t,...e)}function em(t,e,A){const n={...rT(),[e]:A};return new al("auth","Firebase",n).create(e,{appName:t.name})}function Ts(t){return em(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iT(t,e,A){const n=A;if(!(e instanceof n))throw n.name!==e.constructor.name&&Rn(t,"argument-error"),em(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tm(t,...e){if(typeof t!="string"){const A=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(A,...n)}return qx.create(t,...e)}function me(t,e,...A){if(!t)throw tm(e,...A)}function tr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uc(e),new Error(e)}function fr(t,e){t||tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function oT(){return YB()==="http:"||YB()==="https:"}function YB(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oT()||Nb()||"connection"in navigator)?navigator.onLine:!0}function lT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,A){this.shortDelay=e,this.longDelay=A,fr(A>e,"Short delay should be less than long delay!"),this.isMobile=Yg()||Gx()}get(){return aT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t,e){fr(t.emulator,"Emulator should always be set here");const{url:A}=t.emulator;return e?`${A}${e.startsWith("/")?e.slice(1):e}`:A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{static initialize(e,A,n){this.fetchImpl=e,A&&(this.headersImpl=A),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dT=new ll(3e4,6e4);function nm(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ho(t,e,A,n,r={}){return tE(t,r,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const o=uo({key:t.config.apiKey,...i}).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const l={method:e,headers:a,...s};return Tb()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&co(t.emulatorConfig.host)&&(l.credentials="include"),eE.fetch()(await AE(t,t.config.apiHost,A,o),l)})}async function tE(t,e,A){t._canInitEmulator=!1;const n={...cT,...e};try{const r=new hT(t),s=await Promise.race([A(),r.promise]);r.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Gl(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[a,l]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gl(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw Gl(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw Gl(t,"user-disabled",i);const c=n[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw em(t,c,l);Rn(t,c)}}catch(r){if(r instanceof ls)throw r;Rn(t,"network-request-failed",{message:String(r)})}}async function fT(t,e,A,n,r={}){const s=await ho(t,e,A,n,r);return"mfaPendingCredential"in s&&Rn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function AE(t,e,A,n){const r=`${e}${A}?${n}`,s=t,i=s.config.emulator?Am(t.config,r):`${t.config.apiScheme}://${r}`;return uT.includes(A)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}class hT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((A,n)=>{this.timer=setTimeout(()=>n(vn(this.auth,"network-request-failed")),dT.get())})}}function Gl(t,e,A){const n={appName:t.name};A.email&&(n.email=A.email),A.phoneNumber&&(n.phoneNumber=A.phoneNumber);const r=vn(t,e,n);return r.customData._tokenResponse=A,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pT(t,e){return ho(t,"POST","/v1/accounts:delete",e)}async function pu(t,e){return ho(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gT(t,e=!1){const A=TA(t),n=await A.getIdToken(e),r=rm(n);me(r&&r.exp&&r.auth_time&&r.iat,A.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:r,token:n,authTime:ua(Ef(r.auth_time)),issuedAtTime:ua(Ef(r.iat)),expirationTime:ua(Ef(r.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ef(t){return Number(t)*1e3}function rm(t){const[e,A,n]=t.split(".");if(e===void 0||A===void 0||n===void 0)return Uc("JWT malformed, contained fewer than 3 sections"),null;try{const r=uu(A);return r?JSON.parse(r):(Uc("Failed to decode base64 JWT payload"),null)}catch(r){return Uc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function JB(t){const e=rm(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t,e,A=!1){if(A)return e;try{return await e}catch(n){throw n instanceof ls&&mT(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function mT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const A=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),A}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const A=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},A)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,A){this.createdAt=e,this.lastLoginAt=A,this._initializeTime()}_initializeTime(){this.lastSignInTime=ua(this.lastLoginAt),this.creationTime=ua(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(t){var d;const e=t.auth,A=await t.getIdToken(),n=await Ga(t,pu(e,{idToken:A}));me(n==null?void 0:n.users.length,e,"internal-error");const r=n.users[0];t._notifyReloadListener(r);const s=(d=r.providerUserInfo)!=null&&d.length?nE(r.providerUserInfo):[],i=yT(t.providerData,s),o=t.isAnonymous,a=!(t.email&&r.passwordHash)&&!(i!=null&&i.length),l=o?a:!1,c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new op(r.createdAt,r.lastLoginAt),isAnonymous:l};Object.assign(t,c)}async function BT(t){const e=TA(t);await gu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yT(t,e){return[...t.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function nE(t){return t.map(({providerId:e,...A})=>({providerId:e,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vT(t,e){const A=await tE(t,{},async()=>{const n=uo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,i=await AE(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return t.emulatorConfig&&co(t.emulatorConfig.host)&&(a.credentials="include"),eE.fetch()(i,a)});return{accessToken:A.access_token,expiresIn:A.expires_in,refreshToken:A.refresh_token}}async function CT(t,e){return ho(t,"POST","/v2/accounts:revokeToken",nm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const A="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):JB(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,A)}updateFromIdToken(e){me(e.length!==0,"internal-error");const A=JB(e);this.updateTokensAndExpiration(e,null,A)}async getToken(e,A=!1){return!A&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,A){const{accessToken:n,refreshToken:r,expiresIn:s}=await vT(e,A);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,A,n){this.refreshToken=A||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,A){const{refreshToken:n,accessToken:r,expirationTime:s}=A,i=new Li;return n&&(me(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),r&&(me(typeof r=="string","internal-error",{appName:e}),i.accessToken=r),s&&(me(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Li,this.toJSON())}_performRefresh(){return tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mn{constructor({uid:e,auth:A,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new wT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=A,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new op(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const A=await Ga(this,this.stsTokenManager.getToken(this.auth,e));return me(A,this.auth,"internal-error"),this.accessToken!==A&&(this.accessToken=A,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),A}getIdTokenResult(e){return gT(this,e)}reload(){return BT(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(A=>({...A})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const A=new mn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return A.metadata._copy(this.metadata),A}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,A=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),A&&await gu(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(Ts(this.auth));const e=await this.getIdToken();return await Ga(this,pT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,A){const n=A.displayName??void 0,r=A.email??void 0,s=A.phoneNumber??void 0,i=A.photoURL??void 0,o=A.tenantId??void 0,a=A._redirectEventId??void 0,l=A.createdAt??void 0,c=A.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:h,providerData:m,stsTokenManager:C}=A;me(d&&C,e,"internal-error");const Q=Li.fromJSON(this.name,C);me(typeof d=="string",e,"internal-error"),Cr(n,e.name),Cr(r,e.name),me(typeof f=="boolean",e,"internal-error"),me(typeof h=="boolean",e,"internal-error"),Cr(s,e.name),Cr(i,e.name),Cr(o,e.name),Cr(a,e.name),Cr(l,e.name),Cr(c,e.name);const g=new mn({uid:d,auth:e,email:r,emailVerified:f,displayName:n,isAnonymous:h,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:Q,createdAt:l,lastLoginAt:c});return m&&Array.isArray(m)&&(g.providerData=m.map(p=>({...p}))),a&&(g._redirectEventId=a),g}static async _fromIdTokenResponse(e,A,n=!1){const r=new Li;r.updateFromServerResponse(A);const s=new mn({uid:A.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await gu(s),s}static async _fromGetAccountInfoResponse(e,A,n){const r=A.users[0];me(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?nE(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),o=new Li;o.updateFromIdToken(n);const a=new mn({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new op(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(a,l),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB=new Map;function Ar(t){fr(t instanceof Function,"Expected a class definition");let e=ZB.get(t);return e?(fr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ZB.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,A){this.storage[e]=A}async _get(e){const A=this.storage[e];return A===void 0?null:A}async _remove(e){delete this.storage[e]}_addListener(e,A){}_removeListener(e,A){}}rE.type="NONE";const qB=rE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t,e,A){return`firebase:${t}:${e}:${A}`}class Ri{constructor(e,A,n){this.persistence=e,this.auth=A,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=bc(this.userKey,r.apiKey,s),this.fullPersistenceKey=bc("persistence",r.apiKey,s),this.boundEventHandler=A._onStorageEvent.bind(A),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const A=await pu(this.auth,{idToken:e}).catch(()=>{});return A?mn._fromGetAccountInfoResponse(this.auth,A,e):null}return mn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const A=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,A)return this.setCurrentUser(A)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,A,n="authUser"){if(!A.length)return new Ri(Ar(qB),e,n);const r=(await Promise.all(A.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=r[0]||Ar(qB);const i=bc(n,e.config.apiKey,e.name);let o=null;for(const l of A)try{const c=await l._get(i);if(c){let d;if(typeof c=="string"){const f=await pu(e,{idToken:c}).catch(()=>{});if(!f)break;d=await mn._fromGetAccountInfoResponse(e,f,c)}else d=mn._fromJSON(e,c);l!==s&&(o=d),s=l;break}}catch{}const a=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new Ri(s,e,n):(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(A.map(async l=>{if(l!==s)try{await l._remove(i)}catch{}})),new Ri(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cE(e))return"Blackberry";if(uE(e))return"Webos";if(iE(e))return"Safari";if((e.includes("chrome/")||oE(e))&&!e.includes("edge/"))return"Chrome";if(lE(e))return"Android";{const A=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(A);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function sE(t=mA()){return/firefox\//i.test(t)}function iE(t=mA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oE(t=mA()){return/crios\//i.test(t)}function aE(t=mA()){return/iemobile/i.test(t)}function lE(t=mA()){return/android/i.test(t)}function cE(t=mA()){return/blackberry/i.test(t)}function uE(t=mA()){return/webos/i.test(t)}function sm(t=mA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xT(t=mA()){var e;return sm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function ET(){return kb()&&document.documentMode===10}function dE(t=mA()){return sm(t)||lE(t)||uE(t)||cE(t)||/windows phone/i.test(t)||aE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t,e=[]){let A;switch(t){case"Browser":A=e0(mA());break;case"Worker":A=`${e0(mA())}-${t}`;break;default:A=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${A}/JsCore/${fo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,A){const n=s=>new Promise((i,o)=>{try{const a=e(s);i(a)}catch(a){o(a)}});n.onAbort=A,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const A=[];try{for(const n of this.queue)await n(e),n.onAbort&&A.push(n.onAbort)}catch(n){A.reverse();for(const r of A)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FT(t,e={}){return ho(t,"GET","/v2/passwordPolicy",nm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=6;class QT{constructor(e){var n;const A=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=A.minPasswordLength??IT,A.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=A.maxPasswordLength),A.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=A.containsLowercaseCharacter),A.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=A.containsUppercaseCharacter),A.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=A.containsNumericCharacter),A.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=A.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const A={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,A),this.validatePasswordCharacterOptions(e,A),A.isValid&&(A.isValid=A.meetsMinPasswordLength??!0),A.isValid&&(A.isValid=A.meetsMaxPasswordLength??!0),A.isValid&&(A.isValid=A.containsLowercaseLetter??!0),A.isValid&&(A.isValid=A.containsUppercaseLetter??!0),A.isValid&&(A.isValid=A.containsNumericCharacter??!0),A.isValid&&(A.isValid=A.containsNonAlphanumericCharacter??!0),A}validatePasswordLengthOptions(e,A){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(A.meetsMinPasswordLength=e.length>=n),r&&(A.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,A){this.updatePasswordCharacterOptionsStatuses(A,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(A,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,A,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=A)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,A,n,r){this.app=e,this.heartbeatServiceProvider=A,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new t0(this),this.idTokenSubscription=new t0(this),this.beforeStateQueue=new _T(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,A){return A&&(this._popupRedirectResolver=Ar(A)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await Ri.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(A),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const A=await pu(this,{idToken:e}),n=await mn._fromGetAccountInfoResponse(this,A,e);await this.directlySetCurrentUser(n)}catch(A){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",A),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(pn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const A=await this.assertedPersistence.getCurrentUser();let n=A,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&(a!=null&&a.user)&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=A,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let A=null;try{A=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return A}async reloadAndSetCurrentUserOrClear(e){try{await gu(e)}catch(A){if((A==null?void 0:A.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(Ts(this));const A=e?TA(e):null;return A&&me(A.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(A&&A._clone(this))}async _updateCurrentUser(e,A=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),A||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(Ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(Ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const A=this._getPasswordPolicyInternal();return A.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):A.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FT(this),A=new QT(e);this.tenantId===null?this._projectPasswordPolicy=A:this._tenantPasswordPolicies[this.tenantId]=A}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new al("auth","Firebase",e())}onAuthStateChanged(e,A,n){return this.registerStateListener(this.authStateSubscription,e,A,n)}beforeAuthStateChanged(e,A){return this.beforeStateQueue.pushCallback(e,A)}onIdTokenChanged(e,A,n){return this.registerStateListener(this.idTokenSubscription,e,A,n)}authStateReady(){return new Promise((e,A)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},A)}})}async revokeAccessToken(e){if(this.currentUser){const A=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:A};this.tenantId!=null&&(n.tenantId=this.tenantId),await CT(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,A){const n=await this.getOrInitRedirectPersistenceManager(A);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const A=e&&Ar(e)||this._popupRedirectResolver;me(A,this,"argument-error"),this.redirectPersistenceManager=await Ri.create(this,[Ar(A._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var A,n;return this._isInitialized&&await this.queue(async()=>{}),((A=this._currentUser)==null?void 0:A._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var A;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((A=this.currentUser)==null?void 0:A.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,A,n,r){if(this._deleted)return()=>{};const s=typeof A=="function"?A:A.next.bind(A);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof A=="function"){const a=e.addObserver(A,n,r);return()=>{i=!0,a()}}else{const a=e.addObserver(A);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const A=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());A&&(e["X-Firebase-Client"]=A);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var A;if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((A=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:A.getToken());return e!=null&&e.error&&sT(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function hd(t){return TA(t)}class t0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Gb(A=>this.observer=A)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let im={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bT(t){im=t}function ST(t){return im.loadJS(t)}function TT(){return im.gapiScript}function NT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t,e){const A=qg(t,"auth");if(A.isInitialized()){const r=A.getImmediate(),s=A.getOptions();if(Os(s,e??{}))return r;Rn(r,"already-initialized")}return A.initialize({options:e})}function DT(t,e){const A=(e==null?void 0:e.persistence)||[],n=(Array.isArray(A)?A:[A]).map(Ar);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function HT(t,e,A){const n=hd(t);me(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,s=hE(e),{host:i,port:o}=LT(e),a=o===null?"":`:${o}`,l={url:`${s}//${i}${a}/`},c=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){me(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),me(Os(l,n.config.emulator)&&Os(c,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=l,n.emulatorConfig=c,n.settings.appVerificationDisabledForTesting=!0,co(i)?(Kx(`${s}//${i}${a}`),jx("Auth",!0)):RT()}function hE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LT(t){const e=hE(t),A=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!A)return{host:"",port:null};const n=A[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const s=r[1];return{host:s,port:A0(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:A0(i)}}}function A0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function RT(){function t(){const e=document.createElement("p"),A=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",A.position="fixed",A.width="100%",A.backgroundColor="#ffffff",A.border=".1em solid #000000",A.color="#b50000",A.bottom="0px",A.left="0px",A.margin="0px",A.zIndex="10000",A.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,A){this.providerId=e,this.signInMethod=A}toJSON(){return tr("not implemented")}_getIdTokenResponse(e){return tr("not implemented")}_linkToIdToken(e,A){return tr("not implemented")}_getReauthenticationResolver(e){return tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pi(t,e){return fT(t,"POST","/v1/accounts:signInWithIdp",nm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="http://localhost";class js extends pE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const A=new js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(A.idToken=e.idToken),e.accessToken&&(A.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(A.nonce=e.nonce),e.pendingToken&&(A.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(A.accessToken=e.oauthToken,A.secret=e.oauthTokenSecret):Rn("argument-error"),A}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const A=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r,...s}=A;if(!n||!r)return null;const i=new js(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const A=this.buildRequest();return Pi(e,A)}_linkToIdToken(e,A){const n=this.buildRequest();return n.idToken=A,Pi(e,n)}_getReauthenticationResolver(e){const A=this.buildRequest();return A.autoCreate=!1,Pi(e,A)}buildRequest(){const e={requestUri:PT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const A={};this.idToken&&(A.id_token=this.idToken),this.accessToken&&(A.access_token=this.accessToken),this.secret&&(A.oauth_token_secret=this.secret),A.providerId=this.providerId,this.nonce&&!this.pendingToken&&(A.nonce=this.nonce),e.postBody=uo(A)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends om{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends cl{constructor(){super("facebook.com")}static credential(e){return js._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn extends cl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,A){return js._fromParams({providerId:kn.PROVIDER_ID,signInMethod:kn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:A})}static credentialFromResult(e){return kn.credentialFromTaggedObject(e)}static credentialFromError(e){return kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:A,oauthAccessToken:n}=e;if(!A&&!n)return null;try{return kn.credential(A,n)}catch{return null}}}kn.GOOGLE_SIGN_IN_METHOD="google.com";kn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends cl{constructor(){super("github.com")}static credential(e){return js._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends cl{constructor(){super("twitter.com")}static credential(e,A){return js._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:A})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:A,oauthTokenSecret:n}=e;if(!A||!n)return null;try{return Nr.credential(A,n)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,A,n,r=!1){const s=await mn._fromIdTokenResponse(e,n,r),i=n0(n);return new qi({user:s,providerId:i,_tokenResponse:n,operationType:A})}static async _forOperation(e,A,n){await e._updateTokensIfNecessary(n,!0);const r=n0(n);return new qi({user:e,providerId:r,_tokenResponse:n,operationType:A})}}function n0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends ls{constructor(e,A,n,r){super(A.code,A.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,mu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:A.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,A,n,r){return new mu(e,A,n,r)}}function gE(t,e,A,n){return(e==="reauthenticate"?A._getReauthenticationResolver(t):A._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?mu._fromErrorAndOperation(t,s,e,n):s})}async function MT(t,e,A=!1){const n=await Ga(t,e._linkToIdToken(t.auth,await t.getIdToken()),A);return qi._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OT(t,e,A=!1){const{auth:n}=t;if(pn(n.app))return Promise.reject(Ts(n));const r="reauthenticate";try{const s=await Ga(t,gE(n,r,e,t),A);me(s.idToken,n,"internal-error");const i=rm(s.idToken);me(i,n,"internal-error");const{sub:o}=i;return me(t.uid===o,n,"user-mismatch"),qi._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Rn(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KT(t,e,A=!1){if(pn(t.app))return Promise.reject(Ts(t));const n="signIn",r=await gE(t,n,e),s=await qi._fromIdTokenResponse(t,n,r);return A||await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t,e){return TA(t).setPersistence(e)}function mE(t,e,A,n){return TA(t).onIdTokenChanged(e,A,n)}function GT(t,e,A){return TA(t).beforeAuthStateChanged(e,A)}function WT(t,e,A,n){return TA(t).onAuthStateChanged(e,A,n)}function zT(t){return TA(t).signOut()}const wu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,A){this.storageRetriever=e,this.type=A}_isAvailable(){try{return this.storage?(this.storage.setItem(wu,"1"),this.storage.removeItem(wu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,A){return this.storage.setItem(e,JSON.stringify(A)),Promise.resolve()}_get(e){const A=this.storage.getItem(e);return Promise.resolve(A?JSON.parse(A):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=1e3,$T=10;class BE extends wE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,A)=>this.onStorageEvent(e,A),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const A of Object.keys(this.listeners)){const n=this.storage.getItem(A),r=this.localCache[A];n!==r&&e(A,r,n)}}onStorageEvent(e,A=!1){if(!e.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const n=e.key;A?this.detachListener():this.stopPolling();const r=()=>{const i=this.storage.getItem(n);!A&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);ET()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,$T):r()}notifyListeners(e,A){this.localCache[e]=A;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,A,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:A,newValue:n}),!0)})},VT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,A){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(A)}_removeListener(e,A){this.listeners[e]&&(this.listeners[e].delete(A),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,A){await super._set(e,A),this.localCache[e]=JSON.stringify(A)}async _get(e){const A=await super._get(e);return this.localCache[e]=JSON.stringify(A),A}async _remove(e){await super._remove(e),delete this.localCache[e]}}BE.type="LOCAL";const XT=BE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE extends wE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,A){}_removeListener(e,A){}}yE.type="SESSION";const am=yE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(A){return{fulfilled:!1,reason:A}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const A=this.receivers.find(r=>r.isListeningto(e));if(A)return A;const n=new pd(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const A=e,{eventId:n,eventType:r,data:s}=A.data,i=this.handlersMap[r];if(!(i!=null&&i.size))return;A.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(i).map(async l=>l(A.origin,s)),a=await YT(o);A.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,A){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(A)}_unsubscribe(e,A){this.handlersMap[e]&&A&&this.handlersMap[e].delete(A),(!A||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t="",e=10){let A="";for(let n=0;n<e;n++)A+=Math.floor(Math.random()*10);return t+A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,A,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const l=lm("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(c),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:A},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return window}function ZT(t){Ln().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}async function qT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function tN(){return vE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="firebaseLocalStorageDb",AN=1,Bu="firebaseLocalStorage",xE="fbase_key";class ul{constructor(e){this.request=e}toPromise(){return new Promise((e,A)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{A(this.request.error)})})}}function gd(t,e){return t.transaction([Bu],e?"readwrite":"readonly").objectStore(Bu)}function nN(){const t=indexedDB.deleteDatabase(CE);return new ul(t).toPromise()}function ap(){const t=indexedDB.open(CE,AN);return new Promise((e,A)=>{t.addEventListener("error",()=>{A(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Bu,{keyPath:xE})}catch(r){A(r)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Bu)?e(n):(n.close(),await nN(),e(await ap()))})})}async function r0(t,e,A){const n=gd(t,!0).put({[xE]:e,value:A});return new ul(n).toPromise()}async function rN(t,e){const A=gd(t,!1).get(e),n=await new ul(A).toPromise();return n===void 0?null:n.value}function s0(t,e){const A=gd(t,!0).delete(e);return new ul(A).toPromise()}const sN=800,iN=3;class EE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ap(),this.db)}async _withRetries(e){let A=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(A++>iN)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pd._getInstance(tN()),this.receiver._subscribe("keyChanged",async(e,A)=>({keyProcessed:(await this._poll()).includes(A.key)})),this.receiver._subscribe("ping",async(e,A)=>["keyChanged"])}async initializeSender(){var A,n;if(this.activeServiceWorker=await qT(),!this.activeServiceWorker)return;this.sender=new JT(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(A=e[0])!=null&&A.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ap();return await r0(e,wu,"1"),await s0(e,wu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,A){return this._withPendingWrite(async()=>(await this._withRetries(n=>r0(n,e,A)),this.localCache[e]=A,this.notifyServiceWorker(e)))}async _get(e){const A=await this._withRetries(n=>rN(n,e));return this.localCache[e]=A,A}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(A=>s0(A,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=gd(r,!1).getAll();return new ul(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const A=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),A.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),A.push(r));return A}notifyListeners(e,A){this.localCache[e]=A;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(A)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,A){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(A)}_removeListener(e,A){this.listeners[e]&&(this.listeners[e].delete(A),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EE.type="LOCAL";const oN=EE;new ll(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t,e){return e?Ar(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm extends pE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pi(e,this._buildIdpRequest())}_linkToIdToken(e,A){return Pi(e,this._buildIdpRequest(A))}_getReauthenticationResolver(e){return Pi(e,this._buildIdpRequest())}_buildIdpRequest(e){const A={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(A.idToken=e),A}}function aN(t){return KT(t.auth,new cm(t),t.bypassAuthState)}function lN(t){const{auth:e,user:A}=t;return me(A,e,"internal-error"),OT(A,new cm(t),t.bypassAuthState)}async function cN(t){const{auth:e,user:A}=t;return me(A,e,"internal-error"),MT(A,new cm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,A,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(A)?A:[A]}execute(){return new Promise(async(e,A)=>{this.pendingPromise={resolve:e,reject:A};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:A,sessionId:n,postBody:r,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:A,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aN;case"linkViaPopup":case"linkViaRedirect":return cN;case"reauthViaPopup":case"reauthViaRedirect":return lN;default:Rn(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=new ll(2e3,1e4);async function dN(t,e,A){if(pn(t.app))return Promise.reject(vn(t,"operation-not-supported-in-this-environment"));const n=hd(t);iT(t,e,om);const r=_E(n,A);return new Is(n,"signInViaPopup",e,r).executeNotNull()}class Is extends FE{constructor(e,A,n,r,s){super(e,A,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Is.currentPopupAction&&Is.currentPopupAction.cancel(),Is.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const e=lm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(A=>{this.reject(A)}),this.resolver._isIframeWebStorageSupported(this.auth,A=>{A||this.reject(vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Is.currentPopupAction=null}pollUserCancellation(){const e=()=>{var A,n;if((n=(A=this.authWindow)==null?void 0:A.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uN.get())};e()}}Is.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="pendingRedirect",Sc=new Map;class hN extends FE{constructor(e,A,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],A,void 0,n),this.eventId=null}async execute(){let e=Sc.get(this.auth._key());if(!e){try{const n=await pN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(A){e=()=>Promise.reject(A)}Sc.set(this.auth._key(),e)}return this.bypassAuthState||Sc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const A=await this.auth._redirectUserForId(e.eventId);if(A)return this.user=A,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pN(t,e){const A=wN(e),n=mN(t);if(!await n._isAvailable())return!1;const r=await n._get(A)==="true";return await n._remove(A),r}function gN(t,e){Sc.set(t._key(),e)}function mN(t){return Ar(t._redirectPersistence)}function wN(t){return bc(fN,t.config.apiKey,t.name)}async function BN(t,e,A=!1){if(pn(t.app))return Promise.reject(Ts(t));const n=hd(t),r=_E(n,e),i=await new hN(n,r,A).execute();return i&&!A&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=10*60*1e3;class vN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let A=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(A=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CN(e)||(this.hasHandledPotentialRedirect=!0,A||(this.queuedRedirectEvent=e,A=!0)),A}sendToConsumer(e,A){var n;if(e.error&&!IE(e)){const r=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";A.onError(vn(this.auth,r))}else A.onAuthEvent(e)}isEventForConsumer(e,A){const n=A.eventId===null||!!e.eventId&&e.eventId===A.eventId;return A.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yN&&this.cachedEventUids.clear(),this.cachedEventUids.has(i0(e))}saveEventToCache(e){this.cachedEventUids.add(i0(e)),this.lastProcessedEventTime=Date.now()}}function i0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function CN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(t,e={}){return ho(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_N=/^https?/;async function FN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xN(t);for(const A of e)try{if(IN(A))return}catch{}Rn(t,"unauthorized-domain")}function IN(t){const e=ip(),{protocol:A,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?A==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):A==="chrome-extension:"&&i.hostname===n}if(!_N.test(A))return!1;if(EN.test(t))return n===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new ll(3e4,6e4);function o0(){const t=Ln().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let A=0;A<t.CP.length;A++)t.CP[A]=null}}function UN(t){return new Promise((e,A)=>{var r,s,i;function n(){o0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{o0(),A(vn(t,"network-request-failed"))},timeout:QN.get()})}if((s=(r=Ln().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((i=Ln().gapi)!=null&&i.load)n();else{const o=NT("iframefcb");return Ln()[o]=()=>{gapi.load?n():A(vn(t,"network-request-failed"))},ST(`${TT()}?onload=${o}`).catch(a=>A(a))}}).catch(e=>{throw Tc=null,e})}let Tc=null;function bN(t){return Tc=Tc||UN(t),Tc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new ll(5e3,15e3),TN="__/auth/iframe",NN="emulator/auth/iframe",kN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HN(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const A=e.emulator?Am(e,NN):`https://${t.config.authDomain}/${TN}`,n={apiKey:e.apiKey,appName:t.name,v:fo},r=DN.get(t.config.apiHost);r&&(n.eid=r);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${A}?${uo(n).slice(1)}`}async function LN(t){const e=await bN(t),A=Ln().gapi;return me(A,t,"internal-error"),e.open({where:document.body,url:HN(t),messageHandlersFilter:A.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kN,dontclear:!0},n=>new Promise(async(r,s)=>{await n.restyle({setHideOnLeave:!1});const i=vn(t,"network-request-failed"),o=Ln().setTimeout(()=>{s(i)},SN.get());function a(){Ln().clearTimeout(o),r(n)}n.ping(a).then(a,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PN=500,MN=600,ON="_blank",KN="http://localhost";class a0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jN(t,e,A,n=PN,r=MN){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const a={...RN,width:n.toString(),height:r.toString(),top:s,left:i},l=mA().toLowerCase();A&&(o=oE(l)?ON:A),sE(l)&&(e=e||KN,a.scrollbars="yes");const c=Object.entries(a).reduce((f,[h,m])=>`${f}${h}=${m},`,"");if(xT(l)&&o!=="_self")return GN(e||"",o),new a0(null);const d=window.open(e||"",o,c);me(d,t,"popup-blocked");try{d.focus()}catch{}return new a0(d)}function GN(t,e){const A=document.createElement("a");A.href=t,A.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),A.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="__/auth/handler",zN="emulator/auth/handler",VN=encodeURIComponent("fac");async function l0(t,e,A,n,r,s){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:A,redirectUrl:n,v:fo,eventId:r};if(e instanceof om){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",ep(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))i[c]=d}if(e instanceof cl){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(i.scopes=c.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];const a=await t._getAppCheckToken(),l=a?`#${VN}=${encodeURIComponent(a)}`:"";return`${$N(t)}?${uo(o).slice(1)}${l}`}function $N({config:t}){return t.emulator?Am(t,zN):`https://${t.authDomain}/${WN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="webStorageSupport";class XN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=am,this._completeRedirectFn=BN,this._overrideRedirectResult=gN}async _openPopup(e,A,n,r){var i;fr((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await l0(e,A,n,ip(),r);return jN(e,s,lm())}async _openRedirect(e,A,n,r){await this._originValidation(e);const s=await l0(e,A,n,ip(),r);return ZT(s),new Promise(()=>{})}_initialize(e){const A=e._key();if(this.eventManagers[A]){const{manager:r,promise:s}=this.eventManagers[A];return r?Promise.resolve(r):(fr(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[A]={promise:n},n.catch(()=>{delete this.eventManagers[A]}),n}async initAndGetManager(e){const A=await LN(e),n=new vN(e);return A.register("authEvent",r=>(me(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=A,n}_isIframeWebStorageSupported(e,A){this.iframes[e._key()].send(_f,{type:_f},r=>{var i;const s=(i=r==null?void 0:r[0])==null?void 0:i[_f];s!==void 0&&A(!!s),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const A=e._key();return this.originValidationPromises[A]||(this.originValidationPromises[A]=FN(e)),this.originValidationPromises[A]}get _shouldInitProactively(){return dE()||iE()||sm()}}const YN=XN;var c0="@firebase/auth",u0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const A=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,A),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const A=this.internalListeners.get(e);A&&(this.internalListeners.delete(e),A(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qN(t){Zi(new Ks("auth",(e,{options:A})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;me(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fE(t)},l=new UT(n,r,s,a);return DT(l,A),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,A,n)=>{e.getProvider("auth-internal").initialize()})),Zi(new Ks("auth-internal",e=>{const A=hd(e.getProvider("auth").getImmediate());return(n=>new JN(n))(A)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(c0,u0,ZN(t)),Yr(c0,u0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=5*60,t2=Ox("authIdTokenMaxAge")||e2;let d0=null;const A2=t=>async e=>{const A=e&&await e.getIdTokenResult(),n=A&&(new Date().getTime()-Date.parse(A.issuedAtTime))/1e3;if(n&&n>t2)return;const r=A==null?void 0:A.token;d0!==r&&(d0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function n2(t=Xx()){const e=qg(t,"auth");if(e.isInitialized())return e.getImmediate();const A=kT(t,{popupRedirectResolver:YN,persistence:[oN,XT,am]}),n=Ox("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=A2(s.toString());GT(A,i,()=>i(A.currentUser)),mE(A,o=>i(o))}}const r=Px("auth");return r&&HT(A,`http://${r}`),A}function r2(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}bT({loadJS(t){return new Promise((e,A)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=r=>{const s=vn("internal-error");s.customData=r,A(s)},n.type="text/javascript",n.charset="UTF-8",r2().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qN("Browser");var f0={};const h0="@firebase/database",p0="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QE="";function s2(t){QE=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,A){A==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Lt(A))}get(e){const A=this.domStorage_.getItem(this.prefixedName_(e));return A==null?null:Ka(A)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,A){A==null?delete this.cache_[e]:this.cache_[e]=A}get(e){return On(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new i2(e)}}catch{}return new o2},Qs=UE("localStorage"),a2=UE("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new Jg("@firebase/database"),l2=function(){let t=1;return function(){return t++}}(),bE=function(t){const e=Vb(t),A=new jb;A.update(e);const n=A.digest();return $g.encodeByteArray(n)},dl=function(...t){let e="";for(let A=0;A<t.length;A++){const n=t[A];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=dl.apply(null,n):typeof n=="object"?e+=Lt(n):e+=n,e+=" "}return e};let da=null,g0=!0;const c2=function(t,e){Y(!0,"Can't turn on custom loggers persistently."),Mi.logLevel=Xe.VERBOSE,da=Mi.log.bind(Mi)},zt=function(...t){if(g0===!0&&(g0=!1,da===null&&a2.get("logging_enabled")===!0&&c2()),da){const e=dl.apply(null,t);da(e)}},fl=function(t){return function(...e){zt(t,...e)}},lp=function(...t){const e="FIREBASE INTERNAL ERROR: "+dl(...t);Mi.error(e)},hr=function(...t){const e=`FIREBASE FATAL ERROR: ${dl(...t)}`;throw Mi.error(e),new Error(e)},gA=function(...t){const e="FIREBASE WARNING: "+dl(...t);Mi.warn(e)},u2=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gA("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},um=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},d2=function(t){if(document.readyState==="complete")t();else{let e=!1;const A=function(){if(!document.body){setTimeout(A,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",A,!1),window.addEventListener("load",A,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&A()}),window.attachEvent("onload",A))}},eo="[MIN_NAME]",Gs="[MAX_NAME]",Js=function(t,e){if(t===e)return 0;if(t===eo||e===Gs)return-1;if(e===eo||t===Gs)return 1;{const A=m0(t),n=m0(e);return A!==null?n!==null?A-n===0?t.length-e.length:A-n:-1:n!==null?1:t<e?-1:1}},f2=function(t,e){return t===e?0:t<e?-1:1},Do=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Lt(e))},dm=function(t){if(typeof t!="object"||t===null)return Lt(t);const e=[];for(const n in t)e.push(n);e.sort();let A="{";for(let n=0;n<e.length;n++)n!==0&&(A+=","),A+=Lt(e[n]),A+=":",A+=dm(t[e[n]]);return A+="}",A},SE=function(t,e){const A=t.length;if(A<=e)return[t];const n=[];for(let r=0;r<A;r+=e)r+e>A?n.push(t.substring(r,A)):n.push(t.substring(r,r+e));return n};function Jt(t,e){for(const A in t)t.hasOwnProperty(A)&&e(A,t[A])}const TE=function(t){Y(!um(t),"Invalid JSON number");const e=11,A=52,n=(1<<e-1)-1;let r,s,i,o,a;t===0?(s=0,i=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(o=Math.min(Math.floor(Math.log(t)/Math.LN2),n),s=o+n,i=Math.round(t*Math.pow(2,A-o)-Math.pow(2,A))):(s=0,i=Math.round(t/Math.pow(2,1-n-A))));const l=[];for(a=A;a;a-=1)l.push(i%2?1:0),i=Math.floor(i/2);for(a=e;a;a-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(r?1:0),l.reverse();const c=l.join("");let d="";for(a=0;a<64;a+=8){let f=parseInt(c.substr(a,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},h2=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},p2=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function g2(t,e){let A="Unknown Error";t==="too_big"?A="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?A="Client doesn't have permission to access the desired data.":t==="unavailable"&&(A="The service is unavailable");const n=new Error(t+" at "+e._path.toString()+": "+A);return n.code=t.toUpperCase(),n}const m2=new RegExp("^-?(0*)\\d{1,10}$"),w2=-2147483648,B2=2147483647,m0=function(t){if(m2.test(t)){const e=Number(t);if(e>=w2&&e<=B2)return e}return null},po=function(t){try{t()}catch(e){setTimeout(()=>{const A=e.stack||"";throw gA("Exception was thrown by user callback.",A),e},Math.floor(0))}},y2=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fa=function(t,e){const A=setTimeout(t,e);return typeof A=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(A):typeof A=="object"&&A.unref&&A.unref(),A};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,A){this.appCheckProvider=A,this.appName=e.name,pn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=A==null?void 0:A.getImmediate({optional:!0}),this.appCheck||A==null||A.get().then(n=>this.appCheck=n)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((A,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(A,n):A(null)},0)})}addTokenChangeListener(e){var A;(A=this.appCheckProvider)==null||A.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){gA(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,A,n){this.appName_=e,this.firebaseOptions_=A,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(A=>A&&A.code==="auth/token-not-initialized"?(zt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(A)):new Promise((A,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(A,n):A(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(A=>A.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(A=>A.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gA(e)}}class Nc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Nc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="5",NE="v",kE="s",DE="r",HE="f",LE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,RE="ls",PE="p",cp="ac",ME="websocket",OE="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,A,n,r,s=!1,i="",o=!1,a=!1,l=null){this.secure=A,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Qs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",A=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${A}`}}function x2(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function jE(t,e,A){Y(typeof e=="string","typeof type must == string"),Y(typeof A=="object","typeof params must == object");let n;if(e===ME)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===OE)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);x2(t)&&(A.ns=t.namespace);const r=[];return Jt(A,(s,i)=>{r.push(s+"="+i)}),n+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.counters_={}}incrementCounter(e,A=1){On(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=A}get(){return Cb(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff={},If={};function hm(t){const e=t.toString();return Ff[e]||(Ff[e]=new E2),Ff[e]}function _2(t,e){const A=t.toString();return If[A]||(If[A]=e()),If[A]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,A){this.closeAfterResponse=e,this.onClose=A,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,A){for(this.pendingResponses[e]=A;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<n.length;++r)n[r]&&po(()=>{this.onMessage_(n[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="start",I2="close",Q2="pLPCommand",U2="pRTLPCB",GE="id",WE="pw",zE="ser",b2="cb",S2="seg",T2="ts",N2="d",k2="dframe",VE=1870,$E=30,D2=VE-$E,H2=25e3,L2=3e4;class Ui{constructor(e,A,n,r,s,i,o){this.connId=e,this.repoInfo=A,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.transportSessionId=i,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fl(e),this.stats_=hm(A),this.urlFn=a=>(this.appCheckToken&&(a[cp]=this.appCheckToken),jE(A,OE,a))}open(e,A){this.curSegmentNum=0,this.onDisconnect_=A,this.myPacketOrderer=new F2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(L2)),d2(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pm((...s)=>{const[i,o,a,l,c]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,i===w0)this.id=o,this.password=a;else if(i===I2)o?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(o,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+i)},(...s)=>{const[i,o]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(i,o)},()=>{this.onClosed_()},this.urlFn);const n={};n[w0]="t",n[zE]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[b2]=this.scriptTagHolder.uniqueCallbackIdentifier),n[NE]=fm,this.transportSessionId&&(n[kE]=this.transportSessionId),this.lastSessionId&&(n[RE]=this.lastSessionId),this.applicationId&&(n[PE]=this.applicationId),this.appCheckToken&&(n[cp]=this.appCheckToken),typeof location<"u"&&location.hostname&&LE.test(location.hostname)&&(n[DE]=HE);const r=this.urlFn(n);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ui.forceAllow_=!0}static forceDisallow(){Ui.forceDisallow_=!0}static isAvailable(){return Ui.forceAllow_?!0:!Ui.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!h2()&&!p2()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const A=Lt(e);this.bytesSent+=A.length,this.stats_.incrementCounter("bytes_sent",A.length);const n=Lx(A),r=SE(n,D2);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,A){this.myDisconnFrame=document.createElement("iframe");const n={};n[k2]="t",n[GE]=e,n[WE]=A,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const A=Lt(e).length;this.bytesReceived+=A,this.stats_.incrementCounter("bytes_received",A)}}class pm{constructor(e,A,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=l2(),window[Q2+this.uniqueCallbackIdentifier]=e,window[U2+this.uniqueCallbackIdentifier]=A,this.myIFrame=pm.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const i="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(o){zt("frame writing exception"),o.stack&&zt(o.stack),zt(o)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||zt("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,A){for(this.myID=e,this.myPW=A,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[GE]=this.myID,e[WE]=this.myPW,e[zE]=this.currentSerial;let A=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+$E+n.length<=VE;){const i=this.pendingSegs.shift();n=n+"&"+S2+r+"="+i.seg+"&"+T2+r+"="+i.ts+"&"+N2+r+"="+i.d,r++}return A=A+n,this.addLongPollTag_(A,this.currentSerial),!0}else return!1}enqueueSegment(e,A,n){this.pendingSegs.push({seg:e,ts:A,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,A){this.outstandingRequests.add(A);const n=()=>{this.outstandingRequests.delete(A),this.newRequest_()},r=setTimeout(n,Math.floor(H2)),s=()=>{clearTimeout(r),n()};this.addTag(e,s)}addTag(e,A){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const r=n.readyState;(!r||r==="loaded"||r==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),A())},n.onerror=()=>{zt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=16384,P2=45e3;let yu=null;typeof MozWebSocket<"u"?yu=MozWebSocket:typeof WebSocket<"u"&&(yu=WebSocket);class gn{constructor(e,A,n,r,s,i,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fl(this.connId),this.stats_=hm(A),this.connURL=gn.connectionURL_(A,i,o,r,n),this.nodeAdmin=A.nodeAdmin}static connectionURL_(e,A,n,r,s){const i={};return i[NE]=fm,typeof location<"u"&&location.hostname&&LE.test(location.hostname)&&(i[DE]=HE),A&&(i[kE]=A),n&&(i[RE]=n),r&&(i[cp]=r),s&&(i[PE]=s),jE(e,ME,i)}open(e,A){this.onDisconnect=A,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qs.set("previous_websocket_failure",!0);try{let n;Db(),this.mySock=new yu(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const r=n.message||n.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const r=n.message||n.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){gn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const A=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(A);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&yu!==null&&!gn.forceDisallow_}static previouslyFailed(){return Qs.isInMemoryStorage||Qs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Qs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const A=this.frames.join("");this.frames=null;const n=Ka(A);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Y(this.frames===null,"We already have a frame buffer"),e.length<=6){const A=Number(e);if(!isNaN(A))return this.handleNewFrameCount_(A),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const A=e.data;if(this.bytesReceived+=A.length,this.stats_.incrementCounter("bytes_received",A.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(A);else{const n=this.extractFrameCount_(A);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const A=Lt(e);this.bytesSent+=A.length,this.stats_.incrementCounter("bytes_sent",A.length);const n=SE(A,R2);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(P2))}sendString_(e){try{this.mySock.send(e)}catch(A){this.log_("Exception thrown from WebSocket.send():",A.message||A.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}gn.responsesRequiredToBeHealthy=2;gn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{static get ALL_TRANSPORTS(){return[Ui,gn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const A=gn&&gn.isAvailable();let n=A&&!gn.previouslyFailed();if(e.webSocketOnly&&(A||gA("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[gn];else{const r=this.transports_=[];for(const s of Wa.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);Wa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wa.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=6e4,O2=5e3,K2=10*1024,j2=100*1024,Qf="t",B0="d",G2="s",y0="r",W2="e",v0="o",C0="a",x0="n",E0="p",z2="h";class V2{constructor(e,A,n,r,s,i,o,a,l,c){this.id=e,this.repoInfo_=A,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=i,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fl("c:"+this.id+":"),this.transportManager_=new Wa(A),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const A=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(A,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=fa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>j2?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>K2?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return A=>{e===this.conn_?this.onConnectionLost_(A):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return A=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(A):e===this.secondaryConn_?this.onSecondaryMessageReceived_(A):this.log_("message on old connection"))}}sendRequest(e){const A={t:"d",d:e};this.sendData_(A)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Qf in e){const A=e[Qf];A===C0?this.upgradeIfSecondaryHealthy_():A===y0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):A===v0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const A=Do("t",e),n=Do("d",e);if(A==="c")this.onSecondaryControl_(n);else if(A==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+A)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:E0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:C0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:x0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const A=Do("t",e),n=Do("d",e);A==="c"?this.onControl_(n):A==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const A=Do(Qf,e);if(B0 in e){const n=e[B0];if(A===z2){const r={...n};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(A===x0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else A===G2?this.onConnectionShutdown_(n):A===y0?this.onReset_(n):A===W2?lp("Server Error: "+n):A===v0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lp("Unknown control packet command: "+A)}}onHandshake_(e){const A=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,A),fm!==n&&gA("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const A=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(A,n),fa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(M2))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,A){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(A,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(O2))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:E0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{put(e,A,n,r){}merge(e,A,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,A,n){}onDisconnectMerge(e,A,n){}onDisconnectCancel(e,A){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.allowedEvents_=e,this.listeners_={},Y(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...A){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let r=0;r<n.length;r++)n[r].callback.apply(n[r].context,A)}}on(e,A,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:A,context:n});const r=this.getInitialEvent(e);r&&A.apply(n,r)}off(e,A,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===A&&(!n||n===r[s].context)){r.splice(s,1);return}}validateEventType_(e){Y(this.allowedEvents_.find(A=>A===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends YE{static getInstance(){return new vu}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Yg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Y(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=32,F0=768;class Je{constructor(e,A){if(A===void 0){this.pieces_=e.split("/");let n=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=A}toString(){let e="";for(let A=this.pieceNum_;A<this.pieces_.length;A++)this.pieces_[A]!==""&&(e+="/"+this.pieces_[A]);return e||"/"}}function je(){return new Je("")}function Qe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function As(t){return t.pieces_.length-t.pieceNum_}function et(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Je(t.pieces_,e)}function gm(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function $2(t){let e="";for(let A=t.pieceNum_;A<t.pieces_.length;A++)t.pieces_[A]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[A])));return e||"/"}function za(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function JE(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let A=t.pieceNum_;A<t.pieces_.length-1;A++)e.push(t.pieces_[A]);return new Je(e,0)}function ft(t,e){const A=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)A.push(t.pieces_[n]);if(e instanceof Je)for(let n=e.pieceNum_;n<e.pieces_.length;n++)A.push(e.pieces_[n]);else{const n=e.split("/");for(let r=0;r<n.length;r++)n[r].length>0&&A.push(n[r])}return new Je(A,0)}function be(t){return t.pieceNum_>=t.pieces_.length}function _A(t,e){const A=Qe(t),n=Qe(e);if(A===null)return e;if(A===n)return _A(et(t),et(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function X2(t,e){const A=za(t,0),n=za(e,0);for(let r=0;r<A.length&&r<n.length;r++){const s=Js(A[r],n[r]);if(s!==0)return s}return A.length===n.length?0:A.length<n.length?-1:1}function mm(t,e){if(As(t)!==As(e))return!1;for(let A=t.pieceNum_,n=e.pieceNum_;A<=t.pieces_.length;A++,n++)if(t.pieces_[A]!==e.pieces_[n])return!1;return!0}function ZA(t,e){let A=t.pieceNum_,n=e.pieceNum_;if(As(t)>As(e))return!1;for(;A<t.pieces_.length;){if(t.pieces_[A]!==e.pieces_[n])return!1;++A,++n}return!0}class Y2{constructor(e,A){this.errorPrefix_=A,this.parts_=za(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=fd(this.parts_[n]);ZE(this)}}function J2(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=fd(e),ZE(t)}function Z2(t){const e=t.parts_.pop();t.byteLength_-=fd(e),t.parts_.length>0&&(t.byteLength_-=1)}function ZE(t){if(t.byteLength_>F0)throw new Error(t.errorPrefix_+"has a key path longer than "+F0+" bytes ("+t.byteLength_+").");if(t.parts_.length>_0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_0+") or object contains a cycle "+Cs(t))}function Cs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm extends YE{static getInstance(){return new wm}constructor(){super(["visible"]);let e,A;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(A="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(A="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(A="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(A="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,A&&document.addEventListener(A,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}getInitialEvent(e){return Y(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=1e3,q2=60*5*1e3,I0=30*1e3,ek=1.3,tk=3e4,Ak="server_kill",Q0=3;class ir extends XE{constructor(e,A,n,r,s,i,o,a){if(super(),this.repoInfo_=e,this.applicationId_=A,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=ir.nextPersistentConnectionId_++,this.log_=fl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ho,this.maxReconnectDelay_=q2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wm.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&vu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,A,n){const r=++this.requestNumber_,s={r,a:e,b:A};this.log_(Lt(s)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const A=new ol,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:i=>{const o=i.d;i.s==="ok"?A.resolve(o):A.reject(o)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),A.promise}listen(e,A,n,r){this.initConnection_();const s=e._queryIdentifier,i=e._path.toString();this.log_("Listen called for "+i+" "+s),this.listens.has(i)||this.listens.set(i,new Map),Y(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(i).has(s),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:A,query:e,tag:n};this.listens.get(i).set(s,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const A=this.outstandingGets_[e];this.sendRequest("g",A.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),A.onComplete&&A.onComplete(n)})}sendListen_(e){const A=e.query,n=A._path.toString(),r=A._queryIdentifier;this.log_("Listen on "+n+" for "+r);const s={p:n},i="q";e.tag&&(s.q=A._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(i,s,o=>{const a=o.d,l=o.s;ir.warnOnListenWarnings_(a,A),(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",o),l!=="ok"&&this.removeListen_(n,r),e.onComplete&&e.onComplete(l,a))})}static warnOnListenWarnings_(e,A){if(e&&typeof e=="object"&&On(e,"w")){const n=Ji(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const r='".indexOn": "'+A._queryParams.getIndex().toString()+'"',s=A._path.toString();gA(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Kb(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=I0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,A=Ob(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(A,n,r=>{const s=r.s,i=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const A=e.s,n=e.d||"error";A==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(A,n)})}unlisten(e,A){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Y(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,A)}sendUnlisten_(e,A,n,r){this.log_("Unlisten on "+e+" for "+A);const s={p:e},i="n";r&&(s.q=n,s.t=r),this.sendRequest(i,s)}onDisconnectPut(e,A,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,A,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:A,onComplete:n})}onDisconnectMerge(e,A,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,A,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:A,onComplete:n})}onDisconnectCancel(e,A){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,A):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:A})}sendOnDisconnect_(e,A,n,r){const s={p:A,d:n};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,i=>{r&&setTimeout(()=>{r(i.s,i.d)},Math.floor(0))})}put(e,A,n,r){this.putInternal("p",e,A,n,r)}merge(e,A,n,r){this.putInternal("m",e,A,n,r)}putInternal(e,A,n,r,s){this.initConnection_();const i={p:A,d:n};s!==void 0&&(i.h=s),this.outstandingPuts_.push({action:e,request:i,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+A)}sendPut_(e){const A=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(A,n,s=>{this.log_(A+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const A={c:e};this.log_("reportStats",A),this.sendRequest("s",A,n=>{if(n.s!=="ok"){const s=n.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Lt(e));const A=e.r,n=this.requestCBHash_[A];n&&(delete this.requestCBHash_[A],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,A){this.log_("handleServerMessage",e,A),e==="d"?this.onDataUpdate_(A.p,A.d,!1,A.t):e==="m"?this.onDataUpdate_(A.p,A.d,!0,A.t):e==="c"?this.onListenRevoked_(A.p,A.q):e==="ac"?this.onAuthRevoked_(A.s,A.d):e==="apc"?this.onAppCheckRevoked_(A.s,A.d):e==="sd"?this.onSecurityDebugPacket_(A):lp("Unrecognized action received from server: "+Lt(e)+`
Are you using the latest client?`)}onReady_(e,A){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=A,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ho,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ho,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>tk&&(this.reconnectDelay_=Ho),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let A=Math.max(0,this.reconnectDelay_-e);A=Math.random()*A,this.log_("Trying to reconnect in "+A+"ms"),this.scheduleConnect_(A),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ek)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),A=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ir.nextConnectionId_++,s=this.lastSessionId;let i=!1,o=null;const a=function(){o?o.close():(i=!0,n())},l=function(d){Y(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(d)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);i?zt("getToken() completed but was canceled"):(zt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,o=new V2(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,A,n,h=>{gA(h+" ("+this.repoInfo_.toString()+")"),this.interrupt(Ak)},s))}catch(d){this.log_("Failed to get token: "+d),i||(this.repoInfo_.nodeAdmin&&gA(d),a())}}}interrupt(e){zt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){zt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ep(this.interruptReasons_)&&(this.reconnectDelay_=Ho,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const A=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:A})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const A=this.outstandingPuts_[e];A&&"h"in A.request&&A.queued&&(A.onComplete&&A.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,A){let n;A?n=A.map(s=>dm(s)).join("$"):n="default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,A){const n=new Je(e).toString();let r;if(this.listens.has(n)){const s=this.listens.get(n);r=s.get(A),s.delete(A),s.size===0&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,A){zt("Auth token revoked: "+e+"/"+A),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Q0&&(this.reconnectDelay_=I0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,A){zt("App check token revoked: "+e+"/"+A),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Q0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const A of e.values())this.sendListen_(A);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let A="js";e["sdk."+A+"."+QE.replace(/\./g,"-")]=1,Yg()?e["framework.cordova"]=1:Gx()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=vu.getInstance().currentlyOnline();return ep(this.interruptReasons_)&&e}}ir.nextPersistentConnectionId_=0;ir.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,A){this.name=e,this.node=A}static Wrap(e,A){return new Ue(e,A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,A){const n=new Ue(eo,e),r=new Ue(eo,A);return this.compare(n,r)!==0}minPost(){return Ue.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl;class qE extends md{static get __EMPTY_NODE(){return Wl}static set __EMPTY_NODE(e){Wl=e}compare(e,A){return Js(e.name,A.name)}isDefinedOn(e){throw lo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,A){return!1}minPost(){return Ue.MIN}maxPost(){return new Ue(Gs,Wl)}makePost(e,A){return Y(typeof e=="string","KeyIndex indexValue must always be a string."),new Ue(e,Wl)}toString(){return".key"}}const Oi=new qE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,A,n,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let i=1;for(;!e.isEmpty();)if(e=e,i=A?n(e.key,A):1,r&&(i*=-1),i<0)this.isReverse_?e=e.left:e=e.right;else if(i===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),A;if(this.resultGenerator_?A=this.resultGenerator_(e.key,e.value):A={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return A}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Dt{constructor(e,A,n,r,s){this.key=e,this.value=A,this.color=n??Dt.RED,this.left=r??FA.EMPTY_NODE,this.right=s??FA.EMPTY_NODE}copy(e,A,n,r,s){return new Dt(e??this.key,A??this.value,n??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,A,n){let r=this;const s=n(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,A,n),null):s===0?r=r.copy(null,A,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,A,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return FA.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,A){let n,r;if(n=this,A(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,A),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),A(e,n.key)===0){if(n.right.isEmpty())return FA.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,A))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),A=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,A)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Dt.RED=!0;Dt.BLACK=!1;class nk{copy(e,A,n,r,s){return this}insert(e,A,n){return new Dt(e,A,null)}remove(e,A){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class FA{constructor(e,A=FA.EMPTY_NODE){this.comparator_=e,this.root_=A}insert(e,A){return new FA(this.comparator_,this.root_.insert(e,A,this.comparator_).copy(null,null,Dt.BLACK,null,null))}remove(e){return new FA(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Dt.BLACK,null,null))}get(e){let A,n=this.root_;for(;!n.isEmpty();){if(A=this.comparator_(e,n.key),A===0)return n.value;A<0?n=n.left:A>0&&(n=n.right)}return null}getPredecessorKey(e){let A,n=this.root_,r=null;for(;!n.isEmpty();)if(A=this.comparator_(e,n.key),A===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else A<0?n=n.left:A>0&&(r=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new zl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,A){return new zl(this.root_,e,this.comparator_,!1,A)}getReverseIteratorFrom(e,A){return new zl(this.root_,e,this.comparator_,!0,A)}getReverseIterator(e){return new zl(this.root_,null,this.comparator_,!0,e)}}FA.EMPTY_NODE=new nk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t,e){return Js(t.name,e.name)}function Bm(t,e){return Js(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let up;function sk(t){up=t}const e_=function(t){return typeof t=="number"?"number:"+TE(t):"string:"+t},t_=function(t){if(t.isLeafNode()){const e=t.val();Y(typeof e=="string"||typeof e=="number"||typeof e=="object"&&On(e,".sv"),"Priority must be a string or number.")}else Y(t===up||t.isEmpty(),"priority of unexpected type.");Y(t===up||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U0;class Nt{static set __childrenNodeConstructor(e){U0=e}static get __childrenNodeConstructor(){return U0}constructor(e,A=Nt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=A,this.lazyHash_=null,Y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),t_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Nt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Nt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return be(e)?this:Qe(e)===".priority"?this.priorityNode_:Nt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,A){return null}updateImmediateChild(e,A){return e===".priority"?this.updatePriority(A):A.isEmpty()&&e!==".priority"?this:Nt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,A).updatePriority(this.priorityNode_)}updateChild(e,A){const n=Qe(e);return n===null?A:A.isEmpty()&&n!==".priority"?this:(Y(n!==".priority"||As(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,Nt.__childrenNodeConstructor.EMPTY_NODE.updateChild(et(e),A)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,A){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+e_(this.priorityNode_.val())+":");const A=typeof this.value_;e+=A+":",A==="number"?e+=TE(this.value_):e+=this.value_,this.lazyHash_=bE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Nt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Nt.__childrenNodeConstructor?-1:(Y(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const A=typeof e.value_,n=typeof this.value_,r=Nt.VALUE_TYPE_ORDER.indexOf(A),s=Nt.VALUE_TYPE_ORDER.indexOf(n);return Y(r>=0,"Unknown leaf type: "+A),Y(s>=0,"Unknown leaf type: "+n),r===s?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const A=e;return this.value_===A.value_&&this.priorityNode_.equals(A.priorityNode_)}else return!1}}Nt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A_,n_;function ik(t){A_=t}function ok(t){n_=t}class ak extends md{compare(e,A){const n=e.node.getPriority(),r=A.node.getPriority(),s=n.compareTo(r);return s===0?Js(e.name,A.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,A){return!e.getPriority().equals(A.getPriority())}minPost(){return Ue.MIN}maxPost(){return new Ue(Gs,new Nt("[PRIORITY-POST]",n_))}makePost(e,A){const n=A_(e);return new Ue(A,new Nt("[PRIORITY-POST]",n))}toString(){return".priority"}}const ht=new ak;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=Math.log(2);class ck{constructor(e){const A=s=>parseInt(Math.log(s)/lk,10),n=s=>parseInt(Array(s+1).join("1"),2);this.count=A(e+1),this.current_=this.count-1;const r=n(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Cu=function(t,e,A,n){t.sort(e);const r=function(a,l){const c=l-a;let d,f;if(c===0)return null;if(c===1)return d=t[a],f=A?A(d):d,new Dt(f,d.node,Dt.BLACK,null,null);{const h=parseInt(c/2,10)+a,m=r(a,h),C=r(h+1,l);return d=t[h],f=A?A(d):d,new Dt(f,d.node,Dt.BLACK,m,C)}},s=function(a){let l=null,c=null,d=t.length;const f=function(m,C){const Q=d-m,g=d;d-=m;const p=r(Q+1,g),w=t[Q],v=A?A(w):w;h(new Dt(v,w.node,C,null,p))},h=function(m){l?(l.left=m,l=m):(c=m,l=m)};for(let m=0;m<a.count;++m){const C=a.nextBitIsOne(),Q=Math.pow(2,a.count-(m+1));C?f(Q,Dt.BLACK):(f(Q,Dt.BLACK),f(Q,Dt.RED))}return c},i=new ck(t.length),o=s(i);return new FA(n||e,o)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf;const oi={};class nr{static get Default(){return Y(oi&&ht,"ChildrenNode.ts has not been loaded"),Uf=Uf||new nr({".priority":oi},{".priority":ht}),Uf}constructor(e,A){this.indexes_=e,this.indexSet_=A}get(e){const A=Ji(this.indexes_,e);if(!A)throw new Error("No index defined for "+e);return A instanceof FA?A:null}hasIndex(e){return On(this.indexSet_,e.toString())}addIndex(e,A){Y(e!==Oi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const s=A.getIterator(Ue.Wrap);let i=s.getNext();for(;i;)r=r||e.isDefinedOn(i.node),n.push(i),i=s.getNext();let o;r?o=Cu(n,e.getCompare()):o=oi;const a=e.toString(),l={...this.indexSet_};l[a]=e;const c={...this.indexes_};return c[a]=o,new nr(c,l)}addToIndexes(e,A){const n=du(this.indexes_,(r,s)=>{const i=Ji(this.indexSet_,s);if(Y(i,"Missing index implementation for "+s),r===oi)if(i.isDefinedOn(e.node)){const o=[],a=A.getIterator(Ue.Wrap);let l=a.getNext();for(;l;)l.name!==e.name&&o.push(l),l=a.getNext();return o.push(e),Cu(o,i.getCompare())}else return oi;else{const o=A.get(e.name);let a=r;return o&&(a=a.remove(new Ue(e.name,o))),a.insert(e,e.node)}});return new nr(n,this.indexSet_)}removeFromIndexes(e,A){const n=du(this.indexes_,r=>{if(r===oi)return r;{const s=A.get(e.name);return s?r.remove(new Ue(e.name,s)):r}});return new nr(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo;class ge{static get EMPTY_NODE(){return Lo||(Lo=new ge(new FA(Bm),null,nr.Default))}constructor(e,A,n){this.children_=e,this.priorityNode_=A,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&t_(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Lo}updatePriority(e){return this.children_.isEmpty()?this:new ge(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const A=this.children_.get(e);return A===null?Lo:A}}getChild(e){const A=Qe(e);return A===null?this:this.getImmediateChild(A).getChild(et(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,A){if(Y(A,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(A);{const n=new Ue(e,A);let r,s;A.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,A),s=this.indexMap_.addToIndexes(n,this.children_));const i=r.isEmpty()?Lo:this.priorityNode_;return new ge(r,i,s)}}updateChild(e,A){const n=Qe(e);if(n===null)return A;{Y(Qe(e)!==".priority"||As(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(et(e),A);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const A={};let n=0,r=0,s=!0;if(this.forEachChild(ht,(i,o)=>{A[i]=o.val(e),n++,s&&ge.INTEGER_REGEXP_.test(i)?r=Math.max(r,Number(i)):s=!1}),!e&&s&&r<2*n){const i=[];for(const o in A)i[o]=A[o];return i}else return e&&!this.getPriority().isEmpty()&&(A[".priority"]=this.getPriority().val()),A}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+e_(this.getPriority().val())+":"),this.forEachChild(ht,(A,n)=>{const r=n.hash();r!==""&&(e+=":"+A+":"+r)}),this.lazyHash_=e===""?"":bE(e)}return this.lazyHash_}getPredecessorChildName(e,A,n){const r=this.resolveIndex_(n);if(r){const s=r.getPredecessorKey(new Ue(e,A));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const A=this.resolveIndex_(e);if(A){const n=A.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const A=this.getFirstChildName(e);return A?new Ue(A,this.children_.get(A)):null}getLastChildName(e){const A=this.resolveIndex_(e);if(A){const n=A.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const A=this.getLastChildName(e);return A?new Ue(A,this.children_.get(A)):null}forEachChild(e,A){const n=this.resolveIndex_(e);return n?n.inorderTraversal(r=>A(r.name,r.node)):this.children_.inorderTraversal(A)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,A){const n=this.resolveIndex_(A);if(n)return n.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Ue.Wrap);let s=r.peek();for(;s!=null&&A.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,A){const n=this.resolveIndex_(A);if(n)return n.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Ue.Wrap);let s=r.peek();for(;s!=null&&A.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hl?-1:0}withIndex(e){if(e===Oi||this.indexMap_.hasIndex(e))return this;{const A=this.indexMap_.addIndex(e,this.children_);return new ge(this.children_,this.priorityNode_,A)}}isIndexed(e){return e===Oi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const A=e;if(this.getPriority().equals(A.getPriority()))if(this.children_.count()===A.children_.count()){const n=this.getIterator(ht),r=A.getIterator(ht);let s=n.getNext(),i=r.getNext();for(;s&&i;){if(s.name!==i.name||!s.node.equals(i.node))return!1;s=n.getNext(),i=r.getNext()}return s===null&&i===null}else return!1;else return!1}}resolveIndex_(e){return e===Oi?null:this.indexMap_.get(e.toString())}}ge.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class uk extends ge{constructor(){super(new FA(Bm),ge.EMPTY_NODE,nr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ge.EMPTY_NODE}isEmpty(){return!1}}const hl=new uk;Object.defineProperties(Ue,{MIN:{value:new Ue(eo,ge.EMPTY_NODE)},MAX:{value:new Ue(Gs,hl)}});qE.__EMPTY_NODE=ge.EMPTY_NODE;Nt.__childrenNodeConstructor=ge;sk(hl);ok(hl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=!0;function Ht(t,e=null){if(t===null)return ge.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Y(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const A=t;return new Nt(A,Ht(e))}if(!(t instanceof Array)&&dk){const A=[];let n=!1;if(Jt(t,(i,o)=>{if(i.substring(0,1)!=="."){const a=Ht(o);a.isEmpty()||(n=n||!a.getPriority().isEmpty(),A.push(new Ue(i,a)))}}),A.length===0)return ge.EMPTY_NODE;const s=Cu(A,rk,i=>i.name,Bm);if(n){const i=Cu(A,ht.getCompare());return new ge(s,Ht(e),new nr({".priority":i},{".priority":ht}))}else return new ge(s,Ht(e),nr.Default)}else{let A=ge.EMPTY_NODE;return Jt(t,(n,r)=>{if(On(t,n)&&n.substring(0,1)!=="."){const s=Ht(r);(s.isLeafNode()||!s.isEmpty())&&(A=A.updateImmediateChild(n,s))}}),A.updatePriority(Ht(e))}}ik(Ht);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk extends md{constructor(e){super(),this.indexPath_=e,Y(!be(e)&&Qe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,A){const n=this.extractChild(e.node),r=this.extractChild(A.node),s=n.compareTo(r);return s===0?Js(e.name,A.name):s}makePost(e,A){const n=Ht(e),r=ge.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ue(A,r)}maxPost(){const e=ge.EMPTY_NODE.updateChild(this.indexPath_,hl);return new Ue(Gs,e)}toString(){return za(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk extends md{compare(e,A){const n=e.node.compareTo(A.node);return n===0?Js(e.name,A.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,A){return!e.equals(A)}minPost(){return Ue.MIN}maxPost(){return Ue.MAX}makePost(e,A){const n=Ht(e);return new Ue(A,n)}toString(){return".value"}}const pk=new hk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t){return{type:"value",snapshotNode:t}}function to(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Va(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function $a(t,e,A){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:A}}function gk(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.index_=e}updateChild(e,A,n,r,s,i){Y(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(A);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()||(i!=null&&(n.isEmpty()?e.hasChild(A)?i.trackChildChange(Va(A,o)):Y(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?i.trackChildChange(to(A,n)):i.trackChildChange($a(A,n,o))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(A,n).withIndex(this.index_)}updateFullNode(e,A,n){return n!=null&&(e.isLeafNode()||e.forEachChild(ht,(r,s)=>{A.hasChild(r)||n.trackChildChange(Va(r,s))}),A.isLeafNode()||A.forEachChild(ht,(r,s)=>{if(e.hasChild(r)){const i=e.getImmediateChild(r);i.equals(s)||n.trackChildChange($a(r,s,i))}else n.trackChildChange(to(r,s))})),A.withIndex(this.index_)}updatePriority(e,A){return e.isEmpty()?ge.EMPTY_NODE:e.updatePriority(A)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.indexedFilter_=new ym(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Xa.getStartPost_(e),this.endPost_=Xa.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const A=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return A&&n}updateChild(e,A,n,r,s,i){return this.matches(new Ue(A,n))||(n=ge.EMPTY_NODE),this.indexedFilter_.updateChild(e,A,n,r,s,i)}updateFullNode(e,A,n){A.isLeafNode()&&(A=ge.EMPTY_NODE);let r=A.withIndex(this.index_);r=r.updatePriority(ge.EMPTY_NODE);const s=this;return A.forEachChild(ht,(i,o)=>{s.matches(new Ue(i,o))||(r=r.updateImmediateChild(i,ge.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,A){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const A=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),A)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const A=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),A)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.withinDirectionalStart=A=>this.reverse_?this.withinEndPost(A):this.withinStartPost(A),this.withinDirectionalEnd=A=>this.reverse_?this.withinStartPost(A):this.withinEndPost(A),this.withinStartPost=A=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),A);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=A=>{const n=this.index_.compare(A,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new Xa(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,A,n,r,s,i){return this.rangedFilter_.matches(new Ue(A,n))||(n=ge.EMPTY_NODE),e.getImmediateChild(A).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,A,n,r,s,i):this.fullLimitUpdateChild_(e,A,n,s,i)}updateFullNode(e,A,n){let r;if(A.isLeafNode()||A.isEmpty())r=ge.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<A.numChildren()&&A.isIndexed(this.index_)){r=ge.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=A.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=A.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let i=0;for(;s.hasNext()&&i<this.limit_;){const o=s.getNext();if(this.withinDirectionalStart(o))if(this.withinDirectionalEnd(o))r=r.updateImmediateChild(o.name,o.node),i++;else break;else continue}}else{r=A.withIndex(this.index_),r=r.updatePriority(ge.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let i=0;for(;s.hasNext();){const o=s.getNext();i<this.limit_&&this.withinDirectionalStart(o)&&this.withinDirectionalEnd(o)?i++:r=r.updateImmediateChild(o.name,ge.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,A){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,A,n,r,s){let i;if(this.reverse_){const d=this.index_.getCompare();i=(f,h)=>d(h,f)}else i=this.index_.getCompare();const o=e;Y(o.numChildren()===this.limit_,"");const a=new Ue(A,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(A)){const d=o.getImmediateChild(A);let f=r.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===A||o.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);const h=f==null?1:i(f,a);if(c&&!n.isEmpty()&&h>=0)return s!=null&&s.trackChildChange($a(A,n,d)),o.updateImmediateChild(A,n);{s!=null&&s.trackChildChange(Va(A,d));const C=o.updateImmediateChild(A,ge.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(to(f.name,f.node)),C.updateImmediateChild(f.name,f.node)):C}}else return n.isEmpty()?e:c&&i(l,a)>=0?(s!=null&&(s.trackChildChange(Va(l.name,l.node)),s.trackChildChange(to(A,n))),o.updateImmediateChild(A,n).updateImmediateChild(l.name,ge.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ht}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:eo}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ht}copy(){const e=new vm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function wk(t){return t.loadsAllData()?new ym(t.getIndex()):t.hasLimit()?new mk(t):new Xa(t)}function b0(t){const e={};if(t.isDefault())return e;let A;if(t.index_===ht?A="$priority":t.index_===pk?A="$value":t.index_===Oi?A="$key":(Y(t.index_ instanceof fk,"Unrecognized index type!"),A=t.index_.toString()),e.orderBy=Lt(A),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=Lt(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+Lt(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=Lt(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+Lt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function S0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let A=t.viewFrom_;A===""&&(t.isViewFromLeft()?A="l":A="r"),e.vf=A}return t.index_!==ht&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends XE{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,A){return A!==void 0?"tag$"+A:(Y(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,A,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=A,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=fl("p:rest:"),this.listens_={}}listen(e,A,n,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const i=xu.getListenId_(e,n),o={};this.listens_[i]=o;const a=b0(e._queryParams);this.restRequest_(s+".json",a,(l,c)=>{let d=c;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,n),Ji(this.listens_,i)===o){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",r(f,null)}})}unlisten(e,A){const n=xu.getListenId_(e,A);delete this.listens_[n]}get(e){const A=b0(e._queryParams),n=e._path.toString(),r=new ol;return this.restRequest_(n+".json",A,(s,i)=>{let o=i;s===404&&(o=null,s=null),s===null?(this.onDataUpdate_(n,o,!1,null),r.resolve(o)):r.reject(new Error(o))}),r.promise}refreshAuthToken(e){}restRequest_(e,A={},n){return A.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(A.auth=r.accessToken),s&&s.token&&(A.ac=s.token);const i=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+uo(A);this.log_("Sending REST request for "+i);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&o.readyState===4){this.log_("REST Response for "+i+" received. status:",o.status,"response:",o.responseText);let a=null;if(o.status>=200&&o.status<300){try{a=Ka(o.responseText)}catch{gA("Failed to parse JSON response for "+i+": "+o.responseText)}n(null,a)}else o.status!==401&&o.status!==404&&gA("Got unsuccessful REST response for "+i+" Status: "+o.status),n(o.status);n=null}},o.open("GET",i,!0),o.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.rootNode_=ge.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,A){this.rootNode_=this.rootNode_.updateChild(e,A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(){return{value:null,children:new Map}}function s_(t,e,A){if(be(e))t.value=A,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,A);else{const n=Qe(e);t.children.has(n)||t.children.set(n,Eu());const r=t.children.get(n);e=et(e),s_(r,e,A)}}function dp(t,e,A){t.value!==null?A(e,t.value):yk(t,(n,r)=>{const s=new Je(e.toString()+"/"+n);dp(r,s,A)})}function yk(t,e){t.children.forEach((A,n)=>{e(n,A)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),A={...e};return this.last_&&Jt(this.last_,(n,r)=>{A[n]=A[n]-r}),this.last_=e,A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=10*1e3,Ck=30*1e3,xk=5*60*1e3;class Ek{constructor(e,A){this.server_=A,this.statsToReport_={},this.statsListener_=new vk(e);const n=T0+(Ck-T0)*Math.random();fa(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),A={};let n=!1;Jt(e,(r,s)=>{s>0&&On(this.statsToReport_,r)&&(A[r]=s,n=!0)}),n&&this.server_.reportStats(A),fa(this.reportStats_.bind(this),Math.floor(Math.random()*2*xk))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(wn||(wn={}));function Cm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function xm(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Em(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,A,n){this.path=e,this.affectedTree=A,this.revert=n,this.type=wn.ACK_USER_WRITE,this.source=Cm()}operationForChild(e){if(be(this.path)){if(this.affectedTree.value!=null)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const A=this.affectedTree.subtree(new Je(e));return new _u(je(),A,this.revert)}}else return Y(Qe(this.path)===e,"operationForChild called for unrelated child."),new _u(et(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,A){this.source=e,this.path=A,this.type=wn.LISTEN_COMPLETE}operationForChild(e){return be(this.path)?new Ya(this.source,je()):new Ya(this.source,et(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,A,n){this.source=e,this.path=A,this.snap=n,this.type=wn.OVERWRITE}operationForChild(e){return be(this.path)?new Ws(this.source,je(),this.snap.getImmediateChild(e)):new Ws(this.source,et(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,A,n){this.source=e,this.path=A,this.children=n,this.type=wn.MERGE}operationForChild(e){if(be(this.path)){const A=this.children.subtree(new Je(e));return A.isEmpty()?null:A.value?new Ws(this.source,je(),A.value):new Ao(this.source,je(),A)}else return Y(Qe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ao(this.source,et(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,A,n){this.node_=e,this.fullyInitialized_=A,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(be(e))return this.isFullyInitialized()&&!this.filtered_;const A=Qe(e);return this.isCompleteForChild(A)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Fk(t,e,A,n){const r=[],s=[];return e.forEach(i=>{i.type==="child_changed"&&t.index_.indexedValueChanged(i.oldSnap,i.snapshotNode)&&s.push(gk(i.childName,i.snapshotNode))}),Ro(t,r,"child_removed",e,n,A),Ro(t,r,"child_added",e,n,A),Ro(t,r,"child_moved",s,n,A),Ro(t,r,"child_changed",e,n,A),Ro(t,r,"value",e,n,A),r}function Ro(t,e,A,n,r,s){const i=n.filter(o=>o.type===A);i.sort((o,a)=>Qk(t,o,a)),i.forEach(o=>{const a=Ik(t,o,s);r.forEach(l=>{l.respondsTo(o.type)&&e.push(l.createEvent(a,t.query_))})})}function Ik(t,e,A){return e.type==="value"||e.type==="child_removed"||(e.prevName=A.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Qk(t,e,A){if(e.childName==null||A.childName==null)throw lo("Should only compare child_ events.");const n=new Ue(e.childName,e.snapshotNode),r=new Ue(A.childName,A.snapshotNode);return t.index_.compare(n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t,e){return{eventCache:t,serverCache:e}}function ha(t,e,A,n){return wd(new zs(e,A,n),t.serverCache)}function i_(t,e,A,n){return wd(t.eventCache,new zs(e,A,n))}function fp(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Vs(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bf;const Uk=()=>(bf||(bf=new FA(f2)),bf);class qe{static fromObject(e){let A=new qe(null);return Jt(e,(n,r)=>{A=A.set(new Je(n),r)}),A}constructor(e,A=Uk()){this.value=e,this.children=A}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,A){if(this.value!=null&&A(this.value))return{path:je(),value:this.value};if(be(e))return null;{const n=Qe(e),r=this.children.get(n);if(r!==null){const s=r.findRootMostMatchingPathAndValue(et(e),A);return s!=null?{path:ft(new Je(n),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(be(e))return this;{const A=Qe(e),n=this.children.get(A);return n!==null?n.subtree(et(e)):new qe(null)}}set(e,A){if(be(e))return new qe(A,this.children);{const n=Qe(e),s=(this.children.get(n)||new qe(null)).set(et(e),A),i=this.children.insert(n,s);return new qe(this.value,i)}}remove(e){if(be(e))return this.children.isEmpty()?new qe(null):new qe(null,this.children);{const A=Qe(e),n=this.children.get(A);if(n){const r=n.remove(et(e));let s;return r.isEmpty()?s=this.children.remove(A):s=this.children.insert(A,r),this.value===null&&s.isEmpty()?new qe(null):new qe(this.value,s)}else return this}}get(e){if(be(e))return this.value;{const A=Qe(e),n=this.children.get(A);return n?n.get(et(e)):null}}setTree(e,A){if(be(e))return A;{const n=Qe(e),s=(this.children.get(n)||new qe(null)).setTree(et(e),A);let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),new qe(this.value,i)}}fold(e){return this.fold_(je(),e)}fold_(e,A){const n={};return this.children.inorderTraversal((r,s)=>{n[r]=s.fold_(ft(e,r),A)}),A(e,this.value,n)}findOnPath(e,A){return this.findOnPath_(e,je(),A)}findOnPath_(e,A,n){const r=this.value?n(A,this.value):!1;if(r)return r;if(be(e))return null;{const s=Qe(e),i=this.children.get(s);return i?i.findOnPath_(et(e),ft(A,s),n):null}}foreachOnPath(e,A){return this.foreachOnPath_(e,je(),A)}foreachOnPath_(e,A,n){if(be(e))return this;{this.value&&n(A,this.value);const r=Qe(e),s=this.children.get(r);return s?s.foreachOnPath_(et(e),ft(A,r),n):new qe(null)}}foreach(e){this.foreach_(je(),e)}foreach_(e,A){this.children.inorderTraversal((n,r)=>{r.foreach_(ft(e,n),A)}),this.value&&A(e,this.value)}foreachChild(e){this.children.inorderTraversal((A,n)=>{n.value&&e(A,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.writeTree_=e}static empty(){return new Cn(new qe(null))}}function pa(t,e,A){if(be(e))return new Cn(new qe(A));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const r=n.path;let s=n.value;const i=_A(r,e);return s=s.updateChild(i,A),new Cn(t.writeTree_.set(r,s))}else{const r=new qe(A),s=t.writeTree_.setTree(e,r);return new Cn(s)}}}function hp(t,e,A){let n=t;return Jt(A,(r,s)=>{n=pa(n,ft(e,r),s)}),n}function N0(t,e){if(be(e))return Cn.empty();{const A=t.writeTree_.setTree(e,new qe(null));return new Cn(A)}}function pp(t,e){return Zs(t,e)!=null}function Zs(t,e){const A=t.writeTree_.findRootMostValueAndPath(e);return A!=null?t.writeTree_.get(A.path).getChild(_A(A.path,e)):null}function k0(t){const e=[],A=t.writeTree_.value;return A!=null?A.isLeafNode()||A.forEachChild(ht,(n,r)=>{e.push(new Ue(n,r))}):t.writeTree_.children.inorderTraversal((n,r)=>{r.value!=null&&e.push(new Ue(n,r.value))}),e}function Jr(t,e){if(be(e))return t;{const A=Zs(t,e);return A!=null?new Cn(new qe(A)):new Cn(t.writeTree_.subtree(e))}}function gp(t){return t.writeTree_.isEmpty()}function no(t,e){return o_(je(),t.writeTree_,e)}function o_(t,e,A){if(e.value!=null)return A.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(Y(s.value!==null,"Priority writes must always be leaf nodes"),n=s.value):A=o_(ft(t,r),s,A)}),!A.getChild(t).isEmpty()&&n!==null&&(A=A.updateChild(ft(t,".priority"),n)),A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t,e){return u_(e,t)}function bk(t,e,A,n,r){Y(n>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:A,writeId:n,visible:r}),r&&(t.visibleWrites=pa(t.visibleWrites,e,A)),t.lastWriteId=n}function Sk(t,e,A,n){Y(n>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:A,writeId:n,visible:!0}),t.visibleWrites=hp(t.visibleWrites,e,A),t.lastWriteId=n}function Tk(t,e){for(let A=0;A<t.allWrites.length;A++){const n=t.allWrites[A];if(n.writeId===e)return n}return null}function Nk(t,e){const A=t.allWrites.findIndex(o=>o.writeId===e);Y(A>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[A];t.allWrites.splice(A,1);let r=n.visible,s=!1,i=t.allWrites.length-1;for(;r&&i>=0;){const o=t.allWrites[i];o.visible&&(i>=A&&kk(o,n.path)?r=!1:ZA(n.path,o.path)&&(s=!0)),i--}if(r){if(s)return Dk(t),!0;if(n.snap)t.visibleWrites=N0(t.visibleWrites,n.path);else{const o=n.children;Jt(o,a=>{t.visibleWrites=N0(t.visibleWrites,ft(n.path,a))})}return!0}else return!1}function kk(t,e){if(t.snap)return ZA(t.path,e);for(const A in t.children)if(t.children.hasOwnProperty(A)&&ZA(ft(t.path,A),e))return!0;return!1}function Dk(t){t.visibleWrites=a_(t.allWrites,Hk,je()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Hk(t){return t.visible}function a_(t,e,A){let n=Cn.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const i=s.path;let o;if(s.snap)ZA(A,i)?(o=_A(A,i),n=pa(n,o,s.snap)):ZA(i,A)&&(o=_A(i,A),n=pa(n,je(),s.snap.getChild(o)));else if(s.children){if(ZA(A,i))o=_A(A,i),n=hp(n,o,s.children);else if(ZA(i,A))if(o=_A(i,A),be(o))n=hp(n,je(),s.children);else{const a=Ji(s.children,Qe(o));if(a){const l=a.getChild(et(o));n=pa(n,je(),l)}}}else throw lo("WriteRecord should have .snap or .children")}}return n}function l_(t,e,A,n,r){if(!n&&!r){const s=Zs(t.visibleWrites,e);if(s!=null)return s;{const i=Jr(t.visibleWrites,e);if(gp(i))return A;if(A==null&&!pp(i,je()))return null;{const o=A||ge.EMPTY_NODE;return no(i,o)}}}else{const s=Jr(t.visibleWrites,e);if(!r&&gp(s))return A;if(!r&&A==null&&!pp(s,je()))return null;{const i=function(l){return(l.visible||r)&&(!n||!~n.indexOf(l.writeId))&&(ZA(l.path,e)||ZA(e,l.path))},o=a_(t.allWrites,i,e),a=A||ge.EMPTY_NODE;return no(o,a)}}}function Lk(t,e,A){let n=ge.EMPTY_NODE;const r=Zs(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(ht,(s,i)=>{n=n.updateImmediateChild(s,i)}),n;if(A){const s=Jr(t.visibleWrites,e);return A.forEachChild(ht,(i,o)=>{const a=no(Jr(s,new Je(i)),o);n=n.updateImmediateChild(i,a)}),k0(s).forEach(i=>{n=n.updateImmediateChild(i.name,i.node)}),n}else{const s=Jr(t.visibleWrites,e);return k0(s).forEach(i=>{n=n.updateImmediateChild(i.name,i.node)}),n}}function Rk(t,e,A,n,r){Y(n||r,"Either existingEventSnap or existingServerSnap must exist");const s=ft(e,A);if(pp(t.visibleWrites,s))return null;{const i=Jr(t.visibleWrites,s);return gp(i)?r.getChild(A):no(i,r.getChild(A))}}function Pk(t,e,A,n){const r=ft(e,A),s=Zs(t.visibleWrites,r);if(s!=null)return s;if(n.isCompleteForChild(A)){const i=Jr(t.visibleWrites,r);return no(i,n.getNode().getImmediateChild(A))}else return null}function Mk(t,e){return Zs(t.visibleWrites,e)}function Ok(t,e,A,n,r,s,i){let o;const a=Jr(t.visibleWrites,e),l=Zs(a,je());if(l!=null)o=l;else if(A!=null)o=no(a,A);else return[];if(o=o.withIndex(i),!o.isEmpty()&&!o.isLeafNode()){const c=[],d=i.getCompare(),f=s?o.getReverseIteratorFrom(n,i):o.getIteratorFrom(n,i);let h=f.getNext();for(;h&&c.length<r;)d(h,n)!==0&&c.push(h),h=f.getNext();return c}else return[]}function Kk(){return{visibleWrites:Cn.empty(),allWrites:[],lastWriteId:-1}}function Fu(t,e,A,n){return l_(t.writeTree,t.treePath,e,A,n)}function Fm(t,e){return Lk(t.writeTree,t.treePath,e)}function D0(t,e,A,n){return Rk(t.writeTree,t.treePath,e,A,n)}function Iu(t,e){return Mk(t.writeTree,ft(t.treePath,e))}function jk(t,e,A,n,r,s){return Ok(t.writeTree,t.treePath,e,A,n,r,s)}function Im(t,e,A){return Pk(t.writeTree,t.treePath,e,A)}function c_(t,e){return u_(ft(t.treePath,e),t.writeTree)}function u_(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.changeMap=new Map}trackChildChange(e){const A=e.type,n=e.childName;Y(A==="child_added"||A==="child_changed"||A==="child_removed","Only child changes supported for tracking"),Y(n!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const s=r.type;if(A==="child_added"&&s==="child_removed")this.changeMap.set(n,$a(n,e.snapshotNode,r.snapshotNode));else if(A==="child_removed"&&s==="child_added")this.changeMap.delete(n);else if(A==="child_removed"&&s==="child_changed")this.changeMap.set(n,Va(n,r.oldSnap));else if(A==="child_changed"&&s==="child_added")this.changeMap.set(n,to(n,e.snapshotNode));else if(A==="child_changed"&&s==="child_changed")this.changeMap.set(n,$a(n,e.snapshotNode,r.oldSnap));else throw lo("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{getCompleteChild(e){return null}getChildAfterChild(e,A,n){return null}}const d_=new Wk;class Qm{constructor(e,A,n=null){this.writes_=e,this.viewCache_=A,this.optCompleteServerCache_=n}getCompleteChild(e){const A=this.viewCache_.eventCache;if(A.isCompleteForChild(e))return A.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new zs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Im(this.writes_,e,n)}}getChildAfterChild(e,A,n){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Vs(this.viewCache_),s=jk(this.writes_,r,A,1,n,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(t){return{filter:t}}function Vk(t,e){Y(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Y(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function $k(t,e,A,n,r){const s=new Gk;let i,o;if(A.type===wn.OVERWRITE){const l=A;l.source.fromUser?i=mp(t,e,l.path,l.snap,n,r,s):(Y(l.source.fromServer,"Unknown source."),o=l.source.tagged||e.serverCache.isFiltered()&&!be(l.path),i=Qu(t,e,l.path,l.snap,n,r,o,s))}else if(A.type===wn.MERGE){const l=A;l.source.fromUser?i=Yk(t,e,l.path,l.children,n,r,s):(Y(l.source.fromServer,"Unknown source."),o=l.source.tagged||e.serverCache.isFiltered(),i=wp(t,e,l.path,l.children,n,r,o,s))}else if(A.type===wn.ACK_USER_WRITE){const l=A;l.revert?i=qk(t,e,l.path,n,r,s):i=Jk(t,e,l.path,l.affectedTree,n,r,s)}else if(A.type===wn.LISTEN_COMPLETE)i=Zk(t,e,A.path,n,s);else throw lo("Unknown operation type: "+A.type);const a=s.getChanges();return Xk(e,i,a),{viewCache:i,changes:a}}function Xk(t,e,A){const n=e.eventCache;if(n.isFullyInitialized()){const r=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=fp(t);(A.length>0||!t.eventCache.isFullyInitialized()||r&&!n.getNode().equals(s)||!n.getNode().getPriority().equals(s.getPriority()))&&A.push(r_(fp(e)))}}function f_(t,e,A,n,r,s){const i=e.eventCache;if(Iu(n,A)!=null)return e;{let o,a;if(be(A))if(Y(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Vs(e),c=l instanceof ge?l:ge.EMPTY_NODE,d=Fm(n,c);o=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const l=Fu(n,Vs(e));o=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=Qe(A);if(l===".priority"){Y(As(A)===1,"Can't have a priority with additional path components");const c=i.getNode();a=e.serverCache.getNode();const d=D0(n,A,c,a);d!=null?o=t.filter.updatePriority(c,d):o=i.getNode()}else{const c=et(A);let d;if(i.isCompleteForChild(l)){a=e.serverCache.getNode();const f=D0(n,A,i.getNode(),a);f!=null?d=i.getNode().getImmediateChild(l).updateChild(c,f):d=i.getNode().getImmediateChild(l)}else d=Im(n,l,e.serverCache);d!=null?o=t.filter.updateChild(i.getNode(),l,d,c,r,s):o=i.getNode()}}return ha(e,o,i.isFullyInitialized()||be(A),t.filter.filtersNodes())}}function Qu(t,e,A,n,r,s,i,o){const a=e.serverCache;let l;const c=i?t.filter:t.filter.getIndexedFilter();if(be(A))l=c.updateFullNode(a.getNode(),n,null);else if(c.filtersNodes()&&!a.isFiltered()){const h=a.getNode().updateChild(A,n);l=c.updateFullNode(a.getNode(),h,null)}else{const h=Qe(A);if(!a.isCompleteForPath(A)&&As(A)>1)return e;const m=et(A),Q=a.getNode().getImmediateChild(h).updateChild(m,n);h===".priority"?l=c.updatePriority(a.getNode(),Q):l=c.updateChild(a.getNode(),h,Q,m,d_,null)}const d=i_(e,l,a.isFullyInitialized()||be(A),c.filtersNodes()),f=new Qm(r,d,s);return f_(t,d,A,r,f,o)}function mp(t,e,A,n,r,s,i){const o=e.eventCache;let a,l;const c=new Qm(r,e,s);if(be(A))l=t.filter.updateFullNode(e.eventCache.getNode(),n,i),a=ha(e,l,!0,t.filter.filtersNodes());else{const d=Qe(A);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),n),a=ha(e,l,o.isFullyInitialized(),o.isFiltered());else{const f=et(A),h=o.getNode().getImmediateChild(d);let m;if(be(f))m=n;else{const C=c.getCompleteChild(d);C!=null?gm(f)===".priority"&&C.getChild(JE(f)).isEmpty()?m=C:m=C.updateChild(f,n):m=ge.EMPTY_NODE}if(h.equals(m))a=e;else{const C=t.filter.updateChild(o.getNode(),d,m,f,c,i);a=ha(e,C,o.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function H0(t,e){return t.eventCache.isCompleteForChild(e)}function Yk(t,e,A,n,r,s,i){let o=e;return n.foreach((a,l)=>{const c=ft(A,a);H0(e,Qe(c))&&(o=mp(t,o,c,l,r,s,i))}),n.foreach((a,l)=>{const c=ft(A,a);H0(e,Qe(c))||(o=mp(t,o,c,l,r,s,i))}),o}function L0(t,e,A){return A.foreach((n,r)=>{e=e.updateChild(n,r)}),e}function wp(t,e,A,n,r,s,i,o){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,l;be(A)?l=n:l=new qe(null).setTree(A,n);const c=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(c.hasChild(d)){const h=e.serverCache.getNode().getImmediateChild(d),m=L0(t,h,f);a=Qu(t,a,new Je(d),m,r,s,i,o)}}),l.children.inorderTraversal((d,f)=>{const h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!c.hasChild(d)&&!h){const m=e.serverCache.getNode().getImmediateChild(d),C=L0(t,m,f);a=Qu(t,a,new Je(d),C,r,s,i,o)}}),a}function Jk(t,e,A,n,r,s,i){if(Iu(r,A)!=null)return e;const o=e.serverCache.isFiltered(),a=e.serverCache;if(n.value!=null){if(be(A)&&a.isFullyInitialized()||a.isCompleteForPath(A))return Qu(t,e,A,a.getNode().getChild(A),r,s,o,i);if(be(A)){let l=new qe(null);return a.getNode().forEachChild(Oi,(c,d)=>{l=l.set(new Je(c),d)}),wp(t,e,A,l,r,s,o,i)}else return e}else{let l=new qe(null);return n.foreach((c,d)=>{const f=ft(A,c);a.isCompleteForPath(f)&&(l=l.set(c,a.getNode().getChild(f)))}),wp(t,e,A,l,r,s,o,i)}}function Zk(t,e,A,n,r){const s=e.serverCache,i=i_(e,s.getNode(),s.isFullyInitialized()||be(A),s.isFiltered());return f_(t,i,A,n,d_,r)}function qk(t,e,A,n,r,s){let i;if(Iu(n,A)!=null)return e;{const o=new Qm(n,e,r),a=e.eventCache.getNode();let l;if(be(A)||Qe(A)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=Fu(n,Vs(e));else{const d=e.serverCache.getNode();Y(d instanceof ge,"serverChildren would be complete if leaf node"),c=Fm(n,d)}c=c,l=t.filter.updateFullNode(a,c,s)}else{const c=Qe(A);let d=Im(n,c,e.serverCache);d==null&&e.serverCache.isCompleteForChild(c)&&(d=a.getImmediateChild(c)),d!=null?l=t.filter.updateChild(a,c,d,et(A),o,s):e.eventCache.getNode().hasChild(c)?l=t.filter.updateChild(a,c,ge.EMPTY_NODE,et(A),o,s):l=a,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(i=Fu(n,Vs(e)),i.isLeafNode()&&(l=t.filter.updateFullNode(l,i,s)))}return i=e.serverCache.isFullyInitialized()||Iu(n,je())!=null,ha(e,l,i,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,A){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new ym(n.getIndex()),s=wk(n);this.processor_=zk(s);const i=A.serverCache,o=A.eventCache,a=r.updateFullNode(ge.EMPTY_NODE,i.getNode(),null),l=s.updateFullNode(ge.EMPTY_NODE,o.getNode(),null),c=new zs(a,i.isFullyInitialized(),r.filtersNodes()),d=new zs(l,o.isFullyInitialized(),s.filtersNodes());this.viewCache_=wd(d,c),this.eventGenerator_=new _k(this.query_)}get query(){return this.query_}}function tD(t){return t.viewCache_.serverCache.getNode()}function AD(t,e){const A=Vs(t.viewCache_);return A&&(t.query._queryParams.loadsAllData()||!be(e)&&!A.getImmediateChild(Qe(e)).isEmpty())?A.getChild(e):null}function R0(t){return t.eventRegistrations_.length===0}function nD(t,e){t.eventRegistrations_.push(e)}function P0(t,e,A){const n=[];if(A){Y(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(s=>{const i=s.createCancelEvent(A,r);i&&n.push(i)})}if(e){let r=[];for(let s=0;s<t.eventRegistrations_.length;++s){const i=t.eventRegistrations_[s];if(!i.matches(e))r.push(i);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return n}function M0(t,e,A,n){e.type===wn.MERGE&&e.source.queryId!==null&&(Y(Vs(t.viewCache_),"We should always have a full cache before handling merges"),Y(fp(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=$k(t.processor_,r,e,A,n);return Vk(t.processor_,s.viewCache),Y(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,h_(t,s.changes,s.viewCache.eventCache.getNode(),null)}function rD(t,e){const A=t.viewCache_.eventCache,n=[];return A.getNode().isLeafNode()||A.getNode().forEachChild(ht,(s,i)=>{n.push(to(s,i))}),A.isFullyInitialized()&&n.push(r_(A.getNode())),h_(t,n,A.getNode(),e)}function h_(t,e,A,n){const r=n?[n]:t.eventRegistrations_;return Fk(t.eventGenerator_,e,A,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu;class sD{constructor(){this.views=new Map}}function iD(t){Y(!Uu,"__referenceConstructor has already been defined"),Uu=t}function oD(){return Y(Uu,"Reference.ts has not been loaded"),Uu}function aD(t){return t.views.size===0}function Um(t,e,A,n){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return Y(s!=null,"SyncTree gave us an op for an invalid query."),M0(s,e,A,n)}else{let s=[];for(const i of t.views.values())s=s.concat(M0(i,e,A,n));return s}}function lD(t,e,A,n,r){const s=e._queryIdentifier,i=t.views.get(s);if(!i){let o=Fu(A,r?n:null),a=!1;o?a=!0:n instanceof ge?(o=Fm(A,n),a=!1):(o=ge.EMPTY_NODE,a=!1);const l=wd(new zs(o,a,!1),new zs(n,r,!1));return new eD(e,l)}return i}function cD(t,e,A,n,r,s){const i=lD(t,e,n,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,i),nD(i,A),rD(i,A)}function uD(t,e,A,n){const r=e._queryIdentifier,s=[];let i=[];const o=ns(t);if(r==="default")for(const[a,l]of t.views.entries())i=i.concat(P0(l,A,n)),R0(l)&&(t.views.delete(a),l.query._queryParams.loadsAllData()||s.push(l.query));else{const a=t.views.get(r);a&&(i=i.concat(P0(a,A,n)),R0(a)&&(t.views.delete(r),a.query._queryParams.loadsAllData()||s.push(a.query)))}return o&&!ns(t)&&s.push(new(oD())(e._repo,e._path)),{removed:s,events:i}}function p_(t){const e=[];for(const A of t.views.values())A.query._queryParams.loadsAllData()||e.push(A);return e}function Ki(t,e){let A=null;for(const n of t.views.values())A=A||AD(n,e);return A}function g_(t,e){if(e._queryParams.loadsAllData())return Bd(t);{const n=e._queryIdentifier;return t.views.get(n)}}function m_(t,e){return g_(t,e)!=null}function ns(t){return Bd(t)!=null}function Bd(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu;function dD(t){Y(!bu,"__referenceConstructor has already been defined"),bu=t}function fD(){return Y(bu,"Reference.ts has not been loaded"),bu}let hD=1;class O0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new qe(null),this.pendingWriteTree_=Kk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function w_(t,e,A,n,r){return bk(t.pendingWriteTree_,e,A,n,r),r?go(t,new Ws(Cm(),e,A)):[]}function pD(t,e,A,n){Sk(t.pendingWriteTree_,e,A,n);const r=qe.fromObject(A);return go(t,new Ao(Cm(),e,r))}function Hr(t,e,A=!1){const n=Tk(t.pendingWriteTree_,e);if(Nk(t.pendingWriteTree_,e)){let s=new qe(null);return n.snap!=null?s=s.set(je(),!0):Jt(n.children,i=>{s=s.set(new Je(i),!0)}),go(t,new _u(n.path,s,A))}else return[]}function yd(t,e,A){return go(t,new Ws(xm(),e,A))}function gD(t,e,A){const n=qe.fromObject(A);return go(t,new Ao(xm(),e,n))}function mD(t,e){return go(t,new Ya(xm(),e))}function wD(t,e,A){const n=Sm(t,A);if(n){const r=Tm(n),s=r.path,i=r.queryId,o=_A(s,e),a=new Ya(Em(i),o);return Nm(t,s,a)}else return[]}function Bp(t,e,A,n,r=!1){const s=e._path,i=t.syncPointTree_.get(s);let o=[];if(i&&(e._queryIdentifier==="default"||m_(i,e))){const a=uD(i,e,A,n);aD(i)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const l=a.removed;if(o=a.events,!r){const c=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,h)=>ns(h));if(c&&!d){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const h=vD(f);for(let m=0;m<h.length;++m){const C=h[m],Q=C.query,g=v_(t,C);t.listenProvider_.startListening(ga(Q),Su(t,Q),g.hashFn,g.onComplete)}}}!d&&l.length>0&&!n&&(c?t.listenProvider_.stopListening(ga(e),null):l.forEach(f=>{const h=t.queryToTagMap.get(vd(f));t.listenProvider_.stopListening(ga(f),h)}))}CD(t,l)}return o}function BD(t,e,A,n){const r=Sm(t,n);if(r!=null){const s=Tm(r),i=s.path,o=s.queryId,a=_A(i,e),l=new Ws(Em(o),a,A);return Nm(t,i,l)}else return[]}function yD(t,e,A,n){const r=Sm(t,n);if(r){const s=Tm(r),i=s.path,o=s.queryId,a=_A(i,e),l=qe.fromObject(A),c=new Ao(Em(o),a,l);return Nm(t,i,c)}else return[]}function K0(t,e,A,n=!1){const r=e._path;let s=null,i=!1;t.syncPointTree_.foreachOnPath(r,(f,h)=>{const m=_A(f,r);s=s||Ki(h,m),i=i||ns(h)});let o=t.syncPointTree_.get(r);o?(i=i||ns(o),s=s||Ki(o,je())):(o=new sD,t.syncPointTree_=t.syncPointTree_.set(r,o));let a;s!=null?a=!0:(a=!1,s=ge.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((h,m)=>{const C=Ki(m,je());C&&(s=s.updateImmediateChild(h,C))}));const l=m_(o,e);if(!l&&!e._queryParams.loadsAllData()){const f=vd(e);Y(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const h=xD();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}const c=_m(t.pendingWriteTree_,r);let d=cD(o,e,A,c,s,a);if(!l&&!i&&!n){const f=g_(o,e);d=d.concat(ED(t,e,f))}return d}function bm(t,e,A){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(i,o)=>{const a=_A(i,e),l=Ki(o,a);if(l)return l});return l_(r,e,s,A,!0)}function go(t,e){return B_(e,t.syncPointTree_,null,_m(t.pendingWriteTree_,je()))}function B_(t,e,A,n){if(be(t.path))return y_(t,e,A,n);{const r=e.get(je());A==null&&r!=null&&(A=Ki(r,je()));let s=[];const i=Qe(t.path),o=t.operationForChild(i),a=e.children.get(i);if(a&&o){const l=A?A.getImmediateChild(i):null,c=c_(n,i);s=s.concat(B_(o,a,l,c))}return r&&(s=s.concat(Um(r,t,n,A))),s}}function y_(t,e,A,n){const r=e.get(je());A==null&&r!=null&&(A=Ki(r,je()));let s=[];return e.children.inorderTraversal((i,o)=>{const a=A?A.getImmediateChild(i):null,l=c_(n,i),c=t.operationForChild(i);c&&(s=s.concat(y_(c,o,a,l)))}),r&&(s=s.concat(Um(r,t,n,A))),s}function v_(t,e){const A=e.query,n=Su(t,A);return{hashFn:()=>(tD(e)||ge.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return n?wD(t,A._path,n):mD(t,A._path);{const s=g2(r,A);return Bp(t,A,null,s)}}}}function Su(t,e){const A=vd(e);return t.queryToTagMap.get(A)}function vd(t){return t._path.toString()+"$"+t._queryIdentifier}function Sm(t,e){return t.tagToQueryMap.get(e)}function Tm(t){const e=t.indexOf("$");return Y(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Je(t.substr(0,e))}}function Nm(t,e,A){const n=t.syncPointTree_.get(e);Y(n,"Missing sync point for query tag that we're tracking");const r=_m(t.pendingWriteTree_,e);return Um(n,A,r,null)}function vD(t){return t.fold((e,A,n)=>{if(A&&ns(A))return[Bd(A)];{let r=[];return A&&(r=p_(A)),Jt(n,(s,i)=>{r=r.concat(i)}),r}})}function ga(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(fD())(t._repo,t._path):t}function CD(t,e){for(let A=0;A<e.length;++A){const n=e[A];if(!n._queryParams.loadsAllData()){const r=vd(n),s=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(s)}}}function xD(){return hD++}function ED(t,e,A){const n=e._path,r=Su(t,e),s=v_(t,A),i=t.listenProvider_.startListening(ga(e),r,s.hashFn,s.onComplete),o=t.syncPointTree_.subtree(n);if(r)Y(!ns(o.value),"If we're adding a query, it shouldn't be shadowed");else{const a=o.fold((l,c,d)=>{if(!be(l)&&c&&ns(c))return[Bd(c).query];{let f=[];return c&&(f=f.concat(p_(c).map(h=>h.query))),Jt(d,(h,m)=>{f=f.concat(m)}),f}});for(let l=0;l<a.length;++l){const c=a[l];t.listenProvider_.stopListening(ga(c),Su(t,c))}}return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e){this.node_=e}getImmediateChild(e){const A=this.node_.getImmediateChild(e);return new km(A)}node(){return this.node_}}class Dm{constructor(e,A){this.syncTree_=e,this.path_=A}getImmediateChild(e){const A=ft(this.path_,e);return new Dm(this.syncTree_,A)}node(){return bm(this.syncTree_,this.path_)}}const _D=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},j0=function(t,e,A){if(!t||typeof t!="object")return t;if(Y(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return FD(t[".sv"],e,A);if(typeof t[".sv"]=="object")return ID(t[".sv"],e);Y(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},FD=function(t,e,A){switch(t){case"timestamp":return A.timestamp;default:Y(!1,"Unexpected server value: "+t)}},ID=function(t,e,A){t.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&Y(!1,"Unexpected increment value: "+n);const r=e.node();if(Y(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;const i=r.getValue();return typeof i!="number"?n:i+n},C_=function(t,e,A,n){return Hm(e,new Dm(A,t),n)},x_=function(t,e,A){return Hm(t,new km(e),A)};function Hm(t,e,A){const n=t.getPriority().val(),r=j0(n,e.getImmediateChild(".priority"),A);let s;if(t.isLeafNode()){const i=t,o=j0(i.getValue(),e,A);return o!==i.getValue()||r!==i.getPriority().val()?new Nt(o,Ht(r)):t}else{const i=t;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new Nt(r))),i.forEachChild(ht,(o,a)=>{const l=Hm(a,e.getImmediateChild(o),A);l!==a&&(s=s.updateImmediateChild(o,l))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e="",A=null,n={children:{},childCount:0}){this.name=e,this.parent=A,this.node=n}}function Rm(t,e){let A=e instanceof Je?e:new Je(e),n=t,r=Qe(A);for(;r!==null;){const s=Ji(n.node.children,r)||{children:{},childCount:0};n=new Lm(r,n,s),A=et(A),r=Qe(A)}return n}function mo(t){return t.node.value}function E_(t,e){t.node.value=e,yp(t)}function __(t){return t.node.childCount>0}function QD(t){return mo(t)===void 0&&!__(t)}function Cd(t,e){Jt(t.node.children,(A,n)=>{e(new Lm(A,t,n))})}function F_(t,e,A,n){A&&e(t),Cd(t,r=>{F_(r,e,!0)})}function UD(t,e,A){let n=t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function pl(t){return new Je(t.parent===null?t.name:pl(t.parent)+"/"+t.name)}function yp(t){t.parent!==null&&bD(t.parent,t.name,t)}function bD(t,e,A){const n=QD(A),r=On(t.node.children,e);n&&r?(delete t.node.children[e],t.node.childCount--,yp(t)):!n&&!r&&(t.node.children[e]=A.node,t.node.childCount++,yp(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=/[\[\].#$\/\u0000-\u001F\u007F]/,TD=/[\[\].#$\u0000-\u001F\u007F]/,Sf=10*1024*1024,Pm=function(t){return typeof t=="string"&&t.length!==0&&!SD.test(t)},I_=function(t){return typeof t=="string"&&t.length!==0&&!TD.test(t)},ND=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),I_(t)},kD=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!um(t)||t&&typeof t=="object"&&On(t,".sv")},DD=function(t,e,A,n){xd(dd(t,"value"),e,A)},xd=function(t,e,A){const n=A instanceof Je?new Y2(A,t):A;if(e===void 0)throw new Error(t+"contains undefined "+Cs(n));if(typeof e=="function")throw new Error(t+"contains a function "+Cs(n)+" with contents = "+e.toString());if(um(e))throw new Error(t+"contains "+e.toString()+" "+Cs(n));if(typeof e=="string"&&e.length>Sf/3&&fd(e)>Sf)throw new Error(t+"contains a string greater than "+Sf+" utf8 bytes "+Cs(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(Jt(e,(i,o)=>{if(i===".value")r=!0;else if(i!==".priority"&&i!==".sv"&&(s=!0,!Pm(i)))throw new Error(t+" contains an invalid key ("+i+") "+Cs(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);J2(n,i),xd(t,o,n),Z2(n)}),r&&s)throw new Error(t+' contains ".value" child '+Cs(n)+" in addition to actual children.")}},HD=function(t,e){let A,n;for(A=0;A<e.length;A++){n=e[A];const s=za(n);for(let i=0;i<s.length;i++)if(!(s[i]===".priority"&&i===s.length-1)){if(!Pm(s[i]))throw new Error(t+"contains an invalid key ("+s[i]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(X2);let r=null;for(A=0;A<e.length;A++){if(n=e[A],r!==null&&ZA(r,n))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+n.toString());r=n}},LD=function(t,e,A,n){const r=dd(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];Jt(e,(i,o)=>{const a=new Je(i);if(xd(r,o,ft(A,a)),gm(a)===".priority"&&!kD(o))throw new Error(r+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(a)}),HD(r,s)},Q_=function(t,e,A,n){if(!I_(A))throw new Error(dd(t,e)+'was an invalid path = "'+A+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},RD=function(t,e,A,n){A&&(A=A.replace(/^\/*\.info(\/|$)/,"/")),Q_(t,e,A)},U_=function(t,e){if(Qe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},PD=function(t,e){const A=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Pm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||A.length!==0&&!ND(A))throw new Error(dd(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ed(t,e){let A=null;for(let n=0;n<e.length;n++){const r=e[n],s=r.getPath();A!==null&&!mm(s,A.path)&&(t.eventLists_.push(A),A=null),A===null&&(A={events:[],path:s}),A.events.push(r)}A&&t.eventLists_.push(A)}function b_(t,e,A){Ed(t,A),S_(t,n=>mm(n,e))}function En(t,e,A){Ed(t,A),S_(t,n=>ZA(n,e)||ZA(e,n))}function S_(t,e){t.recursionDepth_++;let A=!0;for(let n=0;n<t.eventLists_.length;n++){const r=t.eventLists_[n];if(r){const s=r.path;e(s)?(OD(t.eventLists_[n]),t.eventLists_[n]=null):A=!1}}A&&(t.eventLists_=[]),t.recursionDepth_--}function OD(t){for(let e=0;e<t.events.length;e++){const A=t.events[e];if(A!==null){t.events[e]=null;const n=A.getEventRunner();da&&zt("event: "+A.toString()),po(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD="repo_interrupt",jD=25;class GD{constructor(e,A,n,r){this.repoInfo_=e,this.forceRestClient_=A,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new MD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Eu(),this.transactionQueueTree_=new Lm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function WD(t,e,A){if(t.stats_=hm(t.repoInfo_),t.forceRestClient_||y2())t.server_=new xu(t.repoInfo_,(n,r,s,i)=>{G0(t,n,r,s,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>W0(t,!0),0);else{if(typeof A<"u"&&A!==null){if(typeof A!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Lt(A)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new ir(t.repoInfo_,e,(n,r,s,i)=>{G0(t,n,r,s,i)},n=>{W0(t,n)},n=>{VD(t,n)},t.authTokenProvider_,t.appCheckProvider_,A),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=_2(t.repoInfo_,()=>new Ek(t.stats_,t.server_)),t.infoData_=new Bk,t.infoSyncTree_=new O0({startListening:(n,r,s,i)=>{let o=[];const a=t.infoData_.getNode(n._path);return a.isEmpty()||(o=yd(t.infoSyncTree_,n._path,a),setTimeout(()=>{i("ok")},0)),o},stopListening:()=>{}}),Mm(t,"connected",!1),t.serverSyncTree_=new O0({startListening:(n,r,s,i)=>(t.server_.listen(n,s,r,(o,a)=>{const l=i(o,a);En(t.eventQueue_,n._path,l)}),[]),stopListening:(n,r)=>{t.server_.unlisten(n,r)}})}function zD(t){const A=t.infoData_.getNode(new Je(".info/serverTimeOffset")).val()||0;return new Date().getTime()+A}function _d(t){return _D({timestamp:zD(t)})}function G0(t,e,A,n,r){t.dataUpdateCount++;const s=new Je(e);A=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,A):A;let i=[];if(r)if(n){const a=du(A,l=>Ht(l));i=yD(t.serverSyncTree_,s,a,r)}else{const a=Ht(A);i=BD(t.serverSyncTree_,s,a,r)}else if(n){const a=du(A,l=>Ht(l));i=gD(t.serverSyncTree_,s,a)}else{const a=Ht(A);i=yd(t.serverSyncTree_,s,a)}let o=s;i.length>0&&(o=ro(t,s)),En(t.eventQueue_,o,i)}function W0(t,e){Mm(t,"connected",e),e===!1&&YD(t)}function VD(t,e){Jt(e,(A,n)=>{Mm(t,A,n)})}function Mm(t,e,A){const n=new Je("/.info/"+e),r=Ht(A);t.infoData_.updateSnapshot(n,r);const s=yd(t.infoSyncTree_,n,r);En(t.eventQueue_,n,s)}function Om(t){return t.nextWriteId_++}function $D(t,e,A,n,r){Fd(t,"set",{path:e.toString(),value:A,priority:n});const s=_d(t),i=Ht(A,n),o=bm(t.serverSyncTree_,e),a=x_(i,o,s),l=Om(t),c=w_(t.serverSyncTree_,e,a,l,!0);Ed(t.eventQueue_,c),t.server_.put(e.toString(),i.val(!0),(f,h)=>{const m=f==="ok";m||gA("set at "+e+" failed: "+f);const C=Hr(t.serverSyncTree_,l,!m);En(t.eventQueue_,e,C),vp(t,r,f,h)});const d=jm(t,e);ro(t,d),En(t.eventQueue_,d,[])}function XD(t,e,A,n){Fd(t,"update",{path:e.toString(),value:A});let r=!0;const s=_d(t),i={};if(Jt(A,(o,a)=>{r=!1,i[o]=C_(ft(e,o),Ht(a),t.serverSyncTree_,s)}),r)zt("update() called with empty data.  Don't do anything."),vp(t,n,"ok",void 0);else{const o=Om(t),a=pD(t.serverSyncTree_,e,i,o);Ed(t.eventQueue_,a),t.server_.merge(e.toString(),A,(l,c)=>{const d=l==="ok";d||gA("update at "+e+" failed: "+l);const f=Hr(t.serverSyncTree_,o,!d),h=f.length>0?ro(t,e):e;En(t.eventQueue_,h,f),vp(t,n,l,c)}),Jt(A,l=>{const c=jm(t,ft(e,l));ro(t,c)}),En(t.eventQueue_,e,[])}}function YD(t){Fd(t,"onDisconnectEvents");const e=_d(t),A=Eu();dp(t.onDisconnect_,je(),(r,s)=>{const i=C_(r,s,t.serverSyncTree_,e);s_(A,r,i)});let n=[];dp(A,je(),(r,s)=>{n=n.concat(yd(t.serverSyncTree_,r,s));const i=jm(t,r);ro(t,i)}),t.onDisconnect_=Eu(),En(t.eventQueue_,je(),n)}function JD(t,e,A){let n;Qe(e._path)===".info"?n=K0(t.infoSyncTree_,e,A):n=K0(t.serverSyncTree_,e,A),b_(t.eventQueue_,e._path,n)}function T_(t,e,A){let n;Qe(e._path)===".info"?n=Bp(t.infoSyncTree_,e,A):n=Bp(t.serverSyncTree_,e,A),b_(t.eventQueue_,e._path,n)}function ZD(t){t.persistentConnection_&&t.persistentConnection_.interrupt(KD)}function Fd(t,...e){let A="";t.persistentConnection_&&(A=t.persistentConnection_.id+":"),zt(A,...e)}function vp(t,e,A,n){e&&po(()=>{if(A==="ok")e(null);else{const r=(A||"error").toUpperCase();let s=r;n&&(s+=": "+n);const i=new Error(s);i.code=r,e(i)}})}function N_(t,e,A){return bm(t.serverSyncTree_,e,A)||ge.EMPTY_NODE}function Km(t,e=t.transactionQueueTree_){if(e||Id(t,e),mo(e)){const A=D_(t,e);Y(A.length>0,"Sending zero length transaction queue"),A.every(r=>r.status===0)&&qD(t,pl(e),A)}else __(e)&&Cd(e,A=>{Km(t,A)})}function qD(t,e,A){const n=A.map(l=>l.currentWriteId),r=N_(t,e,n);let s=r;const i=r.hash();for(let l=0;l<A.length;l++){const c=A[l];Y(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=_A(e,c.path);s=s.updateChild(d,c.currentOutputSnapshotRaw)}const o=s.val(!0),a=e;t.server_.put(a.toString(),o,l=>{Fd(t,"transaction put response",{path:a.toString(),status:l});let c=[];if(l==="ok"){const d=[];for(let f=0;f<A.length;f++)A[f].status=2,c=c.concat(Hr(t.serverSyncTree_,A[f].currentWriteId)),A[f].onComplete&&d.push(()=>A[f].onComplete(null,!0,A[f].currentOutputSnapshotResolved)),A[f].unwatcher();Id(t,Rm(t.transactionQueueTree_,e)),Km(t,t.transactionQueueTree_),En(t.eventQueue_,e,c);for(let f=0;f<d.length;f++)po(d[f])}else{if(l==="datastale")for(let d=0;d<A.length;d++)A[d].status===3?A[d].status=4:A[d].status=0;else{gA("transaction at "+a.toString()+" failed: "+l);for(let d=0;d<A.length;d++)A[d].status=4,A[d].abortReason=l}ro(t,e)}},i)}function ro(t,e){const A=k_(t,e),n=pl(A),r=D_(t,A);return e4(t,r,n),n}function e4(t,e,A){if(e.length===0)return;const n=[];let r=[];const i=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const a=e[o],l=_A(A,a.path);let c=!1,d;if(Y(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)c=!0,d=a.abortReason,r=r.concat(Hr(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=jD)c=!0,d="maxretry",r=r.concat(Hr(t.serverSyncTree_,a.currentWriteId,!0));else{const f=N_(t,a.path,i);a.currentInputSnapshot=f;const h=e[o].update(f.val());if(h!==void 0){xd("transaction failed: Data returned ",h,a.path);let m=Ht(h);typeof h=="object"&&h!=null&&On(h,".priority")||(m=m.updatePriority(f.getPriority()));const Q=a.currentWriteId,g=_d(t),p=x_(m,f,g);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=p,a.currentWriteId=Om(t),i.splice(i.indexOf(Q),1),r=r.concat(w_(t.serverSyncTree_,a.path,p,a.currentWriteId,a.applyLocally)),r=r.concat(Hr(t.serverSyncTree_,Q,!0))}else c=!0,d="nodata",r=r.concat(Hr(t.serverSyncTree_,a.currentWriteId,!0))}En(t.eventQueue_,A,r),r=[],c&&(e[o].status=2,function(f){setTimeout(f,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(d==="nodata"?n.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):n.push(()=>e[o].onComplete(new Error(d),!1,null))))}Id(t,t.transactionQueueTree_);for(let o=0;o<n.length;o++)po(n[o]);Km(t,t.transactionQueueTree_)}function k_(t,e){let A,n=t.transactionQueueTree_;for(A=Qe(e);A!==null&&mo(n)===void 0;)n=Rm(n,A),e=et(e),A=Qe(e);return n}function D_(t,e){const A=[];return H_(t,e,A),A.sort((n,r)=>n.order-r.order),A}function H_(t,e,A){const n=mo(e);if(n)for(let r=0;r<n.length;r++)A.push(n[r]);Cd(e,r=>{H_(t,r,A)})}function Id(t,e){const A=mo(e);if(A){let n=0;for(let r=0;r<A.length;r++)A[r].status!==2&&(A[n]=A[r],n++);A.length=n,E_(e,A.length>0?A:void 0)}Cd(e,n=>{Id(t,n)})}function jm(t,e){const A=pl(k_(t,e)),n=Rm(t.transactionQueueTree_,e);return UD(n,r=>{Tf(t,r)}),Tf(t,n),F_(n,r=>{Tf(t,r)}),A}function Tf(t,e){const A=mo(e);if(A){const n=[];let r=[],s=-1;for(let i=0;i<A.length;i++)A[i].status===3||(A[i].status===1?(Y(s===i-1,"All SENT items should be at beginning of queue."),s=i,A[i].status=3,A[i].abortReason="set"):(Y(A[i].status===0,"Unexpected transaction status in abort"),A[i].unwatcher(),r=r.concat(Hr(t.serverSyncTree_,A[i].currentWriteId,!0)),A[i].onComplete&&n.push(A[i].onComplete.bind(null,new Error("set"),!1,null))));s===-1?E_(e,void 0):A.length=s+1,En(t.eventQueue_,pl(e),r);for(let i=0;i<n.length;i++)po(n[i])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t){let e="";const A=t.split("/");for(let n=0;n<A.length;n++)if(A[n].length>0){let r=A[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function A4(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const A of t.split("&")){if(A.length===0)continue;const n=A.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):gA(`Invalid query segment '${A}' in query '${t}'`)}return e}const z0=function(t,e){const A=n4(t),n=A.namespace;A.domain==="firebase.com"&&hr(A.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&A.domain!=="localhost"&&hr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),A.secure||u2();const r=A.scheme==="ws"||A.scheme==="wss";return{repoInfo:new KE(A.host,A.secure,n,r,e,"",n!==A.subdomain),path:new Je(A.pathString)}},n4=function(t){let e="",A="",n="",r="",s="",i=!0,o="https",a=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(o=t.substring(0,l-1),t=t.substring(l+2));let c=t.indexOf("/");c===-1&&(c=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(c,d)),c<d&&(r=t4(t.substring(c,d)));const f=A4(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(i=o==="https"||o==="wss",a=parseInt(e.substring(l+1),10)):l=e.length;const h=e.slice(0,l);if(h.toLowerCase()==="localhost")A="localhost";else if(h.split(".").length<=2)A=h;else{const m=e.indexOf(".");n=e.substring(0,m).toLowerCase(),A=e.substring(m+1),s=n}"ns"in f&&(s=f.ns)}return{host:e,port:a,domain:A,subdomain:n,secure:i,scheme:o,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,A,n,r){this.eventType=e,this.eventRegistration=A,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Lt(this.snapshot.exportVal())}}class s4{constructor(e,A,n){this.eventRegistration=e,this.error=A,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,A){this.snapshotCallback=e,this.cancelCallback=A}onValue(e,A){this.snapshotCallback.call(null,e,A)}onCancel(e){return Y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,A,n,r){this._repo=e,this._path=A,this._queryParams=n,this._orderByCalled=r}get key(){return be(this._path)?null:gm(this._path)}get ref(){return new cs(this._repo,this._path)}get _queryIdentifier(){const e=S0(this._queryParams),A=dm(e);return A==="{}"?"default":A}get _queryObject(){return S0(this._queryParams)}isEqual(e){if(e=TA(e),!(e instanceof Gm))return!1;const A=this._repo===e._repo,n=mm(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return A&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+$2(this._path)}}class cs extends Gm{constructor(e,A){super(e,A,new vm,!1)}get parent(){const e=JE(this._path);return e===null?null:new cs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Tu{constructor(e,A,n){this._node=e,this.ref=A,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const A=new Je(e),n=Cp(this.ref,e);return new Tu(this._node.getChild(A),n,ht)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,r)=>e(new Tu(r,Cp(this.ref,n),ht)))}hasChild(e){const A=new Je(e);return!this._node.getChild(A).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function bA(t,e){return t=TA(t),t._checkNotDeleted("ref"),e!==void 0?Cp(t._root,e):t._root}function Cp(t,e){return t=TA(t),Qe(t._path)===null?RD("child","path",e):Q_("child","path",e),new cs(t._repo,ft(t._path,e))}function Nu(t){return U_("remove",t._path),Ja(t,null)}function Ja(t,e){t=TA(t),U_("set",t._path),DD("set",e,t._path);const A=new ol;return $D(t._repo,t._path,e,null,A.wrapCallback(()=>{})),A.promise}function Qd(t,e){LD("update",e,t._path);const A=new ol;return XD(t._repo,t._path,e,A.wrapCallback(()=>{})),A.promise}class Ud{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,A){const n=A._queryParams.getIndex();return new r4("value",this,new Tu(e.snapshotNode,new cs(A._repo,A._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,A){return this.callbackContext.hasCancelCallback?new s4(this,e,A):null}matches(e){return e instanceof Ud?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function i4(t,e,A,n,r){const s=new L_(A,void 0),i=new Ud(s);return JD(t._repo,t,i),()=>T_(t._repo,t,i)}function R_(t,e,A,n){return i4(t,"value",e)}function P_(t,e,A){let n=null;const r=A?new L_(A):null;n=new Ud(r),T_(t._repo,t,n)}iD(cs);dD(cs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="FIREBASE_DATABASE_EMULATOR_HOST",xp={};let a4=!1;function l4(t,e,A,n){const r=e.lastIndexOf(":"),s=e.substring(0,r),i=co(s);t.repoInfo_=new KE(e,i,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,A),n&&(t.authTokenProvider_=n)}function c4(t,e,A,n,r){let s=n||t.options.databaseURL;s===void 0&&(t.options.projectId||hr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let i=z0(s,r),o=i.repoInfo,a;typeof process<"u"&&f0&&(a=f0[o4]),a?(s=`http://${a}?ns=${o.namespace}`,i=z0(s,r),o=i.repoInfo):i.repoInfo.secure;const l=new C2(t.name,t.options,e);PD("Invalid Firebase Database URL",i),be(i.path)||hr("Database URL must point to the root of a Firebase Database (not including a child path).");const c=d4(o,t,l,new v2(t,A));return new f4(c,t)}function u4(t,e){const A=xp[e];(!A||A[t.key]!==t)&&hr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),ZD(t),delete A[t.key]}function d4(t,e,A,n){let r=xp[e.name];r||(r={},xp[e.name]=r);let s=r[t.toURLString()];return s&&hr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new GD(t,a4,A,n),r[t.toURLString()]=s,s}class f4{constructor(e,A){this._repoInternal=e,this.app=A,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(WD(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cs(this._repo,je())),this._rootInternal}_delete(){return this._rootInternal!==null&&(u4(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&hr("Cannot call "+e+" on a deleted database.")}}function h4(t=Xx(),e){const A=qg(t,"database").getImmediate({identifier:e});if(!A._instanceStarted){const n=Qb("database");n&&p4(A,...n)}return A}function p4(t,e,A,n={}){t=TA(t),t._checkNotDeleted("useEmulator");const r=`${e}:${A}`,s=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&Os(n,s.repoInfo_.emulatorOptions))return;hr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let i;if(s.repoInfo_.nodeAdmin)n.mockUserToken&&hr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new Nc(Nc.OWNER);else if(n.mockUserToken){const o=typeof n.mockUserToken=="string"?n.mockUserToken:Ub(n.mockUserToken,t.app.options.projectId);i=new Nc(o)}co(e)&&(Kx(e),jx("Database",!0)),l4(s,r,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t){s2(fo),Zi(new Ks("database",(e,{instanceIdentifier:A})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return c4(n,r,s,A)},"PUBLIC").setMultipleInstances(!0)),Yr(h0,p0,t),Yr(h0,p0,"esm2020")}ir.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ir.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};g4();const M_="AIzaSyD-CUcGgOEmiKVqhsMGNi3nw0hPFKP5QSs",m4={apiKey:M_,authDomain:"refboard-21681.firebaseapp.com",projectId:"refboard-21681",storageBucket:"refboard-21681.firebasestorage.app",messagingSenderId:"1052217843844",appId:"1:1052217843844:web:d13c695547c279d832e2d1",measurementId:"G-LSVG7VY51R",databaseURL:"https://refboard-21681-default-rtdb.firebaseio.com"},O_=$x(m4),qs=n2(O_);jT(qs,am).then(()=>{console.log("Firebase persistence set to SESSION")}).catch(t=>{console.error("Failed to set persistence:",t)});const w4=h4(O_,"https://refboard-21681-default-rtdb.firebaseio.com"),Wm=new kn;Wm.setCustomParameters({prompt:"select_account consent",access_type:"offline"});Wm.addScope("https://www.googleapis.com/auth/drive");async function B4(){try{const t=await dN(qs,Wm),e=t.user;return kn.credentialFromResult(t),{success:!0,user:{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}}}catch(t){return console.error("Sign in error:",t),{success:!1,error:t.message||"Failed to sign in"}}}async function y4(){try{await zT(qs),localStorage.removeItem("google_access_token")}catch(t){throw console.error("Sign out error:",t),t}}function zm(){return qs.currentUser}function K_(t){return WT(qs,e=>{t(e?{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}:null)})}function j_(){return w4}async function Ep(){try{const t=qs.currentUser;return t?(await t.getIdToken(!0),console.log("Firebase token refreshed successfully"),!0):!1}catch(t){return console.error("Token refresh error:",t),!1}}function G_(t){return mE(qs,async e=>{if(e)try{const A=await e.getIdToken(!0);t(A)}catch(A){console.error("Error getting token:",A),t(null)}else t(null)})}const W_=Object.freeze(Object.defineProperty({__proto__:null,FIREBASE_API_KEY:M_,getCurrentUser:zm,getFirebaseDatabase:j_,onAuthChange:K_,onTokenChange:G_,refreshAuthToken:Ep,signInWithGoogle:B4,signOut:y4},Symbol.toStringTag,{value:"Module"})),v4=({thumbnail:t,boardName:e,index:A})=>{const[n,r]=Vt.useState(!1),[s,i]=Vt.useState(!1);return u.jsxs(u.Fragment,{children:[n?u.jsx("span",{className:"text-4xl",children:""}):u.jsx("img",{src:t,alt:e,className:`w-full h-full object-cover rounded transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onLoad:()=>i(!0),onError:()=>{console.warn("Failed to load thumbnail for board:",e),r(!0),i(!1)},loading:"lazy",style:{animationDelay:`${A*50}ms`}}),!s&&!n&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"w-8 h-8 border-2 border-gray-500 border-t-transparent rounded-full animate-spin"})})]})},C4=({onBoardSelect:t})=>{const[e,A]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState(!0),[o,a]=E.useState(!1),[l,c]=E.useState(""),[d,f]=E.useState(!1),[h,m]=E.useState(null),[C,Q]=E.useState(""),g=zm();E.useEffect(()=>{const D=async()=>{};return window.addEventListener("focus",D),()=>window.removeEventListener("focus",D)},[]),E.useEffect(()=>{p()},[g]);async function p(){try{i(!0);const[D,L]=await Promise.all([xx(),Qx()]);A(D),r(L)}catch(D){console.error("Failed to load boards:",D)}finally{i(!1)}}const w=()=>{c(" "),a(!0)},v=()=>{l.trim()&&(t("new",l.trim()),a(!1))},_=(D,L,R)=>{D.stopPropagation(),m({id:L,name:R}),Q(""),f(!0)},F=async()=>{if(h)try{await Ex(h.id),f(!1),m(null),Q(""),await p()}catch(D){console.error("Failed to delete board:",D),alert("  .")}},U=(D,L)=>{t(D,L)},T=(D,L)=>u.jsxs("div",{onClick:()=>U(D.id,D.name),className:"group bg-gray-800 rounded-lg p-4 cursor-pointer hover:bg-gray-700 transition-colors border border-gray-700 hover:border-blue-500 relative",children:[u.jsxs("div",{className:"aspect-video bg-gray-700 rounded mb-3 flex items-center justify-center relative overflow-hidden",children:[D.thumbnail?u.jsx(v4,{thumbnail:D.thumbnail,boardName:D.name,index:L}):u.jsx("span",{className:"text-4xl",children:""}),D.owners&&D.owners.length>0&&u.jsxs("div",{className:"absolute top-2 left-2 bg-blue-600/90 text-white text-xs px-2 py-1 rounded-full shadow-sm backdrop-blur-sm z-10 flex items-center gap-1",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),u.jsx("span",{children:D.owners[0].displayName})]}),u.jsx("button",{onClick:R=>_(R,D.id,D.name),className:"absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:" ",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),u.jsx("h3",{className:"font-semibold truncate",children:D.name}),u.jsx("p",{className:"text-sm text-gray-400",children:new Date(D.modifiedTime).toLocaleDateString("ko-KR")})]},D.id);return u.jsxs("div",{className:"w-screen h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white flex flex-col relative",children:[u.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm border-b border-gray-700 p-4",children:u.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold",children:"RefBoard"}),u.jsx("p",{className:"text-sm text-gray-400",children:(g==null?void 0:g.displayName)||(g==null?void 0:g.email)})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:async()=>{const{signOut:D}=await Nn(async()=>{const{signOut:L}=await Promise.resolve().then(()=>W_);return{signOut:L}},void 0);await D(),window.location.reload()},className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg font-semibold transition-colors",children:""}),u.jsx("button",{onClick:w,className:"bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg font-semibold transition-colors",children:"+  "})]})]})}),u.jsx("div",{className:"flex-1 overflow-auto p-8",children:u.jsx("div",{className:"max-w-6xl mx-auto",children:s?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e.length===0&&n.length===0?u.jsxs("div",{className:"text-center py-20",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("h2",{className:"text-2xl font-semibold mb-2",children:" "}),u.jsx("p",{className:"text-gray-400 mb-6",children:"   !"}),u.jsx("button",{onClick:w,className:"bg-blue-600 hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-colors inline-block",children:"  "})]}):u.jsxs("div",{className:"space-y-8",children:[e.length>0&&u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-300",children:["  (",e.length,")"]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map((D,L)=>T(D,L))})]}),n.length>0&&u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-300 flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"  (",n.length,")"]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map((D,L)=>T(D,e.length+L))})]})]})})}),u.jsx("button",{onClick:()=>p(),className:"fixed bottom-24 left-1/2 -translate-x-1/2 bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all z-40 group",title:"  ",children:u.jsx("svg",{className:"w-6 h-6 group-hover:rotate-180 transition-transform duration-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),o&&u.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-md border border-gray-700",children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:"  "}),u.jsx("input",{type:"text",value:l,onChange:D=>c(D.target.value),placeholder:"  ",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 mb-6 focus:outline-none focus:border-blue-500",autoFocus:!0,onKeyDown:D=>D.key==="Enter"&&v()}),u.jsxs("div",{className:"flex justify-end gap-3",children:[u.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:""}),u.jsx("button",{onClick:v,className:"bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg font-semibold transition-colors",children:""})]})]})}),d&&h&&u.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-md border border-red-700",children:[u.jsx("h3",{className:"text-xl font-bold mb-2 text-red-500",children:"  "}),u.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"    .     ."}),u.jsxs("div",{className:"bg-gray-900 p-3 rounded-lg mb-4",children:[u.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"   :"}),u.jsx("p",{className:"font-bold text-white",children:h.name})]}),u.jsx("input",{type:"text",value:C,onChange:D=>Q(D.target.value),placeholder:"  ",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 mb-6 focus:outline-none focus:border-red-500",autoFocus:!0}),u.jsxs("div",{className:"flex justify-end gap-3",children:[u.jsx("button",{onClick:()=>{f(!1),m(null),Q("")},className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:""}),u.jsx("button",{onClick:F,disabled:C!==h.name,className:"bg-red-600 hover:bg-red-700 px-6 py-2 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})})]})},x4=({boardId:t,boardName:e,items:A=[],onClose:n})=>{const[r,s]=E.useState(""),[i,o]=E.useState("reader"),[a,l]=E.useState([]),[c,d]=E.useState(!1),[f,h]=E.useState(null),[m,C]=E.useState(null);E.useEffect(()=>{Q()},[t]);async function Q(){try{d(!0);const v=await Fx(t);l(v.filter(_=>_.role!=="owner"))}catch(v){console.error("Failed to load permissions:",v)}finally{d(!1)}}const g=async()=>{try{if(!confirm('    "   "    ? (     )'))return;d(!0),h(null),C(null);const v=A.filter(F=>(F.type==="image"||F.type==="video")&&F.driveFileId).map(F=>F.driveFileId);if(v.length===0){C("   ."),d(!1);return}const _=await kx(v);C(`   : ${_.success} , ${_.failed} .`)}catch(v){console.error("Failed to fix permissions:",v),h("   .")}finally{d(!1)}},p=async()=>{if(!r.trim()){h(" .");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)){h("   .");return}try{d(!0),h(null),C(null),await Vg(t,r.trim(),i);const _=A.filter(F=>(F.type==="image"||F.type==="video")&&F.driveFileId).map(F=>F.driveFileId);if(_.length>0)try{const F=await Promise.allSettled(_.map(D=>Nx([D],r.trim(),i))),U=F.filter(D=>D.status==="fulfilled").length,T=F.filter(D=>D.status==="rejected").length;console.log(`Shared ${U}/${_.length} media files (images/videos) with ${r}`),T>0&&(console.warn(`Failed to share ${T} media files. Check console for details.`),F.forEach((D,L)=>{D.status==="rejected"&&console.error(`Failed to share media file ${_[L]}:`,D.reason)}))}catch(F){console.error("Failed to share media files:",F)}C(`${r} !`),s(""),await Q()}catch(_){h(" .  ."),console.error("Share error:",_)}finally{d(!1)}},w=async(v,_)=>{if(window.confirm(`${_||" "}  ?`))try{d(!0),await Ix(t,v),C(" ."),await Q()}catch(F){h("  ."),console.error("Remove permission error:",F)}finally{d(!1)}};return u.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100]",children:u.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden border border-gray-700",children:[u.jsx("div",{className:"p-6 border-b border-gray-700",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold",children:" "}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:e})]}),u.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),u.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[60vh]",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:" "}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("input",{type:"email",value:r,onChange:v=>s(v.target.value),placeholder:" ",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-blue-500",onKeyDown:v=>v.key==="Enter"&&p()}),u.jsxs("select",{value:i,onChange:v=>o(v.target.value),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-blue-500",children:[u.jsx("option",{value:"reader",children:" "}),u.jsx("option",{value:"writer",children:" "})]}),u.jsx("button",{onClick:p,disabled:c,className:"bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg font-semibold transition-colors disabled:opacity-50",children:""})]})]}),f&&u.jsx("div",{className:"bg-red-900/30 border border-red-500/50 text-red-200 px-4 py-3 rounded-lg text-sm",children:f}),m&&u.jsx("div",{className:"bg-green-900/30 border border-green-500/50 text-green-200 px-4 py-3 rounded-lg text-sm",children:m}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-3",children:[" (",a.length,")"]}),c&&a.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-400",children:[u.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"})," ..."]}):a.length===0?u.jsx("div",{className:"text-center py-8 text-gray-400",children:"   ."}):u.jsx("div",{className:"space-y-2",children:a.map(v=>{var _;return u.jsxs("div",{className:"flex items-center justify-between bg-gray-700/50 rounded-lg px-4 py-3 border border-gray-600",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center font-bold",children:v.displayName?v.displayName[0].toUpperCase():(_=v.emailAddress)==null?void 0:_[0].toUpperCase()}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:v.displayName||v.emailAddress||"   "}),v.emailAddress&&v.displayName&&u.jsx("p",{className:"text-sm text-gray-400",children:v.emailAddress}),u.jsx("p",{className:"text-xs text-gray-400",children:v.role==="reader"?" ":" "})]})]}),u.jsx("button",{onClick:()=>w(v.id,v.emailAddress),className:"text-red-400 hover:text-red-300 transition-colors text-sm px-3 py-1 rounded hover:bg-red-900/20",children:""})]},v.id)})})]}),u.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[u.jsx("h4",{className:"text-sm font-medium mb-3 text-gray-300",children:" "}),u.jsxs("div",{className:"flex items-center justify-between bg-gray-700/30 rounded-lg p-4 border border-gray-600",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm",children:"  ?"}),u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"       ."})]}),u.jsx("button",{onClick:g,disabled:c,className:"bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-xs font-semibold transition-colors border border-gray-500 whitespace-nowrap ml-4",children:"  "})]})]}),u.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4 text-sm text-blue-200",children:[u.jsx("p",{className:"font-medium mb-1",children:"  "}),u.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[u.jsx("li",{children:"    ."}),u.jsxs("li",{children:[u.jsx("strong",{children:" "}),":    ."]}),u.jsxs("li",{children:[u.jsx("strong",{children:" "}),":    ."]}),u.jsx("li",{children:"  Google Drive    ."})]})]})]})]})})},E4=({cursors:t})=>{const e=Vt.useMemo(()=>{const A=new Set;return t.filter(n=>{const r=A.has(n.userId);return A.add(n.userId),!r})},[t]);return u.jsx(u.Fragment,{children:e.map(A=>u.jsxs("div",{className:"absolute pointer-events-none z-[9999] transition-all duration-75 ease-out",style:{left:`${A.x}px`,top:`${A.y}px`,transform:"translate(-2px, -2px)"},children:[u.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"},children:u.jsx("path",{d:"M5.65376 12.3673H5.46026L5.31717 12.4976L0.500002 16.8829L0.500002 1.19841L11.7841 12.3673H5.65376Z",fill:A.color,stroke:"white",strokeWidth:"1"})}),u.jsx("div",{className:"absolute top-12 left-2 px-2 py-1 rounded text-xs font-medium whitespace-nowrap",style:{backgroundColor:A.color,color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:A.userName||A.userEmail.split("@")[0]})]},A.userId))})},Nf=({boardName:t="RefBoard"})=>{const[e,A]=E.useState(!1);E.useEffect(()=>{const i=o=>{o.clientY<50?A(!0):o.clientY>100&&A(!1)};return document.addEventListener("mousemove",i),()=>document.removeEventListener("mousemove",i)},[]);const n=()=>{var i;(i=window.electronAPI)!=null&&i.minimizeWindow&&window.electronAPI.minimizeWindow()},r=()=>{var i;(i=window.electronAPI)!=null&&i.maximizeWindow&&window.electronAPI.maximizeWindow()},s=()=>{var i;(i=window.electronAPI)!=null&&i.closeWindow&&window.electronAPI.closeWindow()};return u.jsxs("div",{className:`fixed top-0 left-0 right-0 h-8 bg-black/80 backdrop-blur-sm flex items-center justify-between px-4 z-[10002] transition-transform duration-200 ${e?"translate-y-0":"-translate-y-full"}`,style:{WebkitAppRegion:"drag"},children:[u.jsx("div",{className:"text-white text-sm font-medium select-none",children:t}),u.jsxs("div",{className:"flex items-center gap-2",style:{WebkitAppRegion:"no-drag",pointerEvents:"auto"},children:[u.jsx("button",{onClick:i=>{i.stopPropagation(),n()},onMouseDown:i=>i.stopPropagation(),className:"w-10 h-8 flex items-center justify-center text-white/70 hover:text-white hover:bg-white/10 transition-colors pointer-events-auto",title:"Minimize",children:u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:u.jsx("path",{d:"M2 7H12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}),u.jsx("button",{onClick:i=>{i.stopPropagation(),r()},onMouseDown:i=>i.stopPropagation(),className:"w-10 h-8 flex items-center justify-center text-white/70 hover:text-white hover:bg-white/10 transition-colors pointer-events-auto",title:"Maximize",children:u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:u.jsx("rect",{x:"3",y:"3",width:"8",height:"8",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})})}),u.jsx("button",{onClick:i=>{i.stopPropagation(),s()},onMouseDown:i=>i.stopPropagation(),className:"w-10 h-8 flex items-center justify-center text-white/70 hover:text-white hover:bg-red-600/80 transition-colors pointer-events-auto",title:"Close",children:u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:u.jsx("path",{d:"M3 3L11 11M3 11L11 3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]})]})};function _4(){return sessionStorage.getItem("google_access_token")}function F4(t){switch(t){case"gemini-3.0":return"gemini-3-pro-image-preview";case"gemini-2.5":return"gemini-2.5-flash-image";default:return"gemini-2.5-flash-image"}}async function I4(t){const e=localStorage.getItem("gemini_api_key"),A=_4();if(!e&&!A)throw new Error("No Credential found. Please add a Gemini API Key in settings or Sign In.");const n=F4(t.config.model),r=`https://generativelanguage.googleapis.com/v1beta/models/${n}:generateContent`,s=[];if(t.prompt&&s.push({text:t.prompt}),t.images&&Object.keys(t.images).length>0)for(const f of Object.values(t.images)){const h=f;if(h.src)if(h.src.startsWith("data:")){const m=h.src.match(/data:([^;]+);base64,(.+)/);m&&s.push({inline_data:{mime_type:m[1],data:m[2]}})}else h.src.startsWith("http")&&console.warn("URL images not yet supported, skipping:",h.src)}const i=f=>{const h=f.toUpperCase();return h.endsWith("K")?h:h+"K"},o=n==="gemini-3-pro-image-preview",a={contents:[{parts:s}],generation_config:{response_modalities:["IMAGE"]}};o&&(a.generation_config.image_config={aspect_ratio:t.config.aspectRatio,image_size:i(t.config.resolution)});const l={"Content-Type":"application/json"};let c=r;e?c=`${r}?key=${e}`:A&&(l.Authorization=`Bearer ${A}`);const d=await fetch(c,{method:"POST",headers:l,body:JSON.stringify(a)});if(!d.ok){if(d.status===403)throw sessionStorage.removeItem("google_access_token"),new Error(` Generation Failed: No API Key found.

 Click the GEAR ICON () on the generator node to add your Gemini API Key.

Get a free key: https://aistudio.google.com/app/apikey`);const f=await d.text();throw new Error(`Gemini API Error (${d.status}): ${f}`)}return d.json()}const SA=j_(),qA=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),Vm=500*1024,$m={};function Q4(t){const e=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"];let A=0;for(let n=0;n<t.length;n++)A=t.charCodeAt(n)+((A<<5)-A);return e[Math.abs(A)%e.length]}let V0=0;const U4=100;function $0(t,e,A,n,r,s){const i=Date.now();if(i-V0<U4)return;V0=i;const o=bA(SA,`boards/${t}/cursors/${qA}`),a={sessionId:qA,userId:e,userName:A,userEmail:n,x:r,y:s,color:Q4(qA),lastUpdate:i};Ja(o,a).catch(l=>{console.error("Failed to update cursor:",l)})}function b4(t,e){const A=bA(SA,`boards/${t}/cursors`),n=r=>{const s=[],i=Date.now();r.forEach(o=>{const a=o.val();a.sessionId!==qA&&i-a.lastUpdate<3e4&&s.push(a)}),e(s)};return R_(A,n),()=>{P_(A,"value",n)}}function S4(t,e,A,n){const r=bA(SA,`boards/${t}/presence/${qA}`),s={sessionId:qA,userId:e,userName:A,userEmail:n,joinedAt:Date.now(),lastSeen:Date.now()};Ja(r,s).catch(o=>{console.error("Failed to set presence:",o)});const i=setInterval(()=>{Ja(bA(SA,`boards/${t}/presence/${qA}/lastSeen`),Date.now())},5e3);window[`presenceInterval_${t}_${qA}`]=i}function T4(t){const e=window[`presenceInterval_${t}_${qA}`];e&&(clearInterval(e),delete window[`presenceInterval_${t}_${qA}`]);const A=bA(SA,`boards/${t}/presence/${qA}`);Nu(A).catch(console.error);const n=bA(SA,`boards/${t}/cursors/${qA}`);Nu(n).catch(console.error)}function N4(t,e){const A=Math.ceil(t.length/e),n=new Array(A);for(let r=0,s=0;r<A;++r,s+=e)n[r]=t.substr(s,e);return n}async function z_(t,e,A){const n=N4(A,Vm),r=15;for(let s=0;s<n.length;s+=r){const i={};n.slice(s,s+r).forEach((a,l)=>{const c=s+l;i[`boards/${t}/chunks/${e}/${c}`]=a});try{await Qd(bA(SA),i)}catch(a){throw console.error(`Failed to save chunk batch ${s/r}:`,a),a}}}async function k4(t,e){const A=bA(SA,`boards/${t}/data`),n={...e,boardName:e.boardName||"Untitled Board"};await Ja(A,n)}async function zA(t,e,A){const n=bA(SA,`boards/${t}/data/items/${e}`),r={...A};if(r.src&&typeof r.src=="string"&&r.src.startsWith("blob:")&&delete r.src,Object.keys(r).forEach(i=>{r[i]===void 0&&delete r[i]}),r.src){if(Object.keys(r).some(o=>o!=="src"&&o!=="hasChunks"))console.log(`[RefBoard] Excluding image data from position/size update for item ${e} to save bandwidth`),delete r.src;else if(r.src.length>Vm){console.log(`[RefBoard] Item ${e} is large (${(r.src.length/1024).toFixed(2)}KB). Splitting into chunks...`);try{await z_(t,e,r.src),$m[e]=r.src,r.src=null,r.hasChunks=!0}catch(o){console.error("Failed to save chunks:",o);return}}}const s=JSON.stringify(r).length;if(s>5*1024*1024){console.warn(`[RefBoard] Update payload too large (${(s/1024/1024).toFixed(2)}MB). Skipping sync to prevent errors.`);return}Qd(n,r).catch(i=>{console.error("Failed to update remote item:",i)})}async function kf(t,e){const A={};let n=0,r=0;for(const s of e){const i=`boards/${t}/data/items/${s.id}`,o=JSON.parse(JSON.stringify(s));o.src&&typeof o.src=="string"&&o.src.startsWith("blob:")&&(o.src=null),o.src&&o.src.length>Vm&&(console.log(`[RefBoard] Item ${s.id} is large. Splitting into chunks...`),await z_(t,s.id,o.src),$m[s.id]=o.src,o.src=null,o.hasChunks=!0);const a=JSON.stringify(o).length;if(a>9*1024*1024){console.error(`[RefBoard] Item ${s.id} is too large (${(a/1024/1024).toFixed(2)}MB) to sync.`),r++;continue}A[i]=o,n+=a}r>0&&alert(`${r} items were too large to sync in real-time. Try resizing them or using lower resolution.`),n>0&&Qd(bA(SA),A).catch(console.error)}function D4(t,e){const A=bA(SA,`boards/${t}/data/items/${e}`);Nu(A).catch(console.error);const n=bA(SA,`boards/${t}/chunks/${e}`);Nu(n).catch(console.error)}function H4(t,e,A,n,r,s,i){const o=bA(SA,`boards/${t}/data`),a=async l=>{const c=l.val();if(c){if(c.items){const d=Object.values(c.items),f=await Promise.all(d.map(async h=>{if(h.hasChunks&&!h.src){const m=$m[h.id];m?h.src=m:h.src=null}return h}));e(f)}else e([]);c.groups?A(Object.values(c.groups)):A([]),c.arrows?n(Object.values(c.arrows)):n([]),c.paths?r(Object.values(c.paths)):r([]),c.connections&&s&&s(Object.values(c.connections)),c.boardName}};return R_(o,a),()=>{P_(o,"value",a)}}function ma(t,e,A){const n={},r={};A.forEach(s=>{r[s.id]=s}),n[`boards/${t}/data/${e}`]=JSON.parse(JSON.stringify(r)),Qd(bA(SA),n).catch(console.error)}const L4=t=>{const[e,A]=E.useState([]),n=(f,h,m,C,Q)=>{const g=Q*Math.PI/180,p=Math.cos(g),w=Math.sin(g),v=f+m/2,_=h+C/2;return[{x:f-v,y:h-_},{x:f+m-v,y:h-_},{x:f+m-v,y:h+C-_},{x:f-v,y:h+C-_}].map(U=>({x:U.x*p-U.y*w+v,y:U.x*w+U.y*p+_}))},r=f=>{t&&t!=="new"&&ma(t,"groups",f)};return{groups:e,setGroups:A,createGroup:(f,h)=>{const m=h.filter(R=>typeof R.x=="number"&&!isNaN(R.x)&&typeof R.y=="number"&&!isNaN(R.y)&&typeof R.width=="number"&&!isNaN(R.width)&&typeof R.height=="number"&&!isNaN(R.height));if(m.length<2)return;const C=m.map(R=>R.id);let Q=1/0,g=1/0,p=-1/0,w=-1/0;m.forEach(R=>{let z;if(R.type==="image"||R.type==="video"){const j=R.rotation||0;z=n(R.x,R.y,R.width,R.height,j)}else z=[{x:R.x,y:R.y},{x:R.x+R.width,y:R.y},{x:R.x+R.width,y:R.y+R.height},{x:R.x,y:R.y+R.height}];z.forEach(j=>{Q=Math.min(Q,j.x),g=Math.min(g,j.y),p=Math.max(p,j.x),w=Math.max(w,j.y)})});const v=10,_=Q-v,F=g-v,U=p-Q+v*2,T=w-g+v*2,D={id:`group-${Date.now()}`,name:`Group ${e.length+1}`,childIds:C,x:_,y:F,width:U,height:T,fontSize:12,color:"#ffffff"},L=[...e,D];A(L),r(L)},updateGroup:(f,h)=>{const m=e.map(C=>{if(C.id===f){const Q={...C,...h};return(!Q.childIds||!Array.isArray(Q.childIds))&&(Q.childIds=C.childIds||[]),Q}return C});A(m),r(m)},updateGroupName:(f,h)=>{const m=e.map(C=>C.id===f?{...C,name:h}:C);A(m),r(m)},deleteGroup:f=>{const h=e.filter(m=>m.id!==f);A(h),r(h)},addItemToGroup:(f,h)=>{const m=e.map(C=>C.id===f?{...C,childIds:[...C.childIds||[],h]}:C);A(m),r(m)},removeItemFromGroup:f=>{const h=e.map(m=>({...m,childIds:(m.childIds||[]).filter(C=>C!==f)}));A(h),r(h)},getItemGroup:f=>e.find(h=>h&&h.childIds&&Array.isArray(h.childIds)&&h.childIds.includes(f))||null}},R4=t=>{const[e,A]=E.useState([]),n=E.useCallback(a=>{t&&t!=="new"&&ma(t,"arrows",a)},[t]),r=E.useCallback((a,l)=>{const c={id:`arrow-${Date.now()}`,sourceId:a,targetId:l,color:"#3b82f6",strokeWidth:2};A(d=>{const f=[...d,c];return n(f),f})},[n]),s=E.useCallback((a,l)=>{A(c=>{const d=c.map(f=>f.id===a?{...f,...l}:f);return n(d),d})},[n]),i=E.useCallback(a=>{A(l=>{const c=l.filter(d=>d.id!==a);return n(c),c})},[n]),o=E.useCallback(a=>{A(l=>{const c=l.filter(d=>d.sourceId!==a&&d.targetId!==a);return n(c),c})},[n]);return{arrows:e,setArrows:A,createArrow:r,updateArrow:s,deleteArrow:i,deleteArrowsForItem:o}},P4=()=>{const[t,e]=E.useState(new Set);return E.useEffect(()=>{const A=s=>{let i=s.key;i==="Control"&&(i="Ctrl"),i==="Alt"&&(i="Alt"),i==="Shift"&&(i="Shift"),e(o=>{const a=new Set(o);return a.add(i.toUpperCase()),a})},n=s=>{let i=s.key;i==="Control"&&(i="Ctrl"),i==="Alt"&&(i="Alt"),i==="Shift"&&(i="Shift"),e(o=>{const a=new Set(o);return a.delete(i.toUpperCase()),a})},r=()=>{e(new Set)};return window.addEventListener("keydown",A),window.addEventListener("keyup",n),window.addEventListener("blur",r),()=>{window.removeEventListener("keydown",A),window.removeEventListener("keyup",n),window.removeEventListener("blur",r)}},[]),t},M4=({bookmarks:t,onNavigate:e,onRename:A,onDelete:n,onCopyUrl:r})=>{const[a,l]=E.useState({x:window.innerWidth-270,y:100}),[c,d]=E.useState(!1),[f,h]=E.useState(!1),[m,C]=E.useState({x:0,y:0}),[Q,g]=E.useState(null),[p,w]=E.useState(""),v=E.useRef(!1),_=E.useRef({x:0,y:0}),[F,U]=E.useState({width:window.innerWidth,height:window.innerHeight});E.useEffect(()=>{const q=()=>{const J=window.innerWidth,Ae=window.innerHeight;U({width:J,height:Ae}),l(c?N=>({x:J-44-20,y:Math.max(20,Math.min(Ae-44-20,N.y))}):N=>({x:J-250-20,y:Math.max(20,Math.min(Ae-300-20,N.y))}))};return window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)},[c]);const T=q=>{q.button===0&&q.target.closest(".drag-handle")&&(h(!0),v.current=!1,_.current={x:q.clientX,y:q.clientY},C({x:q.clientX-a.x,y:q.clientY-a.y}))};E.useEffect(()=>{if(!f)return;const q=Ae=>{const N=Math.abs(Ae.clientX-_.current.x),O=Math.abs(Ae.clientY-_.current.y);(N>5||O>5)&&(v.current=!0);const W=Ae.clientY-m.y,Z=F.width-250-20,oe=Math.max(20,Math.min(F.height-300-20,W));l({x:Z,y:oe})},J=()=>{setTimeout(()=>{h(!1),v.current=!1},0)};return window.addEventListener("mousemove",q),window.addEventListener("mouseup",J),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",J)}},[f,m]);const D=(q,J)=>{J.stopPropagation(),g(q.id),w(q.name)},L=()=>{Q&&p.trim()&&A(Q,p.trim()),g(null)},R=q=>{q.key==="Enter"&&L(),q.key==="Escape"&&g(null)},z=a.x>=0&&a.y>=0&&a.x+250<=F.width&&a.y+300<=F.height,j=c||!z,ae={x:Math.min(F.width-44-12,a.x+250-44),y:Math.min(F.height-44-12,a.y)};return j?u.jsxs("button",{onClick:()=>{d(!1),l(q=>{let J=q.x,Ae=q.y;return J+250>F.width&&(J=Math.max(12,F.width-250-12)),J<0&&(J=12),Ae+300>F.height&&(Ae=Math.max(12,F.height-300-12)),Ae<0&&(Ae=12),{x:J,y:Ae}})},className:"fixed z-[50] flex items-center justify-center bg-black/40 backdrop-blur-xl border border-white/10 ring-1 ring-white/5 rounded-xl shadow-2xl hover:shadow-lg hover:bg-white/10 text-gray-300 hover:text-white transition-all duration-300 -rotate-90 hover:rotate-0 active:scale-95 group",style:{left:ae.x,top:ae.y,width:44,height:44},children:[u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),u.jsx("span",{className:"absolute right-full mr-4 px-2 py-1 bg-gray-900 border border-gray-700 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Bookmarks"})]}):u.jsx("div",{className:"fixed z-[50] transition-opacity duration-300 flex flex-col",style:{left:a.x,top:a.y,width:250,maxHeight:300},onMouseDown:T,children:u.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-xl border-2 border-white/20 rounded-xl overflow-hidden shadow-2xl flex flex-col h-full",children:[u.jsxs("div",{className:"drag-handle px-3 py-2 bg-white/10 border-b border-white/10 flex items-center justify-between cursor-grab active:cursor-grabbing",children:[u.jsxs("div",{className:"flex items-center gap-2 text-white font-medium text-sm",children:[u.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),u.jsx("span",{children:"Coordinates"})]}),u.jsx("button",{onClick:()=>d(!0),className:"text-gray-400 hover:text-white transition-colors",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:[t.length===0&&u.jsxs("div",{className:"text-gray-500 text-xs text-center py-4",children:["Right-click canvas or items",u.jsx("br",{}),"to save coordinates"]}),t.map(q=>u.jsxs("div",{className:"group flex items-center gap-2 p-2 rounded-lg hover:bg-white/10 transition-colors cursor-pointer group",onClick:()=>e(q),children:[u.jsx("div",{className:"shrink-0 text-blue-400",children:q.targetId?u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}):u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),Q===q.id?u.jsx("input",{type:"text",value:p,onChange:J=>w(J.target.value),onBlur:L,onKeyDown:R,autoFocus:!0,className:"flex-1 bg-black/50 border border-blue-500 rounded px-1 text-sm text-white focus:outline-none",onClick:J=>J.stopPropagation()}):u.jsx("span",{className:"flex-1 text-sm text-gray-200 truncate select-none",children:q.name}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:J=>D(q,J),className:"p-1 hover:bg-blue-500/20 rounded text-gray-400 hover:text-blue-400",title:"Rename",children:u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),u.jsx("button",{onClick:J=>{J.stopPropagation(),r&&r(q)},className:"p-1 hover:bg-green-500/20 rounded text-gray-400 hover:text-green-400",title:"Copy Link",children:u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),u.jsx("button",{onClick:J=>{J.stopPropagation(),n(q.id)},className:"p-1 hover:bg-red-500/20 rounded text-gray-400 hover:text-red-400",title:"Delete",children:u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},q.id))]})]})})},O4=({message:t,duration:e=3e3,onClose:A})=>{const[n,r]=E.useState(!1);return E.useEffect(()=>{if(t){r(!0);const s=setTimeout(()=>{r(!1),setTimeout(A,300)},e);return()=>clearTimeout(s)}},[t,e,A]),!t&&!n?null:u.jsxs("div",{className:`fixed bottom-8 left-1/2 -translate-x-1/2 transform transition-all duration-300 z-[10002] flex items-center gap-3 px-6 py-3 rounded-xl shadow-2xl border border-gray-600/50 backdrop-blur-md ${n?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,style:{backgroundColor:"rgba(31, 41, 55, 0.9)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},children:[u.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-green-500/20 text-green-400",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),u.jsx("div",{className:"flex flex-col",children:u.jsx("span",{className:"text-sm font-medium text-white",children:t})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _p=function(t,e){return _p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,n){A.__proto__=n}||function(A,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(A[r]=n[r])},_p(t,e)};function _n(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_p(t,e);function A(){this.constructor=t}t.prototype=e===null?Object.create(e):(A.prototype=e.prototype,new A)}var Fp=function(){return Fp=Object.assign||function(e){for(var A,n=1,r=arguments.length;n<r;n++){A=arguments[n];for(var s in A)Object.prototype.hasOwnProperty.call(A,s)&&(e[s]=A[s])}return e},Fp.apply(this,arguments)};function fA(t,e,A,n){function r(s){return s instanceof A?s:new A(function(i){i(s)})}return new(A||(A=Promise))(function(s,i){function o(c){try{l(n.next(c))}catch(d){i(d)}}function a(c){try{l(n.throw(c))}catch(d){i(d)}}function l(c){c.done?s(c.value):r(c.value).then(o,a)}l((n=n.apply(t,[])).next())})}function nA(t,e){var A={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,r,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(l){return function(c){return a([l,c])}}function a(l){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(s=l[0]&2?r.return:l[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,l[1])).done)return s;switch(r=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return A.label++,{value:l[1],done:!1};case 5:A.label++,r=l[1],l=[0];continue;case 7:l=A.ops.pop(),A.trys.pop();continue;default:if(s=A.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){A=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){A.label=l[1];break}if(l[0]===6&&A.label<s[1]){A.label=s[1],s=l;break}if(s&&A.label<s[2]){A.label=s[2],A.ops.push(l);break}s[2]&&A.ops.pop(),A.trys.pop();continue}l=e.call(t,A)}catch(c){l=[6,c],r=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Vl(t,e,A){if(arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var pr=function(){function t(e,A,n,r){this.left=e,this.top=A,this.width=n,this.height=r}return t.prototype.add=function(e,A,n,r){return new t(this.left+e,this.top+A,this.width+n,this.height+r)},t.fromClientRect=function(e,A){return new t(A.left+e.windowBounds.left,A.top+e.windowBounds.top,A.width,A.height)},t.fromDOMRectList=function(e,A){var n=Array.from(A).find(function(r){return r.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),bd=function(t,e){return pr.fromClientRect(t,e.getBoundingClientRect())},K4=function(t){var e=t.body,A=t.documentElement;if(!e||!A)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,A.scrollWidth),Math.max(e.offsetWidth,A.offsetWidth),Math.max(e.clientWidth,A.clientWidth)),r=Math.max(Math.max(e.scrollHeight,A.scrollHeight),Math.max(e.offsetHeight,A.offsetHeight),Math.max(e.clientHeight,A.clientHeight));return new pr(0,0,n,r)},Sd=function(t){for(var e=[],A=0,n=t.length;A<n;){var r=t.charCodeAt(A++);if(r>=55296&&r<=56319&&A<n){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),A--)}else e.push(r)}return e},mt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var n=[],r=-1,s="";++r<A;){var i=t[r];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(r+1===A||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},X0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j4=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $l=0;$l<X0.length;$l++)j4[X0.charCodeAt($l)]=$l;var Y0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$o=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xl=0;Xl<Y0.length;Xl++)$o[Y0.charCodeAt(Xl)]=Xl;var G4=function(t){var e=t.length*.75,A=t.length,n,r=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<A;n+=4)s=$o[t.charCodeAt(n)],i=$o[t.charCodeAt(n+1)],o=$o[t.charCodeAt(n+2)],a=$o[t.charCodeAt(n+3)],c[r++]=s<<2|i>>4,c[r++]=(i&15)<<4|o>>2,c[r++]=(o&3)<<6|a&63;return l},W4=function(t){for(var e=t.length,A=[],n=0;n<e;n+=2)A.push(t[n+1]<<8|t[n]);return A},z4=function(t){for(var e=t.length,A=[],n=0;n<e;n+=4)A.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return A},Ns=5,Xm=11,Df=2,V4=Xm-Ns,V_=65536>>Ns,$4=1<<Ns,Hf=$4-1,X4=1024>>Ns,Y4=V_+X4,J4=Y4,Z4=32,q4=J4+Z4,eH=65536>>Xm,tH=1<<V4,AH=tH-1,J0=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},nH=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},rH=function(t,e){var A=G4(t),n=Array.isArray(A)?z4(A):new Uint32Array(A),r=Array.isArray(A)?W4(A):new Uint16Array(A),s=24,i=J0(r,s/2,n[4]/2),o=n[5]===2?J0(r,(s+n[4])/2):nH(n,Math.ceil((s+n[4])/4));return new sH(n[0],n[1],n[2],n[3],i,o)},sH=function(){function t(e,A,n,r,s,i){this.initialValue=e,this.errorValue=A,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=i}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>Ns],A=(A<<Df)+(e&Hf),this.data[A];if(e<=65535)return A=this.index[V_+(e-55296>>Ns)],A=(A<<Df)+(e&Hf),this.data[A];if(e<this.highStart)return A=q4-eH+(e>>Xm),A=this.index[A],A+=e>>Ns&AH,A=this.index[A],A=(A<<Df)+(e&Hf),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Z0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yl=0;Yl<Z0.length;Yl++)iH[Z0.charCodeAt(Yl)]=Yl;var oH="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",q0=50,aH=1,$_=2,X_=3,lH=4,cH=5,ey=7,Y_=8,ty=9,Lr=10,Ip=11,Ay=12,Qp=13,uH=14,Xo=15,Up=16,Jl=17,Po=18,dH=19,ny=20,bp=21,Mo=22,Lf=23,ai=24,DA=25,Yo=26,Jo=27,li=28,fH=29,xs=30,hH=31,Zl=32,ql=33,Sp=34,Tp=35,Np=36,Za=37,kp=38,kc=39,Dc=40,Rf=41,J_=42,pH=43,gH=[9001,65288],Z_="!",ke="",ec="",Dp=rH(oH),Xn=[xs,Np],Hp=[aH,$_,X_,cH],q_=[Lr,Y_],ry=[Jo,Yo],mH=Hp.concat(q_),sy=[kp,kc,Dc,Sp,Tp],wH=[Xo,Qp],BH=function(t,e){e===void 0&&(e="strict");var A=[],n=[],r=[];return t.forEach(function(s,i){var o=Dp.get(s);if(o>q0?(r.push(!0),o-=q0):r.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),A.push(Up);if(o===lH||o===Ip){if(i===0)return n.push(i),A.push(xs);var a=A[i-1];return mH.indexOf(a)===-1?(n.push(n[i-1]),A.push(a)):(n.push(i),A.push(xs))}if(n.push(i),o===hH)return A.push(e==="strict"?bp:Za);if(o===J_||o===fH)return A.push(xs);if(o===pH)return s>=131072&&s<=196605||s>=196608&&s<=262141?A.push(Za):A.push(xs);A.push(o)}),[n,A,r]},Pf=function(t,e,A,n){var r=n[A];if(Array.isArray(t)?t.indexOf(r)!==-1:t===r)for(var s=A;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==Lr)break}if(r===Lr)for(var s=A;s>0;){s--;var o=n[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=A;a<=n.length;){a++;var i=n[a];if(i===e)return!0;if(i!==Lr)break}if(o!==Lr)break}return!1},iy=function(t,e){for(var A=t;A>=0;){var n=e[A];if(n===Lr)A--;else return n}return 0},yH=function(t,e,A,n,r){if(A[n]===0)return ke;var s=n-1;if(Array.isArray(r)&&r[s]===!0)return ke;var i=s-1,o=s+1,a=e[s],l=i>=0?e[i]:0,c=e[o];if(a===$_&&c===X_)return ke;if(Hp.indexOf(a)!==-1)return Z_;if(Hp.indexOf(c)!==-1||q_.indexOf(c)!==-1)return ke;if(iy(s,e)===Y_)return ec;if(Dp.get(t[s])===Ip||(a===Zl||a===ql)&&Dp.get(t[o])===Ip||a===ey||c===ey||a===ty||[Lr,Qp,Xo].indexOf(a)===-1&&c===ty||[Jl,Po,dH,ai,li].indexOf(c)!==-1||iy(s,e)===Mo||Pf(Lf,Mo,s,e)||Pf([Jl,Po],bp,s,e)||Pf(Ay,Ay,s,e))return ke;if(a===Lr)return ec;if(a===Lf||c===Lf)return ke;if(c===Up||a===Up)return ec;if([Qp,Xo,bp].indexOf(c)!==-1||a===uH||l===Np&&wH.indexOf(a)!==-1||a===li&&c===Np||c===ny||Xn.indexOf(c)!==-1&&a===DA||Xn.indexOf(a)!==-1&&c===DA||a===Jo&&[Za,Zl,ql].indexOf(c)!==-1||[Za,Zl,ql].indexOf(a)!==-1&&c===Yo||Xn.indexOf(a)!==-1&&ry.indexOf(c)!==-1||ry.indexOf(a)!==-1&&Xn.indexOf(c)!==-1||[Jo,Yo].indexOf(a)!==-1&&(c===DA||[Mo,Xo].indexOf(c)!==-1&&e[o+1]===DA)||[Mo,Xo].indexOf(a)!==-1&&c===DA||a===DA&&[DA,li,ai].indexOf(c)!==-1)return ke;if([DA,li,ai,Jl,Po].indexOf(c)!==-1)for(var d=s;d>=0;){var f=e[d];if(f===DA)return ke;if([li,ai].indexOf(f)!==-1)d--;else break}if([Jo,Yo].indexOf(c)!==-1)for(var d=[Jl,Po].indexOf(a)!==-1?i:s;d>=0;){var f=e[d];if(f===DA)return ke;if([li,ai].indexOf(f)!==-1)d--;else break}if(kp===a&&[kp,kc,Sp,Tp].indexOf(c)!==-1||[kc,Sp].indexOf(a)!==-1&&[kc,Dc].indexOf(c)!==-1||[Dc,Tp].indexOf(a)!==-1&&c===Dc||sy.indexOf(a)!==-1&&[ny,Yo].indexOf(c)!==-1||sy.indexOf(c)!==-1&&a===Jo||Xn.indexOf(a)!==-1&&Xn.indexOf(c)!==-1||a===ai&&Xn.indexOf(c)!==-1||Xn.concat(DA).indexOf(a)!==-1&&c===Mo&&gH.indexOf(t[o])===-1||Xn.concat(DA).indexOf(c)!==-1&&a===Po)return ke;if(a===Rf&&c===Rf){for(var h=A[s],m=1;h>0&&(h--,e[h]===Rf);)m++;if(m%2!==0)return ke}return a===Zl&&c===ql?ke:ec},vH=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var A=BH(t,e.lineBreak),n=A[0],r=A[1],s=A[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(r=r.map(function(o){return[DA,xs,J_].indexOf(o)!==-1?Za:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[n,r,i]},CH=function(){function t(e,A,n,r){this.codePoints=e,this.required=A===Z_,this.start=n,this.end=r}return t.prototype.slice=function(){return mt.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),xH=function(t,e){var A=Sd(t),n=vH(A,e),r=n[0],s=n[1],i=n[2],o=A.length,a=0,l=0;return{next:function(){if(l>=o)return{done:!0,value:null};for(var c=ke;l<o&&(c=yH(A,s,r,++l,i))===ke;);if(c!==ke||l===o){var d=new CH(A,c,a,l);return a=l,{value:d,done:!1}}return{done:!0,value:null}}}},EH=1,_H=2,gl=4,oy=8,ku=10,ay=47,wa=92,FH=9,IH=32,tc=34,Oo=61,QH=35,UH=36,bH=37,Ac=39,nc=40,Ko=41,SH=95,CA=45,TH=33,NH=60,kH=62,DH=64,HH=91,LH=93,RH=61,PH=123,rc=63,MH=125,ly=124,OH=126,KH=128,cy=65533,Mf=42,Us=43,jH=44,GH=58,WH=59,qa=46,zH=0,VH=8,$H=11,XH=14,YH=31,JH=127,Un=-1,eF=48,tF=97,AF=101,ZH=102,qH=117,eL=122,nF=65,rF=69,sF=70,tL=85,AL=90,rA=function(t){return t>=eF&&t<=57},nL=function(t){return t>=55296&&t<=57343},ci=function(t){return rA(t)||t>=nF&&t<=sF||t>=tF&&t<=ZH},rL=function(t){return t>=tF&&t<=eL},sL=function(t){return t>=nF&&t<=AL},iL=function(t){return rL(t)||sL(t)},oL=function(t){return t>=KH},sc=function(t){return t===ku||t===FH||t===IH},Du=function(t){return iL(t)||oL(t)||t===SH},uy=function(t){return Du(t)||rA(t)||t===CA},aL=function(t){return t>=zH&&t<=VH||t===$H||t>=XH&&t<=YH||t===JH},Qr=function(t,e){return t!==wa?!1:e!==ku},ic=function(t,e,A){return t===CA?Du(e)||Qr(e,A):Du(t)?!0:!!(t===wa&&Qr(t,e))},Of=function(t,e,A){return t===Us||t===CA?rA(e)?!0:e===qa&&rA(A):rA(t===qa?e:t)},lL=function(t){var e=0,A=1;(t[e]===Us||t[e]===CA)&&(t[e]===CA&&(A=-1),e++);for(var n=[];rA(t[e]);)n.push(t[e++]);var r=n.length?parseInt(mt.apply(void 0,n),10):0;t[e]===qa&&e++;for(var s=[];rA(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt(mt.apply(void 0,s),10):0;(t[e]===rF||t[e]===AF)&&e++;var a=1;(t[e]===Us||t[e]===CA)&&(t[e]===CA&&(a=-1),e++);for(var l=[];rA(t[e]);)l.push(t[e++]);var c=l.length?parseInt(mt.apply(void 0,l),10):0;return A*(r+o*Math.pow(10,-i))*Math.pow(10,a*c)},cL={type:2},uL={type:3},dL={type:4},fL={type:13},hL={type:8},pL={type:21},gL={type:9},mL={type:10},wL={type:11},BL={type:12},yL={type:14},oc={type:23},vL={type:1},CL={type:25},xL={type:24},EL={type:26},_L={type:27},FL={type:28},IL={type:29},QL={type:31},Lp={type:32},iF=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Sd(e))},t.prototype.read=function(){for(var e=[],A=this.consumeToken();A!==Lp;)e.push(A),A=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case tc:return this.consumeStringToken(tc);case QH:var A=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(uy(A)||Qr(n,r)){var s=ic(A,n,r)?_H:EH,i=this.consumeName();return{type:5,value:i,flags:s}}break;case UH:if(this.peekCodePoint(0)===Oo)return this.consumeCodePoint(),fL;break;case Ac:return this.consumeStringToken(Ac);case nc:return cL;case Ko:return uL;case Mf:if(this.peekCodePoint(0)===Oo)return this.consumeCodePoint(),yL;break;case Us:if(Of(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case jH:return dL;case CA:var o=e,a=this.peekCodePoint(0),l=this.peekCodePoint(1);if(Of(o,a,l))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(ic(o,a,l))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===CA&&l===kH)return this.consumeCodePoint(),this.consumeCodePoint(),xL;break;case qa:if(Of(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case ay:if(this.peekCodePoint(0)===Mf)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===Mf&&(c=this.consumeCodePoint(),c===ay))return this.consumeToken();if(c===Un)return this.consumeToken()}break;case GH:return EL;case WH:return _L;case NH:if(this.peekCodePoint(0)===TH&&this.peekCodePoint(1)===CA&&this.peekCodePoint(2)===CA)return this.consumeCodePoint(),this.consumeCodePoint(),CL;break;case DH:var d=this.peekCodePoint(0),f=this.peekCodePoint(1),h=this.peekCodePoint(2);if(ic(d,f,h)){var i=this.consumeName();return{type:7,value:i}}break;case HH:return FL;case wa:if(Qr(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case LH:return IL;case RH:if(this.peekCodePoint(0)===Oo)return this.consumeCodePoint(),hL;break;case PH:return wL;case MH:return BL;case qH:case tL:var m=this.peekCodePoint(0),C=this.peekCodePoint(1);return m===Us&&(ci(C)||C===rc)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case ly:if(this.peekCodePoint(0)===Oo)return this.consumeCodePoint(),gL;if(this.peekCodePoint(0)===ly)return this.consumeCodePoint(),pL;break;case OH:if(this.peekCodePoint(0)===Oo)return this.consumeCodePoint(),mL;break;case Un:return Lp}return sc(e)?(this.consumeWhiteSpace(),QL):rA(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Du(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:mt(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],A=this.consumeCodePoint();ci(A)&&e.length<6;)e.push(A),A=this.consumeCodePoint();for(var n=!1;A===rc&&e.length<6;)e.push(A),A=this.consumeCodePoint(),n=!0;if(n){var r=parseInt(mt.apply(void 0,e.map(function(a){return a===rc?eF:a})),16),s=parseInt(mt.apply(void 0,e.map(function(a){return a===rc?sF:a})),16);return{type:30,start:r,end:s}}var i=parseInt(mt.apply(void 0,e),16);if(this.peekCodePoint(0)===CA&&ci(this.peekCodePoint(1))){this.consumeCodePoint(),A=this.consumeCodePoint();for(var o=[];ci(A)&&o.length<6;)o.push(A),A=this.consumeCodePoint();var s=parseInt(mt.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===nc?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===nc?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Un)return{type:22,value:""};var A=this.peekCodePoint(0);if(A===Ac||A===tc){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Un||this.peekCodePoint(0)===Ko)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),oc)}for(;;){var r=this.consumeCodePoint();if(r===Un||r===Ko)return{type:22,value:mt.apply(void 0,e)};if(sc(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Un||this.peekCodePoint(0)===Ko?(this.consumeCodePoint(),{type:22,value:mt.apply(void 0,e)}):(this.consumeBadUrlRemnants(),oc);if(r===tc||r===Ac||r===nc||aL(r))return this.consumeBadUrlRemnants(),oc;if(r===wa)if(Qr(r,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),oc;else e.push(r)}},t.prototype.consumeWhiteSpace=function(){for(;sc(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Ko||e===Un)return;Qr(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var A=5e4,n="";e>0;){var r=Math.min(A,e);n+=mt.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var A="",n=0;do{var r=this._value[n];if(r===Un||r===void 0||r===e)return A+=this.consumeStringSlice(n),{type:0,value:A};if(r===ku)return this._value.splice(0,n),vL;if(r===wa){var s=this._value[n+1];s!==Un&&s!==void 0&&(s===ku?(A+=this.consumeStringSlice(n),n=-1,this._value.shift()):Qr(r,s)&&(A+=this.consumeStringSlice(n),A+=mt(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],A=gl,n=this.peekCodePoint(0);for((n===Us||n===CA)&&e.push(this.consumeCodePoint());rA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===qa&&rA(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=oy;rA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===rF||n===AF)&&((r===Us||r===CA)&&rA(s)||rA(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=oy;rA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[lL(e),A]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),A=e[0],n=e[1],r=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(ic(r,s,i)){var o=this.consumeName();return{type:15,number:A,flags:n,unit:o}}return r===bH?(this.consumeCodePoint(),{type:16,number:A,flags:n}):{type:17,number:A,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ci(e)){for(var A=mt(e);ci(this.peekCodePoint(0))&&A.length<6;)A+=mt(this.consumeCodePoint());sc(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(A,16);return n===0||nL(n)||n>1114111?cy:n}return e===Un?cy:e},t.prototype.consumeName=function(){for(var e="";;){var A=this.consumeCodePoint();if(uy(A))e+=mt(A);else if(Qr(A,this.peekCodePoint(0)))e+=mt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(A),e}},t}(),oF=function(){function t(e){this._tokens=e}return t.create=function(e){var A=new iF;return A.write(e),new t(A.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var A=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return A;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var A=this.consumeComponentValue();if(A.type===32)return e;e.push(A),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var A={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||bL(n,e))return A;this.reconsumeToken(n),A.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var A={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return A;this.reconsumeToken(n),A.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Lp:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),ml=function(t){return t.type===15},wo=function(t){return t.type===17},Ye=function(t){return t.type===20},UL=function(t){return t.type===0},Rp=function(t,e){return Ye(t)&&t.value===e},aF=function(t){return t.type!==31},so=function(t){return t.type!==31&&t.type!==4},Kn=function(t){var e=[],A=[];return t.forEach(function(n){if(n.type===4){if(A.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(A),A=[];return}n.type!==31&&A.push(n)}),A.length&&e.push(A),e},bL=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},rs=function(t){return t.type===17||t.type===15},_t=function(t){return t.type===16||rs(t)},lF=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},$t={type:17,number:0,flags:gl},Ym={type:16,number:50,flags:gl},Rr={type:16,number:100,flags:gl},Zo=function(t,e,A){var n=t[0],r=t[1];return[tt(n,e),tt(typeof r<"u"?r:n,A)]},tt=function(t,e){if(t.type===16)return t.number/100*e;if(ml(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},cF="deg",uF="grad",dF="rad",fF="turn",Td={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case cF:return Math.PI*e.number/180;case uF:return Math.PI/200*e.number;case dF:return e.number;case fF:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},hF=function(t){return t.type===15&&(t.unit===cF||t.unit===uF||t.unit===dF||t.unit===fF)},pF=function(t){var e=t.filter(Ye).map(function(A){return A.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[$t,$t];case"to top":case"bottom":return en(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[$t,Rr];case"to right":case"left":return en(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Rr,Rr];case"to bottom":case"top":return en(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Rr,$t];case"to left":case"right":return en(270)}return 0},en=function(t){return Math.PI*t/180},Zr={name:"color",parse:function(t,e){if(e.type===18){var A=SL[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return A(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),r=e.value.substring(1,2),s=e.value.substring(2,3);return Pr(parseInt(n+n,16),parseInt(r+r,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),r=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return Pr(parseInt(n+n,16),parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),r=e.value.substring(2,4),s=e.value.substring(4,6);return Pr(parseInt(n,16),parseInt(r,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),r=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return Pr(parseInt(n,16),parseInt(r,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=or[e.value.toUpperCase()];if(typeof o<"u")return o}return or.TRANSPARENT}},qr=function(t){return(255&t)===0},Tt=function(t){var e=255&t,A=255&t>>8,n=255&t>>16,r=255&t>>24;return e<255?"rgba("+r+","+n+","+A+","+e/255+")":"rgb("+r+","+n+","+A+")"},Pr=function(t,e,A,n){return(t<<24|e<<16|A<<8|Math.round(n*255)<<0)>>>0},dy=function(t,e){if(t.type===17)return t.number;if(t.type===16){var A=e===3?1:255;return e===3?t.number/100*A:Math.round(t.number/100*A)}return 0},fy=function(t,e){var A=e.filter(so);if(A.length===3){var n=A.map(dy),r=n[0],s=n[1],i=n[2];return Pr(r,s,i,1)}if(A.length===4){var o=A.map(dy),r=o[0],s=o[1],i=o[2],a=o[3];return Pr(r,s,i,a)}return 0};function Kf(t,e,A){return A<0&&(A+=1),A>=1&&(A-=1),A<1/6?(e-t)*A*6+t:A<1/2?e:A<2/3?(e-t)*6*(2/3-A)+t:t}var hy=function(t,e){var A=e.filter(so),n=A[0],r=A[1],s=A[2],i=A[3],o=(n.type===17?en(n.number):Td.parse(t,n))/(Math.PI*2),a=_t(r)?r.number/100:0,l=_t(s)?s.number/100:0,c=typeof i<"u"&&_t(i)?tt(i,1):1;if(a===0)return Pr(l*255,l*255,l*255,1);var d=l<=.5?l*(a+1):l+a-l*a,f=l*2-d,h=Kf(f,d,o+1/3),m=Kf(f,d,o),C=Kf(f,d,o-1/3);return Pr(h*255,m*255,C*255,c)},SL={hsl:hy,hsla:hy,rgb:fy,rgba:fy},Ba=function(t,e){return Zr.parse(t,oF.create(e).parseComponentValue())},or={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},TL={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(Ye(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},NL={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Nd=function(t,e){var A=Zr.parse(t,e[0]),n=e[1];return n&&_t(n)?{color:A,stop:n}:{color:A,stop:null}},py=function(t,e){var A=t[0],n=t[t.length-1];A.stop===null&&(A.stop=$t),n.stop===null&&(n.stop=Rr);for(var r=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=tt(o,e);a>s?r.push(a):r.push(s),s=a}else r.push(null)}for(var l=null,i=0;i<r.length;i++){var c=r[i];if(c===null)l===null&&(l=i);else if(l!==null){for(var d=i-l,f=r[l-1],h=(c-f)/(d+1),m=1;m<=d;m++)r[l+m-1]=h*m;l=null}}return t.map(function(C,Q){var g=C.color;return{color:g,stop:Math.max(Math.min(1,r[Q]/e),0)}})},kL=function(t,e,A){var n=e/2,r=A/2,s=tt(t[0],e)-n,i=r-tt(t[1],A);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},DL=function(t,e,A){var n=typeof t=="number"?t:kL(t,e,A),r=Math.abs(e*Math.sin(n))+Math.abs(A*Math.cos(n)),s=e/2,i=A/2,o=r/2,a=Math.sin(n-Math.PI/2)*o,l=Math.cos(n-Math.PI/2)*o;return[r,s-l,s+l,i-a,i+a]},un=function(t,e){return Math.sqrt(t*t+e*e)},gy=function(t,e,A,n,r){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var a=o[0],l=o[1],c=un(A-a,n-l);return(r?c<i.optimumDistance:c>i.optimumDistance)?{optimumCorner:o,optimumDistance:c}:i},{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},HL=function(t,e,A,n,r){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(A),Math.abs(A-r)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(A),Math.abs(A-r)));break;case 2:if(t.shape===0)s=i=Math.min(un(e,A),un(e,A-r),un(e-n,A),un(e-n,A-r));else if(t.shape===1){var o=Math.min(Math.abs(A),Math.abs(A-r))/Math.min(Math.abs(e),Math.abs(e-n)),a=gy(n,r,e,A,!0),l=a[0],c=a[1];s=un(l-e,(c-A)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(A),Math.abs(A-r)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(A),Math.abs(A-r)));break;case 3:if(t.shape===0)s=i=Math.max(un(e,A),un(e,A-r),un(e-n,A),un(e-n,A-r));else if(t.shape===1){var o=Math.max(Math.abs(A),Math.abs(A-r))/Math.max(Math.abs(e),Math.abs(e-n)),d=gy(n,r,e,A,!1),l=d[0],c=d[1];s=un(l-e,(c-A)/o),i=o*s}break}return Array.isArray(t.size)&&(s=tt(t.size[0],n),i=t.size.length===2?tt(t.size[1],r):s),[s,i]},LL=function(t,e){var A=en(180),n=[];return Kn(e).forEach(function(r,s){if(s===0){var i=r[0];if(i.type===20&&i.value==="to"){A=pF(r);return}else if(hF(i)){A=Td.parse(t,i);return}}var o=Nd(t,r);n.push(o)}),{angle:A,stops:n,type:1}},ac=function(t,e){var A=en(180),n=[];return Kn(e).forEach(function(r,s){if(s===0){var i=r[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){A=pF(r);return}else if(hF(i)){A=(Td.parse(t,i)+en(270))%en(360);return}}var o=Nd(t,r);n.push(o)}),{angle:A,stops:n,type:1}},RL=function(t,e){var A=en(180),n=[],r=1,s=0,i=3,o=[];return Kn(e).forEach(function(a,l){var c=a[0];if(l===0){if(Ye(c)&&c.value==="linear"){r=1;return}else if(Ye(c)&&c.value==="radial"){r=2;return}}if(c.type===18){if(c.name==="from"){var d=Zr.parse(t,c.values[0]);n.push({stop:$t,color:d})}else if(c.name==="to"){var d=Zr.parse(t,c.values[0]);n.push({stop:Rr,color:d})}else if(c.name==="color-stop"){var f=c.values.filter(so);if(f.length===2){var d=Zr.parse(t,f[1]),h=f[0];wo(h)&&n.push({stop:{type:16,number:h.number*100,flags:h.flags},color:d})}}}}),r===1?{angle:(A+en(180))%en(360),stops:n,type:r}:{size:i,shape:s,stops:n,position:o,type:r}},gF="closest-side",mF="farthest-side",wF="closest-corner",BF="farthest-corner",yF="circle",vF="ellipse",CF="cover",xF="contain",PL=function(t,e){var A=0,n=3,r=[],s=[];return Kn(e).forEach(function(i,o){var a=!0;if(o===0){var l=!1;a=i.reduce(function(d,f){if(l)if(Ye(f))switch(f.value){case"center":return s.push(Ym),d;case"top":case"left":return s.push($t),d;case"right":case"bottom":return s.push(Rr),d}else(_t(f)||rs(f))&&s.push(f);else if(Ye(f))switch(f.value){case yF:return A=0,!1;case vF:return A=1,!1;case"at":return l=!0,!1;case gF:return n=0,!1;case CF:case mF:return n=1,!1;case xF:case wF:return n=2,!1;case BF:return n=3,!1}else if(rs(f)||_t(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},a)}if(a){var c=Nd(t,i);r.push(c)}}),{size:n,shape:A,stops:r,position:s,type:2}},lc=function(t,e){var A=0,n=3,r=[],s=[];return Kn(e).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(c,d){if(Ye(d))switch(d.value){case"center":return s.push(Ym),!1;case"top":case"left":return s.push($t),!1;case"right":case"bottom":return s.push(Rr),!1}else if(_t(d)||rs(d))return s.push(d),!1;return c},a):o===1&&(a=i.reduce(function(c,d){if(Ye(d))switch(d.value){case yF:return A=0,!1;case vF:return A=1,!1;case xF:case gF:return n=0,!1;case mF:return n=1,!1;case wF:return n=2,!1;case CF:case BF:return n=3,!1}else if(rs(d)||_t(d))return Array.isArray(n)||(n=[]),n.push(d),!1;return c},a)),a){var l=Nd(t,i);r.push(l)}}),{size:n,shape:A,stops:r,position:s,type:2}},ML=function(t){return t.type===1},OL=function(t){return t.type===2},Jm={name:"image",parse:function(t,e){if(e.type===22){var A={url:e.value,type:0};return t.cache.addImage(e.value),A}if(e.type===18){var n=EF[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function KL(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!EF[t.name])}var EF={"linear-gradient":LL,"-moz-linear-gradient":ac,"-ms-linear-gradient":ac,"-o-linear-gradient":ac,"-webkit-linear-gradient":ac,"radial-gradient":PL,"-moz-radial-gradient":lc,"-ms-radial-gradient":lc,"-o-radial-gradient":lc,"-webkit-radial-gradient":lc,"-webkit-gradient":RL},jL={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var A=e[0];return A.type===20&&A.value==="none"?[]:e.filter(function(n){return so(n)&&KL(n)}).map(function(n){return Jm.parse(t,n)})}},GL={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(Ye(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},WL={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Kn(e).map(function(A){return A.filter(_t)}).map(lF)}},zL={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Kn(e).map(function(A){return A.filter(Ye).map(function(n){return n.value}).join(" ")}).map(VL)}},VL=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ji;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(ji||(ji={}));var $L={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Kn(e).map(function(A){return A.filter(XL)})}},XL=function(t){return Ye(t)||_t(t)},kd=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},YL=kd("top"),JL=kd("right"),ZL=kd("bottom"),qL=kd("left"),Dd=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,A){return lF(A.filter(_t))}}},eR=Dd("top-left"),tR=Dd("top-right"),AR=Dd("bottom-right"),nR=Dd("bottom-left"),Hd=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,A){switch(A){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},rR=Hd("top"),sR=Hd("right"),iR=Hd("bottom"),oR=Hd("left"),Ld=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,A){return ml(A)?A.number:0}}},aR=Ld("top"),lR=Ld("right"),cR=Ld("bottom"),uR=Ld("left"),dR={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fR={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},hR={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ye).reduce(function(A,n){return A|pR(n.value)},0)}},pR=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},gR={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},mR={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Hu;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Hu||(Hu={}));var wR={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Hu.STRICT;case"normal":default:return Hu.NORMAL}}},BR={name:"line-height",initialValue:"normal",prefix:!1,type:4},my=function(t,e){return Ye(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:_t(t)?tt(t,e):e},yR={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Jm.parse(t,e)}},vR={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Pp={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Rd=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},CR=Rd("top"),xR=Rd("right"),ER=Rd("bottom"),_R=Rd("left"),FR={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ye).map(function(A){switch(A.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},IR={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Pd=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},QR=Pd("top"),UR=Pd("right"),bR=Pd("bottom"),SR=Pd("left"),TR={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},NR={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},kR={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Rp(e[0],"none")?[]:Kn(e).map(function(A){for(var n={color:or.TRANSPARENT,offsetX:$t,offsetY:$t,blur:$t},r=0,s=0;s<A.length;s++){var i=A[s];rs(i)?(r===0?n.offsetX=i:r===1?n.offsetY=i:n.blur=i,r++):n.color=Zr.parse(t,i)}return n})}},DR={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},HR={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var A=PR[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return A(e.values)}return null}},LR=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number});return e.length===6?e:null},RR=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),A=e[0],n=e[1];e[2],e[3];var r=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[A,n,r,s,i,o]:null},PR={matrix:LR,matrix3d:RR},wy={type:16,number:50,flags:gl},MR=[wy,wy],OR={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var A=e.filter(_t);return A.length!==2?MR:[A[0],A[1]]}},KR={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ya;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(ya||(ya={}));var jR={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return ya.BREAK_ALL;case"keep-all":return ya.KEEP_ALL;case"normal":default:return ya.NORMAL}}},GR={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(wo(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},_F={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},WR={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return wo(e)?e.number:1}},zR={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},VR={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ye).map(function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(A){return A!==0})}},$R={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var A=[],n=[];return e.forEach(function(r){switch(r.type){case 20:case 0:A.push(r.value);break;case 17:A.push(r.number.toString());break;case 4:n.push(A.join(" ")),A.length=0;break}}),A.length&&n.push(A.join(" ")),n.map(function(r){return r.indexOf(" ")===-1?r:"'"+r+"'"})}},XR={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},YR={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(wo(e))return e.number;if(Ye(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},JR={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ye).map(function(A){return A.value})}},ZR={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},bt=function(t,e){return(t&e)!==0},qR={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var A=e[0];return A.type===20&&A.value==="none"?[]:e}},eP={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var A=e[0];if(A.type===20&&A.value==="none")return null;for(var n=[],r=e.filter(aF),s=0;s<r.length;s++){var i=r[s],o=r[s+1];if(i.type===20){var a=o&&wo(o)?o.number:1;n.push({counter:i.value,increment:a})}}return n}},tP={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var A=[],n=e.filter(aF),r=0;r<n.length;r++){var s=n[r],i=n[r+1];if(Ye(s)&&s.value!=="none"){var o=i&&wo(i)?i.number:0;A.push({counter:s.value,reset:o})}}return A}},AP={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(ml).map(function(A){return _F.parse(t,A)})}},nP={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var A=e[0];if(A.type===20&&A.value==="none")return null;var n=[],r=e.filter(UL);if(r.length%2!==0)return null;for(var s=0;s<r.length;s+=2){var i=r[s].value,o=r[s+1].value;n.push({open:i,close:o})}return n}},By=function(t,e,A){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?A?n.open:n.close:""},rP={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Rp(e[0],"none")?[]:Kn(e).map(function(A){for(var n={color:255,offsetX:$t,offsetY:$t,blur:$t,spread:$t,inset:!1},r=0,s=0;s<A.length;s++){var i=A[s];Rp(i,"inset")?n.inset=!0:rs(i)?(r===0?n.offsetX=i:r===1?n.offsetY=i:r===2?n.blur=i:n.spread=i,r++):n.color=Zr.parse(t,i)}return n})}},sP={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var A=[0,1,2],n=[];return e.filter(Ye).forEach(function(r){switch(r.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),A.forEach(function(r){n.indexOf(r)===-1&&n.push(r)}),n}},iP={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},oP={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return ml(e)?e.number:0}},aP=function(){function t(e,A){var n,r;this.animationDuration=re(e,AP,A.animationDuration),this.backgroundClip=re(e,TL,A.backgroundClip),this.backgroundColor=re(e,NL,A.backgroundColor),this.backgroundImage=re(e,jL,A.backgroundImage),this.backgroundOrigin=re(e,GL,A.backgroundOrigin),this.backgroundPosition=re(e,WL,A.backgroundPosition),this.backgroundRepeat=re(e,zL,A.backgroundRepeat),this.backgroundSize=re(e,$L,A.backgroundSize),this.borderTopColor=re(e,YL,A.borderTopColor),this.borderRightColor=re(e,JL,A.borderRightColor),this.borderBottomColor=re(e,ZL,A.borderBottomColor),this.borderLeftColor=re(e,qL,A.borderLeftColor),this.borderTopLeftRadius=re(e,eR,A.borderTopLeftRadius),this.borderTopRightRadius=re(e,tR,A.borderTopRightRadius),this.borderBottomRightRadius=re(e,AR,A.borderBottomRightRadius),this.borderBottomLeftRadius=re(e,nR,A.borderBottomLeftRadius),this.borderTopStyle=re(e,rR,A.borderTopStyle),this.borderRightStyle=re(e,sR,A.borderRightStyle),this.borderBottomStyle=re(e,iR,A.borderBottomStyle),this.borderLeftStyle=re(e,oR,A.borderLeftStyle),this.borderTopWidth=re(e,aR,A.borderTopWidth),this.borderRightWidth=re(e,lR,A.borderRightWidth),this.borderBottomWidth=re(e,cR,A.borderBottomWidth),this.borderLeftWidth=re(e,uR,A.borderLeftWidth),this.boxShadow=re(e,rP,A.boxShadow),this.color=re(e,dR,A.color),this.direction=re(e,fR,A.direction),this.display=re(e,hR,A.display),this.float=re(e,gR,A.cssFloat),this.fontFamily=re(e,$R,A.fontFamily),this.fontSize=re(e,XR,A.fontSize),this.fontStyle=re(e,ZR,A.fontStyle),this.fontVariant=re(e,JR,A.fontVariant),this.fontWeight=re(e,YR,A.fontWeight),this.letterSpacing=re(e,mR,A.letterSpacing),this.lineBreak=re(e,wR,A.lineBreak),this.lineHeight=re(e,BR,A.lineHeight),this.listStyleImage=re(e,yR,A.listStyleImage),this.listStylePosition=re(e,vR,A.listStylePosition),this.listStyleType=re(e,Pp,A.listStyleType),this.marginTop=re(e,CR,A.marginTop),this.marginRight=re(e,xR,A.marginRight),this.marginBottom=re(e,ER,A.marginBottom),this.marginLeft=re(e,_R,A.marginLeft),this.opacity=re(e,WR,A.opacity);var s=re(e,FR,A.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=re(e,IR,A.overflowWrap),this.paddingTop=re(e,QR,A.paddingTop),this.paddingRight=re(e,UR,A.paddingRight),this.paddingBottom=re(e,bR,A.paddingBottom),this.paddingLeft=re(e,SR,A.paddingLeft),this.paintOrder=re(e,sP,A.paintOrder),this.position=re(e,NR,A.position),this.textAlign=re(e,TR,A.textAlign),this.textDecorationColor=re(e,zR,(n=A.textDecorationColor)!==null&&n!==void 0?n:A.color),this.textDecorationLine=re(e,VR,(r=A.textDecorationLine)!==null&&r!==void 0?r:A.textDecoration),this.textShadow=re(e,kR,A.textShadow),this.textTransform=re(e,DR,A.textTransform),this.transform=re(e,HR,A.transform),this.transformOrigin=re(e,OR,A.transformOrigin),this.visibility=re(e,KR,A.visibility),this.webkitTextStrokeColor=re(e,iP,A.webkitTextStrokeColor),this.webkitTextStrokeWidth=re(e,oP,A.webkitTextStrokeWidth),this.wordBreak=re(e,jR,A.wordBreak),this.zIndex=re(e,GR,A.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return qr(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return bt(this.display,4)||bt(this.display,33554432)||bt(this.display,268435456)||bt(this.display,536870912)||bt(this.display,67108864)||bt(this.display,134217728)},t}(),lP=function(){function t(e,A){this.content=re(e,qR,A.content),this.quotes=re(e,nP,A.quotes)}return t}(),yy=function(){function t(e,A){this.counterIncrement=re(e,eP,A.counterIncrement),this.counterReset=re(e,tP,A.counterReset)}return t}(),re=function(t,e,A){var n=new iF,r=A!==null&&typeof A<"u"?A.toString():e.initialValue;n.write(r);var s=new oF(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,Ye(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Td.parse(t,s.parseComponentValue());case"color":return Zr.parse(t,s.parseComponentValue());case"image":return Jm.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return rs(o)?o:$t;case"length-percentage":var a=s.parseComponentValue();return _t(a)?a:$t;case"time":return _F.parse(t,s.parseComponentValue())}break}},cP="data-html2canvas-debug",uP=function(t){var e=t.getAttribute(cP);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Mp=function(t,e){var A=uP(t);return A===1||e===A},jn=function(){function t(e,A){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Mp(A,3))debugger;this.styles=new aP(e,window.getComputedStyle(A,null)),jp(A)&&(this.styles.animationDuration.some(function(n){return n>0})&&(A.style.animationDuration="0s"),this.styles.transform!==null&&(A.style.transform="none")),this.bounds=bd(this.context,A),Mp(A,4)&&(this.flags|=16)}return t}(),dP="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",vy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var cc=0;cc<vy.length;cc++)qo[vy.charCodeAt(cc)]=cc;var fP=function(t){var e=t.length*.75,A=t.length,n,r=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<A;n+=4)s=qo[t.charCodeAt(n)],i=qo[t.charCodeAt(n+1)],o=qo[t.charCodeAt(n+2)],a=qo[t.charCodeAt(n+3)],c[r++]=s<<2|i>>4,c[r++]=(i&15)<<4|o>>2,c[r++]=(o&3)<<6|a&63;return l},hP=function(t){for(var e=t.length,A=[],n=0;n<e;n+=2)A.push(t[n+1]<<8|t[n]);return A},pP=function(t){for(var e=t.length,A=[],n=0;n<e;n+=4)A.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return A},ks=5,Zm=11,jf=2,gP=Zm-ks,FF=65536>>ks,mP=1<<ks,Gf=mP-1,wP=1024>>ks,BP=FF+wP,yP=BP,vP=32,CP=yP+vP,xP=65536>>Zm,EP=1<<gP,_P=EP-1,Cy=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},FP=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},IP=function(t,e){var A=fP(t),n=Array.isArray(A)?pP(A):new Uint32Array(A),r=Array.isArray(A)?hP(A):new Uint16Array(A),s=24,i=Cy(r,s/2,n[4]/2),o=n[5]===2?Cy(r,(s+n[4])/2):FP(n,Math.ceil((s+n[4])/4));return new QP(n[0],n[1],n[2],n[3],i,o)},QP=function(){function t(e,A,n,r,s,i){this.initialValue=e,this.errorValue=A,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=i}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>ks],A=(A<<jf)+(e&Gf),this.data[A];if(e<=65535)return A=this.index[FF+(e-55296>>ks)],A=(A<<jf)+(e&Gf),this.data[A];if(e<this.highStart)return A=CP-xP+(e>>Zm),A=this.index[A],A+=e>>ks&_P,A=this.index[A],A=(A<<jf)+(e&Gf),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),xy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",UP=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var uc=0;uc<xy.length;uc++)UP[xy.charCodeAt(uc)]=uc;var bP=1,Wf=2,zf=3,Ey=4,_y=5,SP=7,Fy=8,Vf=9,$f=10,Iy=11,Qy=12,Uy=13,by=14,Xf=15,TP=function(t){for(var e=[],A=0,n=t.length;A<n;){var r=t.charCodeAt(A++);if(r>=55296&&r<=56319&&A<n){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),A--)}else e.push(r)}return e},NP=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var n=[],r=-1,s="";++r<A;){var i=t[r];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(r+1===A||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},kP=IP(dP),VA="",Yf="",DP=function(t){return kP.get(t)},HP=function(t,e,A){var n=A-2,r=e[n],s=e[A-1],i=e[A];if(s===Wf&&i===zf)return VA;if(s===Wf||s===zf||s===Ey||i===Wf||i===zf||i===Ey)return Yf;if(s===Fy&&[Fy,Vf,Iy,Qy].indexOf(i)!==-1||(s===Iy||s===Vf)&&(i===Vf||i===$f)||(s===Qy||s===$f)&&i===$f||i===Uy||i===_y||i===SP||s===bP)return VA;if(s===Uy&&i===by){for(;r===_y;)r=e[--n];if(r===by)return VA}if(s===Xf&&i===Xf){for(var o=0;r===Xf;)o++,r=e[--n];if(o%2===0)return VA}return Yf},LP=function(t){var e=TP(t),A=e.length,n=0,r=0,s=e.map(DP);return{next:function(){if(n>=A)return{done:!0,value:null};for(var i=VA;n<A&&(i=HP(e,s,++n))===VA;);if(i!==VA||n===A){var o=NP.apply(null,e.slice(r,n));return r=n,{value:o,done:!1}}return{done:!0,value:null}}}},RP=function(t){for(var e=LP(t),A=[],n;!(n=e.next()).done;)n.value&&A.push(n.value.slice());return A},PP=function(t){var e=123;if(t.createRange){var A=t.createRange();if(A.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),A.selectNode(n);var r=A.getBoundingClientRect(),s=Math.round(r.height);if(t.body.removeChild(n),s===e)return!0}}return!1},MP=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var A=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,r=Sd(n.data).map(function(a){return mt(a)}),s=0,i={},o=r.every(function(a,l){A.setStart(n,s),A.setEnd(n,s+a.length);var c=A.getBoundingClientRect();s+=a.length;var d=c.x>i.x||c.y>i.y;return i=c,l===0?!0:d});return t.body.removeChild(e),o},OP=function(){return typeof new Image().crossOrigin<"u"},KP=function(){return typeof new XMLHttpRequest().responseType=="string"},jP=function(t){var e=new Image,A=t.createElement("canvas"),n=A.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),A.toDataURL()}catch{return!1}return!0},Sy=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},GP=function(t){var e=t.createElement("canvas"),A=100;e.width=A,e.height=A;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,A,A);var r=new Image,s=e.toDataURL();r.src=s;var i=Op(A,A,0,0,r);return n.fillStyle="red",n.fillRect(0,0,A,A),Ty(i).then(function(o){n.drawImage(o,0,0);var a=n.getImageData(0,0,A,A).data;n.fillStyle="red",n.fillRect(0,0,A,A);var l=t.createElement("div");return l.style.backgroundImage="url("+s+")",l.style.height=A+"px",Sy(a)?Ty(Op(A,A,0,0,l)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),Sy(n.getImageData(0,0,A,A).data)}).catch(function(){return!1})},Op=function(t,e,A,n,r){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",A.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(r),i},Ty=function(t){return new Promise(function(e,A){var n=new Image;n.onload=function(){return e(n)},n.onerror=A,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Wt={get SUPPORT_RANGE_BOUNDS(){var t=PP(document);return Object.defineProperty(Wt,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Wt.SUPPORT_RANGE_BOUNDS&&MP(document);return Object.defineProperty(Wt,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=jP(document);return Object.defineProperty(Wt,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?GP(document):Promise.resolve(!1);return Object.defineProperty(Wt,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=OP();return Object.defineProperty(Wt,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=KP();return Object.defineProperty(Wt,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Wt,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Wt,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},va=function(){function t(e,A){this.text=e,this.bounds=A}return t}(),WP=function(t,e,A,n){var r=$P(e,A),s=[],i=0;return r.forEach(function(o){if(A.textDecorationLine.length||o.trim().length>0)if(Wt.SUPPORT_RANGE_BOUNDS){var a=Ny(n,i,o.length).getClientRects();if(a.length>1){var l=qm(o),c=0;l.forEach(function(f){s.push(new va(f,pr.fromDOMRectList(t,Ny(n,c+i,f.length).getClientRects()))),c+=f.length})}else s.push(new va(o,pr.fromDOMRectList(t,a)))}else{var d=n.splitText(o.length);s.push(new va(o,zP(t,n))),n=d}else Wt.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},zP=function(t,e){var A=e.ownerDocument;if(A){var n=A.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var r=e.parentNode;if(r){r.replaceChild(n,e);var s=bd(t,n);return n.firstChild&&r.replaceChild(n.firstChild,n),s}}return pr.EMPTY},Ny=function(t,e,A){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var r=n.createRange();return r.setStart(t,e),r.setEnd(t,e+A),r},qm=function(t){if(Wt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(A){return A.segment})}return RP(t)},VP=function(t,e){if(Wt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(A.segment(t)).map(function(n){return n.segment})}return YP(t,e)},$P=function(t,e){return e.letterSpacing!==0?qm(t):VP(t,e)},XP=[32,160,4961,65792,65793,4153,4241],YP=function(t,e){for(var A=xH(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],r,s=function(){if(r.value){var i=r.value.slice(),o=Sd(i),a="";o.forEach(function(l){XP.indexOf(l)===-1?a+=mt(l):(a.length&&n.push(a),n.push(mt(l)),a="")}),a.length&&n.push(a)}};!(r=A.next()).done;)s();return n},JP=function(){function t(e,A,n){this.text=ZP(A.data,n.textTransform),this.textBounds=WP(e,this.text,n,A)}return t}(),ZP=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(qP,eM);case 2:return t.toUpperCase();default:return t}},qP=/(^|\s|:|-|\(|\))([a-z])/g,eM=function(t,e,A){return t.length>0?e+A.toUpperCase():t},IF=function(t){_n(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return e}(jn),QF=function(t){_n(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return e}(jn),UF=function(t){_n(e,t);function e(A,n){var r=t.call(this,A,n)||this,s=new XMLSerializer,i=bd(A,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return e}(jn),bF=function(t){_n(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r.value=n.value,r}return e}(jn),Kp=function(t){_n(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r.start=n.start,r.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,r}return e}(jn),tM=[{type:15,flags:0,unit:"px",number:3}],AM=[{type:16,flags:0,number:50}],nM=function(t){return t.width>t.height?new pr(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new pr(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},rM=function(t){var e=t.type===sM?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},Lu="checkbox",Ru="radio",sM="password",ky=707406591,ew=function(t){_n(e,t);function e(A,n){var r=t.call(this,A,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=rM(n),(r.type===Lu||r.type===Ru)&&(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=nM(r.bounds)),r.type){case Lu:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=tM;break;case Ru:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=AM;break}return r}return e}(jn),SF=function(t){_n(e,t);function e(A,n){var r=t.call(this,A,n)||this,s=n.options[n.selectedIndex||0];return r.value=s&&s.text||"",r}return e}(jn),TF=function(t){_n(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r.value=n.value,r}return e}(jn),NF=function(t){_n(e,t);function e(A,n){var r=t.call(this,A,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=DF(A,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Ba(A,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):or.TRANSPARENT,i=n.contentWindow.document.body?Ba(A,getComputedStyle(n.contentWindow.document.body).backgroundColor):or.TRANSPARENT;r.backgroundColor=qr(s)?qr(i)?r.styles.backgroundColor:i:s}}catch{}return r}return e}(jn),iM=["OL","UL","MENU"],Hc=function(t,e,A,n){for(var r=e.firstChild,s=void 0;r;r=s)if(s=r.nextSibling,HF(r)&&r.data.trim().length>0)A.textNodes.push(new JP(t,r,A.styles));else if(bi(r))if(MF(r)&&r.assignedNodes)r.assignedNodes().forEach(function(o){return Hc(t,o,A,n)});else{var i=kF(t,r);i.styles.isVisible()&&(oM(r,i,n)?i.flags|=4:aM(i.styles)&&(i.flags|=2),iM.indexOf(r.tagName)!==-1&&(i.flags|=8),A.elements.push(i),r.slot,r.shadowRoot?Hc(t,r.shadowRoot,i,n):!Pu(r)&&!LF(r)&&!Mu(r)&&Hc(t,r,i,n))}},kF=function(t,e){return Gp(e)?new IF(t,e):RF(e)?new QF(t,e):LF(e)?new UF(t,e):lM(e)?new bF(t,e):cM(e)?new Kp(t,e):uM(e)?new ew(t,e):Mu(e)?new SF(t,e):Pu(e)?new TF(t,e):PF(e)?new NF(t,e):new jn(t,e)},DF=function(t,e){var A=kF(t,e);return A.flags|=4,Hc(t,e,A,A),A},oM=function(t,e,A){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||tw(t)&&A.styles.isTransparent()},aM=function(t){return t.isPositioned()||t.isFloating()},HF=function(t){return t.nodeType===Node.TEXT_NODE},bi=function(t){return t.nodeType===Node.ELEMENT_NODE},jp=function(t){return bi(t)&&typeof t.style<"u"&&!Lc(t)},Lc=function(t){return typeof t.className=="object"},lM=function(t){return t.tagName==="LI"},cM=function(t){return t.tagName==="OL"},uM=function(t){return t.tagName==="INPUT"},dM=function(t){return t.tagName==="HTML"},LF=function(t){return t.tagName==="svg"},tw=function(t){return t.tagName==="BODY"},RF=function(t){return t.tagName==="CANVAS"},Dy=function(t){return t.tagName==="VIDEO"},Gp=function(t){return t.tagName==="IMG"},PF=function(t){return t.tagName==="IFRAME"},Hy=function(t){return t.tagName==="STYLE"},fM=function(t){return t.tagName==="SCRIPT"},Pu=function(t){return t.tagName==="TEXTAREA"},Mu=function(t){return t.tagName==="SELECT"},MF=function(t){return t.tagName==="SLOT"},Ly=function(t){return t.tagName.indexOf("-")>0},hM=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var A=this.counters[e];return A&&A.length?A[A.length-1]:1},t.prototype.getCounterValues=function(e){var A=this.counters[e];return A||[]},t.prototype.pop=function(e){var A=this;e.forEach(function(n){return A.counters[n].pop()})},t.prototype.parse=function(e){var A=this,n=e.counterIncrement,r=e.counterReset,s=!0;n!==null&&n.forEach(function(o){var a=A.counters[o.counter];a&&o.increment!==0&&(s=!1,a.length||a.push(1),a[Math.max(0,a.length-1)]+=o.increment)});var i=[];return s&&r.forEach(function(o){var a=A.counters[o.counter];i.push(o.counter),a||(a=A.counters[o.counter]=[]),a.push(o.reset)}),i},t}(),Ry={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Py={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},pM={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},gM={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ui=function(t,e,A,n,r,s){return t<e||t>A?el(t,r,s.length>0):n.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=n.values[a];return i},"")+s},OF=function(t,e,A,n){var r="";do A||t--,r=n(t)+r,t/=e;while(t*e>=e);return r},gt=function(t,e,A,n,r){var s=A-e+1;return(t<0?"-":"")+(OF(Math.abs(t),s,n,function(i){return mt(Math.floor(i%s)+e)})+r)},ws=function(t,e,A){A===void 0&&(A=". ");var n=e.length;return OF(Math.abs(t),n,!1,function(r){return e[Math.floor(r%n)]})+A},hi=1,xr=2,Er=4,ea=8,Yn=function(t,e,A,n,r,s){if(t<-9999||t>9999)return el(t,4,r.length>0);var i=Math.abs(t),o=r;if(i===0)return e[0]+o;for(var a=0;i>0&&a<=4;a++){var l=i%10;l===0&&bt(s,hi)&&o!==""?o=e[l]+o:l>1||l===1&&a===0||l===1&&a===1&&bt(s,xr)||l===1&&a===1&&bt(s,Er)&&t>100||l===1&&a>1&&bt(s,ea)?o=e[l]+(a>0?A[a-1]:"")+o:l===1&&a>0&&(o=A[a-1]+o),i=Math.floor(i/10)}return(t<0?n:"")+o},My="",Oy="",Ky="",Jf="",el=function(t,e,A){var n=A?". ":"",r=A?"":"",s=A?", ":"",i=A?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=gt(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return ws(t,"",r);case 6:return ui(t,1,3999,Ry,3,n).toLowerCase();case 7:return ui(t,1,3999,Ry,3,n);case 8:return gt(t,945,969,!1,n);case 9:return gt(t,97,122,!1,n);case 10:return gt(t,65,90,!1,n);case 11:return gt(t,1632,1641,!0,n);case 12:case 49:return ui(t,1,9999,Py,3,n);case 35:return ui(t,1,9999,Py,3,n).toLowerCase();case 13:return gt(t,2534,2543,!0,n);case 14:case 30:return gt(t,6112,6121,!0,n);case 15:return ws(t,"",r);case 16:return ws(t,"",r);case 17:case 48:return Yn(t,"",My,"",r,xr|Er|ea);case 47:return Yn(t,"",Oy,"",r,hi|xr|Er|ea);case 42:return Yn(t,"",My,"",r,xr|Er|ea);case 41:return Yn(t,"",Oy,"",r,hi|xr|Er|ea);case 26:return Yn(t,"","",Ky,r,0);case 25:return Yn(t,"","",Ky,r,hi|xr|Er);case 31:return Yn(t,"","",Jf,s,hi|xr|Er);case 33:return Yn(t,"","",Jf,s,0);case 32:return Yn(t,"","",Jf,s,hi|xr|Er);case 18:return gt(t,2406,2415,!0,n);case 20:return ui(t,1,19999,gM,3,n);case 21:return gt(t,2790,2799,!0,n);case 22:return gt(t,2662,2671,!0,n);case 22:return ui(t,1,10999,pM,3,n);case 23:return ws(t,"");case 24:return ws(t,"");case 27:return gt(t,3302,3311,!0,n);case 28:return ws(t,"",r);case 29:return ws(t,"",r);case 34:return gt(t,3792,3801,!0,n);case 37:return gt(t,6160,6169,!0,n);case 38:return gt(t,4160,4169,!0,n);case 39:return gt(t,2918,2927,!0,n);case 40:return gt(t,1776,1785,!0,n);case 43:return gt(t,3046,3055,!0,n);case 44:return gt(t,3174,3183,!0,n);case 45:return gt(t,3664,3673,!0,n);case 46:return gt(t,3872,3881,!0,n);case 3:default:return gt(t,48,57,!0,n)}},KF="data-html2canvas-ignore",jy=function(){function t(e,A,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=A,this.counters=new hM,this.quoteDepth=0,!A.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(A.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,A){var n=this,r=mM(e,A);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=r.contentWindow,a=o.document,l=yM(r).then(function(){return fA(n,void 0,void 0,function(){var c,d;return nA(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(EM),o&&(o.scrollTo(A.left,A.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==A.top||o.scrollX!==A.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-A.left,o.scrollY-A.top,0,0))),c=this.options.onclone,d=this.clonedReferenceElement,typeof d>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,BM(a)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof c=="function"?[2,Promise.resolve().then(function(){return c(a,d)}).then(function(){return r})]:[2,r]}})})});return a.open(),a.write(CM(document.doctype)+"<html></html>"),xM(this.referenceElement.ownerDocument,s,i),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),l},t.prototype.createElementClone=function(e){if(Mp(e,2))debugger;if(RF(e))return this.createCanvasClone(e);if(Dy(e))return this.createVideoClone(e);if(Hy(e))return this.createStyleClone(e);var A=e.cloneNode(!1);return Gp(A)&&(Gp(e)&&e.currentSrc&&e.currentSrc!==e.src&&(A.src=e.currentSrc,A.srcset=""),A.loading==="lazy"&&(A.loading="eager")),Ly(A)?this.createCustomElementClone(A):A},t.prototype.createCustomElementClone=function(e){var A=document.createElement("html2canvascustomelement");return Zf(e.style,A),A},t.prototype.createStyleClone=function(e){try{var A=e.sheet;if(A&&A.cssRules){var n=[].slice.call(A.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var A;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var s=e.getContext("2d"),i=r.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(A=e.getContext("webgl2"))!==null&&A!==void 0?A:e.getContext("webgl");if(o){var a=o.getContextAttributes();(a==null?void 0:a.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return r}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},t.prototype.createVideoClone=function(e){var A=e.ownerDocument.createElement("canvas");A.width=e.offsetWidth,A.height=e.offsetHeight;var n=A.getContext("2d");try{return n&&(n.drawImage(e,0,0,A.width,A.height),this.options.allowTaint||n.getImageData(0,0,A.width,A.height)),A}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},t.prototype.appendChildNode=function(e,A,n){(!bi(A)||!fM(A)&&!A.hasAttribute(KF)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(A)))&&(!this.options.copyStyles||!bi(A)||!Hy(A))&&e.appendChild(this.cloneNode(A,n))},t.prototype.cloneChildNodes=function(e,A,n){for(var r=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(bi(s)&&MF(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return r.appendChildNode(A,o,n)})}else this.appendChildNode(A,s,n)},t.prototype.cloneNode=function(e,A){if(HF(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&bi(e)&&(jp(e)||Lc(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&jp(r)&&(this.clonedReferenceElement=r),tw(r)&&IM(r);var a=this.counters.parse(new yy(this.context,s)),l=this.resolvePseudoContent(e,r,i,Ca.BEFORE);Ly(e)&&(A=!0),Dy(e)||this.cloneChildNodes(e,r,A),l&&r.insertBefore(l,r.firstChild);var c=this.resolvePseudoContent(e,r,o,Ca.AFTER);return c&&r.appendChild(c),this.counters.pop(a),(s&&(this.options.copyStyles||Lc(e))&&!PF(e)||A)&&Zf(s,r),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(Pu(e)||Mu(e))&&(Pu(r)||Mu(r))&&(r.value=e.value),r}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,A,n,r){var s=this;if(n){var i=n.content,o=A.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new yy(this.context,n));var a=new lP(this.context,n),l=o.createElement("html2canvaspseudoelement");Zf(n,l),a.content.forEach(function(d){if(d.type===0)l.appendChild(o.createTextNode(d.value));else if(d.type===22){var f=o.createElement("img");f.src=d.value,f.style.opacity="1",l.appendChild(f)}else if(d.type===18){if(d.name==="attr"){var h=d.values.filter(Ye);h.length&&l.appendChild(o.createTextNode(e.getAttribute(h[0].value)||""))}else if(d.name==="counter"){var m=d.values.filter(so),C=m[0],Q=m[1];if(C&&Ye(C)){var g=s.counters.getCounterValue(C.value),p=Q&&Ye(Q)?Pp.parse(s.context,Q.value):3;l.appendChild(o.createTextNode(el(g,p,!1)))}}else if(d.name==="counters"){var w=d.values.filter(so),C=w[0],v=w[1],Q=w[2];if(C&&Ye(C)){var _=s.counters.getCounterValues(C.value),F=Q&&Ye(Q)?Pp.parse(s.context,Q.value):3,U=v&&v.type===0?v.value:"",T=_.map(function(R){return el(R,F,!1)}).join(U);l.appendChild(o.createTextNode(T))}}}else if(d.type===20)switch(d.value){case"open-quote":l.appendChild(o.createTextNode(By(a.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(o.createTextNode(By(a.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(o.createTextNode(d.value))}}),l.className=Wp+" "+zp;var c=r===Ca.BEFORE?" "+Wp:" "+zp;return Lc(A)?A.className.baseValue+=c:A.className+=c,l}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Ca;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Ca||(Ca={}));var mM=function(t,e){var A=t.createElement("iframe");return A.className="html2canvas-container",A.style.visibility="hidden",A.style.position="fixed",A.style.left="-10000px",A.style.top="0px",A.style.border="0",A.width=e.width.toString(),A.height=e.height.toString(),A.scrolling="no",A.setAttribute(KF,"true"),t.body.appendChild(A),A},wM=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},BM=function(t){return Promise.all([].slice.call(t.images,0).map(wM))},yM=function(t){return new Promise(function(e,A){var n=t.contentWindow;if(!n)return A("No window assigned for iframe");var r=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){r.body.childNodes.length>0&&r.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},vM=["all","d","content"],Zf=function(t,e){for(var A=t.length-1;A>=0;A--){var n=t.item(A);vM.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},CM=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},xM=function(t,e,A){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||A!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,A)},EM=function(t){var e=t[0],A=t[1],n=t[2];e.scrollLeft=A,e.scrollTop=n},_M=":before",FM=":after",Wp="___html2canvas___pseudoelement_before",zp="___html2canvas___pseudoelement_after",Gy=`{
    content: "" !important;
    display: none !important;
}`,IM=function(t){QM(t,"."+Wp+_M+Gy+`
         .`+zp+FM+Gy)},QM=function(t,e){var A=t.ownerDocument;if(A){var n=A.createElement("style");n.textContent=e,t.appendChild(n)}},jF=function(){function t(){}return t.getOrigin=function(e){var A=t._link;return A?(A.href=e,A.href=A.href,A.protocol+A.hostname+A.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),UM=function(){function t(e,A){this.context=e,this._options=A,this._cache={}}return t.prototype.addImage=function(e){var A=Promise.resolve();return this.has(e)||(eh(e)||NM(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),A},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return fA(this,void 0,void 0,function(){var A,n,r,s,i=this;return nA(this,function(o){switch(o.label){case 0:return A=jF.isSameOrigin(e),n=!qf(e)&&this._options.useCORS===!0&&Wt.SUPPORT_CORS_IMAGES&&!A,r=!qf(e)&&!A&&!eh(e)&&typeof this._options.proxy=="string"&&Wt.SUPPORT_CORS_XHR&&!n,!A&&this._options.allowTaint===!1&&!qf(e)&&!eh(e)&&!r&&!n?[2]:(s=e,r?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(a,l){var c=new Image;c.onload=function(){return a(c)},c.onerror=l,(kM(s)||n)&&(c.crossOrigin="anonymous"),c.src=s,c.complete===!0&&setTimeout(function(){return a(c)},500),i._options.imageTimeout>0&&setTimeout(function(){return l("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var A=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise(function(s,i){var o=Wt.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(a.status===200)if(o==="text")s(a.response);else{var d=new FileReader;d.addEventListener("load",function(){return s(d.result)},!1),d.addEventListener("error",function(f){return i(f)},!1),d.readAsDataURL(a.response)}else i("Failed to proxy resource "+r+" with status code "+a.status)},a.onerror=i;var l=n.indexOf("?")>-1?"&":"?";if(a.open("GET",""+n+l+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&a instanceof XMLHttpRequest&&(a.responseType=o),A._options.imageTimeout){var c=A._options.imageTimeout;a.timeout=c,a.ontimeout=function(){return i("Timed out ("+c+"ms) proxying "+r)}}a.send()})},t}(),bM=/^data:image\/svg\+xml/i,SM=/^data:image\/.*;base64,/i,TM=/^data:image\/.*/i,NM=function(t){return Wt.SUPPORT_SVG_DRAWING||!DM(t)},qf=function(t){return TM.test(t)},kM=function(t){return SM.test(t)},eh=function(t){return t.substr(0,4)==="blob"},DM=function(t){return t.substr(-3).toLowerCase()==="svg"||bM.test(t)},te=function(){function t(e,A){this.type=0,this.x=e,this.y=A}return t.prototype.add=function(e,A){return new t(this.x+e,this.y+A)},t}(),di=function(t,e,A){return new te(t.x+(e.x-t.x)*A,t.y+(e.y-t.y)*A)},dc=function(){function t(e,A,n,r){this.type=1,this.start=e,this.startControl=A,this.endControl=n,this.end=r}return t.prototype.subdivide=function(e,A){var n=di(this.start,this.startControl,e),r=di(this.startControl,this.endControl,e),s=di(this.endControl,this.end,e),i=di(n,r,e),o=di(r,s,e),a=di(i,o,e);return A?new t(this.start,n,i,a):new t(a,o,s,this.end)},t.prototype.add=function(e,A){return new t(this.start.add(e,A),this.startControl.add(e,A),this.endControl.add(e,A),this.end.add(e,A))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),YA=function(t){return t.type===1},HM=function(){function t(e){var A=e.styles,n=e.bounds,r=Zo(A.borderTopLeftRadius,n.width,n.height),s=r[0],i=r[1],o=Zo(A.borderTopRightRadius,n.width,n.height),a=o[0],l=o[1],c=Zo(A.borderBottomRightRadius,n.width,n.height),d=c[0],f=c[1],h=Zo(A.borderBottomLeftRadius,n.width,n.height),m=h[0],C=h[1],Q=[];Q.push((s+a)/n.width),Q.push((m+d)/n.width),Q.push((i+C)/n.height),Q.push((l+f)/n.height);var g=Math.max.apply(Math,Q);g>1&&(s/=g,i/=g,a/=g,l/=g,d/=g,f/=g,m/=g,C/=g);var p=n.width-a,w=n.height-f,v=n.width-d,_=n.height-C,F=A.borderTopWidth,U=A.borderRightWidth,T=A.borderBottomWidth,D=A.borderLeftWidth,L=tt(A.paddingTop,e.bounds.width),R=tt(A.paddingRight,e.bounds.width),z=tt(A.paddingBottom,e.bounds.width),j=tt(A.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?st(n.left+D/3,n.top+F/3,s-D/3,i-F/3,We.TOP_LEFT):new te(n.left+D/3,n.top+F/3),this.topRightBorderDoubleOuterBox=s>0||i>0?st(n.left+p,n.top+F/3,a-U/3,l-F/3,We.TOP_RIGHT):new te(n.left+n.width-U/3,n.top+F/3),this.bottomRightBorderDoubleOuterBox=d>0||f>0?st(n.left+v,n.top+w,d-U/3,f-T/3,We.BOTTOM_RIGHT):new te(n.left+n.width-U/3,n.top+n.height-T/3),this.bottomLeftBorderDoubleOuterBox=m>0||C>0?st(n.left+D/3,n.top+_,m-D/3,C-T/3,We.BOTTOM_LEFT):new te(n.left+D/3,n.top+n.height-T/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?st(n.left+D*2/3,n.top+F*2/3,s-D*2/3,i-F*2/3,We.TOP_LEFT):new te(n.left+D*2/3,n.top+F*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?st(n.left+p,n.top+F*2/3,a-U*2/3,l-F*2/3,We.TOP_RIGHT):new te(n.left+n.width-U*2/3,n.top+F*2/3),this.bottomRightBorderDoubleInnerBox=d>0||f>0?st(n.left+v,n.top+w,d-U*2/3,f-T*2/3,We.BOTTOM_RIGHT):new te(n.left+n.width-U*2/3,n.top+n.height-T*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||C>0?st(n.left+D*2/3,n.top+_,m-D*2/3,C-T*2/3,We.BOTTOM_LEFT):new te(n.left+D*2/3,n.top+n.height-T*2/3),this.topLeftBorderStroke=s>0||i>0?st(n.left+D/2,n.top+F/2,s-D/2,i-F/2,We.TOP_LEFT):new te(n.left+D/2,n.top+F/2),this.topRightBorderStroke=s>0||i>0?st(n.left+p,n.top+F/2,a-U/2,l-F/2,We.TOP_RIGHT):new te(n.left+n.width-U/2,n.top+F/2),this.bottomRightBorderStroke=d>0||f>0?st(n.left+v,n.top+w,d-U/2,f-T/2,We.BOTTOM_RIGHT):new te(n.left+n.width-U/2,n.top+n.height-T/2),this.bottomLeftBorderStroke=m>0||C>0?st(n.left+D/2,n.top+_,m-D/2,C-T/2,We.BOTTOM_LEFT):new te(n.left+D/2,n.top+n.height-T/2),this.topLeftBorderBox=s>0||i>0?st(n.left,n.top,s,i,We.TOP_LEFT):new te(n.left,n.top),this.topRightBorderBox=a>0||l>0?st(n.left+p,n.top,a,l,We.TOP_RIGHT):new te(n.left+n.width,n.top),this.bottomRightBorderBox=d>0||f>0?st(n.left+v,n.top+w,d,f,We.BOTTOM_RIGHT):new te(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||C>0?st(n.left,n.top+_,m,C,We.BOTTOM_LEFT):new te(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?st(n.left+D,n.top+F,Math.max(0,s-D),Math.max(0,i-F),We.TOP_LEFT):new te(n.left+D,n.top+F),this.topRightPaddingBox=a>0||l>0?st(n.left+Math.min(p,n.width-U),n.top+F,p>n.width+U?0:Math.max(0,a-U),Math.max(0,l-F),We.TOP_RIGHT):new te(n.left+n.width-U,n.top+F),this.bottomRightPaddingBox=d>0||f>0?st(n.left+Math.min(v,n.width-D),n.top+Math.min(w,n.height-T),Math.max(0,d-U),Math.max(0,f-T),We.BOTTOM_RIGHT):new te(n.left+n.width-U,n.top+n.height-T),this.bottomLeftPaddingBox=m>0||C>0?st(n.left+D,n.top+Math.min(_,n.height-T),Math.max(0,m-D),Math.max(0,C-T),We.BOTTOM_LEFT):new te(n.left+D,n.top+n.height-T),this.topLeftContentBox=s>0||i>0?st(n.left+D+j,n.top+F+L,Math.max(0,s-(D+j)),Math.max(0,i-(F+L)),We.TOP_LEFT):new te(n.left+D+j,n.top+F+L),this.topRightContentBox=a>0||l>0?st(n.left+Math.min(p,n.width+D+j),n.top+F+L,p>n.width+D+j?0:a-D+j,l-(F+L),We.TOP_RIGHT):new te(n.left+n.width-(U+R),n.top+F+L),this.bottomRightContentBox=d>0||f>0?st(n.left+Math.min(v,n.width-(D+j)),n.top+Math.min(w,n.height+F+L),Math.max(0,d-(U+R)),f-(T+z),We.BOTTOM_RIGHT):new te(n.left+n.width-(U+R),n.top+n.height-(T+z)),this.bottomLeftContentBox=m>0||C>0?st(n.left+D+j,n.top+_,Math.max(0,m-(D+j)),C-(T+z),We.BOTTOM_LEFT):new te(n.left+D+j,n.top+n.height-(T+z))}return t}(),We;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(We||(We={}));var st=function(t,e,A,n,r){var s=4*((Math.sqrt(2)-1)/3),i=A*s,o=n*s,a=t+A,l=e+n;switch(r){case We.TOP_LEFT:return new dc(new te(t,l),new te(t,l-o),new te(a-i,e),new te(a,e));case We.TOP_RIGHT:return new dc(new te(t,e),new te(t+i,e),new te(a,l-o),new te(a,l));case We.BOTTOM_RIGHT:return new dc(new te(a,e),new te(a,e+o),new te(t+i,l),new te(t,l));case We.BOTTOM_LEFT:default:return new dc(new te(a,l),new te(a-i,l),new te(t,e+o),new te(t,e))}},Ou=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},LM=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Ku=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},RM=function(){function t(e,A,n){this.offsetX=e,this.offsetY=A,this.matrix=n,this.type=0,this.target=6}return t}(),fc=function(){function t(e,A){this.path=e,this.target=A,this.type=1}return t}(),PM=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),MM=function(t){return t.type===0},GF=function(t){return t.type===1},OM=function(t){return t.type===2},Wy=function(t,e){return t.length===e.length?t.some(function(A,n){return A===e[n]}):!1},KM=function(t,e,A,n,r){return t.map(function(s,i){switch(i){case 0:return s.add(e,A);case 1:return s.add(e+n,A);case 2:return s.add(e+n,A+r);case 3:return s.add(e,A+r)}return s})},WF=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),zF=function(){function t(e,A){if(this.container=e,this.parent=A,this.effects=[],this.curves=new HM(this.container),this.container.styles.opacity<1&&this.effects.push(new PM(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new RM(n,r,s))}if(this.container.styles.overflowX!==0){var i=Ou(this.curves),o=Ku(this.curves);Wy(i,o)?this.effects.push(new fc(i,6)):(this.effects.push(new fc(i,2)),this.effects.push(new fc(o,4)))}}return t.prototype.getEffects=function(e){for(var A=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,r=this.effects.slice(0);n;){var s=n.effects.filter(function(a){return!GF(a)});if(A||n.container.styles.position!==0||!n.parent){if(r.unshift.apply(r,s),A=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=Ou(n.curves),o=Ku(n.curves);Wy(i,o)||r.unshift(new fc(o,6))}}else r.unshift.apply(r,s);n=n.parent}return r.filter(function(a){return bt(a.target,e)})},t}(),Vp=function(t,e,A,n){t.container.elements.forEach(function(r){var s=bt(r.flags,4),i=bt(r.flags,2),o=new zF(r,t);bt(r.styles.display,2048)&&n.push(o);var a=bt(r.flags,8)?[]:n;if(s||i){var l=s||r.styles.isPositioned()?A:e,c=new WF(o);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var d=r.styles.zIndex.order;if(d<0){var f=0;l.negativeZIndex.some(function(m,C){return d>m.element.container.styles.zIndex.order?(f=C,!1):f>0}),l.negativeZIndex.splice(f,0,c)}else if(d>0){var h=0;l.positiveZIndex.some(function(m,C){return d>=m.element.container.styles.zIndex.order?(h=C+1,!1):h>0}),l.positiveZIndex.splice(h,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else r.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);Vp(o,c,s?c:A,a)}else r.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),Vp(o,e,A,a);bt(r.flags,8)&&VF(r,a)})},VF=function(t,e){for(var A=t instanceof Kp?t.start:1,n=t instanceof Kp?t.reversed:!1,r=0;r<e.length;r++){var s=e[r];s.container instanceof bF&&typeof s.container.value=="number"&&s.container.value!==0&&(A=s.container.value),s.listValue=el(A,s.container.styles.listStyleType,!0),A+=n?-1:1}},jM=function(t){var e=new zF(t,null),A=new WF(e),n=[];return Vp(e,A,A,n),VF(e.container,n),A},zy=function(t,e){switch(e){case 0:return tn(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return tn(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return tn(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return tn(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},GM=function(t,e){switch(e){case 0:return tn(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return tn(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return tn(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return tn(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},WM=function(t,e){switch(e){case 0:return tn(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return tn(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return tn(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return tn(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},zM=function(t,e){switch(e){case 0:return hc(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return hc(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return hc(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return hc(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},hc=function(t,e){var A=[];return YA(t)?A.push(t.subdivide(.5,!1)):A.push(t),YA(e)?A.push(e.subdivide(.5,!0)):A.push(e),A},tn=function(t,e,A,n){var r=[];return YA(t)?r.push(t.subdivide(.5,!1)):r.push(t),YA(A)?r.push(A.subdivide(.5,!0)):r.push(A),YA(n)?r.push(n.subdivide(.5,!0).reverse()):r.push(n),YA(e)?r.push(e.subdivide(.5,!1).reverse()):r.push(e),r},$F=function(t){var e=t.bounds,A=t.styles;return e.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))},ju=function(t){var e=t.styles,A=t.bounds,n=tt(e.paddingLeft,A.width),r=tt(e.paddingRight,A.width),s=tt(e.paddingTop,A.width),i=tt(e.paddingBottom,A.width);return A.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+r),-(e.borderTopWidth+e.borderBottomWidth+s+i))},VM=function(t,e){return t===0?e.bounds:t===2?ju(e):$F(e)},$M=function(t,e){return t===0?e.bounds:t===2?ju(e):$F(e)},th=function(t,e,A){var n=VM(pi(t.styles.backgroundOrigin,e),t),r=$M(pi(t.styles.backgroundClip,e),t),s=XM(pi(t.styles.backgroundSize,e),A,n),i=s[0],o=s[1],a=Zo(pi(t.styles.backgroundPosition,e),n.width-i,n.height-o),l=YM(pi(t.styles.backgroundRepeat,e),a,s,n,r),c=Math.round(n.left+a[0]),d=Math.round(n.top+a[1]);return[l,c,d,i,o]},fi=function(t){return Ye(t)&&t.value===ji.AUTO},pc=function(t){return typeof t=="number"},XM=function(t,e,A){var n=e[0],r=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(_t(i)&&o&&_t(o))return[tt(i,A.width),tt(o,A.height)];var a=pc(s);if(Ye(i)&&(i.value===ji.CONTAIN||i.value===ji.COVER)){if(pc(s)){var l=A.width/A.height;return l<s!=(i.value===ji.COVER)?[A.width,A.width/s]:[A.height*s,A.height]}return[A.width,A.height]}var c=pc(n),d=pc(r),f=c||d;if(fi(i)&&(!o||fi(o))){if(c&&d)return[n,r];if(!a&&!f)return[A.width,A.height];if(f&&a){var h=c?n:r*s,m=d?r:n/s;return[h,m]}var C=c?n:A.width,Q=d?r:A.height;return[C,Q]}if(a){var g=0,p=0;return _t(i)?g=tt(i,A.width):_t(o)&&(p=tt(o,A.height)),fi(i)?g=p*s:(!o||fi(o))&&(p=g/s),[g,p]}var w=null,v=null;if(_t(i)?w=tt(i,A.width):o&&_t(o)&&(v=tt(o,A.height)),w!==null&&(!o||fi(o))&&(v=c&&d?w/n*r:A.height),v!==null&&fi(i)&&(w=c&&d?v/r*n:A.width),w!==null&&v!==null)return[w,v];throw new Error("Unable to calculate background-size for element")},pi=function(t,e){var A=t[e];return typeof A>"u"?t[0]:A},YM=function(t,e,A,n,r){var s=e[0],i=e[1],o=A[0],a=A[1];switch(t){case 2:return[new te(Math.round(n.left),Math.round(n.top+i)),new te(Math.round(n.left+n.width),Math.round(n.top+i)),new te(Math.round(n.left+n.width),Math.round(a+n.top+i)),new te(Math.round(n.left),Math.round(a+n.top+i))];case 3:return[new te(Math.round(n.left+s),Math.round(n.top)),new te(Math.round(n.left+s+o),Math.round(n.top)),new te(Math.round(n.left+s+o),Math.round(n.height+n.top)),new te(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new te(Math.round(n.left+s),Math.round(n.top+i)),new te(Math.round(n.left+s+o),Math.round(n.top+i)),new te(Math.round(n.left+s+o),Math.round(n.top+i+a)),new te(Math.round(n.left+s),Math.round(n.top+i+a))];default:return[new te(Math.round(r.left),Math.round(r.top)),new te(Math.round(r.left+r.width),Math.round(r.top)),new te(Math.round(r.left+r.width),Math.round(r.height+r.top)),new te(Math.round(r.left),Math.round(r.height+r.top))]}},JM="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Vy="Hidden Text",ZM=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,A){var n=this._document.createElement("div"),r=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=A,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),r.src=JM,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=A,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(Vy)),n.appendChild(s),n.appendChild(r);var o=r.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(Vy)),n.style.lineHeight="normal",r.style.verticalAlign="super";var a=r.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:a}},t.prototype.getMetrics=function(e,A){var n=e+" "+A;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,A)),this._data[n]},t}(),XF=function(){function t(e,A){this.context=e,this.options=A}return t}(),qM=1e4,eO=function(t){_n(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new ZM(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return e.prototype.applyEffects=function(A){for(var n=this;this._activeEffects.length;)this.popEffect();A.forEach(function(r){return n.applyEffect(r)})},e.prototype.applyEffect=function(A){this.ctx.save(),OM(A)&&(this.ctx.globalAlpha=A.opacity),MM(A)&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),GF(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(A){return fA(this,void 0,void 0,function(){var n;return nA(this,function(r){switch(r.label){case 0:return n=A.element.container.styles,n.isVisible()?[4,this.renderStackContent(A)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(A){return fA(this,void 0,void 0,function(){return nA(this,function(n){switch(n.label){case 0:if(bt(A.container.flags,16))debugger;return A.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(A)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(A)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(A,n,r){var s=this;if(n===0)this.ctx.fillText(A.text,A.bounds.left,A.bounds.top+r);else{var i=qm(A.text);i.reduce(function(o,a){return s.ctx.fillText(a,o,A.bounds.top+r),o+s.ctx.measureText(a).width},A.bounds.left)}},e.prototype.createFontStyle=function(A){var n=A.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),r=sO(A.fontFamily).join(", "),s=ml(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,n,A.fontWeight,s,r].join(" "),r,s]},e.prototype.renderTextNode=function(A,n){return fA(this,void 0,void 0,function(){var r,s,i,o,a,l,c,d,f=this;return nA(this,function(h){return r=this.createFontStyle(n),s=r[0],i=r[1],o=r[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),l=a.baseline,c=a.middle,d=n.paintOrder,A.textBounds.forEach(function(m){d.forEach(function(C){switch(C){case 0:f.ctx.fillStyle=Tt(n.color),f.renderTextWithLetterSpacing(m,n.letterSpacing,l);var Q=n.textShadow;Q.length&&m.text.trim().length&&(Q.slice(0).reverse().forEach(function(g){f.ctx.shadowColor=Tt(g.color),f.ctx.shadowOffsetX=g.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=g.offsetY.number*f.options.scale,f.ctx.shadowBlur=g.blur.number,f.renderTextWithLetterSpacing(m,n.letterSpacing,l)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=Tt(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(g){switch(g){case 1:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+l),m.bounds.width,1);break;case 2:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:f.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+c),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(f.ctx.strokeStyle=Tt(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+l)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(A,n,r){if(r&&A.intrinsicWidth>0&&A.intrinsicHeight>0){var s=ju(A),i=Ku(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(r,0,0,A.intrinsicWidth,A.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(A){return fA(this,void 0,void 0,function(){var n,r,s,i,o,a,p,p,l,c,d,f,v,h,m,_,C,Q,g,p,w,v,_;return nA(this,function(F){switch(F.label){case 0:this.applyEffects(A.getEffects(4)),n=A.container,r=A.curves,s=n.styles,i=0,o=n.textNodes,F.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,s)]):[3,4];case 2:F.sent(),F.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof IF))return[3,8];F.label=5;case 5:return F.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return p=F.sent(),this.renderReplacedElement(n,r,p),[3,8];case 7:return F.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof QF&&this.renderReplacedElement(n,r,n.canvas),!(n instanceof UF))return[3,12];F.label=9;case 9:return F.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return p=F.sent(),this.renderReplacedElement(n,r,p),[3,12];case 11:return F.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof NF&&n.tree?(l=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,l.render(n.tree)]):[3,14];case 13:c=F.sent(),n.width&&n.height&&this.ctx.drawImage(c,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),F.label=14;case 14:if(n instanceof ew&&(d=Math.min(n.bounds.width,n.bounds.height),n.type===Lu?n.checked&&(this.ctx.save(),this.path([new te(n.bounds.left+d*.39363,n.bounds.top+d*.79),new te(n.bounds.left+d*.16,n.bounds.top+d*.5549),new te(n.bounds.left+d*.27347,n.bounds.top+d*.44071),new te(n.bounds.left+d*.39694,n.bounds.top+d*.5649),new te(n.bounds.left+d*.72983,n.bounds.top+d*.23),new te(n.bounds.left+d*.84,n.bounds.top+d*.34085),new te(n.bounds.left+d*.39363,n.bounds.top+d*.79)]),this.ctx.fillStyle=Tt(ky),this.ctx.fill(),this.ctx.restore()):n.type===Ru&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+d/2,n.bounds.top+d/2,d/4,0,Math.PI*2,!0),this.ctx.fillStyle=Tt(ky),this.ctx.fill(),this.ctx.restore())),tO(n)&&n.value.length){switch(f=this.createFontStyle(s),v=f[0],h=f[1],m=this.fontMetrics.getMetrics(v,h).baseline,this.ctx.font=v,this.ctx.fillStyle=Tt(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=nO(n.styles.textAlign),_=ju(n),C=0,n.styles.textAlign){case 1:C+=_.width/2;break;case 2:C+=_.width;break}Q=_.add(C,0,0,-_.height/2+1),this.ctx.save(),this.path([new te(_.left,_.top),new te(_.left+_.width,_.top),new te(_.left+_.width,_.top+_.height),new te(_.left,_.top+_.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new va(n.value,Q),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!bt(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(g=n.styles.listStyleImage,g.type!==0)return[3,18];p=void 0,w=g.url,F.label=15;case 15:return F.trys.push([15,17,,18]),[4,this.context.cache.match(w)];case 16:return p=F.sent(),this.ctx.drawImage(p,n.bounds.left-(p.width+10),n.bounds.top),[3,18];case 17:return F.sent(),this.context.logger.error("Error loading list-style-image "+w),[3,18];case 18:return[3,20];case 19:A.listValue&&n.styles.listStyleType!==-1&&(v=this.createFontStyle(s)[0],this.ctx.font=v,this.ctx.fillStyle=Tt(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",_=new pr(n.bounds.left,n.bounds.top+tt(n.styles.paddingTop,n.bounds.width),n.bounds.width,my(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new va(A.listValue,_),s.letterSpacing,my(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),F.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(A){return fA(this,void 0,void 0,function(){var n,r,g,s,i,g,o,a,g,l,c,g,d,f,g,h,m,g,C,Q,g;return nA(this,function(p){switch(p.label){case 0:if(bt(A.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(A.element)];case 1:p.sent(),n=0,r=A.negativeZIndex,p.label=2;case 2:return n<r.length?(g=r[n],[4,this.renderStack(g)]):[3,5];case 3:p.sent(),p.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(A.element)];case 6:p.sent(),s=0,i=A.nonInlineLevel,p.label=7;case 7:return s<i.length?(g=i[s],[4,this.renderNode(g)]):[3,10];case 8:p.sent(),p.label=9;case 9:return s++,[3,7];case 10:o=0,a=A.nonPositionedFloats,p.label=11;case 11:return o<a.length?(g=a[o],[4,this.renderStack(g)]):[3,14];case 12:p.sent(),p.label=13;case 13:return o++,[3,11];case 14:l=0,c=A.nonPositionedInlineLevel,p.label=15;case 15:return l<c.length?(g=c[l],[4,this.renderStack(g)]):[3,18];case 16:p.sent(),p.label=17;case 17:return l++,[3,15];case 18:d=0,f=A.inlineLevel,p.label=19;case 19:return d<f.length?(g=f[d],[4,this.renderNode(g)]):[3,22];case 20:p.sent(),p.label=21;case 21:return d++,[3,19];case 22:h=0,m=A.zeroOrAutoZIndexOrTransformedOrOpacity,p.label=23;case 23:return h<m.length?(g=m[h],[4,this.renderStack(g)]):[3,26];case 24:p.sent(),p.label=25;case 25:return h++,[3,23];case 26:C=0,Q=A.positiveZIndex,p.label=27;case 27:return C<Q.length?(g=Q[C],[4,this.renderStack(g)]):[3,30];case 28:p.sent(),p.label=29;case 29:return C++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},e.prototype.formatPath=function(A){var n=this;A.forEach(function(r,s){var i=YA(r)?r.start:r;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),YA(r)&&n.ctx.bezierCurveTo(r.startControl.x,r.startControl.y,r.endControl.x,r.endControl.y,r.end.x,r.end.y)})},e.prototype.renderRepeat=function(A,n,r,s){this.path(A),this.ctx.fillStyle=n,this.ctx.translate(r,s),this.ctx.fill(),this.ctx.translate(-r,-s)},e.prototype.resizeImage=function(A,n,r){var s;if(A.width===n&&A.height===r)return A;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,r);var a=o.getContext("2d");return a.drawImage(A,0,0,A.width,A.height,0,0,n,r),o},e.prototype.renderBackgroundImage=function(A){return fA(this,void 0,void 0,function(){var n,r,s,i,o,a;return nA(this,function(l){switch(l.label){case 0:n=A.styles.backgroundImage.length-1,r=function(c){var d,f,h,L,J,Ae,j,ae,T,m,L,J,Ae,j,ae,C,Q,g,p,w,v,_,F,U,T,D,L,R,z,j,ae,q,J,Ae,N,O,W,Z,oe,ce,ve,Te;return nA(this,function(xe){switch(xe.label){case 0:if(c.type!==0)return[3,5];d=void 0,f=c.url,xe.label=1;case 1:return xe.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return d=xe.sent(),[3,4];case 3:return xe.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return d&&(h=th(A,n,[d.width,d.height,d.width/d.height]),L=h[0],J=h[1],Ae=h[2],j=h[3],ae=h[4],T=s.ctx.createPattern(s.resizeImage(d,j,ae),"repeat"),s.renderRepeat(L,T,J,Ae)),[3,6];case 5:ML(c)?(m=th(A,n,[null,null,null]),L=m[0],J=m[1],Ae=m[2],j=m[3],ae=m[4],C=DL(c.angle,j,ae),Q=C[0],g=C[1],p=C[2],w=C[3],v=C[4],_=document.createElement("canvas"),_.width=j,_.height=ae,F=_.getContext("2d"),U=F.createLinearGradient(g,w,p,v),py(c.stops,Q).forEach(function(Ie){return U.addColorStop(Ie.stop,Tt(Ie.color))}),F.fillStyle=U,F.fillRect(0,0,j,ae),j>0&&ae>0&&(T=s.ctx.createPattern(_,"repeat"),s.renderRepeat(L,T,J,Ae))):OL(c)&&(D=th(A,n,[null,null,null]),L=D[0],R=D[1],z=D[2],j=D[3],ae=D[4],q=c.position.length===0?[Ym]:c.position,J=tt(q[0],j),Ae=tt(q[q.length-1],ae),N=HL(c,J,Ae,j,ae),O=N[0],W=N[1],O>0&&W>0&&(Z=s.ctx.createRadialGradient(R+J,z+Ae,0,R+J,z+Ae,O),py(c.stops,O*2).forEach(function(Ie){return Z.addColorStop(Ie.stop,Tt(Ie.color))}),s.path(L),s.ctx.fillStyle=Z,O!==W?(oe=A.bounds.left+.5*A.bounds.width,ce=A.bounds.top+.5*A.bounds.height,ve=W/O,Te=1/ve,s.ctx.save(),s.ctx.translate(oe,ce),s.ctx.transform(1,0,0,ve,0,0),s.ctx.translate(-oe,-ce),s.ctx.fillRect(R,Te*(z-ce)+ce,j,ae*Te),s.ctx.restore()):s.ctx.fill())),xe.label=6;case 6:return n--,[2]}})},s=this,i=0,o=A.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return i<o.length?(a=o[i],[5,r(a)]):[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(A,n,r){return fA(this,void 0,void 0,function(){return nA(this,function(s){return this.path(zy(r,n)),this.ctx.fillStyle=Tt(A),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(A,n,r,s){return fA(this,void 0,void 0,function(){var i,o;return nA(this,function(a){switch(a.label){case 0:return n<3?[4,this.renderSolidBorder(A,r,s)]:[3,2];case 1:return a.sent(),[2];case 2:return i=GM(s,r),this.path(i),this.ctx.fillStyle=Tt(A),this.ctx.fill(),o=WM(s,r),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(A){return fA(this,void 0,void 0,function(){var n,r,s,i,o,a,l,c,d=this;return nA(this,function(f){switch(f.label){case 0:return this.applyEffects(A.getEffects(2)),n=A.container.styles,r=!qr(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=AO(pi(n.backgroundClip,0),A.curves),r||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),qr(n.backgroundColor)||(this.ctx.fillStyle=Tt(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(A.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(h){d.ctx.save();var m=Ou(A.curves),C=h.inset?0:qM,Q=KM(m,-C+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(d.path(m),d.ctx.clip(),d.mask(Q)):(d.mask(m),d.ctx.clip(),d.path(Q)),d.ctx.shadowOffsetX=h.offsetX.number+C,d.ctx.shadowOffsetY=h.offsetY.number,d.ctx.shadowColor=Tt(h.color),d.ctx.shadowBlur=h.blur.number,d.ctx.fillStyle=h.inset?Tt(h.color):"rgba(0,0,0,1)",d.ctx.fill(),d.ctx.restore()}),f.label=2;case 2:o=0,a=0,l=s,f.label=3;case 3:return a<l.length?(c=l[a],c.style!==0&&!qr(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,o,A.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,o,A.curves,3)];case 6:return f.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,o,A.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,o,A.curves)];case 10:f.sent(),f.label=11;case 11:o++,f.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(A,n,r,s,i){return fA(this,void 0,void 0,function(){var o,a,l,c,d,f,h,m,C,Q,g,p,w,v,_,F,_,F;return nA(this,function(U){return this.ctx.save(),o=zM(s,r),a=zy(s,r),i===2&&(this.path(a),this.ctx.clip()),YA(a[0])?(l=a[0].start.x,c=a[0].start.y):(l=a[0].x,c=a[0].y),YA(a[1])?(d=a[1].end.x,f=a[1].end.y):(d=a[1].x,f=a[1].y),r===0||r===2?h=Math.abs(l-d):h=Math.abs(c-f),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),m=n<3?n*3:n*2,C=n<3?n*2:n,i===3&&(m=n,C=n),Q=!0,h<=m*2?Q=!1:h<=m*2+C?(g=h/(2*m+C),m*=g,C*=g):(p=Math.floor((h+C)/(m+C)),w=(h-p*m)/(p-1),v=(h-(p+1)*m)/p,C=v<=0||Math.abs(C-w)<Math.abs(C-v)?w:v),Q&&(i===3?this.ctx.setLineDash([0,m+C]):this.ctx.setLineDash([m,C])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Tt(A),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(YA(a[0])&&(_=a[3],F=a[0],this.ctx.beginPath(),this.formatPath([new te(_.end.x,_.end.y),new te(F.start.x,F.start.y)]),this.ctx.stroke()),YA(a[1])&&(_=a[1],F=a[2],this.ctx.beginPath(),this.formatPath([new te(_.end.x,_.end.y),new te(F.start.x,F.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(A){return fA(this,void 0,void 0,function(){var n;return nA(this,function(r){switch(r.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Tt(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=jM(A),[4,this.renderStack(n)];case 1:return r.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(XF),tO=function(t){return t instanceof TF||t instanceof SF?!0:t instanceof ew&&t.type!==Ru&&t.type!==Lu},AO=function(t,e){switch(t){case 0:return Ou(e);case 2:return LM(e);case 1:default:return Ku(e)}},nO=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},rO=["-apple-system","system-ui"],sO=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return rO.indexOf(e)===-1}):t},iO=function(t){_n(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return e.prototype.render=function(A){return fA(this,void 0,void 0,function(){var n,r;return nA(this,function(s){switch(s.label){case 0:return n=Op(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,A),[4,oO(n)];case 1:return r=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Tt(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(r,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(XF),oO=function(t){return new Promise(function(e,A){var n=new Image;n.onload=function(){e(n)},n.onerror=A,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},aO=function(){function t(e){var A=e.id,n=e.enabled;this.id=A,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Vl([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Vl([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Vl([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Vl([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),lO=function(){function t(e,A){var n;this.windowBounds=A,this.instanceName="#"+t.instanceCount++,this.logger=new aO({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new UM(this,e)}return t.instanceCount=1,t}(),cO=function(t,e){return e===void 0&&(e={}),uO(t,e)};typeof window<"u"&&jF.setContext(window);var uO=function(t,e){return fA(void 0,void 0,void 0,function(){var A,n,r,s,i,o,a,l,c,d,f,h,m,C,Q,g,p,w,v,_,U,F,U,T,D,L,R,z,j,ae,q,J,Ae,N,O,W,Z,oe,ce,ve;return nA(this,function(Te){switch(Te.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(A=t.ownerDocument,!A)throw new Error("Element is not attached to a Document");if(n=A.defaultView,!n)throw new Error("Document is not attached to a Window");return r={allowTaint:(T=e.allowTaint)!==null&&T!==void 0?T:!1,imageTimeout:(D=e.imageTimeout)!==null&&D!==void 0?D:15e3,proxy:e.proxy,useCORS:(L=e.useCORS)!==null&&L!==void 0?L:!1},s=Fp({logging:(R=e.logging)!==null&&R!==void 0?R:!0,cache:e.cache},r),i={windowWidth:(z=e.windowWidth)!==null&&z!==void 0?z:n.innerWidth,windowHeight:(j=e.windowHeight)!==null&&j!==void 0?j:n.innerHeight,scrollX:(ae=e.scrollX)!==null&&ae!==void 0?ae:n.pageXOffset,scrollY:(q=e.scrollY)!==null&&q!==void 0?q:n.pageYOffset},o=new pr(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),a=new lO(s,o),l=(J=e.foreignObjectRendering)!==null&&J!==void 0?J:!1,c={allowTaint:(Ae=e.allowTaint)!==null&&Ae!==void 0?Ae:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:l,copyStyles:l},a.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),d=new jy(a,t,c),f=d.clonedReferenceElement,f?[4,d.toIFrame(A,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=Te.sent(),m=tw(f)||dM(f)?K4(f.ownerDocument):bd(a,f),C=m.width,Q=m.height,g=m.left,p=m.top,w=dO(a,f,e.backgroundColor),v={canvas:e.canvas,backgroundColor:w,scale:(O=(N=e.scale)!==null&&N!==void 0?N:n.devicePixelRatio)!==null&&O!==void 0?O:1,x:((W=e.x)!==null&&W!==void 0?W:0)+g,y:((Z=e.y)!==null&&Z!==void 0?Z:0)+p,width:(oe=e.width)!==null&&oe!==void 0?oe:Math.ceil(C),height:(ce=e.height)!==null&&ce!==void 0?ce:Math.ceil(Q)},l?(a.logger.debug("Document cloned, using foreign object rendering"),U=new iO(a,v),[4,U.render(f)]):[3,3];case 2:return _=Te.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+g+","+p+" with size "+C+"x"+Q+" using computed rendering"),a.logger.debug("Starting DOM parsing"),F=DF(a,f),w===F.styles.backgroundColor&&(F.styles.backgroundColor=or.TRANSPARENT),a.logger.debug("Starting renderer for element at "+v.x+","+v.y+" with size "+v.width+"x"+v.height),U=new eO(a,v),[4,U.render(F)];case 4:_=Te.sent(),Te.label=5;case 5:return(!((ve=e.removeContainer)!==null&&ve!==void 0)||ve)&&(jy.destroy(h)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,_]}})})},dO=function(t,e,A){var n=e.ownerDocument,r=n.documentElement?Ba(t,getComputedStyle(n.documentElement).backgroundColor):or.TRANSPARENT,s=n.body?Ba(t,getComputedStyle(n.body).backgroundColor):or.TRANSPARENT,i=typeof A=="string"?Ba(t,A):A===null?or.TRANSPARENT:4294967295;return e===n.documentElement?qr(r)?qr(s)?i:s:r:i};const gc=(t,e)=>{if(!e)return!1;const A=e.split("+").map(i=>i.trim()),n=new Set;let r="";if(A.forEach(i=>{const o=i.toUpperCase();["CTRL","ALT","SHIFT","META"].includes(o)?n.add(o):r=i}),t.key!==r&&t.key.toUpperCase()!==r.toUpperCase())return!1;const s=t.ctrlKey||t.metaKey;if(s!==n.has("CTRL")&&s!==n.has("META")){if(n.has("CTRL")){if(!t.ctrlKey&&!t.metaKey)return!1}else if(t.ctrlKey||t.metaKey)return!1}return!(t.altKey!==n.has("ALT")||t.shiftKey!==n.has("SHIFT"))};function fO(){const[t,e]=E.useState(null),[A,n]=E.useState(!0),[r,s]=E.useState(null),[i,o]=E.useState("Untitled Board"),[a,l]=E.useState(null),[c,d]=E.useState([]),[f,h]=E.useState([]),[m,C]=E.useState("select"),[Q,g]=E.useState({color:"#ffffff",size:5,eraserSize:10}),[p,w]=E.useState(null),[v,_]=E.useState([]),[F,U]=E.useState([]),[T,D]=E.useState(null),[L,R]=E.useState([]),[z,j]=E.useState(null),[ae,q]=E.useState(null);E.useEffect(()=>{if(r&&r!=="new")try{const B=localStorage.getItem(`bookmarks_${r}`);if(B){const y=JSON.parse(B);U(y)}else U([])}catch(B){console.error("Failed to load bookmarks:",B),U([])}else U([])},[r]),E.useEffect(()=>{const B=x=>{console.log("Processing deep link:",x);try{let S=x;x.startsWith("refboard://");const I=new URL(S),b=new URLSearchParams(I.search),P=b.get("boardId");if(P){console.log("Deep link board ID:",P),s(P);const M=parseFloat(b.get("x")||"NaN"),k=parseFloat(b.get("y")||"NaN"),K=parseFloat(b.get("scale")||"NaN");if(!isNaN(M)&&!isNaN(k)){const V=b.get("name")||"Shared Location",X={x:M,y:k,scale:isNaN(K)?void 0:K,name:V};console.log("Deep link navigation:",X),j(X)}}}catch(S){console.error("Failed to parse deep link:",S)}},y=new URLSearchParams(window.location.search);if(y.get("boardId"))if(window.electronAPI)B(window.location.href);else{const x=`refboard://?${y.toString()}`;console.log("Attempting to open desktop app:",x),window.location.href=x,B(window.location.href)}window.electronAPI&&window.electronAPI.onDeepLink(x=>{B(x)})},[]),E.useEffect(()=>{if(z&&r&&!A){console.log("Executing pending navigation:",z),D({x:z.x,y:z.y}),z.name&&U(y=>{if(y.some(b=>Math.abs(b.x-z.x)<1&&Math.abs(b.y-z.y)<1))return y;const S={id:`shared-${Date.now()}`,name:z.name||"Shared Location",targetId:null,x:z.x,y:z.y,scale:z.scale||1},I=[...y,S];if(r&&r!=="new")try{localStorage.setItem(`bookmarks_${r}`,JSON.stringify(I))}catch(b){console.error("Failed to auto-save shared bookmark:",b)}return I}),j(null);const B=new URL(window.location.href);B.search="",window.history.replaceState({},"",B.toString())}},[z,r,A]);const[J,Ae]=E.useState([]),[N,O]=E.useState(null),W=(B,y)=>{const x=c.find(I=>I.id===B);if(!x)return null;const S=12;if(x.type==="generation_node"){if(y==="output")return{x:x.x+x.width+S,y:x.y+x.height*.1};if(y==="input_0")return{x:x.x-S,y:x.y+x.height-x.height*.3};if(y==="input_1")return{x:x.x-S,y:x.y+x.height-x.height*.1}}else{if(y==="output")return{x:x.x+x.width+S,y:x.y+x.height*.1};if(y.startsWith("input")){const I=parseInt(y.split("_")[1]||"0"),P=100/(3+1);return{x:x.x-S,y:x.y+x.height*(P*(I+1)/100)}}}return{x:x.x,y:x.y}},[Z,oe]=E.useState(!1),[ce,ve]=E.useState([]),[Te,xe]=E.useState(!1),[Ie,NA]=E.useState({pan:{keys:[],button:"Middle"},zoom:{keys:["Alt"],button:"Right"},zoomWheelModifier:"None",windowDrag:{keys:[],button:"Right"},alwaysOnTop:"CTRL+SHIFT+A",opacity:"CTRL+ALT+O",opacityDrag:{keys:["CTRL","ALT"],button:"Right"}}),[Bt,oA]=E.useState({canvasBackgroundColor:"#1f1f1f",canvasBackgroundGradientColor:"#192024",dotPatternColor:"#999999"}),[Mt,Ot]=E.useState(1),[Bo,ei]=E.useState(!1),[le,Gn]=E.useState({x:0,y:0,scale:1,width:0,height:0}),sn=E.useRef(c),aA=E.useRef(le),us=E.useRef(r),Zt=E.useRef(Mt);E.useEffect(()=>{sn.current=c},[c]),E.useEffect(()=>{Zt.current=Mt},[Mt]),E.useEffect(()=>{aA.current=le},[le]),E.useEffect(()=>{us.current=r},[r]),E.useEffect(()=>{var B;(B=window.electronAPI)!=null&&B.setOpacity&&window.electronAPI.setOpacity(Mt)},[Mt]);const{groups:De,createGroup:on,updateGroup:jA,updateGroupName:lA,deleteGroup:ds,addItemToGroup:ti,removeItemFromGroup:an,getItemGroup:mr,setGroups:Kt}=L4(r),fs=E.useRef(De);E.useEffect(()=>{fs.current=De},[De]);const{arrows:G,createArrow:fe,updateArrow:Ce,deleteArrow:Me,deleteArrowsForItem:H,setArrows:ee}=R4(r);E.useEffect(()=>{r&&r!=="new"&&J.length>0&&ma(r,"connections",J)},[J,r]);const ie=P4(),[pe,we]=E.useState([]),[Ne,Ee]=E.useState({visible:!1,x:0,y:0}),[Be,_e]=E.useState(null),[Ze,Le]=E.useState(!1),[cA,uA]=E.useState(!1),[wr,Wn]=E.useState(null),[yt,Oe]=E.useState(!1),[hs,ps]=E.useState(!1),yo=E.useRef({}),[Ai,Md]=E.useState([]),[zn,vo]=E.useState(-1),Co=E.useRef(!1),xo=E.useRef(null),[YF,wl]=E.useState(new Set),[hO,Aw]=E.useState(!1),[nw,rw]=E.useState(new Set),yA=E.useCallback(()=>{if(Co.current)return;const B={items:JSON.parse(JSON.stringify(c)),groups:JSON.parse(JSON.stringify(De)),arrows:JSON.parse(JSON.stringify(G)),paths:JSON.parse(JSON.stringify(L)),bookmarks:JSON.parse(JSON.stringify(F))};Md(y=>{const x=y.slice(0,zn+1);return x.push(B),x.length>50&&x.shift(),x}),vo(y=>{const x=y+1;return Math.min(x,49)})},[c,De,G,L,zn]),JF=E.useCallback(()=>{if(zn<0||Ai.length===0)return;Co.current=!0;const B=Ai[zn];B&&(d(B.items),Kt(B.groups),ee(B.arrows),R(B.paths),U(B.bookmarks||[]),vo(y=>y-1)),setTimeout(()=>{Co.current=!1},0)},[Ai,zn]),ZF=E.useCallback(()=>{if(zn>=Ai.length-1)return;Co.current=!0;const B=Ai[zn+1];B&&(d(B.items),Kt(B.groups),ee(B.arrows),R(B.paths),U(B.bookmarks||[]),vo(y=>y+1)),setTimeout(()=>{Co.current=!1},0)},[Ai,zn]);E.useEffect(()=>{const B=zm();B&&(e({uid:B.uid,email:B.email,displayName:B.displayName,photoURL:B.photoURL}),n(!1));const y=K_(x=>{e(x),n(!1)});return()=>y()},[]),E.useEffect(()=>{if(!t)return;const B=G_(x=>{x?console.log("Firebase token updated automatically"):console.warn("Firebase token became null")}),y=setInterval(async()=>{await Ep()||console.warn("Failed to refresh auth token");try{const{refreshDriveAccessToken:S}=await Nn(async()=>{const{refreshDriveAccessToken:b}=await Promise.resolve().then(()=>au);return{refreshDriveAccessToken:b}},void 0);await S("145147670860-l0bu8h9lvmf1gjqd09q66g4jbb4i69q2.apps.googleusercontent.com",!1)}catch(S){console.error("Failed to refresh Drive token:",S)}},30*60*1e3);return Ep(),()=>{B(),clearInterval(y)}},[t]),E.useEffect(()=>{const B=async()=>{console.log("Google Auth error detected, attempting to recover session...");try{const{refreshDriveAccessToken:y}=await Nn(async()=>{const{refreshDriveAccessToken:I}=await Promise.resolve().then(()=>au);return{refreshDriveAccessToken:I}},void 0);await y("145147670860-l0bu8h9lvmf1gjqd09q66g4jbb4i69q2.apps.googleusercontent.com",!0)?console.log("Session successfully recovered via interactive refresh"):console.warn("Session recovery failed or cancelled by user")}catch(y){console.error("Failed to recover session:",y)}};return window.addEventListener("google_auth_error",B),()=>window.removeEventListener("google_auth_error",B)},[]);const Bl=E.useCallback(async(B=!0)=>{if(!(!t||r===null)){if(c.length===0&&De.length===0&&G.length===0&&L.length===0&&J.length===0){console.log("Skipping save: board is empty");return}Aw(!0);try{const y=await Promise.all(c.map(async P=>{var M;if(P.type==="ad")return P;if("src"in P&&(P.type==="image"||P.type==="video")){const k=P;if((M=k.fileName)!=null&&M.toLowerCase().endsWith(".psd")||k.originalFilePath){if(k.driveFileId)return{...k,src:void 0};if(typeof k.src=="string")try{let K;if(k.src.startsWith("blob:")){const ne=await(await fetch(k.src)).blob();K=await new Promise(Fe=>{const He=new FileReader;He.onloadend=()=>Fe(He.result),He.readAsDataURL(ne)})}else if(k.src.startsWith("data:"))K=k.src;else return P;const V=(k.fileName||`psd-${k.id}.png`).replace(/\.psd$/i,".png"),X=await Ir(K,V,!0,r||void 0);return console.log("PSD PNG uploaded/updated to Drive:",X,V),{...k,driveFileId:X,src:void 0}}catch(K){return console.error("Failed to upload PSD PNG to Drive:",K),P}return P}if(k.driveFileId)return{...k,src:void 0};if(P.type==="video"&&typeof k.src=="string"&&k.src.startsWith("blob:"))try{const V=await(await fetch(k.src)).blob(),X=new File([V],k.fileName||`video-${k.id}.mp4`,{type:V.type}),ye=k.fileName||`video-${k.id}.mp4`,ne=await qh(X,ye,!1,!0,r||void 0);return console.log("Video uploaded to Drive during save:",ne),{...k,driveFileId:ne,src:void 0}}catch(K){return console.error("Failed to upload video to Drive:",K),P}if(P.type==="image"&&typeof k.src=="string")try{let K;if(k.src.startsWith("blob:")){const ne=await(await fetch(k.src)).blob();K=await new Promise(Fe=>{const He=new FileReader;He.onloadend=()=>Fe(He.result),He.readAsDataURL(ne)})}else if(k.src.startsWith("data:"))K=k.src;else return P;const V=k.fileName||`image-${k.id}.png`,X=await Vo(K,V,r||void 0);return console.log("Image uploaded to Drive during save:",X),{...k,driveFileId:X,src:void 0}}catch(K){if(console.error("Failed to upload image to Drive:",K),k.src.startsWith("blob:"))try{const X=await(await fetch(k.src)).blob(),ye=await new Promise(ne=>{const Fe=new FileReader;Fe.onloadend=()=>ne(Fe.result),Fe.readAsDataURL(X)});return{...k,src:ye}}catch(V){return console.error("Failed to convert blob to base64:",V),P}return P}}return P})),x={version:"2.0",boardId:r,items:y,groups:De,arrows:G,paths:L,connections:J,bookmarks:F};let S;if(B)try{S=(await cO(document.body,{useCORS:!0,allowTaint:!0,scale:.2,backgroundColor:"#111827",ignoreElements:M=>!1})).toDataURL("image/jpeg",.6)}catch(P){console.error("Failed to generate thumbnail:",P)}const b=await Zh(x,i,(r&&r!=="new"?r:a)||void 0,S);(!a||a!==b)&&(l(b),r==="new"&&s(b)),console.log("Board saved:",b,S?"(with thumbnail)":"(no thumbnail)")}catch(y){console.error("Failed to save:",y),alert(" : "+(y instanceof Error?y.message:String(y)))}finally{Aw(!1)}}},[c,De,G,L,J,t,r,i,a]);E.useEffect(()=>{if(!r||r==="new"||!t)return;try{const y=`backup_${r}`,x={timestamp:Date.now(),items:c,groups:De,arrows:G,paths:L,connections:J};localStorage.setItem(y,JSON.stringify(x)),localStorage.setItem("last_active_board_id",r)}catch(y){console.error("Failed to save local backup:",y)}const B=setTimeout(()=>{console.log("Auto-saving board..."),Bl(!1)},1e3);return()=>clearTimeout(B)},[c,De,G,L,J,r,t,Bl]),E.useEffect(()=>{const B=y=>{(y.ctrlKey||y.metaKey)&&y.key==="s"&&(y.preventDefault(),console.log("Manual save triggered (Ctrl+S)"),Bl(!1))};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[Bl]),E.useEffect(()=>{const B=async y=>{if(Z)return;const x=y.target;if(!(x&&(x.isContentEditable||x.tagName==="INPUT"||x.tagName==="TEXTAREA"))){if(Ie.alwaysOnTop&&gc(y,Ie.alwaysOnTop)&&(y.preventDefault(),window.electronAPI)){const S=await window.electronAPI.toggleAlwaysOnTop();ei(S)}if(Ie.opacity&&gc(y,Ie.opacity)){y.preventDefault();const I=Zt.current>=.9?.5:1;Ot(I)}}};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[Ie,Z]),E.useEffect(()=>{var B;return(B=window.electronAPI)!=null&&B.onPSDFileChanged&&window.electronAPI.onPSDFileChanged(async y=>{var b,P;console.log("PSD file changed event received:",y.path);const x=M=>M.replace(/\\/g,"/").toLowerCase(),S=x(y.path),I=c.find(M=>{const k=M.originalFilePath;return k?x(k)===S:!1});if(I&&((b=I.fileName)!=null&&b.toLowerCase().endsWith(".psd"))){console.log("Found matching PSD item:",I.fileName,"Updating...");try{if(await new Promise(M=>setTimeout(M,500)),(P=window.electronAPI)!=null&&P.readPSDFile){const M=await window.electronAPI.readPSDFile(y.path);if(M.success&&M.data){const k=new File([M.data],I.fileName||"image.psd",{type:"application/octet-stream"}),{convertPSDToImage:K}=await Nn(async()=>{const{convertPSDToImage:X}=await import("./psdParser-DX-W7wsa.js");return{convertPSDToImage:X}},[]),V=await K(k);if(V){let X=I.driveFileId;try{const ye=(I.fileName||`psd-${I.id}.png`).replace(/\.psd$/i,".png");X=await Ir(V,ye,!0,r||void 0),console.log("PSD PNG updated in Drive:",X,ye)}catch(ye){console.error("Failed to update PSD PNG in Drive:",ye)}d(ye=>ye.map(ne=>{if(ne.id===I.id){const Fe={...ne,src:V,driveFileId:X};return r&&r!=="new"&&zA(r,I.id,{src:V,driveFileId:X}),Fe}return ne})),console.log("PSD file updated successfully:",I.fileName)}else console.warn("Failed to convert PSD to image")}else console.error("Failed to read PSD file:",M.error)}}catch(M){console.error("Failed to update PSD file:",M)}}else console.warn("No matching PSD item found for path:",y.path)}),()=>{var y;(y=window.electronAPI)!=null&&y.removePSDFileChangedListener&&window.electronAPI.removePSDFileChangedListener()}},[c,r]),E.useEffect(()=>{d(B=>{if(B.some(x=>x.id==="ad-banner"))return B;const y={id:"ad-banner",type:"ad",src:"",x:100,y:100,width:728,height:90,zIndex:1e3,rotation:0,flipHorizontal:!1,flipVertical:!1};return[...B,y]})},[]),E.useEffect(()=>{async function B(){var y;if(r&&r!=="new"){if(r===a)return;try{const x=await Cx(r);if(x.items){const S=await Promise.all(x.items.map(async b=>{const P={...b};if(P.src&&typeof P.src=="string"&&P.src.startsWith("blob:")&&(P.src=void 0),P.type==="image"&&P.driveFileId)try{const M=await Oa(P.driveFileId);return{...P,src:M}}catch(M){return console.error("Failed to load media from Drive:",{itemId:P.id,error:M instanceof Error?M.message:String(M)}),P}return P}));if(!S.find(b=>b.id==="ad-banner")){const b=(y=x.items)==null?void 0:y.find(P=>P.id==="ad-banner");b?S.push(b):S.push({id:"ad-banner",type:"ad",src:"",x:100,y:100,width:728,height:90,zIndex:1e3,rotation:0,flipHorizontal:!1,flipVertical:!1})}d(S),S.forEach(async b=>{var P,M;if(b.type==="image"&&((P=b.fileName)!=null&&P.toLowerCase().endsWith(".psd"))&&b.originalFilePath&&(M=window.electronAPI)!=null&&M.watchPSDFile)try{await window.electronAPI.watchPSDFile(b.originalFilePath),console.log("Started watching PSD file:",b.originalFilePath)}catch{console.log("PSD file not found on this computer (expected on different computers):",b.originalFilePath)}})}if(x.groups){const S=x.groups.map(I=>({...I,childIds:Array.isArray(I.childIds)?I.childIds:[]}));Kt(S)}x.arrows&&ee(x.arrows),x.paths&&R(x.paths),x.connections?(console.log("Loading connections from board:",x.connections),Ae(Array.isArray(x.connections)?x.connections:Object.values(x.connections))):console.log("No connections found in board data"),Md([]),vo(-1),x.name&&o(x.name),l(r),console.log("Board loaded:",x),console.log("Connections in board data:",x.connections);try{const S=`backup_${r}`,I=localStorage.getItem(S);if(I){const b=JSON.parse(I);b.items&&Array.isArray(b.items)&&(console.log("Found local backup, restoring to ensure latest state..."),d(b.items),b.groups&&Kt(b.groups),b.arrows&&ee(b.arrows),b.paths&&R(b.paths),b.connections&&Ae(b.connections))}}catch(S){console.error("Failed to restore from backup:",S)}}catch(x){console.error("Failed to load board:",x)}}else if(r==="new"){d([]),Kt([]),ee([]),R([]),l(null);try{const S=await Zh({version:"2.0",boardId:"new",items:[],groups:[],arrows:[],paths:[]},i,void 0);l(S),s(S),console.log("Empty board created and saved:",S)}catch(x){console.error("Failed to create empty board:",x)}}}B()},[r]),E.useEffect(()=>{if(!t||!r||r==="new")return;const B=b4(r,ve),y=H4(r,S=>{d(I=>{const b=new Map(I.map(k=>[k.id,k])),P=new Map(S.map(k=>[k.id,k])),M=S.map(k=>{const K=b.get(k.id);return K&&"src"in K&&K.src&&!k.src?{...k,src:K.src}:k.src&&typeof k.src=="string"&&k.src.startsWith("blob:")?{...k,src:void 0}:k});return I.forEach(k=>{k.type==="ad"&&!P.has(k.id)&&M.push(k)}),M})},S=>{const I=S.map(b=>({...b,childIds:Array.isArray(b.childIds)?b.childIds:[]}));Kt(I)},S=>ee(S),S=>R(S),S=>{S&&S.length>0&&Ae(S)});S4(r,t.uid,t.displayName||"Unknown",t.email||"");const x=S=>{$0(r,t.uid,t.displayName||"Unknown",t.email||"",S.clientX,S.clientY)};return window.addEventListener("mousemove",x),()=>{B(),y(),T4(r),window.removeEventListener("mousemove",x)}},[t,r]);const qt=E.useCallback(()=>{Ee({visible:!1,x:0,y:0})},[]),Fn=async B=>{if(B.startsWith("data:"))return B;try{const x=await(await fetch(B)).blob();return new Promise((S,I)=>{const b=new FileReader;b.onloadend=()=>S(b.result),b.onerror=I,b.readAsDataURL(x)})}catch(y){return console.error("Failed to convert media to base64:",y),B}},sw=B=>{if(B.startsWith("blob:"))return B;if(B.startsWith("data:"))try{const y=B.match(/^data:([^;]+);base64,(.+)$/);if(y){const x=y[1],S=y[2],I=atob(S),b=new Array(I.length);for(let k=0;k<I.length;k++)b[k]=I.charCodeAt(k);const P=new Uint8Array(b),M=new Blob([P],{type:x});return URL.createObjectURL(M)}}catch(y){console.error("Failed to convert base64 to blob URL:",y)}return B},iw=E.useCallback(async()=>{var x;const y={version:"1.0",items:await Promise.all(c.map(async S=>{if(S.type==="image"||S.type==="video"){const I=await Fn(S.src);return{...S,src:I}}return S})),groups:De,arrows:G,paths:L,settings:Ie,penSettings:Q};if((x=window.electronAPI)!=null&&x.saveFile){const S=await window.electronAPI.saveFile(y);S.success?(console.log("Board saved to:",S.path),r&&r!=="new"&&k4(r,y)):S.canceled||console.error("Save failed:",S.error)}qt()},[c,De,G,L,J,Ie,Q,qt,r]),ow=E.useCallback(async()=>{var x;const y={version:"1.0",items:await Promise.all(c.map(async S=>{if(S.type==="image"||S.type==="video"){const I=await Fn(S.src);return{...S,src:I}}return S})),groups:De,arrows:G,paths:L,settings:Ie,penSettings:Q};if((x=window.electronAPI)!=null&&x.saveFileAs){const S=await window.electronAPI.saveFileAs(y);S.success?console.log("Board saved to:",S.path):S.canceled||console.error("Save as failed:",S.error)}qt()},[c,De,G,L,J,Ie,Q,qt]),aw=E.useCallback(async()=>{var B;if((B=window.electronAPI)!=null&&B.openFile){const y=await window.electronAPI.openFile();if(y.success&&y.data){const x=y.data;if(x.items){const S=x.items.map(I=>(I.type==="image"||I.type==="video")&&I.src.startsWith("data:")?{...I,src:sw(I.src)}:I);d(S)}x.groups&&Kt(x.groups),x.arrows&&ee(x.arrows),x.paths&&R(x.paths),x.settings&&NA(x.settings),x.penSettings&&g(x.penSettings),h([]),we([]),console.log("Board loaded from:",y.path)}else y.canceled||console.error("Load failed:",y.error)}qt()},[Kt,ee,qt]),lw=E.useCallback(async B=>{try{const y=await B.text(),x=JSON.parse(y);if(x.items){const S=x.items.map(I=>(I.type==="image"||I.type==="video")&&I.src.startsWith("data:")?{...I,src:sw(I.src)}:I);d(S)}x.groups&&Kt(x.groups),x.arrows&&ee(x.arrows),x.paths&&R(x.paths),x.connections&&Ae(x.connections),x.bookmarks&&U(x.bookmarks),x.settings&&NA(x.settings),x.penSettings&&g(x.penSettings),h([]),we([]),console.log("Board loaded from file:",B.name)}catch(y){console.error("Failed to load board file:",y)}},[Kt,ee]),Eo=E.useCallback(async B=>{var I,b,P;B&&(B.preventDefault(),B.stopPropagation());const y=async(M,k=`pasted-image-${Date.now()}.png`)=>{var vt;const K=new File([M],k,{type:M.type});let V=URL.createObjectURL(K);const X=(vt=document.querySelector(".canvas-content"))==null?void 0:vt.getBoundingClientRect(),ye=X?X.width/2-150:100,ne=X?X.height/2-100:100;let Fe;if(t)try{const ot=await Fn(V);Fe=await Vo(ot,K.name,r||void 0),console.log("Pasted image uploaded to Drive:",Fe),V=ot}catch(ot){console.error("Failed to upload pasted image to Drive:",ot),V=await Fn(V)}else V=await Fn(V);const He={id:`image-${Date.now()}`,type:"image",src:V,x:ye,y:ne,width:300,height:200,zIndex:c.length+1,fileName:K.name,driveFileId:Fe,rotation:0,flipHorizontal:!1,flipVertical:!1};yA(),d(ot=>[...ot,He]),h([He.id]),r&&r!=="new"&&zA(r,He.id,He),console.log("Pasted image from clipboard"),qt()},x=async(M,k,K)=>{var vt;const V=(vt=document.querySelector(".canvas-content"))==null?void 0:vt.getBoundingClientRect(),X=V?V.width/2-150:100,ye=V?V.height/2-100:100;let ne,Fe=M;if(t)try{ne=await Vo(M,`pasted-image-${Date.now()}.png`,r||void 0),console.log("Pasted image uploaded to Drive:",ne)}catch(ot){console.error("Failed to upload pasted image to Drive:",ot)}const He={id:`image-${Date.now()}`,type:"image",src:Fe,x:X,y:ye,width:k,height:K,zIndex:c.length+1,fileName:`pasted-image-${Date.now()}.png`,driveFileId:ne,rotation:0,flipHorizontal:!1,flipVertical:!1};yA(),d(ot=>[...ot,He]),h([He.id]),r&&r!=="new"&&zA(r,He.id,He),console.log("Pasted image from Electron clipboard"),qt()};if(v.length>0){const M=await Promise.all(v.map(async(k,K)=>{const V={...k,id:`${k.type}-${Date.now()}-${K}`,x:k.x+20,y:k.y+20,zIndex:c.length+K+1};if(V.type==="image"){const X=V;if(X.originalFilePath&&X.originalFilePath.length>0&&X.src&&typeof X.src=="string")try{let ne;if(X.src.startsWith("blob:")){const ot=await(await fetch(X.src)).blob();ne=await new Promise(Ct=>{const ue=new FileReader;ue.onloadend=()=>Ct(ue.result),ue.readAsDataURL(ot)})}else if(X.src.startsWith("data:"))ne=X.src;else return V;const Fe=(X.fileName||`psd-${X.id}.png`).replace(/\.psd$/i,".png"),He=await Ir(ne,Fe,!1,r||void 0);return console.log("Pasted PSD PNG uploaded to Drive:",He,Fe),{...X,driveFileId:He,src:ne,originalFilePath:void 0}}catch(ne){return console.error("Failed to upload pasted PSD PNG to Drive:",ne),V}else return{...X,originalFilePath:void 0}}return V}));yA(),d(k=>[...k,...M]),h(M.map(k=>k.id)),M.forEach(k=>{delete In.current[k.id]}),r&&r!=="new"&&kf(r,M),console.log("Pasted",M.length,"items from internal clipboard"),_([]),qt();return}if((I=window.electronAPI)!=null&&I.readClipboardImage)try{console.log("Attempting to read image from Electron clipboard API...");const M=await window.electronAPI.readClipboardImage();if(M.success&&M.data){console.log("Successfully read image from Electron clipboard:",M.width,"x",M.height),await x(M.data,M.width||300,M.height||200);return}}catch(M){console.log("Failed to read image from Electron clipboard API:",M)}if(B!=null&&B.clipboardData){const M=B.clipboardData.items;for(let k=0;k<M.length;k++){const K=M[k];if(K.type.indexOf("image")!==-1){const V=K.getAsFile();if(V){console.log("Found image in clipboard event data:",K.type,V.size),await y(V);return}}}}if(window.navigator.clipboard&&typeof window.navigator.clipboard.read=="function")try{console.log("Attempting to read image from clipboard API...");const M=await navigator.clipboard.read();console.log("Clipboard items:",M.length);for(const k of M){console.log("Clipboard item types:",k.types);for(const K of k.types)if(K.startsWith("image/")){console.log("Found image type in clipboard:",K);const V=await k.getType(K);if(V){console.log("Successfully read image blob:",V.size,"bytes");const X=K.split("/")[1]||"png";await y(V,`pasted-image-${Date.now()}.${X}`);return}}}}catch(M){console.log("Failed to read image from clipboard API:",M)}let S=(b=B==null?void 0:B.clipboardData)==null?void 0:b.getData("text/plain");if(!S&&window.navigator.clipboard)try{S=await navigator.clipboard.readText()}catch(M){console.warn("Failed to read text from clipboard:",M)}if(S&&S.trim().length>0){const M=(P=document.querySelector(".canvas-content"))==null?void 0:P.getBoundingClientRect(),k=M?M.width/2-100:100,K=M?M.height/2-25:100,X=Math.max(8,Math.min(200,16/le.scale)),ye={id:`text-${Date.now()}`,type:"text",content:S,x:k,y:K,width:200,height:50,fontSize:X,color:"#ffffff",fontFamily:"Inter, sans-serif",zIndex:c.length+1};yA(),d(ne=>[...ne,ye]),h([ye.id]),wl(ne=>new Set(ne).add(ye.id)),r&&r!=="new"&&zA(r,ye.id,ye),console.log("Pasted text from clipboard"),qt();return}qt()},[v,c.length,qt,r,yA,t,Fn,_,d,h,wl,zA,kf]);E.useEffect(()=>{const B=y=>{if(console.log("Key:",y.key,"Ctrl:",y.ctrlKey,"Settings:",Z,"Target:",y.target),Z)return;const x=y.target;if(!(x&&(x.isContentEditable||x.tagName==="INPUT"||x.tagName==="TEXTAREA"))){if((y.ctrlKey||y.metaKey)&&(y.key==="s"||y.key==="S")&&!y.shiftKey){y.preventDefault(),y.stopPropagation(),iw();return}if((y.ctrlKey||y.metaKey)&&y.shiftKey&&(y.key==="s"||y.key==="S")){y.preventDefault(),y.stopPropagation(),ow();return}if((y.ctrlKey||y.metaKey)&&(y.key==="o"||y.key==="O")){y.preventDefault(),y.stopPropagation(),aw();return}if((y.ctrlKey||y.metaKey)&&(y.key==="c"||y.key==="C")){if(y.preventDefault(),y.stopPropagation(),f.length>0){const S=c.filter(b=>f.includes(b.id));_(S),console.log("Copied",S.length,"items");const I=S[S.length-1];console.log("[SystemClipboard] Primary Item:",I?{id:I.id,type:I.type,hasSrc:"src"in I,srcType:typeof I.src,driveFileId:I.driveFileId}:"None"),I&&I.type==="image"&&(async()=>{try{console.log("[SystemClipboard] Starting copy for item:",I.id);let b=null;const P=I.src,M=I.driveFileId;if(P&&typeof P=="string")if(console.log("[SystemClipboard] Source type:",P.startsWith("blob:")?"blob":P.startsWith("data:")?"data":"url"),P.startsWith("blob:"))b=await(await fetch(P)).blob();else if(P.startsWith("data:")){const k=P.match(/^data:([^;]+);base64,(.+)$/);if(k){const K=k[1],V=k[2],X=atob(V),ye=new Array(X.length);for(let Fe=0;Fe<X.length;Fe++)ye[Fe]=X.charCodeAt(Fe);const ne=new Uint8Array(ye);b=new Blob([ne],{type:K})}else throw new Error("Invalid data URL")}else b=await(await fetch(P)).blob();else if(M){console.log("[SystemClipboard] No src, trying to load from Drive ID:",M);try{const k=await Oa(M);if(k)if(console.log("[SystemClipboard] Loaded from Drive:",k.substring(0,100)+"..."),k.startsWith("blob:"))b=await(await fetch(k)).blob(),console.log("[SystemClipboard] Blob created from Drive Blob URL:",b.type,b.size);else if(k.startsWith("data:")){const K=k.match(/^data:([^;]+);base64,(.+)$/);if(K){const V=K[1],X=K[2],ye=atob(X),ne=new Array(ye.length);for(let He=0;He<ye.length;He++)ne[He]=ye.charCodeAt(He);const Fe=new Uint8Array(ne);b=new Blob([Fe],{type:V}),console.log("[SystemClipboard] Blob created from Drive Base64:",b.type,b.size)}else console.error("[SystemClipboard] Invalid Drive data URL format")}else console.log("[SystemClipboard] Assuming standard URL, fetching..."),b=await(await fetch(k)).blob(),console.log("[SystemClipboard] Blob created from Drive URL:",b.type,b.size);else console.warn("[SystemClipboard] Drive load returned empty URL"),alert("Failed to download image from Drive. Please check your internet connection.")}catch(k){console.error("[SystemClipboard] Drive load failed:",k),alert("Failed to load image from Drive: "+(k instanceof Error?k.message:String(k)))}}if(b){if(console.log("[SystemClipboard] Blob created:",b.type,b.size),b.type!=="image/png"){console.log("[SystemClipboard] Converting to PNG...");const k=await createImageBitmap(b),K=document.createElement("canvas");K.width=k.width,K.height=k.height;const V=K.getContext("2d");V&&(V.drawImage(k,0,0),b=await new Promise(X=>K.toBlob(ye=>X(ye),"image/png")),b&&console.log("[SystemClipboard] Converted to PNG:",b.type,b.size))}b&&(console.log("[SystemClipboard] Writing to clipboard..."),await navigator.clipboard.write([new ClipboardItem({[b.type]:b})]),console.log("[SystemClipboard] Success!"))}}catch(b){console.error("[SystemClipboard] Failed:",b),alert("System Copy Failed: "+(b instanceof Error?b.message:String(b)))}})()}return}if((y.ctrlKey||y.metaKey)&&(y.key==="v"||y.key==="V")){y.preventDefault(),y.stopPropagation(),Eo();return}if((y.ctrlKey||y.metaKey)&&(y.key==="z"||y.key==="Z")&&!y.shiftKey){y.preventDefault(),y.stopPropagation(),JF();return}if((y.ctrlKey||y.metaKey)&&(y.key==="y"||y.key==="Y"||y.shiftKey&&(y.key==="z"||y.key==="Z"))){y.preventDefault(),y.stopPropagation(),ZF();return}if((y.ctrlKey||y.metaKey)&&(y.key==="g"||y.key==="G")){if(y.preventDefault(),y.stopPropagation(),f.length>=2){const S=c.filter(I=>f.includes(I.id));S.length>=2&&(on(f,S),h([]))}return}if(y.key==="Delete"||y.key==="Backspace"){const S=c.filter(b=>f.includes(b.id)&&b.type!=="ad"),I=S.map(b=>b.id);I.length>0?(y.preventDefault(),y.stopPropagation(),yA(),S.forEach(b=>{if(b.type==="image"&&"driveFileId"in b&&b.driveFileId){const P=b.driveFileId,M=c.filter(k=>k.id!==b.id&&!I.includes(k.id)&&k.type==="image"&&"driveFileId"in k&&k.driveFileId===P);M.length===0?_x(P).catch(k=>{console.error("Failed to delete image from Drive:",k)}):console.log(`Skipping Drive deletion for ${P}: ${M.length} other items are using this file`)}}),d(b=>b.filter(P=>!I.includes(P.id))),I.forEach(b=>{b.startsWith("group-")&&ds(b),H(b),r&&r!=="new"&&D4(r,b)}),h([])):pe.length>0&&(y.preventDefault(),y.stopPropagation(),yA(),pe.forEach(b=>Me(b)),we([]));return}if(m==="pen"||m==="eraser"){const S=Ie.brushSizeDecrease?gc(y,Ie.brushSizeDecrease):y.key==="[",I=Ie.brushSizeIncrease?gc(y,Ie.brushSizeIncrease):y.key==="]";if(S){y.preventDefault(),y.stopPropagation(),g(m==="pen"?b=>({...b,size:Math.max(1,b.size-1)}):b=>({...b,eraserSize:Math.max(1,b.eraserSize-1)}));return}if(I){y.preventDefault(),y.stopPropagation(),g(m==="pen"?b=>({...b,size:Math.min(50,b.size+1)}):b=>({...b,eraserSize:Math.min(50,b.eraserSize+1)}));return}}!y.ctrlKey&&!y.metaKey&&(y.key.toLowerCase()==="v"&&C("select"),y.key.toLowerCase()==="t"&&C("text"),y.key.toLowerCase()==="a"&&C("arrow"),y.key.toLowerCase()==="p"&&C("pen"),y.key.toLowerCase()==="e"&&C("eraser"))}};return document.addEventListener("keydown",B,!0),window.addEventListener("keydown",B,!0),()=>{document.removeEventListener("keydown",B,!0),window.removeEventListener("keydown",B,!0)}},[f,c,on,ds,H,Z,v,iw,ow,aw,Eo,m,Ie]),E.useEffect(()=>{const B=y=>{const x=y.target;x&&(x.isContentEditable||x.tagName==="INPUT"||x.tagName==="TEXTAREA")||Z||Eo(y)};return document.addEventListener("paste",B),()=>{document.removeEventListener("paste",B)}},[Eo,Z]);const qF=E.useCallback(B=>{B.preventDefault(),B.stopPropagation();const x=Array.from(B.dataTransfer.files).filter(V=>{const X=V.name.toLowerCase();return V.type.startsWith("image/")||V.type.startsWith("video/")||X.endsWith(".psd")}),S=x.filter(V=>V.name.endsWith(".refboard")||V.type==="application/json");if(S.length>0){lw(S[0]);return}if(x.length===0)return;const I=Math.ceil(Math.sqrt(x.length)),b=400,P=20;let M,k;B.canvasX!==void 0&&B.canvasY!==void 0?(M=B.canvasX,k=B.canvasY):(M=B.clientX,k=B.clientY),(async()=>{const V=await Promise.all(x.map(async ne=>{const He=ne.name.toLowerCase().endsWith(".psd"),vt=ne.type.startsWith("image/")||He,ot=ne.type.startsWith("video/");let Ct=URL.createObjectURL(ne),ue=b,ze=b*.75;if(vt&&!He)try{const he=new Image;await new Promise(($e,Re)=>{he.onload=()=>$e(null),he.onerror=Re,he.src=Ct});const Ke=he.naturalWidth/he.naturalHeight;he.naturalWidth>b?(ue=b,ze=b/Ke):(ue=he.naturalWidth,ze=he.naturalHeight)}catch(he){console.error("Failed to load image dimensions:",he)}else if(ot)try{const he=document.createElement("video");await new Promise(($e,Re)=>{he.onloadedmetadata=()=>$e(null),he.onerror=Re,he.src=Ct});const Ke=he.videoWidth/he.videoHeight;he.videoWidth>b?(ue=b,ze=b/Ke):(ue=he.videoWidth,ze=he.videoHeight)}catch(he){console.error("Failed to load video dimensions:",he)}return{width:ue,height:ze}})),X=[];for(let ne=0;ne<x.length;ne++){const Fe=Math.floor(ne/I);X[Fe]||(X[Fe]=0),X[Fe]=Math.max(X[Fe],V[ne].height)}const ye=await Promise.all(x.map(async(ne,Fe)=>{var GA,ri,ms,WA;const vt=ne.name.toLowerCase().endsWith(".psd"),ot=ne.type.startsWith("image/")||vt;let Ct=URL.createObjectURL(ne),ue=b,ze=b*.75;const he=ne.type.startsWith("video/");if(ot&&!vt)try{const de=new Image;await new Promise((It,Od)=>{de.onload=()=>It(null),de.onerror=Od,de.src=Ct});const jt=de.naturalWidth/de.naturalHeight;de.naturalWidth>b?(ue=b,ze=b/jt):(ue=de.naturalWidth,ze=de.naturalHeight)}catch(de){console.error("Failed to load image dimensions:",de)}else if(he)try{const de=document.createElement("video");await new Promise((It,Od)=>{de.onloadedmetadata=()=>It(null),de.onerror=Od,de.src=Ct});const jt=de.videoWidth/de.videoHeight;de.videoWidth>b?(ue=b,ze=b/jt):(ue=de.videoWidth,ze=de.videoHeight)}catch(de){console.error("Failed to load video dimensions:",de)}let Ke;if((ot||he)&&!vt&&t)try{if(he){if(Ke=await qh(ne,ne.name,!1,!0,r||void 0),!Ke||Ke.trim()==="")throw new Error("Video upload failed: No file ID returned");console.log("Video uploaded to Drive:",Ke,"File:",ne.name)}else{const de=await Fn(Ct);Ke=await Vo(de,ne.name,r||void 0),console.log("Image uploaded to Drive:",Ke)}}catch(de){if(console.error("Failed to upload media to Drive:",de),!he)try{Ct=await Fn(Ct)}catch(jt){console.error("Failed to convert dropped file to base64:",jt)}}else if(!vt&&!he)try{Ct=await Fn(Ct)}catch(de){console.error("Failed to convert dropped file to base64:",de)}let $e;if(vt){let de;if((GA=window.electronAPI)!=null&&GA.getPathForFile)try{de=window.electronAPI.getPathForFile(ne),console.log("Got path via webUtils:",de)}catch(jt){console.warn("Failed to get path via webUtils:",jt)}if(!de&&ne.path&&(de=ne.path,console.log("Got path via file.path:",de)),de&&typeof de=="string")$e=de,console.log("PSD file original path:",de),(ri=window.electronAPI)!=null&&ri.watchPSDFile&&await window.electronAPI.watchPSDFile(de);else if((ms=window.electronAPI)!=null&&ms.savePSDFile)try{const jt=await ne.arrayBuffer(),It=await window.electronAPI.savePSDFile(jt,ne.name);It.success&&It.path?($e=It.path,console.log("PSD file saved to temp:",It.path,"for file:",ne.name),(WA=window.electronAPI)!=null&&WA.watchPSDFile&&await window.electronAPI.watchPSDFile(It.path)):console.error("Failed to save PSD file:",It.error)}catch(jt){console.error("Failed to save PSD file:",jt)}else console.warn("PSD file detected but savePSDFile API not available")}if(vt&&t)try{const{convertPSDToImage:de}=await Nn(async()=>{const{convertPSDToImage:It}=await import("./psdParser-DX-W7wsa.js");return{convertPSDToImage:It}},[]),jt=await de(ne);if(jt){Ct=jt;try{const It=ne.name.replace(/\.psd$/i,".png");Ke=await Ir(jt,It,!0,r||void 0),console.log("PSD converted to PNG and uploaded to Drive:",Ke,It)}catch(It){console.error("Failed to upload PSD PNG to Drive:",It)}}}catch(de){console.error("Failed to convert PSD to image:",de)}const Re=Fe%I,at=Math.floor(Fe/I),Ge=Re*(b+P);let xt=0;for(let de=0;de<at;de++)xt+=X[de]+P;return{id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}-${Fe}`,type:ot?"image":"video",src:Ct,driveFileId:Ke,fileName:ne.name,originalFilePath:$e,x:M+Ge,y:k+xt,width:ue,height:ze,zIndex:c.length+Fe+1,rotation:0,flipHorizontal:!1,flipVertical:!1}}));yA(),d(ne=>[...ne,...ye]),r&&r!=="new"&&kf(r,ye)})()},[c,lw,Fn,r,yA]),eI=B=>{if(!(typeof B.canvasX!="number"||typeof B.canvasY!="number"||isNaN(B.canvasX)||isNaN(B.canvasY))){if(m==="text"){let y,x;if(B.canvasX!==void 0&&B.canvasY!==void 0&&!isNaN(B.canvasX)&&!isNaN(B.canvasY))y=B.canvasX,x=B.canvasY;else{console.warn("Canvas click without transformed coordinates");const P=B.currentTarget.getBoundingClientRect();y=B.clientX-P.left,x=B.clientY-P.top}const I=Math.max(8,Math.min(200,16/le.scale)),b={id:`text-${Date.now()}`,type:"text",content:"",x:y,y:x,width:200,height:50,fontSize:I,color:"#ffffff",fontFamily:"Inter, sans-serif",zIndex:c.length+1};yA(),d(P=>[...P,b]),wl(P=>new Set(P).add(b.id)),r&&r!=="new"&&zA(r,b.id,b),C("select")}else if(m==="select"){const y=B.target;!y.closest("[data-item-id]")&&!y.closest(".group")&&h([])}}},tI=B=>{if(!(isNaN(B.canvasX)||isNaN(B.canvasY))&&(m==="pen"||m==="eraser")){const y={id:Date.now().toString(),points:[{x:B.canvasX,y:B.canvasY,pressure:B.pressure}],color:Q.color,size:m==="pen"?Q.size:Q.eraserSize,isEraser:m==="eraser"};_o.current=y,gs.current&&gs.current.startPath(y)}},AI=B=>{if(!(isNaN(B.canvasX)||isNaN(B.canvasY))&&(r&&r!=="new"&&t&&$0(r,t.uid,t.displayName||"Anonymous",t.email||"anonymous@example.com",B.canvasX,B.canvasY),_o.current)){const y={x:B.canvasX,y:B.canvasY,pressure:B.pressure};_o.current.points.push(y),gs.current&&gs.current.updatePath(y)}},nI=()=>{const B=_o.current;if(B){if(B.isEraser){const y=B.size/2,x=L.filter(S=>!S.points.some(b=>B.points.some(P=>{const M=b.x-P.x,k=b.y-P.y;return Math.sqrt(M*M+k*k)<y+S.size/2})));yA(),R(x),r&&r!=="new"&&ma(r,"paths",x)}else yA(),R(y=>{const x=[...y,B];return r&&r!=="new"&&ma(r,"paths",x),x});_o.current=null,gs.current&&gs.current.endPath()}},Vn=E.useCallback((B,y)=>{d(x=>x.map(S=>{if(S.id===B){const I={...S,...y};return r&&r!=="new"&&(S.type==="ad"?zA(r,B,I):zA(r,B,y)),I}return S}))},[r]);E.useEffect(()=>{if(!r||r==="new")return;const B=2*60*60*1e3,y=()=>{const I=sn.current,b=aA.current,P=I.find(at=>at.id==="ad-banner");if(!P)return;const M=b.width||window.innerWidth,k=728,K=90,V=k/b.scale,X=K/b.scale,ye=M/2,ne=120,Fe=(ye-b.x)/b.scale,He=(ne-b.y)/b.scale,vt=Fe-V/2,ot=He,Ct=P.width||k,ue=(P.x+Ct/2)*b.scale+b.x,ze=P.y*b.scale+b.y,he=Math.abs(ue-ye),Ke=Math.abs(ze-ne),$e=P.height||K,Re=Math.abs(Ct-V)>1||Math.abs($e-X)>1;(he>5||Ke>5||Re)&&d(at=>at.map(Ge=>{if(Ge.id==="ad-banner"){const xt={...Ge,x:vt,y:ot,width:V,height:X};return r&&r!=="new"&&zA(r,"ad-banner",xt),xt}return Ge}))},x=setTimeout(y,500),S=setInterval(y,B);return()=>{clearTimeout(x),clearInterval(S)}},[r]);const rI=E.useCallback(async B=>{var x,S;const y=c.find(I=>I.id===B);if(!y||!((x=y.fileName)!=null&&x.toLowerCase().endsWith(".psd"))||!y.originalFilePath){console.warn("Cannot refresh: not a PSD file or no original path");return}try{if(console.log("Refreshing PSD file:",y.fileName),(S=window.electronAPI)!=null&&S.readPSDFile){const I=await window.electronAPI.readPSDFile(y.originalFilePath);if(I.success&&I.data){const b=new File([I.data],y.fileName||"image.psd",{type:"application/octet-stream"}),{convertPSDToImage:P}=await Nn(async()=>{const{convertPSDToImage:k}=await import("./psdParser-DX-W7wsa.js");return{convertPSDToImage:k}},[]),M=await P(b);if(M){let k=y.driveFileId;try{const K=(y.fileName||`psd-${y.id}.png`).replace(/\.psd$/i,".png");k=await Ir(M,K,!0,r||void 0),console.log("PSD PNG updated in Drive:",k,K)}catch(K){console.error("Failed to update PSD PNG in Drive:",K);return}d(K=>K.map(V=>{if(V.id===B&&V.type!=="text"){const X={...V,src:"",driveFileId:k};return r&&r!=="new"&&zA(r,B,{driveFileId:k}),X}return V})),console.log("PSD file refreshed successfully:",y.fileName)}else console.warn("Failed to convert PSD to image")}else console.error("Failed to read PSD file:",I.error)}}catch(I){console.error("Failed to refresh PSD file:",I)}},[c,r]),[cw,uw]=E.useState(null),sI=E.useCallback(B=>{const y=c.find(x=>x.id===B);!y||y.type!=="image"||(h([B]),uw(B),setTimeout(()=>{uw(null)},100))},[c]),In=E.useRef({}),iI=E.useCallback(B=>{f.forEach(y=>{const x=c.find(S=>S.id===y);x&&(In.current[y]={x:x.x,y:x.y})}),xo.current||(xo.current={items:JSON.parse(JSON.stringify(c)),groups:JSON.parse(JSON.stringify(De)),arrows:JSON.parse(JSON.stringify(G)),paths:JSON.parse(JSON.stringify(L)),bookmarks:JSON.parse(JSON.stringify(F))})},[f,c,De,G,L]),yl=E.useRef(null),vl=E.useRef(null),gs=E.useRef(null),_o=E.useRef(null),dw=E.useCallback((B,y)=>{yl.current&&cancelAnimationFrame(yl.current),yl.current=requestAnimationFrame(()=>{const x=sn.current;if(!x.find(M=>M.id===B))return;let I=In.current[B];if(!I){I={x:y.x,y:y.y},In.current[B]=I,f.forEach(M=>{const k=x.find(K=>K.id===M);k&&!In.current[M]&&(In.current[M]={x:k.x,y:k.y})});return}const b=y.x-I.x,P=y.y-I.y;d(M=>M.map(k=>{if(!k||!k.id)return k;if(f.includes(k.id)){const K=In.current[k.id];if(K){const V=K.x+b,X=K.y+P;return isNaN(V)||isNaN(X)?k:{...k,x:V,y:X}}}return k})),yl.current=null})},[f]),oI=E.useCallback((B,y)=>{vl.current&&cancelAnimationFrame(vl.current),vl.current=requestAnimationFrame(()=>{const x=fs.current,S=sn.current,I=yo.current[B];if(!I){const M=x.find(K=>K.id===B);if(!M||!M.childIds||!Array.isArray(M.childIds)||M.childIds.length===0)return;const k={};S.forEach(K=>{M.childIds.includes(K.id)&&(k[K.id]={x:K.x,y:K.y})}),yo.current[B]={groupX:M.x,groupY:M.y,items:k},Kt(K=>K.map(V=>V.id===B?{...V,x:y.x,y:y.y}:V));return}const b=y.x-I.groupX,P=y.y-I.groupY;Kt(M=>M.map(k=>k.id===B?{...k,x:y.x,y:y.y}:k)),d(M=>M.map(k=>{const K=I.items[k.id];return K?{...k,x:K.x+b,y:K.y+P}:k})),vl.current=null})},[]);E.useEffect(()=>{if(!N)return;const B=x=>{const S=(x.clientX-le.x)/le.scale,I=(x.clientY-le.y)/le.scale;O(b=>b?{...b,toPoint:{x:S,y:I}}:null)},y=()=>{O(null)};return window.addEventListener("mousemove",B),window.addEventListener("mouseup",y),()=>{window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",y)}},[N,le]);const fw=B=>{const y=(Ne.x-le.x)/le.scale,x=(Ne.y-le.y)/le.scale;let S=B==="prompt_node"?320:200,I=B==="prompt_node"?200:400;if(B==="generation_node"){const P="2:3",[k,K]=P.split(":").map(Number);S=Math.round(400/K*k),I=400}const b={id:`node-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,type:B,src:"",x:y,y:x,width:S,height:I,rotation:0,zIndex:c.length+1,flipHorizontal:!1,flipVertical:!1,promptText:"",nodeInputs:{},generationParams:B==="generation_node"?{aspectRatio:"2:3",resolution:"1k",model:"gemini-2.5"}:void 0};d(P=>[...P,b]),r&&r!=="new"&&zA(r,b.id,b),qt()},aI=(B,y,x)=>{if(x.stopPropagation(),x.preventDefault(),x.button!==0)return;console.log("Socket MouseDown:",B,y);const S=(x.clientX-le.x)/le.scale,I=(x.clientY-le.y)/le.scale;O({fromNodeId:B,fromSocketId:y,toPoint:{x:S,y:I}})},lI=(B,y)=>{if(N){if(console.log("Socket MouseUp:",B,y),N.fromNodeId===B){O(null);return}const x={id:`conn-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,fromNodeId:N.fromNodeId,fromSocketId:N.fromSocketId,toNodeId:B,toSocketId:y};Ae(S=>[...S,x]),O(null)}},cI=B=>{Ae(y=>y.filter(x=>x.id!==B)),console.log("Deleted connection:",B)},uI=async B=>{var k,K,V,X,ye,ne,Fe,He,vt,ot,Ct;console.log("Generate requested for node:",B);const y=c.find(ue=>ue.id===B);if(!y||y.type!=="generation_node")return;const x=J.find(ue=>ue.toNodeId===B&&ue.toSocketId==="input_0"),S=J.filter(ue=>ue.toNodeId===B&&ue.toSocketId==="input_1");let I="";const b={};if(x){const ue=c.find(ze=>ze.id===x.fromNodeId);ue&&ue.type==="prompt_node"&&(I=ue.promptText||"")}const P=async(ue,ze)=>{if(ue.type==="image"||ue.type==="generation_node"){const he=document.querySelector(`[data-item-id="${ue.id}"] img`);let Ke=(he==null?void 0:he.src)||ue.src||"",$e=Ke;if(Ke&&!Ke.startsWith("data:"))try{if(he&&he.complete&&he.naturalWidth>0){const Re=document.createElement("canvas");Re.width=he.naturalWidth,Re.height=he.naturalHeight;const at=Re.getContext("2d");if(at)at.drawImage(he,0,0),$e=Re.toDataURL("image/png"),console.log(`Converted image ${ze} to base64 for Gemini (from DOM element)`);else throw new Error("Failed to get canvas context")}else $e=await new Promise((Re,at)=>{const Ge=new Image;Ge.crossOrigin="anonymous",Ge.onload=()=>{try{const xt=document.createElement("canvas");xt.width=Ge.naturalWidth,xt.height=Ge.naturalHeight;const GA=xt.getContext("2d");if(!GA){at(new Error("Failed to get canvas context"));return}GA.drawImage(Ge,0,0);const ri=xt.toDataURL("image/png");Re(ri)}catch(xt){at(xt)}},Ge.onerror=()=>at(new Error("Failed to load image")),Ge.src=Ke}),console.log(`Converted image ${ze} to base64 for Gemini (loaded fresh)`)}catch(Re){console.error(`Failed to convert image ${ze} to base64:`,Re),$e=""}if($e){const Re=S.length>1?`reference_image_${ze}`:"reference_image";b[Re]={id:ue.id,src:$e}}}};for(let ue=0;ue<S.length;ue++){const ze=S[ue],he=c.find(Ke=>Ke.id===ze.fromNodeId);he&&await P(he,ue)}if(!I&&Object.keys(b).length===0){alert("Please connect a Text Node (Input 1) or Image Node (Input 2)!");return}const M={prompt:I,images:b,config:{model:((k=y.generationParams)==null?void 0:k.model)||"gemini-2.5",resolution:((K=y.generationParams)==null?void 0:K.resolution)||"1k",aspectRatio:((V=y.generationParams)==null?void 0:V.aspectRatio)||"1:1"}};rw(ue=>new Set(ue).add(B));try{console.log("Sending to Gemini:",M);const ue=await I4(M);console.log("Gemini Result:",ue);const ze=(ne=(ye=(X=ue.candidates)==null?void 0:X[0])==null?void 0:ye.content)==null?void 0:ne.parts;let he=null;if(ze&&ze.length>0){const Ke=ze.find($e=>{var Re;return(Re=$e.inlineData)==null?void 0:Re.data});if(Ke){const $e=Ke.inlineData.mimeType||"image/png",Re=Ke.inlineData.data;he=`data:${$e};base64,${Re}`}}if(he){const Ke=$e=>new Promise((Re,at)=>{const Ge=new Image;Ge.onload=()=>{Re({width:Ge.naturalWidth,height:Ge.naturalHeight})},Ge.onerror=at,Ge.src=$e});try{const $e=`generation_node_${B}.png`;console.log(`Uploading generated image to Drive: ${$e}`);const Re=await Ke(he),at=Re.width/Re.height;console.log("Generated image dimensions:",Re,"Aspect ratio:",at);const Ge=await Ir(he,$e,!0,r||void 0);console.log("Image uploaded to Drive, file ID:",Ge),d(xt=>xt.map(GA=>{if(GA.id===B&&GA.type==="generation_node"){let WA=Math.max(GA.width,470),de=Math.round(WA/at);de<470&&(de=470,WA=Math.round(de*at));const jt=`${$e}?t=${Date.now()}`,It={...GA,src:"",driveFileId:Ge,fileName:jt,width:WA,height:de};return r&&r!=="new"&&zA(r,B,{src:"",driveFileId:Ge,fileName:$e,width:WA,height:de}),It}return GA}))}catch($e){console.error("Failed to upload image to Drive:",$e);try{const Re=await Ke(he),at=Re.width/Re.height;d(Ge=>Ge.map(xt=>{if(xt.id===B&&xt.type==="generation_node"){let ms=Math.max(xt.width,470),WA=Math.round(ms/at);return WA<470&&(WA=470,ms=Math.round(WA*at)),{...xt,src:he,width:ms,height:WA}}return xt}))}catch{d(at=>at.map(Ge=>Ge.id===B&&Ge.type==="generation_node"?{...Ge,src:he}:Ge))}alert("Image generated but failed to upload to Drive. Using local storage.")}}else{const Ke=(Ct=(ot=(vt=(He=(Fe=ue.candidates)==null?void 0:Fe[0])==null?void 0:He.content)==null?void 0:vt.parts)==null?void 0:ot[0])==null?void 0:Ct.text;Ke?alert(`Gemini Response:

${Ke}`):(alert("Generation Complete but no image was returned. Check console for details."),console.log("Full response:",JSON.stringify(ue,null,2)))}}catch(ue){console.error("Generation Error:",ue),alert(`Generation Failed: ${ue.message}`)}finally{rw(ue=>{const ze=new Set(ue);return ze.delete(B),ze})}},hw=(B,y,x)=>{const S=c.find(b=>b.id===B);if(!S)return;const I=In.current[B];if(I&&f.length>1){const b=y-I.x,P=x-I.y;if(xo.current&&(b!==0||P!==0)){const M=xo.current;Md(k=>{const K=k.slice(0,zn+1);return K.push(M),K.length>50&&K.shift(),K}),vo(k=>Math.min(k+1,49)),xo.current=null}f.forEach(M=>{if(!M)return;if(c.find(K=>K.id===M)){const K=In.current[M];if(K){const V=K.x+b,X=K.y+P;!isNaN(V)&&!isNaN(X)&&isFinite(V)&&isFinite(X)&&Vn(M,{x:V,y:X})}}}),In.current={}}else!isNaN(y)&&!isNaN(x)&&isFinite(y)&&isFinite(x)&&Vn(B,{x:y,y:x});if(S.type==="ad"){const b=mr(B);b&&(an(B),console.log(`Force removed ${B} from group ${b.name}`))}else{const b=De.find(P=>{if(!P.childIds||!Array.isArray(P.childIds))return!1;const M=y+S.width/2,k=x+S.height/2;return M>=P.x&&M<=P.x+P.width&&k>=P.y&&k<=P.y+P.height&&!P.childIds.includes(B)});if(b){const P=mr(B);P&&P.id!==b.id&&(an(B),console.log(`Transferred ${B} from group ${P.name} to ${b.name}`)),ti(b.id,B),console.log(`Added ${B} to group ${b.name}`)}else{const P=mr(B);if(P){const M=y+S.width/2,k=x+S.height/2;(M<P.x||M>P.x+P.width||k<P.y||k>P.y+P.height)&&(an(B),console.log(`Removed ${B} from group ${P.name}`))}}}},dI=E.useCallback(B=>{const y=De.find(S=>S.id===B);if(!y||!y.childIds||!Array.isArray(y.childIds)||y.childIds.length===0)return;const x={};c.forEach(S=>{y.childIds.includes(S.id)&&(x[S.id]={x:S.x,y:S.y})}),yo.current[B]={groupX:y.x,groupY:y.y,items:x}},[De,c]),fI=(B,y)=>{const x=De.find(S=>S.id===B);if(!x||!x.childIds||!Array.isArray(x.childIds)){jA(B,y),delete yo.current[B];return}(y.x!==void 0||y.y!==void 0)&&x.childIds.forEach(S=>{const I=c.find(b=>b.id===S);I&&Vn(S,{x:I.x,y:I.y})}),jA(B,y),delete yo.current[B]},pw=(B,y=!1,x=!1)=>{if(m==="arrow"){p?p!==B&&(yA(),fe(p,B),w(null),C("select")):w(B);return}we([]),h(x?S=>S.includes(B)?S.filter(I=>I!==B):[...S,B]:y?S=>S.includes(B)?S.filter(I=>I!==B):[...S,B]:[B])},hI=B=>{h([]),we([B])},pI=B=>{const y=c.filter(x=>{const S=x.x+x.width,I=x.y+x.height,b=B.x+B.width,P=B.y+B.height;return!(x.x>b||S<B.x||x.y>P||I<B.y)});h(y.map(x=>x.id))},gw=()=>{if(f.length>=2){const B=c.filter(y=>f.includes(y.id));B.length>=2&&(yA(),on(f,B),h([]))}},mw=B=>{const y=c.find(x=>x.id===B);return y?{x:y.x,y:y.y,width:y.width,height:y.height}:null},ni=E.useCallback((B=null,y=0,x=0,S="New Coordinate")=>{var K;let I=S,b=y,P=x;if(B){const V=c.find(X=>X.id===B);if(V)V.type==="image"||V.type==="video"?I=V.fileName||"Item Coordinate":V.type==="text"?I=((K=V.content)==null?void 0:K.substring(0,10))||"Text Coordinate":I="Item Coordinate",b=V.x+V.width/2,P=V.y+V.height/2;else{const X=De.find(ye=>ye.id===B);X&&(I=X.name||"Group Coordinate",b=X.x+X.width/2,P=X.y+X.height/2)}}const M={id:`bookmark-${Date.now()}`,name:I,targetId:B,x:b,y:P,scale:le.scale},k=[...F,M];if(U(k),r&&r!=="new")try{localStorage.setItem(`bookmarks_${r}`,JSON.stringify(k))}catch(V){console.error("Failed to save bookmarks:",V)}},[c,De,le.scale,F,r]),gI=E.useCallback(B=>{const y=F.filter(x=>x.id!==B);if(U(y),r&&r!=="new")try{localStorage.setItem(`bookmarks_${r}`,JSON.stringify(y))}catch(x){console.error("Failed to save bookmarks:",x)}},[F,r]),mI=E.useCallback((B,y)=>{const x=F.map(S=>S.id===B?{...S,name:y}:S);if(U(x),r&&r!=="new")try{localStorage.setItem(`bookmarks_${r}`,JSON.stringify(x))}catch(S){console.error("Failed to save bookmarks:",S)}},[F,r]),wI=E.useCallback(B=>{let y=B.x,x=B.y;if(B.targetId){const S=c.find(I=>I.id===B.targetId);if(S)y=S.x+S.width/2,x=S.y+S.height/2;else{const I=De.find(b=>b.id===B.targetId);I&&(y=I.x+I.width/2,x=I.y+I.height/2)}}console.log("Navigating to:",{bookmark:B,targetX:y,targetY:x}),D({x:y,y:x}),setTimeout(()=>D(null),100)},[c,De,le.scale]),BI=E.useCallback(B=>{if(!r)return;let y=B.x,x=B.y;if(B.targetId){const P=c.find(M=>M.id===B.targetId);if(P)y=P.x+P.width/2,x=P.y+P.height/2;else{const M=De.find(k=>k.id===B.targetId);M&&(y=M.x+M.width/2,x=M.y+M.height/2)}}const S=new URLSearchParams;S.set("boardId",r),S.set("x",y.toString()),S.set("y",x.toString()),S.set("x",y.toString()),S.set("y",x.toString()),S.set("scale",(B.scale||1).toString()),S.set("name",B.name);const I=`https://refboard.github.io/?${S.toString()}`,b=`<a href="${I}">RefBoard: Open Location</a>`;if(navigator.clipboard&&navigator.clipboard.write)try{const P=new Blob([I],{type:"text/plain"}),M=new Blob([b],{type:"text/html"});navigator.clipboard.write([new ClipboardItem({"text/plain":P,"text/html":M})]).then(()=>{q("Link copied to clipboard!")})}catch(P){console.error("Rich copy failed, falling back to text:",P),navigator.clipboard.writeText(I).then(()=>q(`Link copied: ${I}`)).catch(M=>console.error("Copy failed:",M))}else navigator.clipboard.writeText(I).then(()=>q(`Link copied: ${I}`)).catch(P=>console.error("Failed to copy link:",P))},[r,c,De]),yI=E.useCallback(B=>{B.preventDefault(),B.stopPropagation(),Ee({visible:!0,x:B.clientX,y:B.clientY,canvasX:B.canvasX,canvasY:B.canvasY})},[]),ww=ie.has("CTRL");if(A)return u.jsx("div",{className:"w-screen h-screen flex items-center justify-center bg-black text-white",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{children:"Loading..."})]})});if(!t)return u.jsxs(u.Fragment,{children:[u.jsx(Nf,{boardName:"RefBoard"}),u.jsx(wb,{onLogin:()=>{window.location.reload()}})]});if(r===null)return u.jsxs(u.Fragment,{children:[u.jsx(Nf,{boardName:"RefBoard"}),u.jsx(C4,{onBoardSelect:async(B,y,x)=>{if(s(B),y){if(o(y),B&&B!=="new")try{await il(B),console.log(`Pre-created images folder for board: ${B}`)}catch(S){console.warn("Failed to pre-create images folder:",S)}}else B==="new"&&o(" ");x&&j(x)}})]});const vI=Mt>=1;return u.jsxs("div",{className:`w-screen h-screen overflow-hidden ${vI?"bg-black":"bg-transparent"} text-white`,children:[u.jsx(Nf,{boardName:i}),u.jsx(fb,{onBackToList:()=>{s(null)},onShare:r&&r!=="new"?()=>xe(!0):void 0,boardName:i,opacity:Mt,onOpacityChange:B=>{var y;Ot(B),(y=window.electronAPI)==null||y.setOpacity(B)},isAlwaysOnTop:Bo,onToggleAlwaysOnTop:async()=>{if(window.electronAPI){const B=await window.electronAPI.toggleAlwaysOnTop();ei(B)}}}),u.jsx(hb,{activeTool:m,onToolChange:C,onSettingsClick:()=>oe(!0)}),(m==="pen"||m==="eraser")&&u.jsx(gb,{color:Q.color,size:m==="pen"?Q.size:Q.eraserSize,isEraser:m==="eraser",onColorChange:B=>g(y=>({...y,color:B})),onSizeChange:B=>g(y=>m==="pen"?{...y,size:B}:{...y,eraserSize:B})}),Be&&(()=>{var S;const B=De.find(I=>I.id===Be);if(!B)return null;const y=[10,12,14,16,18,20,24,28,32],x=[{name:"Inter",value:"Inter, sans-serif"},{name:"Arial",value:"Arial, sans-serif"},{name:"Times New Roman",value:"Times New Roman, serif"},{name:"Courier New",value:"Courier New, monospace"},{name:"Georgia",value:"Georgia, serif"},{name:"Verdana",value:"Verdana, sans-serif"}];return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>{_e(null),Le(!1),uA(!1)}}),u.jsxs("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-gray-700 border border-gray-600 rounded-lg shadow-xl py-3 px-4 z-[10000] flex items-center gap-3",style:{position:"fixed",top:"1rem",left:"50%",transform:"translateX(-50%)"},onClick:I=>I.stopPropagation(),children:[u.jsxs("div",{className:"relative flex items-center gap-1",children:[u.jsx("input",{type:"number",value:B.fontSize||12,onChange:I=>{const b=parseInt(I.target.value);!isNaN(b)&&b>0&&b<=200&&jA(B.id,{fontSize:b})},onFocus:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onMouseDown:I=>I.stopPropagation(),onKeyDown:I=>I.stopPropagation(),className:"w-16 px-2 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500 outline-none border border-gray-500 focus:border-gray-400",min:"1",max:"200"}),u.jsx("span",{className:"text-sm text-gray-300",children:"px"}),u.jsx("button",{onClick:I=>{I.stopPropagation(),Le(!Ze),uA(!1)},className:"px-2 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500",children:u.jsx("span",{className:"text-xs",children:""})}),Ze&&u.jsx("div",{className:"absolute top-full left-0 mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg py-1 z-[10001] min-w-[100px] max-h-48 overflow-y-auto",children:y.map(I=>u.jsxs("button",{onClick:()=>{jA(B.id,{fontSize:I}),Le(!1)},className:`w-full px-3 py-2 text-left text-sm text-gray-300 hover:bg-gray-600 font-medium ${(B.fontSize||12)===I?"bg-gray-600":""}`,children:[I,"px"]},I))})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:I=>{I.stopPropagation(),uA(!cA),Le(!1)},className:"px-3 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500 flex items-center justify-between gap-2 min-w-[140px]",style:{fontFamily:B.fontFamily||"Inter, sans-serif"},children:[u.jsx("span",{children:((S=x.find(I=>I.value===(B.fontFamily||"Inter, sans-serif")))==null?void 0:S.name)||"Inter"}),u.jsx("span",{className:"text-xs text-gray-400",children:""})]}),cA&&u.jsx("div",{className:"absolute top-full left-0 mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg py-1 z-[10001] min-w-[140px] max-h-48 overflow-y-auto",children:x.map(I=>u.jsx("button",{onClick:()=>{jA(B.id,{fontFamily:I.value}),uA(!1)},className:`w-full px-3 py-2 text-left text-sm text-gray-300 hover:bg-gray-600 font-medium ${(B.fontFamily||"Inter, sans-serif")===I.value?"bg-gray-600":""}`,style:{fontFamily:I.value},children:I.name},I.value))})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"color",value:B.color||"#ffffff",onChange:I=>{jA(B.id,{color:I.target.value})},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",style:{zIndex:1}}),u.jsxs("button",{className:"px-3 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500 flex items-center gap-2 relative",children:[u.jsx("div",{className:"w-5 h-5 rounded border border-gray-500",style:{backgroundColor:B.color||"#ffffff"}}),u.jsx("span",{children:""})]})]}),u.jsx("button",{onClick:()=>{_e(null),Le(!1),uA(!1)},className:"px-3 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500",children:""})]})]})})(),u.jsx(pb,{isOpen:Z,onClose:()=>oe(!1),settings:Ie,uiSettings:Bt,onSave:(B,y)=>{NA(B),oA(y)}}),u.jsxs(qU,{uiSettings:Bt,selectedItemId:f[0]||null,getItemPosition:mw,onSelectionBox:pI,onCanvasClick:eI,onCanvasDrop:qF,panSettings:Ie.pan,windowDragSettings:Ie.windowDrag,zoomWheelModifier:Ie.zoomWheelModifier,activeTool:m,pressedKeys:ie,isEraser:m==="eraser",brushSize:m==="pen"?Q.size:Q.eraserSize,onContextMenu:yI,opacity:Mt,onOpacityChange:Ot,opacityDragSettings:Ie.opacityDrag,items:c,onCanvasMouseDown:tI,onCanvasMouseMove:AI,onCanvasMouseUp:nI,zoomToFit:cw?{itemId:cw,padding:40}:null,navigateTo:T,onNavigated:()=>D(null),onViewportChange:Gn,children:[u.jsx(JU,{connections:J,getItemPosition:W,tempConnection:N,onConnectionContextMenu:(B,y)=>{cI(B)},items:c,activeGenerationNodeIds:Array.from(nw)}),u.jsx("svg",{className:"absolute inset-0 pointer-events-none",style:{width:"100%",height:"100%",zIndex:10,overflow:"visible"},children:G.map(B=>u.jsx(db,{arrow:B,getItemPosition:mw,isSelected:pe.includes(B.id),onSelect:hI,onDelete:y=>{ee(x=>x.filter(S=>S.id!==y))},scale:le.scale,items:c},B.id))}),De.map(B=>u.jsx(lb,{group:B,isSelected:f.includes(B.id),onUpdate:fI,onDragStart:dI,onDrag:oI,onSelect:y=>h([y]),onNameChange:lA,onFormatMenuOpen:y=>_e(y),onUngroup:ds,activeTool:m,onSaveCoordinate:y=>ni(y)},B.id)),c.filter(B=>B&&B.id).map((B,y)=>{const x=B.id||`item-${y}`;return B.type==="text"?u.jsx(cb,{item:B,isSelected:f.includes(B.id),onUpdate:Vn,onDrag:dw,onDragStop:hw,onSelect:(S,I,b)=>pw(S,I,b),onGroup:gw,canGroup:f.length>=2&&f.includes(B.id),isCtrlPressed:ww,activeTool:m,isNewlyCreated:YF.has(B.id),onEditStart:S=>{wl(I=>{const b=new Set(I);return b.delete(S),b})},onFormatMenuOpen:S=>Wn(S),onSaveCoordinate:S=>ni(S)},x):u.jsx(ob,{item:B,isSelected:f.includes(B.id),onUpdate:Vn,onDragStart:iI,onDrag:dw,onDragStop:hw,onSelect:(S,I,b)=>pw(S,I,b),onGroup:gw,canGroup:f.length>=2&&f.includes(B.id),isCtrlPressed:ww,activeTool:m,onDoubleClick:sI,onRefreshPSD:rI,onSocketMouseDown:aI,onSocketMouseUp:lI,onGenerate:uI,isGenerating:nw.has(B.id),onSaveCoordinate:S=>ni(S)},x)}),u.jsx(E4,{cursors:ce}),u.jsx(mb,{ref:gs,paths:L})]}),wr&&(()=>{var S;const B=c.find(I=>I.id===wr&&I.type==="text");if(!B)return null;const y=[10,12,14,16,18,20,24,28,32],x=[{name:"Inter",value:"Inter, sans-serif"},{name:"Arial",value:"Arial, sans-serif"},{name:"Times New Roman",value:"Times New Roman, serif"},{name:"Courier New",value:"Courier New, monospace"},{name:"Georgia",value:"Georgia, serif"},{name:"Verdana",value:"Verdana, sans-serif"}];return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>{Wn(null),Oe(!1),ps(!1)}}),u.jsxs("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-gray-700 border border-gray-600 rounded-lg shadow-xl py-3 px-4 z-[10000] flex items-center gap-3",style:{position:"fixed",top:"1rem",left:"50%",transform:"translateX(-50%)"},onClick:I=>I.stopPropagation(),children:[u.jsxs("div",{className:"relative flex items-center gap-1",children:[u.jsx("input",{type:"number",value:B.fontSize,onChange:I=>{const b=parseInt(I.target.value);!isNaN(b)&&b>0&&b<=200&&Vn(B.id,{fontSize:b})},onFocus:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onMouseDown:I=>I.stopPropagation(),onKeyDown:I=>I.stopPropagation(),className:"w-16 px-2 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500 outline-none border border-gray-500 focus:border-gray-400",min:"1",max:"200"}),u.jsx("span",{className:"text-sm text-gray-300",children:"px"}),u.jsx("button",{onClick:I=>{I.stopPropagation(),Oe(!yt),ps(!1)},className:"px-2 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500",children:u.jsx("span",{className:"text-xs",children:""})}),yt&&u.jsx("div",{className:"absolute top-full left-0 mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg py-1 z-[10001] min-w-[100px] max-h-48 overflow-y-auto",children:y.map(I=>u.jsxs("button",{onClick:()=>{Vn(B.id,{fontSize:I}),Oe(!1)},className:`w-full px-3 py-2 text-left text-sm text-gray-300 hover:bg-gray-600 font-medium ${B.fontSize===I?"bg-gray-600":""}`,children:[I,"px"]},I))})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:I=>{I.stopPropagation(),ps(!hs),Oe(!1)},className:"px-3 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500 flex items-center justify-between gap-2 min-w-[140px]",style:{fontFamily:B.fontFamily},children:[u.jsx("span",{children:((S=x.find(I=>I.value===B.fontFamily))==null?void 0:S.name)||"Inter"}),u.jsx("span",{className:"text-xs text-gray-400",children:""})]}),hs&&u.jsx("div",{className:"absolute top-full left-0 mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg py-1 z-[10001] min-w-[140px] max-h-48 overflow-y-auto",children:x.map(I=>u.jsx("button",{onClick:()=>{Vn(B.id,{fontFamily:I.value}),ps(!1)},className:`w-full px-3 py-2 text-left text-sm text-gray-300 hover:bg-gray-600 font-medium ${B.fontFamily===I.value?"bg-gray-600":""}`,style:{fontFamily:I.value},children:I.name},I.value))})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"color",value:B.color,onChange:I=>{Vn(B.id,{color:I.target.value})},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",style:{zIndex:1}}),u.jsxs("button",{className:"px-3 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500 flex items-center gap-2 relative",children:[u.jsx("div",{className:"w-5 h-5 rounded border border-gray-500",style:{backgroundColor:B.color}}),u.jsx("span",{children:""})]})]}),u.jsx("button",{onClick:()=>{Wn(null),Oe(!1),ps(!1)},className:"px-3 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500",children:""})]})]})})(),c.length===0&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none text-gray-500",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-xl mb-2",children:"Drag and drop images or videos here"}),u.jsx("p",{className:"text-sm",children:"Or press T for text, A for arrows"})]})}),m==="arrow"&&p&&u.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 bg-blue-500 text-white px-4 py-2 rounded shadow-lg",children:"Click another item to create arrow"}),Ne.visible&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:qt,onContextMenu:B=>B.preventDefault()}),u.jsxs("div",{className:"fixed bg-gray-800 border border-gray-700 rounded-lg shadow-lg py-1 z-[9999] min-w-[200px]",style:{left:Ne.x,top:Ne.y},children:[u.jsx("button",{onClick:()=>{if(f.length>0)ni(f[0]);else if(Ne.canvasX!==void 0&&Ne.canvasY!==void 0)ni(null,Ne.canvasX,Ne.canvasY,"Canvas Coordinate");else{const B=-le.x/le.scale+window.innerWidth/2/le.scale,y=-le.y/le.scale+window.innerHeight/2/le.scale;ni(null,B,y,"Canvas Coordinate")}qt()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 block",children:u.jsx("span",{children:" Save Coordinate"})}),u.jsx("div",{className:"h-px bg-gray-700 my-1"}),u.jsxs("button",{onClick:()=>{if(f.length>0){const B=c.filter(y=>f.includes(y.id));_(B),console.log("Copied",B.length,"items")}qt()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-4",children:[u.jsx("span",{children:"Copy"}),u.jsx("span",{className:"text-xs text-gray-400",children:"Ctrl+C"})]}),u.jsxs("button",{onClick:()=>Eo(),className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-4",children:[u.jsx("span",{children:"Paste"}),u.jsx("span",{className:"text-xs text-gray-400",children:"Ctrl+V"})]}),u.jsx("div",{className:"h-px bg-gray-700 my-1"}),u.jsx("button",{onClick:()=>fw("prompt_node"),className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700",children:u.jsx("span",{children:"Add Text Node"})}),u.jsx("button",{onClick:()=>fw("generation_node"),className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700",children:u.jsx("span",{children:"Add Generation Node"})})]})]}),pe.length===1&&(()=>{const B=G.find(k=>k.id===pe[0]);if(!B)return null;const y=k=>{const K=c.find(X=>X.id===k);if(K)return{x:K.x+K.width/2,y:K.y+K.height/2};const V=De.find(X=>X.id===k);return V?{x:V.x+V.width/2,y:V.y+V.height/2}:{x:0,y:0}},x=y(B.sourceId),S=y(B.targetId),I=(x.x+S.x)/2,b=(x.y+S.y)/2,P=I*le.scale+le.x,M=b*le.scale+le.y;return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>we([]),onContextMenu:k=>{k.preventDefault(),we([])}}),u.jsxs("div",{className:"fixed flex items-center gap-2 bg-gray-800 rounded-full shadow-xl border border-gray-600 px-3 py-1.5 z-[10000]",style:{left:P,top:M-20,transform:"translate(-50%, -100%)"},onClick:k=>k.stopPropagation(),children:[u.jsxs("div",{className:"relative group/color w-5 h-5 cursor-pointer hover:scale-110 transition-transform",children:[u.jsx("div",{className:"w-full h-full rounded-full border border-gray-400 shadow-sm",style:{backgroundColor:B.color}}),u.jsx("input",{type:"color",value:B.color,onChange:k=>{const K=k.target.value;Ce(B.id,{color:K})},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),u.jsx("div",{className:"w-px h-4 bg-gray-600"}),u.jsx("button",{onClick:()=>{Me(B.id),we([])},className:"text-gray-300 hover:text-red-400 transition-colors flex items-center justify-center p-0.5",title:"Delete Arrow",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polyline",{points:"3 6 5 6 21 6"}),u.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]})})(),u.jsx(M4,{bookmarks:F,onNavigate:wI,onDelete:gI,onRename:mI,onCopyUrl:BI}),Te&&r&&r!=="new"&&u.jsx(x4,{boardId:r,boardName:i,items:c,onClose:()=>xe(!1)}),u.jsx(O4,{message:ae,onClose:()=>q(null)})]})}Ah.createRoot(document.getElementById("root")).render(u.jsx(Vt.StrictMode,{children:u.jsx(fO,{})}));
