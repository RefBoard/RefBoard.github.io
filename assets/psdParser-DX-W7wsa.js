function zn(e){let t=e.length;for(;--t>=0;)e[t]=0}const yl=3,Sl=258,La=29,Fl=256,xl=Fl+1+La,Ta=30,kl=512,Cl=new Array((xl+2)*2);zn(Cl);const Il=new Array(Ta*2);zn(Il);const Pl=new Array(kl);zn(Pl);const El=new Array(Sl-yl+1);zn(El);const wl=new Array(La);zn(wl);const Al=new Array(Ta);zn(Al);const Dl=(e,t,n,r)=>{let i=e&65535|0,a=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var gr=Dl;const Ll=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},Tl=new Uint32Array(Ll()),Ol=(e,t,n,r)=>{const i=Tl,a=r+n;e^=-1;for(let o=r;o<a;o++)e=e>>>8^i[(e^t[o])&255];return e^-1};var Ze=Ol,br={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Oa={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Ml=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Rl=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)Ml(n,r)&&(e[r]=n[r])}}return e},Bl=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,a=e.length;r<a;r++){let o=e[r];n.set(o,i),i+=o.length}return n},Ma={assign:Rl,flattenChunks:Bl};let Ra=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ra=!1}const it=new Uint8Array(256);for(let e=0;e<256;e++)it[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;it[254]=it[254]=1;var _l=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,a,o=e.length,l=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(l),a=0,i=0;a<l;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|n&63):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|n&63):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|n&63);return t};const Nl=(e,t)=>{if(t<65534&&e.subarray&&Ra)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var zl=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i;const a=new Array(n*2);for(i=0,r=0;r<n;){let o=e[r++];if(o<128){a[i++]=o;continue}let l=it[o];if(l>4){a[i++]=65533,r+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&r<n;)o=o<<6|e[r++]&63,l--;if(l>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return Nl(a,i)},Ul=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+it[e[n]]>t?n:t},yr={string2buf:_l,buf2string:zl,utf8border:Ul};function Gl(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Vl=Gl;const ct=16209,jl=16191;var Hl=function(t,n){let r,i,a,o,l,f,s,u,d,h,p,y,v,F,g,b,S,m,x,P,k,C,O,D;const M=t.state;r=t.next_in,O=t.input,i=r+(t.avail_in-5),a=t.next_out,D=t.output,o=a-(n-t.avail_out),l=a+(t.avail_out-257),f=M.dmax,s=M.wsize,u=M.whave,d=M.wnext,h=M.window,p=M.hold,y=M.bits,v=M.lencode,F=M.distcode,g=(1<<M.lenbits)-1,b=(1<<M.distbits)-1;e:do{y<15&&(p+=O[r++]<<y,y+=8,p+=O[r++]<<y,y+=8),S=v[p&g];n:for(;;){if(m=S>>>24,p>>>=m,y-=m,m=S>>>16&255,m===0)D[a++]=S&65535;else if(m&16){x=S&65535,m&=15,m&&(y<m&&(p+=O[r++]<<y,y+=8),x+=p&(1<<m)-1,p>>>=m,y-=m),y<15&&(p+=O[r++]<<y,y+=8,p+=O[r++]<<y,y+=8),S=F[p&b];t:for(;;){if(m=S>>>24,p>>>=m,y-=m,m=S>>>16&255,m&16){if(P=S&65535,m&=15,y<m&&(p+=O[r++]<<y,y+=8,y<m&&(p+=O[r++]<<y,y+=8)),P+=p&(1<<m)-1,P>f){t.msg="invalid distance too far back",M.mode=ct;break e}if(p>>>=m,y-=m,m=a-o,P>m){if(m=P-m,m>u&&M.sane){t.msg="invalid distance too far back",M.mode=ct;break e}if(k=0,C=h,d===0){if(k+=s-m,m<x){x-=m;do D[a++]=h[k++];while(--m);k=a-P,C=D}}else if(d<m){if(k+=s+d-m,m-=d,m<x){x-=m;do D[a++]=h[k++];while(--m);if(k=0,d<x){m=d,x-=m;do D[a++]=h[k++];while(--m);k=a-P,C=D}}}else if(k+=d-m,m<x){x-=m;do D[a++]=h[k++];while(--m);k=a-P,C=D}for(;x>2;)D[a++]=C[k++],D[a++]=C[k++],D[a++]=C[k++],x-=3;x&&(D[a++]=C[k++],x>1&&(D[a++]=C[k++]))}else{k=a-P;do D[a++]=D[k++],D[a++]=D[k++],D[a++]=D[k++],x-=3;while(x>2);x&&(D[a++]=D[k++],x>1&&(D[a++]=D[k++]))}}else if(m&64){t.msg="invalid distance code",M.mode=ct;break e}else{S=F[(S&65535)+(p&(1<<m)-1)];continue t}break}}else if(m&64)if(m&32){M.mode=jl;break e}else{t.msg="invalid literal/length code",M.mode=ct;break e}else{S=v[(S&65535)+(p&(1<<m)-1)];continue n}break}}while(r<i&&a<l);x=y>>3,r-=x,y-=x<<3,p&=(1<<y)-1,t.next_in=r,t.next_out=a,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=a<l?257+(l-a):257-(a-l),M.hold=p,M.bits=y};const kn=15,Zr=852,qr=592,Kr=0,Zt=1,$r=2,Wl=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Xl=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Yl=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Zl=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ql=(e,t,n,r,i,a,o,l)=>{const f=l.bits;let s=0,u=0,d=0,h=0,p=0,y=0,v=0,F=0,g=0,b=0,S,m,x,P,k,C=null,O;const D=new Uint16Array(kn+1),M=new Uint16Array(kn+1);let H=null,U,W,Y;for(s=0;s<=kn;s++)D[s]=0;for(u=0;u<r;u++)D[t[n+u]]++;for(p=f,h=kn;h>=1&&D[h]===0;h--);if(p>h&&(p=h),h===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,l.bits=1,0;for(d=1;d<h&&D[d]===0;d++);for(p<d&&(p=d),F=1,s=1;s<=kn;s++)if(F<<=1,F-=D[s],F<0)return-1;if(F>0&&(e===Kr||h!==1))return-1;for(M[1]=0,s=1;s<kn;s++)M[s+1]=M[s]+D[s];for(u=0;u<r;u++)t[n+u]!==0&&(o[M[t[n+u]]++]=u);if(e===Kr?(C=H=o,O=20):e===Zt?(C=Wl,H=Xl,O=257):(C=Yl,H=Zl,O=0),b=0,u=0,s=d,k=a,y=p,v=0,x=-1,g=1<<p,P=g-1,e===Zt&&g>Zr||e===$r&&g>qr)return 1;for(;;){U=s-v,o[u]+1<O?(W=0,Y=o[u]):o[u]>=O?(W=H[o[u]-O],Y=C[o[u]-O]):(W=96,Y=0),S=1<<s-v,m=1<<y,d=m;do m-=S,i[k+(b>>v)+m]=U<<24|W<<16|Y|0;while(m!==0);for(S=1<<s-1;b&S;)S>>=1;if(S!==0?(b&=S-1,b+=S):b=0,u++,--D[s]===0){if(s===h)break;s=t[n+o[u]]}if(s>p&&(b&P)!==x){for(v===0&&(v=p),k+=d,y=s-v,F=1<<y;y+v<h&&(F-=D[y+v],!(F<=0));)y++,F<<=1;if(g+=1<<y,e===Zt&&g>Zr||e===$r&&g>qr)return 1;x=b&P,i[x]=p<<24|y<<16|k-a|0}}return b!==0&&(i[k+b]=s-v<<24|64<<16|0),l.bits=p,0};var $n=ql;const Kl=0,Ba=1,_a=2,{Z_FINISH:Jr,Z_BLOCK:$l,Z_TREES:dt,Z_OK:Sn,Z_STREAM_END:Jl,Z_NEED_DICT:Ql,Z_STREAM_ERROR:Ue,Z_DATA_ERROR:Na,Z_MEM_ERROR:za,Z_BUF_ERROR:es,Z_DEFLATED:Qr}=Oa,Vt=16180,ei=16181,ni=16182,ti=16183,ri=16184,ii=16185,ai=16186,oi=16187,li=16188,si=16189,_t=16190,Qe=16191,qt=16192,fi=16193,Kt=16194,ui=16195,ci=16196,di=16197,hi=16198,ht=16199,pt=16200,pi=16201,vi=16202,mi=16203,gi=16204,bi=16205,$t=16206,yi=16207,Si=16208,de=16209,Ua=16210,Ga=16211,ns=852,ts=592,rs=15,is=rs,Fi=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function as(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const xn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Vt||t.mode>Ga?1:0},Va=e=>{if(xn(e))return Ue;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Vt,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ns),t.distcode=t.distdyn=new Int32Array(ts),t.sane=1,t.back=-1,Sn},ja=e=>{if(xn(e))return Ue;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Va(e)},Ha=(e,t)=>{let n;if(xn(e))return Ue;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ue:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,ja(e))},Wa=(e,t)=>{if(!e)return Ue;const n=new as;e.state=n,n.strm=e,n.window=null,n.mode=Vt;const r=Ha(e,t);return r!==Sn&&(e.state=null),r},os=e=>Wa(e,is);let xi=!0,Jt,Qt;const ls=e=>{if(xi){Jt=new Int32Array(512),Qt=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for($n(Ba,e.lens,0,288,Jt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;$n(_a,e.lens,0,32,Qt,0,e.work,{bits:5}),xi=!1}e.lencode=Jt,e.lenbits=9,e.distcode=Qt,e.distbits=5},Xa=(e,t,n,r)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),r-=i,r?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},ss=(e,t)=>{let n,r,i,a,o,l,f,s,u,d,h,p,y,v,F=0,g,b,S,m,x,P,k,C;const O=new Uint8Array(4);let D,M;const H=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(xn(e)||!e.output||!e.input&&e.avail_in!==0)return Ue;n=e.state,n.mode===Qe&&(n.mode=qt),o=e.next_out,i=e.output,f=e.avail_out,a=e.next_in,r=e.input,l=e.avail_in,s=n.hold,u=n.bits,d=l,h=f,C=Sn;e:for(;;)switch(n.mode){case Vt:if(n.wrap===0){n.mode=qt;break}for(;u<16;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}if(n.wrap&2&&s===35615){n.wbits===0&&(n.wbits=15),n.check=0,O[0]=s&255,O[1]=s>>>8&255,n.check=Ze(n.check,O,2,0),s=0,u=0,n.mode=ei;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((s&255)<<8)+(s>>8))%31){e.msg="incorrect header check",n.mode=de;break}if((s&15)!==Qr){e.msg="unknown compression method",n.mode=de;break}if(s>>>=4,u-=4,k=(s&15)+8,n.wbits===0&&(n.wbits=k),k>15||k>n.wbits){e.msg="invalid window size",n.mode=de;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=s&512?si:Qe,s=0,u=0;break;case ei:for(;u<16;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}if(n.flags=s,(n.flags&255)!==Qr){e.msg="unknown compression method",n.mode=de;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=de;break}n.head&&(n.head.text=s>>8&1),n.flags&512&&n.wrap&4&&(O[0]=s&255,O[1]=s>>>8&255,n.check=Ze(n.check,O,2,0)),s=0,u=0,n.mode=ni;case ni:for(;u<32;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}n.head&&(n.head.time=s),n.flags&512&&n.wrap&4&&(O[0]=s&255,O[1]=s>>>8&255,O[2]=s>>>16&255,O[3]=s>>>24&255,n.check=Ze(n.check,O,4,0)),s=0,u=0,n.mode=ti;case ti:for(;u<16;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}n.head&&(n.head.xflags=s&255,n.head.os=s>>8),n.flags&512&&n.wrap&4&&(O[0]=s&255,O[1]=s>>>8&255,n.check=Ze(n.check,O,2,0)),s=0,u=0,n.mode=ri;case ri:if(n.flags&1024){for(;u<16;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}n.length=s,n.head&&(n.head.extra_len=s),n.flags&512&&n.wrap&4&&(O[0]=s&255,O[1]=s>>>8&255,n.check=Ze(n.check,O,2,0)),s=0,u=0}else n.head&&(n.head.extra=null);n.mode=ii;case ii:if(n.flags&1024&&(p=n.length,p>l&&(p=l),p&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+p),k)),n.flags&512&&n.wrap&4&&(n.check=Ze(n.check,r,p,a)),l-=p,a+=p,n.length-=p),n.length))break e;n.length=0,n.mode=ai;case ai:if(n.flags&2048){if(l===0)break e;p=0;do k=r[a+p++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k));while(k&&p<l);if(n.flags&512&&n.wrap&4&&(n.check=Ze(n.check,r,p,a)),l-=p,a+=p,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=oi;case oi:if(n.flags&4096){if(l===0)break e;p=0;do k=r[a+p++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k));while(k&&p<l);if(n.flags&512&&n.wrap&4&&(n.check=Ze(n.check,r,p,a)),l-=p,a+=p,k)break e}else n.head&&(n.head.comment=null);n.mode=li;case li:if(n.flags&512){for(;u<16;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}if(n.wrap&4&&s!==(n.check&65535)){e.msg="header crc mismatch",n.mode=de;break}s=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Qe;break;case si:for(;u<32;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}e.adler=n.check=Fi(s),s=0,u=0,n.mode=_t;case _t:if(n.havedict===0)return e.next_out=o,e.avail_out=f,e.next_in=a,e.avail_in=l,n.hold=s,n.bits=u,Ql;e.adler=n.check=1,n.mode=Qe;case Qe:if(t===$l||t===dt)break e;case qt:if(n.last){s>>>=u&7,u-=u&7,n.mode=$t;break}for(;u<3;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}switch(n.last=s&1,s>>>=1,u-=1,s&3){case 0:n.mode=fi;break;case 1:if(ls(n),n.mode=ht,t===dt){s>>>=2,u-=2;break e}break;case 2:n.mode=ci;break;case 3:e.msg="invalid block type",n.mode=de}s>>>=2,u-=2;break;case fi:for(s>>>=u&7,u-=u&7;u<32;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}if((s&65535)!==(s>>>16^65535)){e.msg="invalid stored block lengths",n.mode=de;break}if(n.length=s&65535,s=0,u=0,n.mode=Kt,t===dt)break e;case Kt:n.mode=ui;case ui:if(p=n.length,p){if(p>l&&(p=l),p>f&&(p=f),p===0)break e;i.set(r.subarray(a,a+p),o),l-=p,a+=p,f-=p,o+=p,n.length-=p;break}n.mode=Qe;break;case ci:for(;u<14;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}if(n.nlen=(s&31)+257,s>>>=5,u-=5,n.ndist=(s&31)+1,s>>>=5,u-=5,n.ncode=(s&15)+4,s>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=de;break}n.have=0,n.mode=di;case di:for(;n.have<n.ncode;){for(;u<3;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}n.lens[H[n.have++]]=s&7,s>>>=3,u-=3}for(;n.have<19;)n.lens[H[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},C=$n(Kl,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,C){e.msg="invalid code lengths set",n.mode=de;break}n.have=0,n.mode=hi;case hi:for(;n.have<n.nlen+n.ndist;){for(;F=n.lencode[s&(1<<n.lenbits)-1],g=F>>>24,b=F>>>16&255,S=F&65535,!(g<=u);){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}if(S<16)s>>>=g,u-=g,n.lens[n.have++]=S;else{if(S===16){for(M=g+2;u<M;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}if(s>>>=g,u-=g,n.have===0){e.msg="invalid bit length repeat",n.mode=de;break}k=n.lens[n.have-1],p=3+(s&3),s>>>=2,u-=2}else if(S===17){for(M=g+3;u<M;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}s>>>=g,u-=g,k=0,p=3+(s&7),s>>>=3,u-=3}else{for(M=g+7;u<M;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}s>>>=g,u-=g,k=0,p=11+(s&127),s>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=de;break}for(;p--;)n.lens[n.have++]=k}}if(n.mode===de)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=de;break}if(n.lenbits=9,D={bits:n.lenbits},C=$n(Ba,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,C){e.msg="invalid literal/lengths set",n.mode=de;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},C=$n(_a,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,C){e.msg="invalid distances set",n.mode=de;break}if(n.mode=ht,t===dt)break e;case ht:n.mode=pt;case pt:if(l>=6&&f>=258){e.next_out=o,e.avail_out=f,e.next_in=a,e.avail_in=l,n.hold=s,n.bits=u,Hl(e,h),o=e.next_out,i=e.output,f=e.avail_out,a=e.next_in,r=e.input,l=e.avail_in,s=n.hold,u=n.bits,n.mode===Qe&&(n.back=-1);break}for(n.back=0;F=n.lencode[s&(1<<n.lenbits)-1],g=F>>>24,b=F>>>16&255,S=F&65535,!(g<=u);){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}if(b&&!(b&240)){for(m=g,x=b,P=S;F=n.lencode[P+((s&(1<<m+x)-1)>>m)],g=F>>>24,b=F>>>16&255,S=F&65535,!(m+g<=u);){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}s>>>=m,u-=m,n.back+=m}if(s>>>=g,u-=g,n.back+=g,n.length=S,b===0){n.mode=bi;break}if(b&32){n.back=-1,n.mode=Qe;break}if(b&64){e.msg="invalid literal/length code",n.mode=de;break}n.extra=b&15,n.mode=pi;case pi:if(n.extra){for(M=n.extra;u<M;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}n.length+=s&(1<<n.extra)-1,s>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=vi;case vi:for(;F=n.distcode[s&(1<<n.distbits)-1],g=F>>>24,b=F>>>16&255,S=F&65535,!(g<=u);){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}if(!(b&240)){for(m=g,x=b,P=S;F=n.distcode[P+((s&(1<<m+x)-1)>>m)],g=F>>>24,b=F>>>16&255,S=F&65535,!(m+g<=u);){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}s>>>=m,u-=m,n.back+=m}if(s>>>=g,u-=g,n.back+=g,b&64){e.msg="invalid distance code",n.mode=de;break}n.offset=S,n.extra=b&15,n.mode=mi;case mi:if(n.extra){for(M=n.extra;u<M;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}n.offset+=s&(1<<n.extra)-1,s>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=de;break}n.mode=gi;case gi:if(f===0)break e;if(p=h-f,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=de;break}p>n.wnext?(p-=n.wnext,y=n.wsize-p):y=n.wnext-p,p>n.length&&(p=n.length),v=n.window}else v=i,y=o-n.offset,p=n.length;p>f&&(p=f),f-=p,n.length-=p;do i[o++]=v[y++];while(--p);n.length===0&&(n.mode=pt);break;case bi:if(f===0)break e;i[o++]=n.length,f--,n.mode=pt;break;case $t:if(n.wrap){for(;u<32;){if(l===0)break e;l--,s|=r[a++]<<u,u+=8}if(h-=f,e.total_out+=h,n.total+=h,n.wrap&4&&h&&(e.adler=n.check=n.flags?Ze(n.check,i,h,o-h):gr(n.check,i,h,o-h)),h=f,n.wrap&4&&(n.flags?s:Fi(s))!==n.check){e.msg="incorrect data check",n.mode=de;break}s=0,u=0}n.mode=yi;case yi:if(n.wrap&&n.flags){for(;u<32;){if(l===0)break e;l--,s+=r[a++]<<u,u+=8}if(n.wrap&4&&s!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=de;break}s=0,u=0}n.mode=Si;case Si:C=Jl;break e;case de:C=Na;break e;case Ua:return za;case Ga:default:return Ue}return e.next_out=o,e.avail_out=f,e.next_in=a,e.avail_in=l,n.hold=s,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<de&&(n.mode<$t||t!==Jr))&&Xa(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,n.wrap&4&&h&&(e.adler=n.check=n.flags?Ze(n.check,i,h,e.next_out-h):gr(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Qe?128:0)+(n.mode===ht||n.mode===Kt?256:0),(d===0&&h===0||t===Jr)&&C===Sn&&(C=es),C},fs=e=>{if(xn(e))return Ue;let t=e.state;return t.window&&(t.window=null),e.state=null,Sn},us=(e,t)=>{if(xn(e))return Ue;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Sn):Ue},cs=(e,t)=>{const n=t.length;let r,i,a;return xn(e)||(r=e.state,r.wrap!==0&&r.mode!==_t)?Ue:r.mode===_t&&(i=1,i=gr(i,t,n,0),i!==r.check)?Na:(a=Xa(e,t,n,n),a?(r.mode=Ua,za):(r.havedict=1,Sn))};var ds=ja,hs=Ha,ps=Va,vs=os,ms=Wa,gs=ss,bs=fs,ys=us,Ss=cs,Fs="pako inflate (from Nodeca project)",tn={inflateReset:ds,inflateReset2:hs,inflateResetKeep:ps,inflateInit:vs,inflateInit2:ms,inflate:gs,inflateEnd:bs,inflateGetHeader:ys,inflateSetDictionary:Ss,inflateInfo:Fs};function xs(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ks=xs;const Ya=Object.prototype.toString,{Z_NO_FLUSH:Cs,Z_FINISH:Is,Z_OK:at,Z_STREAM_END:er,Z_NEED_DICT:nr,Z_STREAM_ERROR:Ps,Z_DATA_ERROR:ki,Z_MEM_ERROR:Es}=Oa;function jt(e){this.options=Ma.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Vl,this.strm.avail_out=0;let n=tn.inflateInit2(this.strm,t.windowBits);if(n!==at)throw new Error(br[n]);if(this.header=new ks,tn.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=yr.string2buf(t.dictionary):Ya.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=tn.inflateSetDictionary(this.strm,t.dictionary),n!==at)))throw new Error(br[n])}jt.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?Is:Cs,Ya.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=tn.inflate(n,o),a===nr&&i&&(a=tn.inflateSetDictionary(n,i),a===at?a=tn.inflate(n,o):a===ki&&(a=nr));n.avail_in>0&&a===er&&n.state.wrap>0&&e[n.next_in]!==0;)tn.inflateReset(n),a=tn.inflate(n,o);switch(a){case Ps:case ki:case nr:case Es:return this.onEnd(a),this.ended=!0,!1}if(l=n.avail_out,n.next_out&&(n.avail_out===0||a===er))if(this.options.to==="string"){let f=yr.utf8border(n.output,n.next_out),s=n.next_out-f,u=yr.buf2string(n.output,f);n.next_out=s,n.avail_out=r-s,s&&n.output.set(n.output.subarray(f,f+s),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===at&&l===0)){if(a===er)return a=tn.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};jt.prototype.onData=function(e){this.chunks.push(e)};jt.prototype.onEnd=function(e){e===at&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ma.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ws(e,t){const n=new jt(t);if(n.push(e),n.err)throw n.msg||br[n.err];return n.result}var As=ws,Ds={inflate:As};const{inflate:Ls}=Ds;var Ts=Ls,Jn=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),vt=4017,mt=799,gt=3406,bt=2276,yt=1567,St=3784,Cn=5793,Ft=2896,Os=100,Ci=64*1024*1024,Sr=0;function On(e){var t=Sr+e;if(t>Ci){var n=Math.ceil((t-Ci)/1024/1024);throw new Error("Max memory limit exceeded by at least ".concat(n,"MB"))}Sr=t}function Ms(e,t){for(var n=16;n>0&&!e[n-1];)n--;for(var r=[{children:[],index:0}],i=0,a=r[0],o=0;o<n;o++){for(var l=0;l<e[o];l++){for(a=r.pop(),a.children[a.index]=t[i];a.index>0;){if(r.length===0)throw new Error("Could not recreate Huffman Table");a=r.pop()}for(a.index++,r.push(a);r.length<=o;){var f={children:[],index:0};r.push(f),a.children[a.index]=f.children,a=f}i++}if(o+1<n){var f={children:[],index:0};r.push(f),a.children[a.index]=f.children,a=f}}return r[0].children}function Rs(e,t,n,r,i,a,o,l,f){var s=n.mcusPerLine,u=n.progressive,d=t,h=0,p=0;function y(){if(p>0)return p--,h>>p&1;if(h=e[t++],h==255){var J=e[t++];if(J)throw new Error("unexpected marker: ".concat((h<<8|J).toString(16)))}return p=7,h>>>7}function v(J){for(var q=J;;){if(q=q[y()],typeof q=="number")return q;if(q===void 0)throw new Error("invalid huffman sequence")}}function F(J){for(var q=0;J>0;)q=q<<1|y(),J--;return q}function g(J){var q=F(J);return q>=1<<J-1?q:q+(-1<<J)+1}function b(J,q){var ue=v(J.huffmanTableDC),pe=ue===0?0:g(ue);q[0]=J.pred+=pe;for(var ce=1;ce<64;){var ge=v(J.huffmanTableAC),Ie=ge&15,Ee=ge>>4;if(Ie===0){if(Ee<15)break;ce+=16;continue}ce+=Ee;var Je=Jn[ce];q[Je]=g(Ie),ce++}}function S(J,q){var ue=v(J.huffmanTableDC),pe=ue===0?0:g(ue)<<f;q[0]=J.pred+=pe}function m(J,q){q[0]|=y()<<f}var x=0;function P(J,q){if(x>0){x--;return}for(var ue=a,pe=o;ue<=pe;){var ce=v(J.huffmanTableAC),ge=ce&15,Ie=ce>>4;if(ge===0){if(Ie<15){x=F(Ie)+(1<<Ie)-1;break}ue+=16;continue}ue+=Ie;var Ee=Jn[ue];q[Ee]=g(ge)*(1<<f),ue++}}var k=0,C=0;function O(J,q){for(var ue=a,pe=o,ce=0;ue<=pe;){var ge=Jn[ue],Ie=q[ge]<0?-1:1;switch(k){case 0:var Ee=v(J.huffmanTableAC),Je=Ee&15;if(ce=Ee>>4,Je===0)ce<15?(x=F(ce)+(1<<ce),k=4):(ce=16,k=1);else{if(Je!==1)throw new Error("invalid ACn encoding");C=g(Je),k=ce?2:3}continue;case 1:case 2:q[ge]?q[ge]+=(y()<<f)*Ie:(ce--,ce===0&&(k=k==2?3:0));break;case 3:q[ge]?q[ge]+=(y()<<f)*Ie:(q[ge]=C<<f,k=0);break;case 4:q[ge]&&(q[ge]+=(y()<<f)*Ie);break}ue++}k===4&&(x--,x===0&&(k=0))}function D(J,q,ue,pe,ce){var ge=ue/s|0,Ie=ue%s,Ee=ge*J.v+pe,Je=Ie*J.h+ce;J.blocks[Ee]!==void 0&&q(J,J.blocks[Ee][Je])}function M(J,q,ue){var pe=ue/J.blocksPerLine|0,ce=ue%J.blocksPerLine;J.blocks[pe]!==void 0&&q(J,J.blocks[pe][ce])}var H=r.length,U,W;u?a===0?W=l===0?S:m:W=l===0?P:O:W=b;var Y=0,V;H==1?V=r[0].blocksPerLine*r[0].blocksPerColumn:V=s*n.mcusPerColumn,i||(i=V);for(var X,se,he;Y<V;){for(var Z=0;Z<H;Z++)r[Z].pred=0;if(x=0,H==1){U=r[0];for(var me=0;me<i;me++)M(U,W,Y),Y++}else for(var me=0;me<i;me++){for(var Z=0;Z<H;Z++){U=r[Z],X=U.h,se=U.v;for(var Ge=0;Ge<se;Ge++)for(var un=0;un<X;un++)D(U,W,Y,Ge,un)}if(Y++,Y===V)break}if(Y===V)do{if(e[t]===255&&e[t+1]!==0)break;t+=1}while(t<e.length-2);if(p=0,he=e[t]<<8|e[t+1],he<65280)throw new Error("marker was not found");if(he>=65488&&he<=65495)t+=2;else break}return t-d}function Bs(e){var t=[],n=e.blocksPerLine,r=e.blocksPerColumn,i=n<<3,a=new Int32Array(64),o=new Uint8Array(64);function l(F,g,b){for(var S=e.quantizationTable,m=b,x=0;x<64;x++)m[x]=F[x]*S[x];for(var x=0;x<8;++x){var P=8*x;if(m[1+P]==0&&m[2+P]==0&&m[3+P]==0&&m[4+P]==0&&m[5+P]==0&&m[6+P]==0&&m[7+P]==0){var k=Cn*m[0+P]+512>>10;m[0+P]=k,m[1+P]=k,m[2+P]=k,m[3+P]=k,m[4+P]=k,m[5+P]=k,m[6+P]=k,m[7+P]=k;continue}var C=Cn*m[0+P]+128>>8,O=Cn*m[4+P]+128>>8,D=m[2+P],M=m[6+P],H=Ft*(m[1+P]-m[7+P])+128>>8,U=Ft*(m[1+P]+m[7+P])+128>>8,W=m[3+P]<<4,Y=m[5+P]<<4,V=C-O+1>>1;C=C+O+1>>1,O=V,V=D*St+M*yt+128>>8,D=D*yt-M*St+128>>8,M=V,V=H-Y+1>>1,H=H+Y+1>>1,Y=V,V=U+W+1>>1,W=U-W+1>>1,U=V,V=C-M+1>>1,C=C+M+1>>1,M=V,V=O-D+1>>1,O=O+D+1>>1,D=V,V=H*bt+U*gt+2048>>12,H=H*gt-U*bt+2048>>12,U=V,V=W*mt+Y*vt+2048>>12,W=W*vt-Y*mt+2048>>12,Y=V,m[0+P]=C+U,m[7+P]=C-U,m[1+P]=O+Y,m[6+P]=O-Y,m[2+P]=D+W,m[5+P]=D-W,m[3+P]=M+H,m[4+P]=M-H}for(var x=0;x<8;++x){var X=x;if(m[1*8+X]==0&&m[2*8+X]==0&&m[3*8+X]==0&&m[4*8+X]==0&&m[5*8+X]==0&&m[6*8+X]==0&&m[7*8+X]==0){var se=Cn*b[x+0]+8192>>14;m[0*8+X]=se,m[1*8+X]=se,m[2*8+X]=se,m[3*8+X]=se,m[4*8+X]=se,m[5*8+X]=se,m[6*8+X]=se,m[7*8+X]=se;continue}var C=Cn*m[0*8+X]+2048>>12,O=Cn*m[4*8+X]+2048>>12,D=m[2*8+X],M=m[6*8+X],H=Ft*(m[1*8+X]-m[7*8+X])+2048>>12,U=Ft*(m[1*8+X]+m[7*8+X])+2048>>12,W=m[3*8+X],Y=m[5*8+X],V=C-O+1>>1;C=C+O+1>>1,O=V,V=D*St+M*yt+2048>>12,D=D*yt-M*St+2048>>12,M=V,V=H-Y+1>>1,H=H+Y+1>>1,Y=V,V=U+W+1>>1,W=U-W+1>>1,U=V,V=C-M+1>>1,C=C+M+1>>1,M=V,V=O-D+1>>1,O=O+D+1>>1,D=V,V=H*bt+U*gt+2048>>12,H=H*gt-U*bt+2048>>12,U=V,V=W*mt+Y*vt+2048>>12,W=W*vt-Y*mt+2048>>12,Y=V,m[0*8+X]=C+U,m[7*8+X]=C-U,m[1*8+X]=O+Y,m[6*8+X]=O-Y,m[2*8+X]=D+W,m[5*8+X]=D-W,m[3*8+X]=M+H,m[4*8+X]=M-H}for(var x=0;x<64;++x){var he=128+(m[x]+8>>4);g[x]=he<0?0:he>255?255:he}}On(i*r*8);for(var f=0;f<r;f++){for(var s=f<<3,u=0;u<8;u++)t.push(new Uint8Array(i));for(var d=0;d<n;d++){l(e.blocks[f][d],o,a);for(var h=0,p=d<<3,y=0;y<8;y++)for(var v=t[s+y],u=0;u<8;u++)v[p+u]=o[h++]}}return t}function rn(e){return e<0?0:e>255?255:e}function _s(e){var t={width:0,height:0,comments:[],adobe:void 0,components:[],exifBuffer:void 0,jfif:void 0},n=Os*1e3*1e3,r=0;function i(){var be=e[r]<<8|e[r+1];return r+=2,be}function a(){var be=i(),cn=e.subarray(r,r+be-2);return r+=cn.length,cn}function o(be){var cn=0,Gn=0;for(var Vn in be.components)if(be.components.hasOwnProperty(Vn)){var Re=be.components[Vn];cn<Re.h&&(cn=Re.h),Gn<Re.v&&(Gn=Re.v)}var Ur=Math.ceil(be.samplesPerLine/8/cn),Gr=Math.ceil(be.scanLines/8/Gn);for(var Vn in be.components)if(be.components.hasOwnProperty(Vn)){var Re=be.components[Vn],ml=Math.ceil(Math.ceil(be.samplesPerLine/8)*Re.h/cn),gl=Math.ceil(Math.ceil(be.scanLines/8)*Re.v/Gn),Vr=Ur*Re.h,jr=Gr*Re.v,bl=jr*Vr,Hr=[];On(bl*256);for(var Wr=0;Wr<jr;Wr++){for(var Xr=[],Yr=0;Yr<Vr;Yr++)Xr.push(new Int32Array(64));Hr.push(Xr)}Re.blocksPerLine=ml,Re.blocksPerColumn=gl,Re.blocks=Hr}be.maxH=cn,be.maxV=Gn,be.mcusPerLine=Ur,be.mcusPerColumn=Gr}var l=null,f=null,s=void 0,u=0,d=[],h=[],p=[],y=[],v=i(),F=-1;if(v!=65496)throw new Error("SOI not found");for(v=i();v!=65497;){switch(v){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{var g=a();if(v===65534){for(var b="",S=0;S<g.byteLength;S++)b+=String.fromCharCode(g[S]);t.comments.push(b)}v===65504&&g[0]===74&&g[1]===70&&g[2]===73&&g[3]===70&&g[4]===0&&(l={version:{major:g[5],minor:g[6]},densityUnits:g[7],xDensity:g[8]<<8|g[9],yDensity:g[10]<<8|g[11],thumbWidth:g[12],thumbHeight:g[13],thumbData:g.subarray(14,14+3*g[12]*g[13])}),v===65505&&g[0]===69&&g[1]===120&&g[2]===105&&g[3]===102&&g[4]===0&&(t.exifBuffer=g.subarray(5,g.length)),v===65518&&g[0]===65&&g[1]===100&&g[2]===111&&g[3]===98&&g[4]===101&&g[5]===0&&(f={version:g[6],flags0:g[7]<<8|g[8],flags1:g[9]<<8|g[10],transformCode:g[11]});break}case 65499:{for(var m=i(),x=m+r-2;r<x;){var P=e[r++];On(64*4);var k=new Int32Array(64);if(P>>4)if(P>>4===1)for(var C=0;C<64;C++){var O=Jn[C];k[O]=i()}else throw new Error("DQT: invalid table spec");else for(var C=0;C<64;C++){var O=Jn[C];k[O]=e[r++]}d[P&15]=k}break}case 65472:case 65473:case 65474:{i(),s={extended:v===65473,progressive:v===65474,precision:e[r++],scanLines:i(),samplesPerLine:i(),components:{},componentsOrder:[],maxH:0,maxV:0,mcusPerLine:0,mcusPerColumn:0};var D=s.scanLines*s.samplesPerLine;if(D>n){var M=Math.ceil((D-n)/1e6);throw new Error("maxResolutionInMP limit exceeded by ".concat(M,"MP"))}for(var H=e[r++],U=0;U<H;U++){var W=e[r],Y=e[r+1]>>4,V=e[r+1]&15,X=e[r+2];s.componentsOrder.push(W),s.components[W]={h:Y,v:V,quantizationIdx:X,blocksPerColumn:0,blocksPerLine:0,blocks:[],pred:0},r+=3}o(s),h.push(s);break}case 65476:{for(var se=i(),U=2;U<se;){for(var he=e[r++],Z=new Uint8Array(16),me=0,C=0;C<16;C++,r++)me+=Z[C]=e[r];On(16+me);for(var Ge=new Uint8Array(me),C=0;C<me;C++,r++)Ge[C]=e[r];U+=17+me;var un=he&15,J=he>>4?p:y;J[un]=Ms(Z,Ge)}break}case 65501:i(),u=i();break;case 65500:i(),i();break;case 65498:{i();for(var q=e[r++],ue=[],U=0;U<q;U++){var pe=s.components[e[r++]],ce=e[r++];pe.huffmanTableDC=y[ce>>4],pe.huffmanTableAC=p[ce&15],ue.push(pe)}var ge=e[r++],Ie=e[r++],Ee=e[r++],Je=Rs(e,r,s,ue,u,ge,Ie,Ee>>4,Ee&15);r+=Je;break}case 65535:e[r]!==255&&r--;break;default:{if(e[r-3]==255&&e[r-2]>=192&&e[r-2]<=254){r-=3;break}else if(v===224||v==225){if(F!==-1)throw new Error("first unknown JPEG marker at offset ".concat(F.toString(16),", second unknown JPEG marker ").concat(v.toString(16)," at offset ").concat((r-1).toString(16)));F=r-1;var zr=i();if(e[r+zr-2]===255){r+=zr-2;break}}throw new Error("unknown JPEG marker "+v.toString(16))}}v=i()}if(h.length!=1)throw new Error("only single frame JPEGs supported");for(var U=0;U<h.length;U++){var ut=h[U].components;for(var C in ut)ut[C].quantizationTable=d[ut[C].quantizationIdx],delete ut[C].quantizationIdx}t.width=s.samplesPerLine,t.height=s.scanLines,t.jfif=l,t.adobe=f,t.components=[];for(var U=0;U<s.componentsOrder.length;U++){var pe=s.components[s.componentsOrder[U]];t.components.push({lines:Bs(pe),scaleX:pe.h/s.maxH,scaleY:pe.v/s.maxV})}return t}function Ns(e){var t=0,n=!1,r=e.width,i=e.height,a=r*i*e.components.length;On(a);var o=new Uint8Array(a);switch(e.components.length){case 1:{for(var l=e.components[0],f=0;f<i;f++)for(var s=l.lines[0|f*l.scaleY],u=0;u<r;u++){var d=s[0|u*l.scaleX];o[t++]=d}break}case 2:{for(var l=e.components[0],h=e.components[1],f=0;f<i;f++)for(var s=l.lines[0|f*l.scaleY],p=h.lines[0|f*h.scaleY],u=0;u<r;u++){var y=s[0|u*l.scaleX];o[t++]=y;var v=p[0|u*h.scaleX];o[t++]=v}break}case 3:{n=!0,e.adobe&&e.adobe.transformCode&&(n=!0);for(var l=e.components[0],h=e.components[1],F=e.components[2],f=0;f<i;f++)for(var s=l.lines[0|f*l.scaleY],p=h.lines[0|f*h.scaleY],g=F.lines[0|f*F.scaleY],u=0;u<r;u++){var d=void 0,b=void 0,S=void 0,m=void 0,x=void 0,P=void 0;n?(d=s[0|u*l.scaleX],b=p[0|u*h.scaleX],S=g[0|u*F.scaleX],m=rn(d+1.402*(S-128)),x=rn(d-.3441363*(b-128)-.71413636*(S-128)),P=rn(d+1.772*(b-128))):(m=s[0|u*l.scaleX],x=p[0|u*h.scaleX],P=g[0|u*F.scaleX]),o[t++]=m,o[t++]=x,o[t++]=P}break}case 4:{if(!e.adobe)throw new Error("Unsupported color mode (4 components)");n=!1,e.adobe&&e.adobe.transformCode&&(n=!0);for(var l=e.components[0],h=e.components[1],F=e.components[2],k=e.components[3],f=0;f<i;f++)for(var s=l.lines[0|f*l.scaleY],p=h.lines[0|f*h.scaleY],g=F.lines[0|f*F.scaleY],C=k.lines[0|f*k.scaleY],u=0;u<r;u++){var d=void 0,b=void 0,S=void 0,O=void 0,D=void 0,M=void 0,H=void 0;n?(d=s[0|u*l.scaleX],b=p[0|u*h.scaleX],S=g[0|u*F.scaleX],O=C[0|u*k.scaleX],D=255-rn(d+1.402*(S-128)),M=255-rn(d-.3441363*(b-128)-.71413636*(S-128)),H=255-rn(d+1.772*(b-128))):(D=s[0|u*l.scaleX],M=p[0|u*h.scaleX],H=g[0|u*F.scaleX],O=C[0|u*k.scaleX]),o[t++]=255-D,o[t++]=255-M,o[t++]=255-H,o[t++]=255-O}break}default:throw new Error("Unsupported color mode")}return o}function zs(e,t){if(Sr=0,e.length===0)throw new Error("Empty jpeg buffer");var n=_s(e);On(n.width*n.height*4);var r=Ns(n),i=t(n.width,n.height),a=i.width,o=i.height,l=i.data,f=0,s=0;switch(n.components.length){case 1:for(var u=0;u<o;u++)for(var d=0;d<a;d++){var h=r[f++];l[s++]=h,l[s++]=h,l[s++]=h,l[s++]=255}break;case 3:for(var u=0;u<o;u++)for(var d=0;d<a;d++){var p=r[f++],y=r[f++],v=r[f++];l[s++]=p,l[s++]=y,l[s++]=v,l[s++]=255}break;case 4:for(var u=0;u<o;u++)for(var d=0;d<a;d++){var F=r[f++],g=r[f++],h=r[f++],b=r[f++],p=255-rn(F*(1-b/255)+b),y=255-rn(g*(1-b/255)+b),v=255-rn(h*(1-b/255)+b);l[s++]=p,l[s++]=y,l[s++]=v,l[s++]=255}break;default:throw new Error("Unsupported color mode")}return i}var Za={},Bn={pass:"pass through",norm:"normal",diss:"dissolve",dark:"darken","mul ":"multiply",idiv:"color burn",lbrn:"linear burn",dkCl:"darker color",lite:"lighten",scrn:"screen","div ":"color dodge",lddg:"linear dodge",lgCl:"lighter color",over:"overlay",sLit:"soft light",hLit:"hard light",vLit:"vivid light",lLit:"linear light",pLit:"pin light",hMix:"hard mix",diff:"difference",smud:"exclusion",fsub:"subtract",fdiv:"divide","hue ":"hue","sat ":"saturation",colr:"color","lum ":"luminosity"};Object.keys(Bn).forEach(function(e){return Za[Bn[e]]=e});var Ii=["none","red","orange","yellow","green","blue","violet","gray"],Us=["LMsk","Lr16","Lr32","Layr","Mt16","Mt32","Mtrn","Alph","FMsk","lnk2","FEid","FXid","PxSD","cinf"];function Gs(e){var t={};return Object.keys(e).forEach(function(n){return t[e[n]]=n}),t}function z(e,t,n){var r=Gs(n),i=function(o){var l=o.split(".")[1];if(l&&!r[l])throw new Error("Unrecognized value for enum: '".concat(o,"'"));return r[l]||t},a=function(o){if(o&&!n[o])throw new Error("Invalid value for enum: '".concat(o,"'"));return"".concat(e,".").concat(n[o]||n[t])};return{decode:i,encode:a}}var Pi;(function(e){e[e.RGB=0]="RGB",e[e.HSB=1]="HSB",e[e.CMYK=2]="CMYK",e[e.Lab=7]="Lab",e[e.Grayscale=8]="Grayscale"})(Pi||(Pi={}));var Ei;(function(e){e[e.PositionRelativeToLayer=1]="PositionRelativeToLayer",e[e.LayerMaskDisabled=2]="LayerMaskDisabled",e[e.InvertLayerMaskWhenBlending=4]="InvertLayerMaskWhenBlending",e[e.LayerMaskFromRenderingOtherData=8]="LayerMaskFromRenderingOtherData",e[e.MaskHasParametersAppliedToIt=16]="MaskHasParametersAppliedToIt"})(Ei||(Ei={}));var wi;(function(e){e[e.UserMaskDensity=1]="UserMaskDensity",e[e.UserMaskFeather=2]="UserMaskFeather",e[e.VectorMaskDensity=4]="VectorMaskDensity",e[e.VectorMaskFeather=8]="VectorMaskFeather"})(wi||(wi={}));var Ai;(function(e){e[e.Color0=0]="Color0",e[e.Color1=1]="Color1",e[e.Color2=2]="Color2",e[e.Color3=3]="Color3",e[e.Transparency=-1]="Transparency",e[e.UserMask=-2]="UserMask",e[e.RealUserMask=-3]="RealUserMask"})(Ai||(Ai={}));var Di;(function(e){e[e.RawData=0]="RawData",e[e.RleCompressed=1]="RleCompressed",e[e.ZipWithoutPrediction=2]="ZipWithoutPrediction",e[e.ZipWithPrediction=3]="ZipWithPrediction"})(Di||(Di={}));function Vs(e,t){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return t?3:e+1;case-1:return t?4:3;default:return e+1}}function qa(e,t,n){return e<t?t:e>n?n:e}function Fr(e){for(var t=e.data,n=t instanceof Float32Array?1:t instanceof Uint16Array?65535:255,r=0,i=t.length|0;r<i;r=r+4|0)t[r+0]=0,t[r+1]=0,t[r+2]=0,t[r+3]=n}function xr(e){var t=Ht(e.width,e.height),n;if(e.data instanceof Uint8ClampedArray)n=e;else{n=Ar(e.width,e.height);var r=e.data,i=n.data;if(r instanceof Float32Array)for(var a=0,o=r.length;a<o;a+=4)i[a+0]=Math.round(Math.pow(r[a+0],1/2.2)*255),i[a+1]=Math.round(Math.pow(r[a+1],1/2.2)*255),i[a+2]=Math.round(Math.pow(r[a+2],1/2.2)*255),i[a+3]=Math.round(r[a+3]*255);else for(var l=r instanceof Uint16Array?8:0,a=0,o=r.length;a<o;a++)i[a]=r[a]>>>l}return t.getContext("2d").putImageData(n,0,0),t}function js(e,t,n,r){if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("Invalid bit depth");for(var i=0,a=0,o=0;i<r;i++)for(var l=0;l<n;)for(var f=e[o++],s=0;s<8&&l<n;s++,l++,a+=4){var u=f&128?0:255;f=f<<1,t[a+0]=u,t[a+1]=u,t[a+2]=u,t[a+3]=255}}function Hs(e){var t=Ht(100,100);try{var n=t.getContext("2d"),r=zs(e,function(i,a){return n.createImageData(i,a)});t.width=r.width,t.height=r.height,n.putImageData(r,0,0)}catch(i){console.error("JPEG decompression error",i.message)}return t}var Ht=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvas method")},tr=void 0,Ar=function(e,t){return tr||(tr=Ht(1,1)),tr.getContext("2d").createImageData(e,t)};typeof document<"u"&&(Ht=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n});var Ka=Ks,Ws=Qs,Ke=[],_e=[],Xs=typeof Uint8Array<"u"?Uint8Array:Array,rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var In=0,Ys=rr.length;In<Ys;++In)Ke[In]=rr[In],_e[rr.charCodeAt(In)]=In;_e[45]=62;_e[95]=63;function Zs(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function qs(e,t,n){return(t+n)*3/4-n}function Ks(e){var t,n=Zs(e),r=n[0],i=n[1],a=new Xs(qs(e,r,i)),o=0,l=i>0?r-4:r,f;for(f=0;f<l;f+=4)t=_e[e.charCodeAt(f)]<<18|_e[e.charCodeAt(f+1)]<<12|_e[e.charCodeAt(f+2)]<<6|_e[e.charCodeAt(f+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=t&255;return i===2&&(t=_e[e.charCodeAt(f)]<<2|_e[e.charCodeAt(f+1)]>>4,a[o++]=t&255),i===1&&(t=_e[e.charCodeAt(f)]<<10|_e[e.charCodeAt(f+1)]<<4|_e[e.charCodeAt(f+2)]>>2,a[o++]=t>>8&255,a[o++]=t&255),a}function $s(e){return Ke[e>>18&63]+Ke[e>>12&63]+Ke[e>>6&63]+Ke[e&63]}function Js(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push($s(r));return i.join("")}function Qs(e){for(var t,n=e.length,r=n%3,i=[],a=16383,o=0,l=n-r;o<l;o+=a)i.push(Js(e,o,o+a>l?l:o+a));return r===1?(t=e[n-1],i.push(Ke[t>>2]+Ke[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(Ke[t>>10]+Ke[t>>4&63]+Ke[t<<2&63]+"=")),i.join("")}function kr(e){return e&4294967168?e&4294965248?e&4294901760?4:3:2:1}function ef(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r>=55296&&r<=56319){if(n+1<e.length){var i=e.charCodeAt(n+1);(i&64512)===56320&&(n++,t+=kr(((r&1023)<<10)+(i&1023)+65536))}}else t+=kr(r)}return t}function Li(e,t,n){var r=kr(n);switch(r){case 1:e[t]=n;break;case 2:e[t]=n>>6&31|192,e[t+1]=n&63|128;break;case 3:e[t]=n>>12&15|224,e[t+1]=n>>6&63|128,e[t+2]=n&63|128;break;default:e[t]=n>>18&7|240,e[t+1]=n>>12&63|128,e[t+2]=n>>6&63|128,e[t+3]=n&63|128;break}return r}function nf(e,t,n){for(var r=0;r<n.length;r++){var i=n.charCodeAt(r);if(i>=55296&&i<=56319){if(r+1<n.length){var a=n.charCodeAt(r+1);if((a&64512)===56320){r++;var o=((i&1023)<<10)+(a&1023)+65536;t+=Li(e,t,o)}}}else t+=Li(e,t,i)}return t}function $a(e){if(e.length>1e3&&typeof TextEncoder<"u")return new TextEncoder().encode(e);var t=new Uint8Array(ef(e));return nf(t,0,e),t}function Pn(e,t){if(t>=e.length)throw Error("Invalid byte index");var n=e[t];if((n&192)===128)return n&63;throw Error("Invalid continuation byte")}function Ja(e){if(e.byteLength>1e3&&typeof TextDecoder<"u")return new TextDecoder().decode(e);for(var t=[],n=0;n<e.length;){var r=e[n++],i=void 0;if(!(r&128))i=r;else if((r&224)===192){var a=Pn(e,n++);if(i=(r&31)<<6|a,i<128)throw Error("Invalid continuation byte")}else if((r&240)===224){var a=Pn(e,n++),o=Pn(e,n++);if(i=(r&15)<<12|a<<6|o,i<2048)throw Error("Invalid continuation byte");if(i>=55296&&i<=57343)throw Error("Lone surrogate U+".concat(i.toString(16).toUpperCase()," is not a scalar value"))}else if((r&248)===240){var a=Pn(e,n++),o=Pn(e,n++),l=Pn(e,n++);if(i=(r&15)<<18|a<<12|o<<6|l,i<65536||i>1114111)throw Error("Invalid continuation byte")}else throw Error("Invalid UTF-8 detected");i>65535&&(i-=65536,t.push(String.fromCharCode(i>>>10&1023|55296)),i=56320|i&1023),t.push(String.fromCharCode(i))}return t.join("")}var an=function(){return an=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},an.apply(this,arguments)},tf=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function rf(e){var t={};return Object.keys(e).forEach(function(n){return t[e[n]]=n}),t}var Zn={"#Ang":"Angle","#Rsl":"Density","#Rlt":"Distance","#Nne":"None","#Prc":"Percent","#Pxl":"Pixels","#Mlm":"Millimeters","#Pnt":"Points",RrPi:"Picas",RrIn:"Inches",RrCm:"Centimeters"},xt=rf(Zn);function A(e,t){return{name:e,classID:t}}var ee=A("","null"),Qa={strokeStyleContent:A("","solidColorLayer"),printProofSetup:A("Proof Setup","proofSetup"),Grad:A("Gradient","Grdn"),Trnf:A("Transform","Trnf"),patternFill:A("","patternFill"),ebbl:A("","ebbl"),SoFi:A("","SoFi"),GrFl:A("","GrFl"),sdwC:A("","RGBC"),hglC:A("","RGBC"),"Clr ":A("","RGBC"),tintColor:A("","RGBC"),Ofst:A("","Pnt "),ChFX:A("","ChFX"),MpgS:A("","ShpC"),DrSh:A("","DrSh"),IrSh:A("","IrSh"),OrGl:A("","OrGl"),IrGl:A("","IrGl"),TrnS:A("","ShpC"),Ptrn:A("","Ptrn"),FrFX:A("","FrFX"),phase:A("","Pnt "),frameStep:ee,duration:ee,workInTime:ee,workOutTime:ee,audioClipGroupList:ee,bounds:A("","Rctn"),customEnvelopeWarp:A("","customEnvelopeWarp"),warp:A("","warp"),"Sz  ":A("","Pnt "),origin:A("","Pnt "),autoExpandOffset:A("","Pnt "),keyOriginShapeBBox:A("","unitRect"),Vrsn:ee,psVersion:ee,docDefaultNewArtboardBackgroundColor:A("","RGBC"),artboardRect:A("","classFloatRect"),keyOriginRRectRadii:A("","radii"),keyOriginBoxCorners:ee,rectangleCornerA:A("","Pnt "),rectangleCornerB:A("","Pnt "),rectangleCornerC:A("","Pnt "),rectangleCornerD:A("","Pnt "),compInfo:ee,quiltWarp:A("","quiltWarp"),generatorSettings:ee,crema:ee,FrIn:ee,blendOptions:ee,FXRf:ee,Lefx:ee,time:ee,animKey:ee,timeScope:ee,inTime:ee,outTime:ee,sheetStyle:ee,translation:ee,Skew:ee,boundingBox:A("","boundingBox"),"Lnk ":A("","ExternalFileLink"),frameReader:A("","FrameReader"),effectParams:A("","motionTrackEffectParams"),Impr:A("None","none"),Anch:A("","Pnt "),"Fwd ":A("","Pnt "),"Bwd ":A("","Pnt "),FlrC:A("","Pnt "),meshBoundaryPath:A("","pathClass"),filterFX:A("","filterFXStyle"),Fltr:A("","rigidTransform"),FrgC:A("","RGBC"),BckC:A("","RGBC"),sdwM:A("Parameters","adaptCorrectTones"),hglM:A("Parameters","adaptCorrectTones"),customShape:A("","customShape"),origFXRefPoint:ee,FXRefPoint:ee,ClMg:A("","ClMg")},eo={"Crv ":A("","CrPt"),Clrs:A("","Clrt"),Trns:A("","TrnS"),keyDescriptorList:ee,solidFillMulti:A("","SoFi"),gradientFillMulti:A("","GrFl"),dropShadowMulti:A("","DrSh"),innerShadowMulti:A("","IrSh"),frameFXMulti:A("","FrFX"),FrIn:ee,FSts:ee,LaSt:ee,sheetTimelineOptions:ee,trackList:A("","animationTrack"),globalTrackList:A("","animationTrack"),keyList:ee,audioClipGroupList:ee,audioClipList:ee,countObjectList:A("","countObject"),countGroupList:A("","countGroup"),slices:A("","slice"),"Pts ":A("","Pthp"),SbpL:A("","SbpL"),pathComponents:A("","PaCm"),filterFXList:A("","filterFX"),puppetShapeList:A("","puppetShape"),channelDenoise:A("","channelDenoiseParams"),ShrP:A("","Pnt "),layerSettings:ee,list:ee,Adjs:A("","CrvA")},Ti={TEXT:["Txt ","printerName","Nm  ","Idnt","blackAndWhitePresetFileName","LUT3DFileName","presetFileName","curvesPresetFileName","mixerPresetFileName","placed","description","reason","artboardPresetName","json","clipID","relPath","fullPath","mediaDescriptor","Msge","altTag","url","cellText","preset","KnNm","FPth","comment","originalPath"],tdta:["EngineData","LUT3DFileData","indexArray","originalVertexArray","deformedVertexArray","LqMe"],long:["TextIndex","RndS","Mdpn","Smth","Lctn","strokeStyleVersion","LaID","Vrsn","Cnt ","Brgh","Cntr","means","vibrance","Strt","bwPresetKind","comp","compID","originalCompID","curvesPresetKind","mixerPresetKind","uOrder","vOrder","PgNm","totalPages","Crop","numerator","denominator","frameCount","Annt","keyOriginType","unitValueQuadVersion","keyOriginIndex","major","minor","fix","docDefaultNewArtboardBackgroundType","artboardBackgroundType","numModifyingFX","deformNumRows","deformNumCols","FrID","FrDl","FsID","LCnt","AFrm","AFSt","numBefore","numAfter","Spcn","minOpacity","maxOpacity","BlnM","sheetID","gblA","globalAltitude","descVersion","frameReaderType","LyrI","zoomOrigin","fontSize","Rds ","sliceID","topOutset","leftOutset","bottomOutset","rightOutset","filterID","meshQuality","meshExpansion","meshRigidity","VrsM","VrsN","NmbG","WLMn","WLMx","AmMn","AmMx","SclH","SclV","Lvl ","TlNm","TlOf","FlRs","Thsh","ShrS","ShrE","FlRs","Vrnc","Strg","ExtS","ExtD","HrzS","VrtS","NmbR","EdgF","Ang1","Ang2","Ang3","Ang4","lastAppliedComp","capturedInfo"],enum:["textGridding","Ornt","warpStyle","warpRotate","Inte","Bltn","ClrS","BlrQ","bvlT","bvlS","bvlD","Md  ","glwS","GrdF","GlwT","RplS","BlrM","SmBM","strokeStyleLineCapType","strokeStyleLineJoinType","strokeStyleLineAlignment","strokeStyleBlendMode","PntT","Styl","lookupType","LUTFormat","dataOrder","tableOrder","enableCompCore","enableCompCoreGPU","compCoreSupport","compCoreGPUSupport","Engn","enableCompCoreThreads","gs99","FrDs","trackID","animInterpStyle","horzAlign","vertAlign","bgColorType","shapeOperation","UndA","Wvtp","Drct","WndM","Edg ","FlCl","IntE","IntC","Cnvr","Fl  ","Dstr","MztT","Lns ","ExtT","DspM","ExtR","ZZTy","SphM","SmBQ","placedLayerOCIOConversion","gradientsInterpolationMethod"],bool:["PstS","printSixteenBit","masterFXSwitch","enab","uglg","antialiasGloss","useShape","useTexture","uglg","antialiasGloss","useShape","Vsbl","useTexture","Algn","Rvrs","Dthr","Invr","VctC","ShTr","layerConceals","strokeEnabled","fillEnabled","strokeStyleScaleLock","strokeStyleStrokeAdjust","hardProof","MpBl","paperWhite","useLegacy","Auto","Lab ","useTint","keyShapeInvalidated","autoExpandEnabled","autoNestEnabled","autoPositionEnabled","shrinkwrapOnSaveEnabled","present","showInDialog","overprint","sheetDisclosed","lightsDisclosed","meshesDisclosed","materialsDisclosed","hasMotion","muted","Effc","selected","autoScope","fillCanvas","cellTextIsHTML","Smoo","Clsp","validAtPosition","rigidType","hasoptions","filterMaskEnable","filterMaskLinked","filterMaskExtendWithWhite","removeJPEGArtifact","Mnch","ExtF","ExtM","moreAccurate","GpuY","LIWy","Cnty"],doub:["warpValue","warpPerspective","warpPerspectiveOther","Intr","Wdth","Hght","strokeStyleMiterLimit","strokeStyleResolution","layerTime","keyOriginResolution","xx","xy","yx","yy","tx","ty","FrGA","frameRate","audioLevel","rotation","X   ","Y   ","redFloat","greenFloat","blueFloat","imageResolution","PuX0","PuX1","PuX2","PuX3","PuY0","PuY1","PuY2","PuY3"],UntF:["sdwO","hglO","lagl","Lald","srgR","blur","Sftn","Opct","Dstn","Angl","Ckmt","Nose","Inpr","ShdN","strokeStyleLineWidth","strokeStyleLineDashOffset","strokeStyleOpacity","H   ","Top ","Left","Btom","Rght","Rslt","topRight","topLeft","bottomLeft","bottomRight","ClNs","Shrp"],VlLs:["Crv ","Clrs","Mnm ","Mxm ","Trns","pathList","strokeStyleLineDashSet","FrLs","slices","LaSt","Trnf","nonAffineTransform","keyDescriptorList","guideIndeces","gradientFillMulti","solidFillMulti","frameFXMulti","innerShadowMulti","dropShadowMulti","FrIn","FSts","FsFr","sheetTimelineOptions","audioClipList","trackList","globalTrackList","keyList","audioClipList","warpValues","selectedPin","Pts ","SbpL","pathComponents","pinOffsets","posFinalPins","pinVertexIndices","PinP","PnRt","PnOv","PnDp","filterFXList","puppetShapeList","ShrP","channelDenoise","Mtrx","layerSettings","list","compList","Adjs"],ObAr:["meshPoints","quiltSliceX","quiltSliceY"],"obj ":["null","Chnl"],"Pth ":["DspF"]},af=["Rd  ","Grn ","Bl  ","Yllw","Ylw ","Cyn ","Mgnt","Blck","Gry ","Lmnc","A   ","B   "],no={"Mnm ":"long","Mxm ":"long",FrLs:"long",strokeStyleLineDashSet:"UntF",Trnf:"doub",nonAffineTransform:"doub",keyDescriptorList:"Objc",gradientFillMulti:"Objc",solidFillMulti:"Objc",frameFXMulti:"Objc",innerShadowMulti:"Objc",dropShadowMulti:"Objc",LaSt:"Objc",FrIn:"Objc",FSts:"Objc",FsFr:"long",blendOptions:"Objc",sheetTimelineOptions:"Objc",keyList:"Objc",warpValues:"doub",selectedPin:"long","Pts ":"Objc",SbpL:"Objc",pathComponents:"Objc",pinOffsets:"doub",posFinalPins:"doub",pinVertexIndices:"long",PinP:"doub",PnRt:"long",PnOv:"bool",PnDp:"doub",filterFXList:"Objc",puppetShapeList:"Objc",ShrP:"Objc",channelDenoise:"Objc",Mtrx:"long",compList:"long",Chnl:"enum"},Nt={};for(var ir=0,Oi=Object.keys(Ti);ir<Oi.length;ir++)for(var Mi=Oi[ir],ar=0,Ri=Ti[Mi];ar<Ri.length;ar++){var _n=Ri[ar];Nt[_n]=Mi}for(var or=0,Bi=Object.keys(Qa);or<Bi.length;or++){var _n=Bi[or];Nt[_n]||(Nt[_n]="Objc")}for(var lr=0,_i=Object.keys(eo);lr<_i.length;lr++){var _n=_i[lr];no[_n]="Objc"}function of(e,t,n,r){return e==="presetKind"?typeof t=="string"?"enum":"long":e==="null"&&n==="slices"?"TEXT":e==="groupID"?n==="slices"?"long":"TEXT":e==="Sz  "?"Wdth"in t?"Objc":"units"in t?"UntF":"doub":e==="Type"?typeof t=="string"?"enum":"long":e==="AntA"?typeof t=="string"?"enum":"bool":(e==="Hrzn"||e==="Vrtc")&&(r.Type==="keyType.Pstn"||r._classID==="Ofst")?"long":e==="Hrzn"||e==="Vrtc"||e==="Top "||e==="Left"||e==="Btom"||e==="Rght"?n==="slices"?"long":typeof t=="number"?"doub":"UntF":e==="Vrsn"?typeof t=="number"?"long":"Objc":e==="Rd  "||e==="Grn "||e==="Bl  "?n==="artd"?"long":"doub":e==="Trnf"?Array.isArray(t)?"VlLs":"Objc":Nt[e]}function on(e){var t=_(e);return Yt(e,t||4)}function ln(e,t){if(t.length===4&&t!=="warp"&&t!=="time"&&t!=="hold"&&t!=="list")j(e,0),G(e,t);else{j(e,t.length);for(var n=0;n<t.length;n++)B(e,t.charCodeAt(n))}}function to(e,t){for(var n=bn(e),r=t?{_name:n.name,_classID:n.classID}:{},i=w(e),a=0;a<i;a++){var o=on(e),l=le(e),f=io(e,l,t);r[o]=f}return r}function ro(e,t,n,r,i){Fn(e,t),ln(e,n);var a=Object.keys(r),o=a.length;"_name"in r&&o--,"_classID"in r&&o--,L(e,o);for(var l=0,f=a;l<f.length;l++){var s=f[l];if(!(s==="_name"||s==="_classID")){var u=of(s,r[s],i,r),d=Qa[s];s==="bounds"&&i==="text"?d=A("","bounds"):s==="origin"?u=i==="slices"?"enum":"Objc":(s==="Cyn "||s==="Mgnt"||s==="Ylw "||s==="Blck")&&r._classID==="CMYC"?u="doub":/^PN[a-z][a-z]$/.test(s)?u="TEXT":/^PT[a-z][a-z]$/.test(s)?u="long":/^PF[a-z][a-z]$/.test(s)||(s==="Rds "||s==="Thsh")&&typeof r[s]=="number"&&r._classID==="SmrB"?u="doub":s==="ClSz"||s==="Rds "||s==="Amnt"?u=typeof r[s]=="number"?"long":"UntF":(s==="sdwM"||s==="hglM")&&typeof r[s]=="string"||s==="blur"&&typeof r[s]=="string"?u="enum":s==="Hght"&&typeof r[s]=="number"&&r._classID==="Embs"||s==="Angl"&&typeof r[s]=="number"&&(r._classID==="Embs"||r._classID==="smartSharpen"||r._classID==="Twrl"||r._classID==="MtnB")?u="long":s==="Angl"&&typeof r[s]=="number"?u="doub":s==="bounds"&&i==="slices"?(u="Objc",d=A("","Rct1")):s==="Scl "?typeof r[s]=="object"&&"Hrzn"in r[s]?(u="Objc",d=ee):typeof r[s]=="number"?u="long":u="UntF":s==="audioClipGroupList"&&a.length===1?u="VlLs":(s==="Strt"||s==="Brgh")&&"H   "in r?u="doub":s==="Wdth"&&typeof r[s]=="object"?u="UntF":s==="Ofst"&&typeof r[s]=="number"?u="long":s==="Strt"&&typeof r[s]=="object"?(u="Objc",d=ee):af.indexOf(s)!==-1?u=n==="RGBC"&&i!=="artd"?"doub":"long":s==="profile"?u=n==="printOutput"?"TEXT":"tdta":s==="strokeStyleContent"?r[s]["Clr "]?d=A("","solidColorLayer"):r[s].Grad?d=A("","gradientLayer"):r[s].Ptrn&&(d=A("","patternLayer")):s==="bounds"&&i==="quiltWarp"&&(d=A("","classFloatRect")),d&&d.classID==="RGBC"&&"H   "in r[s]&&(d={classID:"HSBC",name:""}),ln(e,s),G(e,u||"long"),ao(e,u||"long",r[s],s,d,i)}}}function io(e,t,n){switch(t){case"obj ":return sf(e);case"Objc":case"GlbO":return to(e,n);case"VlLs":{for(var r=_(e),i=[],a=0;a<r;a++){var o=le(e);i.push(io(e,o,n))}return i}case"doub":return ze(e);case"UntF":{var l=le(e),f=ze(e);if(!Zn[l])throw new Error("Invalid units: ".concat(l));return{units:Zn[l],value:f}}case"UnFl":{var l=le(e),f=He(e);if(!Zn[l])throw new Error("Invalid units: ".concat(l));return{units:Zn[l],value:f}}case"TEXT":return xe(e);case"enum":{var s=on(e),f=on(e);return"".concat(s,".").concat(f)}case"long":return _(e);case"comp":{var u=w(e),d=w(e);return{low:u,high:d}}case"bool":return!!T(e);case"type":case"GlbC":return bn(e);case"alis":{var h=_(e);return Yt(e,h)}case"tdta":{var p=_(e);return ke(e,p)}case"ObAr":{_(e),xe(e),on(e);for(var y=_(e),i=[],a=0;a<y;a++){var v=on(e);le(e),le(e);for(var F=_(e),g=[],b=0;b<F;b++)g.push(ze(e));i.push({type:v,values:g})}return i}case"Pth ":{_(e);var S=le(e);ca(e);var m=ca(e),x=yf(e,m);return{sig:S,path:x}}default:throw new Error("Invalid TySh descriptor OSType: ".concat(t," at ").concat(e.offset.toString(16)))}}var lf={meshPoints:"rationalPoint",quiltSliceX:"UntF",quiltSliceY:"UntF"};function ao(e,t,n,r,i,a){switch(t){case"obj ":ff(e,r,n);break;case"Objc":case"GlbO":{if(typeof n!="object")throw new Error("Invalid struct value: ".concat(JSON.stringify(n),", key: ").concat(r));if(!i)throw new Error("Missing ext type for: '".concat(r,"' (").concat(JSON.stringify(n),")"));var o=n._name||i.name,l=n._classID||i.classID;ro(e,o,l,n,a);break}case"VlLs":if(!Array.isArray(n))throw new Error("Invalid list value: ".concat(JSON.stringify(n),", key: ").concat(r));j(e,n.length);for(var f=0;f<n.length;f++){var s=no[r];G(e,s||"long"),ao(e,s||"long",n[f],"".concat(r,"[]"),eo[r],a)}break;case"doub":if(typeof n!="number")throw new Error("Invalid number value: ".concat(JSON.stringify(n),", key: ").concat(r));$e(e,n);break;case"UntF":if(!xt[n.units])throw new Error("Invalid units: ".concat(n.units," in ").concat(r));G(e,xt[n.units]),$e(e,n.value);break;case"UnFl":if(!xt[n.units])throw new Error("Invalid units: ".concat(n.units," in ").concat(r));G(e,xt[n.units]),We(e,n.value);break;case"TEXT":Fn(e,n);break;case"enum":{if(typeof n!="string")throw new Error("Invalid enum value: ".concat(JSON.stringify(n),", key: ").concat(r));var u=n.split("."),d=u[0],h=u[1];ln(e,d),ln(e,h);break}case"long":if(typeof n!="number")throw new Error("Invalid integer value: ".concat(JSON.stringify(n),", key: ").concat(r));j(e,n);break;case"bool":if(typeof n!="boolean")throw new Error("Invalid boolean value: ".concat(JSON.stringify(n),", key: ").concat(r));B(e,n?1:0);break;case"tdta":j(e,n.byteLength),sn(e,n);break;case"ObAr":{j(e,16),Fn(e,"");var p=lf[r];if(!p)throw new Error("Not implemented ObArType for: ".concat(r));ln(e,p),j(e,n.length);for(var f=0;f<n.length;f++){ln(e,n[f].type),G(e,"UnFl"),G(e,"#Pxl"),j(e,n[f].values.length);for(var y=0;y<n[f].values.length;y++)$e(e,n[f].values[y])}break}case"Pth ":{var v=12+n.path.length*2;j(e,v),G(e,n.sig),Ea(e,v),Ea(e,n.path.length),au(e,n.path);break}default:throw new Error("Not implemented descriptor OSType: ".concat(t))}}function sf(e){for(var t=_(e),n=[],r=0;r<t;r++){var i=le(e);switch(i){case"prop":{bn(e);var a=on(e);n.push(a);break}case"Clss":n.push(bn(e));break;case"Enmr":{bn(e);var o=on(e),l=on(e);n.push("".concat(o,".").concat(l));break}case"rele":{bn(e),n.push(w(e));break}case"Idnt":n.push(_(e));break;case"indx":n.push(_(e));break;case"name":{bn(e),n.push(xe(e));break}default:throw new Error("Invalid descriptor reference type: ".concat(i))}}return n}function ff(e,t,n){j(e,n.length);for(var r=0;r<n.length;r++){var i=n[r],a="unknown";switch(typeof i=="string"&&(/^[a-z ]+\.[a-z ]+$/i.test(i)?a="Enmr":a="name"),G(e,a),a){case"Enmr":{var o=i.split("."),l=o[0],f=o[1];Ni(e,"\0",l),ln(e,l),ln(e,f);break}case"name":{Ni(e,"\0","Lyr "),Oe(e,i+"\0");break}default:throw new Error("Invalid descriptor reference type: ".concat(a))}}return n}function bn(e){var t=xe(e),n=on(e);return{name:t,classID:n}}function Ni(e,t,n){Oe(e,t),ln(e,n)}function K(e,t){t===void 0&&(t=!1);var n=w(e);if(n!==16)throw new Error("Invalid descriptor version: ".concat(n));var r=to(e,t);return r}function $(e,t,n,r,i){i===void 0&&(i=""),L(e,16),ro(e,t,n,r,i)}function Qn(e){return{x:e.Hrzn,y:e.Vrtc}}function et(e){return{Hrzn:e.x,Vrtc:e.y}}function zi(e){return{top:re(e["Top "]),left:re(e.Left),right:re(e.Rght),bottom:re(e.Btom)}}function Ui(e){var t;return t={Left:fe(e.left,"bounds.left")},t["Top "]=fe(e.top,"bounds.top"),t.Rght=fe(e.right,"bounds.right"),t.Btom=fe(e.bottom,"bounds.bottom"),t}function Gi(e){var t={enabled:!!e.enab,position:Xt.decode(e.Styl),fillType:xo.decode(e.PntT),blendMode:Ne.decode(e["Md  "]),opacity:oe(e.Opct),size:re(e["Sz  "])};return e.present!==void 0&&(t.present=e.present),e.showInDialog!==void 0&&(t.showInDialog=e.showInDialog),e.overprint!==void 0&&(t.overprint=e.overprint),e["Clr "]&&(t.color=Xe(e["Clr "])),e.Grad&&(t.gradient=uo(e)),e.Ptrn&&(t.pattern=co(e)),t}function Vi(e){var t={};return t.enab=!!e.enabled,e.present!==void 0&&(t.present=!!e.present),e.showInDialog!==void 0&&(t.showInDialog=!!e.showInDialog),t.Styl=Xt.encode(e.position),t.PntT=xo.encode(e.fillType),t["Md  "]=Ne.encode(e.blendMode),t.Opct=Se(e.opacity),t["Sz  "]=fe(e.size,"size"),e.color&&(t["Clr "]=Ye(e.color)),e.gradient&&(t=an(an({},t),ho(e.gradient))),e.pattern&&(t=an(an({},t),po(e.pattern))),e.overprint!==void 0&&(t.overprint=!!e.overprint),t}function ot(e,t,n){for(var r,i,a,o=n?{"Scl ":Be((r=e.scale)!==null&&r!==void 0?r:1),masterFXSwitch:!e.disabled}:{masterFXSwitch:!e.disabled,"Scl ":Be((i=e.scale)!==null&&i!==void 0?i:1)},l=["dropShadow","innerShadow","solidFill","gradientOverlay","stroke"],f=0,s=l;f<s.length;f++){var u=s[f];if(e[u]&&!Array.isArray(e[u]))throw new Error("".concat(u," should be an array"))}var d=function(S){return!!S&&S.length>1&&n},h=function(S){return!!S&&S.length>=1&&(!n||S.length===1)};if(h(e.dropShadow)&&(o.DrSh=Ae(e.dropShadow[0],"dropShadow",t)),d(e.dropShadow)&&(o.dropShadowMulti=e.dropShadow.map(function(S){return Ae(S,"dropShadow",t)})),h(e.innerShadow)&&(o.IrSh=Ae(e.innerShadow[0],"innerShadow",t)),d(e.innerShadow)&&(o.innerShadowMulti=e.innerShadow.map(function(S){return Ae(S,"innerShadow",t)})),e.outerGlow&&(o.OrGl=Ae(e.outerGlow,"outerGlow",t)),d(e.solidFill)&&(o.solidFillMulti=e.solidFill.map(function(S){return Ae(S,"solidFill",t)})),d(e.gradientOverlay)&&(o.gradientFillMulti=e.gradientOverlay.map(function(S){return Ae(S,"gradientOverlay",t)})),d(e.stroke)&&(o.frameFXMulti=e.stroke.map(function(S){return Vi(S)})),e.innerGlow&&(o.IrGl=Ae(e.innerGlow,"innerGlow",t)),e.bevel&&(o.ebbl=Ae(e.bevel,"bevel",t)),h(e.solidFill)&&(o.SoFi=Ae(e.solidFill[0],"solidFill",t)),e.patternOverlay&&(o.patternFill=Ae(e.patternOverlay,"patternOverlay",t)),h(e.gradientOverlay)&&(o.GrFl=Ae(e.gradientOverlay[0],"gradientOverlay",t)),e.satin&&(o.ChFX=Ae(e.satin,"satin",t)),h(e.stroke)&&(o.FrFX=Vi((a=e.stroke)===null||a===void 0?void 0:a[0])),n){o.numModifyingFX=0;for(var p=0,y=Object.keys(e);p<y.length;p++){var u=y[p],v=e[u];if(Array.isArray(v))for(var F=0,g=v;F<g.length;F++){var b=g[F];b.enabled&&o.numModifyingFX++}else v.enabled&&o.numModifyingFX++}}return o}function lt(e,t){var n={},r=e.masterFXSwitch,i=e.DrSh,a=e.dropShadowMulti,o=e.IrSh,l=e.innerShadowMulti,f=e.OrGl,s=e.IrGl,u=e.ebbl,d=e.SoFi,h=e.solidFillMulti,p=e.patternFill,y=e.GrFl,v=e.gradientFillMulti,F=e.ChFX,g=e.FrFX,b=e.frameFXMulti;e.numModifyingFX;var S=tf(e,["masterFXSwitch","DrSh","dropShadowMulti","IrSh","innerShadowMulti","OrGl","IrGl","ebbl","SoFi","solidFillMulti","patternFill","GrFl","gradientFillMulti","ChFX","FrFX","frameFXMulti","numModifyingFX"]);return r||(n.disabled=!0),e["Scl "]&&(n.scale=oe(e["Scl "])),i&&(n.dropShadow=[we(i,t)]),a&&(n.dropShadow=a.map(function(m){return we(m,t)})),o&&(n.innerShadow=[we(o,t)]),l&&(n.innerShadow=l.map(function(m){return we(m,t)})),f&&(n.outerGlow=we(f,t)),s&&(n.innerGlow=we(s,t)),u&&(n.bevel=we(u,t)),d&&(n.solidFill=[we(d,t)]),h&&(n.solidFill=h.map(function(m){return we(m,t)})),p&&(n.patternOverlay=we(p,t)),y&&(n.gradientOverlay=[we(y,t)]),v&&(n.gradientOverlay=v.map(function(m){return we(m,t)})),F&&(n.satin=we(F,t)),g&&(n.stroke=[Gi(g)]),b&&(n.stroke=b.map(function(m){return Gi(m)})),t&&Object.keys(S).length>1&&console.log("Unhandled effect keys:",S),n}function ji(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=i.time,o=a.denominator,l=a.numerator,f=i.selected,s=i.animKey,u={numerator:l,denominator:o},d=So.decode(i.animInterpStyle);switch(s.Type){case"keyType.Opct":n.push({interpolation:d,time:u,selected:f,type:"opacity",value:oe(s.Opct)});break;case"keyType.Pstn":n.push({interpolation:d,time:u,selected:f,type:"position",x:s.Hrzn,y:s.Vrtc});break;case"keyType.Trnf":n.push({interpolation:d,time:u,selected:f,type:"transform",scale:Qn(s["Scl "]),skew:Qn(s.Skew),rotation:s.rotation,translation:Qn(s.translation)});break;case"keyType.sheetStyle":{var h={interpolation:d,time:u,selected:f,type:"style"};s.sheetStyle.Lefx&&(h.style=lt(s.sheetStyle.Lefx,t)),n.push(h);break}case"keyType.globalLighting":{n.push({interpolation:d,time:u,selected:f,type:"globalLighting",globalAngle:s.gblA,globalAltitude:s.globalAltitude});break}default:throw new Error("Unsupported keyType value")}}return n}function Hi(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r.time,a=r.selected,o=a===void 0?!1:a,l=r.interpolation,f=So.encode(l),s=void 0;switch(r.type){case"opacity":s={Type:"keyType.Opct",Opct:Se(r.value)};break;case"position":s={Type:"keyType.Pstn",Hrzn:r.x,Vrtc:r.y};break;case"transform":s={Type:"keyType.Trnf","Scl ":et(r.scale),Skew:et(r.skew),rotation:r.rotation,translation:et(r.translation)};break;case"style":s={Type:"keyType.sheetStyle",sheetStyle:{Vrsn:1,blendOptions:{}}},r.style&&(s.sheetStyle={Vrsn:1,Lefx:ot(r.style,!1,!1),blendOptions:{}});break;case"globalLighting":{s={Type:"keyType.globalLighting",gblA:r.globalAngle,globalAltitude:r.globalAltitude};break}default:throw new Error("Unsupported keyType value")}t.push({Vrsn:1,animInterpStyle:f,time:i,animKey:s,selected:o})}return t}function oo(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a={type:Fo.decode(i.trackID),enabled:i.enab,keys:ji(i.keyList,t)};i.effectParams&&(a.effectParams={fillCanvas:i.effectParams.fillCanvas,zoomOrigin:i.effectParams.zoomOrigin,keys:ji(i.effectParams.keyList,t)}),n.push(a)}return n}function lo(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(an(an({trackID:Fo.encode(r.type),Vrsn:1,enab:!!r.enabled,Effc:!!r.effectParams},r.effectParams?{effectParams:{keyList:Hi(r.keys),fillCanvas:r.effectParams.fillCanvas,zoomOrigin:r.effectParams.zoomOrigin}}:{}),{keyList:Hi(r.keys)}))}return t}function we(e,t){for(var n={},r=0,i=Object.keys(e);r<i.length;r++){var a=i[r],o=e[a];switch(a){case"enab":n.enabled=!!o;break;case"uglg":n.useGlobalLight=!!o;break;case"AntA":n.antialiased=!!o;break;case"Algn":n.align=!!o;break;case"Dthr":n.dither=!!o;break;case"Invr":n.invert=!!o;break;case"Rvrs":n.reverse=!!o;break;case"Clr ":n.color=Xe(o);break;case"hglC":n.highlightColor=Xe(o);break;case"sdwC":n.shadowColor=Xe(o);break;case"Styl":n.position=Xt.decode(o);break;case"Md  ":n.blendMode=Ne.decode(o);break;case"hglM":n.highlightBlendMode=Ne.decode(o);break;case"sdwM":n.shadowBlendMode=Ne.decode(o);break;case"bvlS":n.style=vo.decode(o);break;case"bvlD":n.direction=go.decode(o);break;case"bvlT":n.technique=mo.decode(o);break;case"GlwT":n.technique=bo.decode(o);break;case"glwS":n.source=yo.decode(o);break;case"Type":n.type=Wt.decode(o);break;case"gs99":n.interpolationMethod=Nn.decode(o);break;case"Opct":n.opacity=oe(o);break;case"hglO":n.highlightOpacity=oe(o);break;case"sdwO":n.shadowOpacity=oe(o);break;case"lagl":n.angle=Rt(o);break;case"Angl":n.angle=Rt(o);break;case"Lald":n.altitude=Rt(o);break;case"Sftn":n.soften=re(o);break;case"srgR":n.strength=oe(o);break;case"blur":n.size=re(o);break;case"Nose":n.noise=oe(o);break;case"Inpr":n.range=oe(o);break;case"Ckmt":n.choke=re(o);break;case"ShdN":n.jitter=oe(o);break;case"Dstn":n.distance=re(o);break;case"Scl ":n.scale=oe(o);break;case"Ptrn":n.pattern={name:o["Nm  "],id:o.Idnt};break;case"phase":n.phase={x:o.Hrzn,y:o.Vrtc};break;case"Ofst":n.offset={x:oe(o.Hrzn),y:oe(o.Vrtc)};break;case"MpgS":case"TrnS":n.contour={name:o["Nm  "],curve:o["Crv "].map(function(l){return{x:l.Hrzn,y:l.Vrtc}})};break;case"Grad":n.gradient=so(o);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":n[a]=o;break;case"_name":case"_classID":break;default:t&&console.log("Invalid effect key: '".concat(a,"', value:"),o)}}return n}function Ae(e,t,n){var r={enab:!1};t==="dropShadow"&&(r.TrnS={"Nm  ":"","Crv ":[]});for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],l=o,f=e[l];switch(l){case"enabled":r.enab=!!f;break;case"useGlobalLight":r.uglg=!!f;break;case"antialiased":r.AntA=!!f;break;case"align":r.Algn=!!f;break;case"dither":r.Dthr=!!f;break;case"invert":r.Invr=!!f;break;case"reverse":r.Rvrs=!!f;break;case"color":r["Clr "]=Ye(f);break;case"highlightColor":r.hglC=Ye(f);break;case"shadowColor":r.sdwC=Ye(f);break;case"position":r.Styl=Xt.encode(f);break;case"blendMode":r["Md  "]=Ne.encode(f);break;case"highlightBlendMode":r.hglM=Ne.encode(f);break;case"shadowBlendMode":r.sdwM=Ne.encode(f);break;case"style":r.bvlS=vo.encode(f);break;case"direction":r.bvlD=go.encode(f);break;case"technique":t==="bevel"?r.bvlT=mo.encode(f):r.GlwT=bo.encode(f);break;case"source":r.glwS=yo.encode(f);break;case"type":r.Type=Wt.encode(f);break;case"interpolationMethod":r.gs99=Nn.encode(f);break;case"opacity":r.Opct=Se(f);break;case"highlightOpacity":r.hglO=Se(f);break;case"shadowOpacity":r.sdwO=Se(f);break;case"angle":t==="gradientOverlay"||t==="patternFill"?r.Angl=nt(f):r.lagl=nt(f);break;case"altitude":r.Lald=nt(f);break;case"soften":r.Sftn=fe(f,l);break;case"strength":r.srgR=Se(f);break;case"size":r.blur=fe(f,l);break;case"noise":r.Nose=Se(f);break;case"range":r.Inpr=Se(f);break;case"choke":r.Ckmt=fe(f,l);break;case"jitter":r.ShdN=Se(f);break;case"distance":r.Dstn=fe(f,l);break;case"scale":r["Scl "]=Se(f);break;case"pattern":r.Ptrn={"Nm  ":f.name,Idnt:f.id};break;case"phase":r.phase={Hrzn:f.x,Vrtc:f.y};break;case"offset":r.Ofst={Hrzn:Se(f.x),Vrtc:Se(f.y)};break;case"contour":{r[t==="satin"?"MpgS":"TrnS"]={"Nm  ":f.name,"Crv ":f.curve.map(function(s){return{Hrzn:s.x,Vrtc:s.y}})};break}case"gradient":r.Grad=fo(f);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":r[l]=f;break;default:n&&console.log("Invalid effect key: '".concat(l,"', value:"),f)}}return r}function so(e){if(e.GrdF==="GrdF.CstS"){var t=e.Intr||4096;return{type:"solid",name:e["Nm  "],smoothness:e.Intr/4096,colorStops:e.Clrs.map(function(n){return{color:Xe(n["Clr "]),location:n.Lctn/t,midpoint:n.Mdpn/100}}),opacityStops:e.Trns.map(function(n){return{opacity:oe(n.Opct),location:n.Lctn/t,midpoint:n.Mdpn/100}})}}else return{type:"noise",name:e["Nm  "],roughness:e.Smth/4096,colorModel:zt.decode(e.ClrS),randomSeed:e.RndS,restrictColors:!!e.VctC,addTransparency:!!e.ShTr,min:e["Mnm "].map(function(n){return n/100}),max:e["Mxm "].map(function(n){return n/100})}}function fo(e){var t,n;if(e.type==="solid"){var r=Math.round(((t=e.smoothness)!==null&&t!==void 0?t:1)*4096);return{"Nm  ":e.name||"",GrdF:"GrdF.CstS",Intr:r,Clrs:e.colorStops.map(function(i){var a;return{"Clr ":Ye(i.color),Type:"Clry.UsrS",Lctn:Math.round(i.location*r),Mdpn:Math.round(((a=i.midpoint)!==null&&a!==void 0?a:.5)*100)}}),Trns:e.opacityStops.map(function(i){var a;return{Opct:Se(i.opacity),Lctn:Math.round(i.location*r),Mdpn:Math.round(((a=i.midpoint)!==null&&a!==void 0?a:.5)*100)}})}}else return{GrdF:"GrdF.ClNs","Nm  ":e.name||"",ShTr:!!e.addTransparency,VctC:!!e.restrictColors,ClrS:zt.encode(e.colorModel),RndS:e.randomSeed||0,Smth:Math.round(((n=e.roughness)!==null&&n!==void 0?n:1)*4096),"Mnm ":(e.min||[0,0,0,0]).map(function(i){return i*100}),"Mxm ":(e.max||[1,1,1,1]).map(function(i){return i*100})}}function uo(e){var t=so(e.Grad);return t.style=Wt.decode(e.Type),e.Dthr!==void 0&&(t.dither=e.Dthr),e.gradientsInterpolationMethod!==void 0&&(t.interpolationMethod=Nn.decode(e.gradientsInterpolationMethod)),e.Rvrs!==void 0&&(t.reverse=e.Rvrs),e.Angl!==void 0&&(t.angle=Rt(e.Angl)),e["Scl "]!==void 0&&(t.scale=oe(e["Scl "])),e.Algn!==void 0&&(t.align=e.Algn),e.Ofst!==void 0&&(t.offset={x:oe(e.Ofst.Hrzn),y:oe(e.Ofst.Vrtc)}),t}function co(e){var t={name:e.Ptrn["Nm  "],id:e.Ptrn.Idnt};return e.Lnkd!==void 0&&(t.linked=e.Lnkd),e.phase!==void 0&&(t.phase={x:e.phase.Hrzn,y:e.phase.Vrtc}),t}function st(e){if("Grad"in e)return uo(e);if("Ptrn"in e)return an({type:"pattern"},co(e));if("Clr "in e)return{type:"color",color:Xe(e["Clr "])};throw new Error("Invalid vector content")}function ho(e){var t={};return e.dither!==void 0&&(t.Dthr=e.dither),e.interpolationMethod!==void 0&&(t.gradientsInterpolationMethod=Nn.encode(e.interpolationMethod)),e.reverse!==void 0&&(t.Rvrs=e.reverse),e.angle!==void 0&&(t.Angl=nt(e.angle)),t.Type=Wt.encode(e.style),e.align!==void 0&&(t.Algn=e.align),e.scale!==void 0&&(t["Scl "]=Se(e.scale)),e.offset&&(t.Ofst={Hrzn:Se(e.offset.x),Vrtc:Se(e.offset.y)}),t.Grad=fo(e),t}function po(e){var t={Ptrn:{"Nm  ":e.name||"",Idnt:e.id||""}};return e.linked!==void 0&&(t.Lnkd=!!e.linked),e.phase!==void 0&&(t.phase={Hrzn:e.phase.x,Vrtc:e.phase.y}),t}function ft(e){return e.type==="color"?{key:"SoCo",descriptor:{"Clr ":Ye(e.color)}}:e.type==="pattern"?{key:"PtFl",descriptor:po(e)}:{key:"GdFl",descriptor:ho(e)}}function Xe(e){if("H   "in e)return{h:uf(e["H   "]),s:e.Strt,b:e.Brgh};if("Rd  "in e)return{r:e["Rd  "],g:e["Grn "],b:e["Bl  "]};if("Cyn "in e)return{c:e["Cyn "],m:e.Mgnt,y:e["Ylw "],k:e.Blck};if("Gry "in e)return{k:e["Gry "]};if("Lmnc"in e)return{l:e.Lmnc,a:e["A   "],b:e["B   "]};if("redFloat"in e)return{fr:e.redFloat,fg:e.greenFloat,fb:e.blueFloat};throw new Error("Unsupported color descriptor")}function Ye(e){if(e){if("r"in e)return{_name:"",_classID:"RGBC","Rd  ":e.r||0,"Grn ":e.g||0,"Bl  ":e.b||0};if("fr"in e)return{_name:"",_classID:"RGBC",redFloat:e.fr,greenFloat:e.fg,blueFloat:e.fb};if("h"in e)return{_name:"",_classID:"HSBC","H   ":nt(e.h*360),Strt:e.s||0,Brgh:e.b||0};if("c"in e)return{_name:"",_classID:"CMYC","Cyn ":e.c||0,Mgnt:e.m||0,"Ylw ":e.y||0,Blck:e.k||0};if("l"in e)return{_name:"",_classID:"LABC",Lmnc:e.l||0,"A   ":e.a||0,"B   ":e.b||0};if("k"in e)return{_name:"",_classID:"GRYC","Gry ":e.k};throw new Error("Invalid color value")}else return{_name:"",_classID:"RGBC","Rd  ":0,"Grn ":0,"Bl  ":0}}function Rt(e){if(e===void 0)return 0;if(e.units!=="Angle")throw new Error("Invalid units: ".concat(e.units));return e.value}function oe(e){if(e===void 0)return 1;if(e.units!=="Percent")throw new Error("Invalid units: ".concat(e.units));return e.value/100}function uf(e){if(e===void 0)return 1;if(e.units==="Percent")return e.value/100;if(e.units==="Angle")return e.value/360;throw new Error("Invalid units: ".concat(e.units))}function re(e){var t=e.units,n=e.value;if(t!=="Pixels"&&t!=="Millimeters"&&t!=="Points"&&t!=="None"&&t!=="Picas"&&t!=="Inches"&&t!=="Centimeters"&&t!=="Density")throw new Error("Invalid units: ".concat(JSON.stringify({units:t,value:n})));return{value:n,units:t}}function hn(e,t){return t===void 0&&(t="Pixels"),typeof e=="number"?{value:e,units:t}:re(e)}function nt(e){return{units:"Angle",value:e||0}}function Se(e){return{units:"Percent",value:Math.round((e||0)*100)}}function Be(e){return{units:"Percent",value:(e||0)*100}}function fe(e,t){if(e==null)return{units:"Pixels",value:0};if(typeof e!="object")throw new Error("Invalid value: ".concat(JSON.stringify(e)," (key: ").concat(t,") (should have value and units)"));var n=e.units,r=e.value;if(typeof r!="number")throw new Error("Invalid value in ".concat(JSON.stringify(e)," (key: ").concat(t,")"));if(n!=="Pixels"&&n!=="Millimeters"&&n!=="Points"&&n!=="None"&&n!=="Picas"&&n!=="Inches"&&n!=="Centimeters"&&n!=="Density")throw new Error("Invalid units in ".concat(JSON.stringify(e)," (key: ").concat(t,")"));return{units:n,value:r}}function Pe(e){var t=e.numerator,n=e.denominator;return{numerator:t,denominator:n}}var Wi=z("textGridding","none",{none:"None",round:"Rnd "}),tt=z("Ornt","horizontal",{horizontal:"Hrzn",vertical:"Vrtc"}),Xi=z("Annt","sharp",{none:"Anno",sharp:"antiAliasSharp",crisp:"AnCr",strong:"AnSt",smooth:"AnSm",platform:"antiAliasPlatformGray",platformLCD:"antiAliasPlatformLCD"}),Dr=z("warpStyle","none",{none:"warpNone",arc:"warpArc",arcLower:"warpArcLower",arcUpper:"warpArcUpper",arch:"warpArch",bulge:"warpBulge",shellLower:"warpShellLower",shellUpper:"warpShellUpper",flag:"warpFlag",wave:"warpWave",fish:"warpFish",rise:"warpRise",fisheye:"warpFisheye",inflate:"warpInflate",squeeze:"warpSqueeze",twist:"warpTwist",cylinder:"warpCylinder",custom:"warpCustom"}),Ne=z("BlnM","normal",{normal:"Nrml",dissolve:"Dslv",darken:"Drkn",multiply:"Mltp","color burn":"CBrn","linear burn":"linearBurn","darker color":"darkerColor",lighten:"Lghn",screen:"Scrn","color dodge":"CDdg","linear dodge":"linearDodge","lighter color":"lighterColor",overlay:"Ovrl","soft light":"SftL","hard light":"HrdL","vivid light":"vividLight","linear light":"linearLight","pin light":"pinLight","hard mix":"hardMix",difference:"Dfrn",exclusion:"Xclu",subtract:"blendSubtraction",divide:"blendDivide",hue:"H   ",saturation:"Strt",color:"Clr ",luminosity:"Lmns","linear height":"linearHeight",height:"Hght",subtraction:"Sbtr"}),vo=z("BESl","inner bevel",{"inner bevel":"InrB","outer bevel":"OtrB",emboss:"Embs","pillow emboss":"PlEb","stroke emboss":"strokeEmboss"}),mo=z("bvlT","smooth",{smooth:"SfBL","chisel hard":"PrBL","chisel soft":"Slmt"}),go=z("BESs","up",{up:"In  ",down:"Out "}),bo=z("BETE","softer",{softer:"SfBL",precise:"PrBL"}),yo=z("IGSr","edge",{edge:"SrcE",center:"SrcC"}),Wt=z("GrdT","linear",{linear:"Lnr ",radial:"Rdl ",angle:"Angl",reflected:"Rflc",diamond:"Dmnd"}),So=z("animInterpStyle","linear",{linear:"Lnr ",hold:"hold"}),Fo=z("stdTrackID","opacity",{opacity:"opacityTrack",style:"styleTrack",sheetTransform:"sheetTransformTrack",sheetPosition:"sheetPositionTrack",globalLighting:"globalLightingTrack"}),Nn=z("gradientInterpolationMethodType","perceptual",{perceptual:"Perc",linear:"Lnr ",classic:"Gcls",smooth:"Smoo"}),zt=z("ClrS","rgb",{rgb:"RGBC",hsb:"HSBl",lab:"LbCl",hsl:"HSLC"}),Xt=z("FStl","outside",{outside:"OutF",center:"CtrF",inside:"InsF"}),xo=z("FrFl","color",{color:"SClr",gradient:"GrFl",pattern:"Ptrn"}),Yi=z("ESliceType","image",{image:"Img ",noImage:"noImage"}),Zi=z("ESliceHorzAlign","default",{default:"default"}),qi=z("ESliceVertAlign","default",{default:"default"}),Ki=z("ESliceOrigin","userGenerated",{userGenerated:"userGenerated",autoGenerated:"autoGenerated",layer:"layer"}),$i=z("ESliceBGColorType","none",{none:"None",matte:"matte",color:"Clr "}),Ji=z("strokeStyleLineCapType","butt",{butt:"strokeStyleButtCap",round:"strokeStyleRoundCap",square:"strokeStyleSquareCap"}),Qi=z("strokeStyleLineJoinType","miter",{miter:"strokeStyleMiterJoin",round:"strokeStyleRoundJoin",bevel:"strokeStyleBevelJoin"}),ea=z("strokeStyleLineAlignment","inside",{inside:"strokeStyleAlignInside",center:"strokeStyleAlignCenter",outside:"strokeStyleAlignOutside"}),ko=z("BlrM","ispinmage",{spin:"Spn ",zoom:"Zm  "}),Co=z("BlrQ","good",{draft:"Drft",good:"Gd  ",best:"Bst "}),Io=z("SmBM","normal",{normal:"SBMN","edge only":"SBME","overlay edge":"SBMO"}),Po=z("SmBQ","medium",{low:"SBQL",medium:"SBQM",high:"SBQH"}),Eo=z("DspM","stretch to fit",{"stretch to fit":"StrF",tile:"Tile"}),Mn=z("UndA","repeat edge pixels",{"wrap around":"WrpA","repeat edge pixels":"RptE"}),wo=z("Cnvr","rectangular to polar",{"rectangular to polar":"RctP","polar to rectangular":"PlrR"}),Ao=z("RplS","medium",{small:"Sml ",medium:"Mdm ",large:"Lrg "}),Do=z("SphM","normal",{normal:"Nrml","horizontal only":"HrzO","vertical only":"VrtO"}),Lo=z("Wvtp","sine",{sine:"WvSn",triangle:"WvTr",square:"WvSq"}),To=z("ZZTy","pond ripples",{"around center":"ArnC","out from center":"OtFr","pond ripples":"PndR"}),Oo=z("Dstr","uniform",{uniform:"Unfr",gaussian:"Gsn "}),rt=z("Chnl","composite",{red:"Rd  ",green:"Grn ",blue:"Bl  ",composite:"Cmps"}),Mo=z("MztT","fine dots",{"fine dots":"FnDt","medium dots":"MdmD","grainy dots":"GrnD","coarse dots":"CrsD","short lines":"ShrL","medium lines":"MdmL","long lines":"LngL","short strokes":"ShSt","medium strokes":"MdmS","long strokes":"LngS"}),Ro=z("Lns ","50-300mm zoom",{"50-300mm zoom":"Zm  ","32mm prime":"Nkn ","105mm prime":"Nkn1","movie prime":"PnVs"}),Bo=z("blurType","gaussian blur",{"gaussian blur":"GsnB","lens blur":"lensBlur","motion blur":"MtnB"}),_o=z("DfsM","normal",{normal:"Nrml","darken only":"DrkO","lighten only":"LghO",anisotropic:"anisotropic"}),No=z("ExtT","blocks",{blocks:"Blks",pyramids:"Pyrm"}),zo=z("ExtR","random",{random:"Rndm","level-based":"LvlB"}),Uo=z("FlCl","background color",{"background color":"FlBc","foreground color":"FlFr","inverse image":"FlIn","unaltered image":"FlSm"}),Go=z("CntE","upper",{lower:"Lwr ",upper:"Upr "}),Vo=z("WndM","wind",{wind:"Wnd ",blast:"Blst",stagger:"Stgr"}),jo=z("Drct","from the right",{left:"Left",right:"Rght"}),Ho=z("IntE","odd lines",{"odd lines":"ElmO","even lines":"ElmE"}),Wo=z("IntC","interpolation",{duplication:"CrtD",interpolation:"CrtI"}),Xo=z("FlMd","wrap around",{"set to transparent":"Bckg","repeat edge pixels":"Rpt ","wrap around":"Wrp "});z("prjM","fisheye",{fisheye:"fisP",perspective:"perP",auto:"auto","full spherical":"fusP"});var Yo=z("presetKindType","presetKindCustom",{custom:"presetKindCustom",default:"presetKindDefault"}),Ln=function(){return Ln=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ln.apply(this,arguments)},Zo={};function ne(e,t,n,r){var i={key:e,has:t,read:n,write:r};Zo[i.key]=i}var kt=[void 0,"PPI","PPCM"],Ct=[void 0,"Inches","Centimeters","Points","Picas","Columns"],na="0123456789abcdef";function ta(e){return e<=57?e-48:e-87}function cf(e,t){return ta(e.charCodeAt(t))<<4|ta(e.charCodeAt(t+1))}function Lr(e,t){var n=ke(e,t);return Ja(n)}function Tr(e,t){var n=$a(t);sn(e,n)}function df(e){for(var t=T(e),n=ke(e,t),r=!1,i=0;i<n.byteLength;i++)if(n[i]&128){r=!0;break}if(r){var a=new TextDecoder("gbk");return a.decode(n)}else return Ja(n)}function hf(e,t){for(var n="",r=0,i=t.codePointAt(r++);i!==void 0;i=t.codePointAt(r++))n+=i>127?"?":String.fromCodePoint(i);var a=$a(n);B(e,a.byteLength),sn(e,a)}ne(1061,function(e){return e.captionDigest!==void 0},function(e,t){for(var n="",r=0;r<16;r++){var i=T(e);n+=na[i>>4],n+=na[i&15]}t.captionDigest=n},function(e,t){for(var n=0;n<16;n++)B(e,cf(t.captionDigest,n*2))});ne(1060,function(e){return e.xmpMetadata!==void 0},function(e,t,n){t.xmpMetadata=Lr(e,n())},function(e,t){Tr(e,t.xmpMetadata)});var It=z("Inte","perceptual",{perceptual:"Img ",saturation:"Grp ","relative colorimetric":"Clrm","absolute colorimetric":"AClr"});ne(1082,function(e){return e.printInformation!==void 0},function(e,t){var n,r,i=K(e);t.printInformation={printerName:i.printerName||"",renderingIntent:It.decode((n=i.Inte)!==null&&n!==void 0?n:"Inte.Img ")};var a=t.printInformation;i.PstS!==void 0&&(a.printerManagesColors=i.PstS),i["Nm  "]!==void 0&&(a.printerProfile=i["Nm  "]),i.MpBl!==void 0&&(a.blackPointCompensation=i.MpBl),i.printSixteenBit!==void 0&&(a.printSixteenBit=i.printSixteenBit),i.hardProof!==void 0&&(a.hardProof=i.hardProof),i.printProofSetup&&("Bltn"in i.printProofSetup?a.proofSetup={builtin:i.printProofSetup.Bltn.split(".")[1]}:a.proofSetup={profile:i.printProofSetup.profile,renderingIntent:It.decode((r=i.printProofSetup.Inte)!==null&&r!==void 0?r:"Inte.Img "),blackPointCompensation:!!i.printProofSetup.MpBl,paperWhite:!!i.printProofSetup.paperWhite})},function(e,t){var n,r,i=t.printInformation,a={};i.printerManagesColors?a.PstS=!0:(i.hardProof!==void 0&&(a.hardProof=!!i.hardProof),a.ClrS="ClrS.RGBC",a["Nm  "]=(n=i.printerProfile)!==null&&n!==void 0?n:"CIE RGB"),a.Inte=It.encode(i.renderingIntent),i.printerManagesColors||(a.MpBl=!!i.blackPointCompensation),a.printSixteenBit=!!i.printSixteenBit,a.printerName=i.printerName||"",i.proofSetup&&"profile"in i.proofSetup?a.printProofSetup={profile:i.proofSetup.profile||"",Inte:It.encode(i.proofSetup.renderingIntent),MpBl:!!i.proofSetup.blackPointCompensation,paperWhite:!!i.proofSetup.paperWhite}:a.printProofSetup={Bltn:!((r=i.proofSetup)===null||r===void 0)&&r.builtin?"builtinProof.".concat(i.proofSetup.builtin):"builtinProof.proofCMYK"},$(e,"","printOutput",a)});ne(1005,function(e){return e.resolutionInfo!==void 0},function(e,t){var n=De(e),r=E(e),i=E(e),a=De(e),o=E(e),l=E(e);t.resolutionInfo={horizontalResolution:n,horizontalResolutionUnit:kt[r]||"PPI",widthUnit:Ct[i]||"Inches",verticalResolution:a,verticalResolutionUnit:kt[o]||"PPI",heightUnit:Ct[l]||"Inches"}},function(e,t){var n=t.resolutionInfo;Te(e,n.horizontalResolution||0),I(e,Math.max(1,kt.indexOf(n.horizontalResolutionUnit))),I(e,Math.max(1,Ct.indexOf(n.widthUnit))),Te(e,n.verticalResolution||0),I(e,Math.max(1,kt.indexOf(n.verticalResolutionUnit))),I(e,Math.max(1,Ct.indexOf(n.heightUnit)))});var ra=["centered","size to fit","user defined"];ne(1062,function(e){return e.printScale!==void 0},function(e,t){t.printScale={style:ra[Q(e)],x:He(e),y:He(e),scale:He(e)}},function(e,t){var n=t.printScale,r=n.style,i=n.x,a=n.y,o=n.scale;te(e,Math.max(0,ra.indexOf(r))),We(e,i||0),We(e,a||0),We(e,o||0)});ne(1006,function(e){return e.alphaChannelNames!==void 0},function(e,t,n){if(t.alphaChannelNames)R(e,n());else for(t.alphaChannelNames=[];n()>0;){var r=df(e);t.alphaChannelNames.push(r)}},function(e,t){for(var n=0,r=t.alphaChannelNames;n<r.length;n++){var i=r[n];hf(e,i)}});ne(1045,function(e){return e.alphaChannelNames!==void 0},function(e,t,n){for(t.alphaChannelNames=[];n()>0;)t.alphaChannelNames.push(xe(e))},function(e,t){for(var n=0,r=t.alphaChannelNames;n<r.length;n++){var i=r[n];Fn(e,i)}});ne(1053,function(e){return e.alphaIdentifiers!==void 0},function(e,t,n){for(t.alphaIdentifiers=[];n()>=4;)t.alphaIdentifiers.push(w(e))},function(e,t){for(var n=0,r=t.alphaIdentifiers;n<r.length;n++){var i=r[n];L(e,i)}});ne(1010,function(e){return e.backgroundColor!==void 0},function(e,t){return t.backgroundColor=ye(e)},function(e,t){return Fe(e,t.backgroundColor)});ne(1037,function(e){return e.globalAngle!==void 0},function(e,t){return t.globalAngle=_(e)},function(e,t){return j(e,t.globalAngle)});ne(1049,function(e){return e.globalAltitude!==void 0},function(e,t){return t.globalAltitude=w(e)},function(e,t){return L(e,t.globalAltitude)});ne(1011,function(e){return e.printFlags!==void 0},function(e,t){t.printFlags={labels:!!T(e),cropMarks:!!T(e),colorBars:!!T(e),registrationMarks:!!T(e),negative:!!T(e),flip:!!T(e),interpolate:!!T(e),caption:!!T(e),printFlags:!!T(e)}},function(e,t){var n=t.printFlags;B(e,n.labels?1:0),B(e,n.cropMarks?1:0),B(e,n.colorBars?1:0),B(e,n.registrationMarks?1:0),B(e,n.negative?1:0),B(e,n.flip?1:0),B(e,n.interpolate?1:0),B(e,n.caption?1:0),B(e,n.printFlags?1:0)});ne(1034,function(e){return e.copyrighted!==void 0},function(e,t){t.copyrighted=!!T(e)},function(e,t){B(e,t.copyrighted?1:0)});ne(1035,function(e){return e.url!==void 0},function(e,t,n){t.url=Yt(e,n())},function(e,t){ru(e,t.url)});ne(1080,function(e){return e.countInformation!==void 0},function(e,t){var n=K(e);t.countInformation=n.countGroupList.map(function(r){return{color:{r:r["Rd  "],g:r["Grn "],b:r["Bl  "]},name:r["Nm  "],size:r["Rds "],fontSize:r.fontSize,visible:r.Vsbl,points:r.countObjectList.map(function(i){return{x:i["X   "],y:i["Y   "]}})}})},function(e,t){var n={Vrsn:1,countGroupList:t.countInformation.map(function(r){return{"Rd  ":r.color.r,"Grn ":r.color.g,"Bl  ":r.color.b,"Nm  ":r.name,"Rds ":r.size,fontSize:r.fontSize,Vsbl:r.visible,countObjectList:r.points.map(function(i){return{"X   ":i.x,"Y   ":i.y}})}})};$(e,"","Cnt ",n)});ne(1024,function(e){return e.layerState!==void 0},function(e,t){return t.layerState=E(e)},function(e,t){return I(e,t.layerState)});ne(1026,function(e){return e.layersGroup!==void 0},function(e,t,n){for(t.layersGroup=[];n()>0;)t.layersGroup.push(E(e))},function(e,t){for(var n=0,r=t.layersGroup;n<r.length;n++){var i=r[n];I(e,i)}});ne(1072,function(e){return e.layerGroupsEnabledId!==void 0},function(e,t,n){for(t.layerGroupsEnabledId=[];n()>0;)t.layerGroupsEnabledId.push(T(e))},function(e,t){for(var n=0,r=t.layerGroupsEnabledId;n<r.length;n++){var i=r[n];B(e,i)}});ne(1069,function(e){return e.layerSelectionIds!==void 0},function(e,t){var n=E(e);for(t.layerSelectionIds=[];n--;)t.layerSelectionIds.push(w(e))},function(e,t){I(e,t.layerSelectionIds.length);for(var n=0,r=t.layerSelectionIds;n<r.length;n++){var i=r[n];L(e,i)}});ne(1032,function(e){return e.gridAndGuidesInformation!==void 0},function(e,t){var n=w(e),r=w(e),i=w(e),a=w(e);if(n!==1)throw new Error("Invalid 1032 resource version: ".concat(n));t.gridAndGuidesInformation={grid:{horizontal:r,vertical:i},guides:[]};for(var o=0;o<a;o++)t.gridAndGuidesInformation.guides.push({location:w(e)/32,direction:T(e)?"horizontal":"vertical"})},function(e,t){var n=t.gridAndGuidesInformation,r=n.grid||{horizontal:18*32,vertical:18*32},i=n.guides||[];L(e,1),L(e,r.horizontal),L(e,r.vertical),L(e,i.length);for(var a=0,o=i;a<o.length;a++){var l=o[a];L(e,l.location*32),B(e,l.direction==="horizontal"?1:0)}});ne(1065,function(e){return e.layerComps!==void 0},function(e,t){var n=K(e,!0);t.layerComps={list:[]};for(var r=0,i=n.list;r<i.length;r++){var a=i[r];t.layerComps.list.push({id:a.compID,name:a["Nm  "],capturedInfo:a.capturedInfo}),"comment"in a&&(t.layerComps.list[t.layerComps.list.length-1].comment=a.comment)}"lastAppliedComp"in n&&(t.layerComps.lastApplied=n.lastAppliedComp)},function(e,t){for(var n=t.layerComps,r={list:[]},i=0,a=n.list;i<a.length;i++){var o=a[i],l={};l._classID="Comp",l["Nm  "]=o.name,"comment"in o&&(l.comment=o.comment),l.compID=o.id,l.capturedInfo=o.capturedInfo,r.list.push(l)}"lastApplied"in n&&(r.lastAppliedComp=n.lastApplied),$(e,"","CompList",r)});var ia=["normal",void 0,void 0,void 0,void 0,void 0,void 0,"multiply","screen",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"difference"];ne(1078,function(e){return e.onionSkins!==void 0},function(e,t){var n=K(e);t.onionSkins={enabled:n.enab,framesBefore:n.numBefore,framesAfter:n.numAfter,frameSpacing:n.Spcn,minOpacity:n.minOpacity/100,maxOpacity:n.maxOpacity/100,blendMode:ia[n.BlnM]||"normal"}},function(e,t){var n=t.onionSkins,r={Vrsn:1,enab:n.enabled,numBefore:n.framesBefore,numAfter:n.framesAfter,Spcn:n.frameSpacing,minOpacity:n.minOpacity*100|0,maxOpacity:n.maxOpacity*100|0,BlnM:Math.max(0,ia.indexOf(n.blendMode))};$(e,"","null",r)});ne(1075,function(e){return e.timelineInformation!==void 0},function(e,t){var n,r,i=K(e);t.timelineInformation={enabled:i.enab,frameStep:Pe(i.frameStep),frameRate:i.frameRate,time:Pe(i.time),duration:Pe(i.duration),workInTime:Pe(i.workInTime),workOutTime:Pe(i.workOutTime),repeats:i.LCnt,hasMotion:i.hasMotion,globalTracks:oo(i.globalTrackList,!!e.logMissingFeatures)},!((r=(n=i.audioClipGroupList)===null||n===void 0?void 0:n.audioClipGroupList)===null||r===void 0)&&r.length&&(t.timelineInformation.audioClipGroups=i.audioClipGroupList.audioClipGroupList.map(function(a){return{id:a.groupID,muted:a.muted,audioClips:a.audioClipList.map(function(o){var l=o.clipID,f=o.timeScope,s=o.muted,u=o.audioLevel,d=o.frameReader;return{id:l,start:Pe(f.Strt),duration:Pe(f.duration),inTime:Pe(f.inTime),outTime:Pe(f.outTime),muted:s,audioLevel:u,frameReader:{type:d.frameReaderType,mediaDescriptor:d.mediaDescriptor,link:{name:d["Lnk "]["Nm  "],fullPath:d["Lnk "].fullPath,relativePath:d["Lnk "].relPath}}}})}}))},function(e,t){var n,r=t.timelineInformation,i={Vrsn:1,enab:r.enabled,frameStep:r.frameStep,frameRate:r.frameRate,time:r.time,duration:r.duration,workInTime:r.workInTime,workOutTime:r.workOutTime,LCnt:r.repeats,globalTrackList:lo(r.globalTracks),audioClipGroupList:{audioClipGroupList:(n=r.audioClipGroups)===null||n===void 0?void 0:n.map(function(a){return{groupID:a.id,muted:a.muted,audioClipList:a.audioClips.map(function(o){return{clipID:o.id,timeScope:{Vrsn:1,Strt:o.start,duration:o.duration,inTime:o.inTime,outTime:o.outTime},frameReader:{frameReaderType:o.frameReader.type,descVersion:1,"Lnk ":{descVersion:1,"Nm  ":o.frameReader.link.name,fullPath:o.frameReader.link.fullPath,relPath:o.frameReader.link.relativePath},mediaDescriptor:o.frameReader.mediaDescriptor},muted:o.muted,audioLevel:o.audioLevel}})}})},hasMotion:r.hasMotion};$(e,"","null",i,"anim")});ne(1076,function(e){return e.sheetDisclosure!==void 0},function(e,t){var n=K(e);t.sheetDisclosure={},n.sheetTimelineOptions&&(t.sheetDisclosure.sheetTimelineOptions=n.sheetTimelineOptions.map(function(r){return{sheetID:r.sheetID,sheetDisclosed:r.sheetDisclosed,lightsDisclosed:r.lightsDisclosed,meshesDisclosed:r.meshesDisclosed,materialsDisclosed:r.materialsDisclosed}}))},function(e,t){var n=t.sheetDisclosure,r={Vrsn:1};n.sheetTimelineOptions&&(r.sheetTimelineOptions=n.sheetTimelineOptions.map(function(i){return{Vrsn:2,sheetID:i.sheetID,sheetDisclosed:i.sheetDisclosed,lightsDisclosed:i.lightsDisclosed,meshesDisclosed:i.meshesDisclosed,materialsDisclosed:i.materialsDisclosed}})),$(e,"","null",r)});ne(1054,function(e){return e.urlsList!==void 0},function(e,t){var n=w(e);t.urlsList=[];for(var r=0;r<n;r++){var i=le(e);if(i!=="slic"&&e.throwForMissingFeatures)throw new Error("Unknown long");var a=w(e),o=xe(e);t.urlsList.push({id:a,url:o,ref:"slice"})}},function(e,t){var n=t.urlsList;L(e,n.length);for(var r=0;r<n.length;r++)G(e,"slic"),L(e,n[r].id),Oe(e,n[r].url)});function aa(e){return{"Top ":e.top,Left:e.left,Btom:e.bottom,Rght:e.right}}function oa(e){return{top:e["Top "],left:e.Left,bottom:e.Btom,right:e.Rght}}function Pt(e,t){return e[Math.max(0,Math.min(e.length-1,t))]}var la=["autoGenerated","layer","userGenerated"],sa=["noImage","image"],Et=["default"];ne(1050,function(e){return e.slices?e.slices.length:0},function(e,t){var n=w(e);if(n===6){t.slices||(t.slices=[]);var r=_(e),i=_(e),a=_(e),o=_(e),l=xe(e),f=w(e);t.slices.push({bounds:{top:r,left:i,bottom:a,right:o},groupName:l,slices:[]});for(var s=t.slices[t.slices.length-1].slices,u=0;u<f;u++){var d=w(e),h=w(e),p=Pt(la,w(e)),y=p=="layer"?w(e):0,v=xe(e),F=Pt(sa,w(e)),g=_(e),b=_(e),S=_(e),m=_(e),x=xe(e),P=xe(e),k=xe(e),C=xe(e),O=!!T(e),D=xe(e),M=Pt(Et,w(e)),H=Pt(Et,w(e)),U=T(e),W=T(e),Y=T(e),V=T(e),X=U+W+Y+V===0?"none":U===0?"matte":"color";s.push({id:d,groupId:h,origin:p,associatedLayerId:y,name:v,target:P,message:k,altTag:C,cellTextIsHTML:O,cellText:D,horizontalAlignment:M,verticalAlignment:H,type:F,url:x,bounds:{top:b,left:g,bottom:m,right:S},backgroundColorType:X,backgroundColor:{r:W,g:Y,b:V,a:U}})}var se=K(e);se.slices.forEach(function(he){var Z=s.find(function(me){return he.sliceID==me.id});Z&&(Z.topOutset=he.topOutset,Z.leftOutset=he.leftOutset,Z.bottomOutset=he.bottomOutset,Z.rightOutset=he.rightOutset)})}else if(n===7||n===8){var se=K(e);t.slices||(t.slices=[]),t.slices.push({groupName:se.baseName,bounds:oa(se.bounds),slices:se.slices.map(function(Z){return Ln(Ln({},Z["Nm  "]?{name:Z["Nm  "]}:{}),{id:Z.sliceID,groupId:Z.groupID,associatedLayerId:0,origin:Ki.decode(Z.origin),type:Yi.decode(Z.Type),bounds:oa(Z.bounds),url:Z.url,target:Z.null,message:Z.Msge,altTag:Z.altTag,cellTextIsHTML:Z.cellTextIsHTML,cellText:Z.cellText,horizontalAlignment:Zi.decode(Z.horzAlign),verticalAlignment:qi.decode(Z.vertAlign),backgroundColorType:$i.decode(Z.bgColorType),backgroundColor:Z.bgColor?{r:Z.bgColor["Rd  "],g:Z.bgColor["Grn "],b:Z.bgColor["Bl  "],a:Z.bgColor.alpha}:{r:0,g:0,b:0,a:0},topOutset:Z.topOutset||0,leftOutset:Z.leftOutset||0,bottomOutset:Z.bottomOutset||0,rightOutset:Z.rightOutset||0})})})}else throw new Error("Invalid slices version (".concat(n,")"))},function(e,t,n){var r=t.slices[n],i=r.bounds,a=r.groupName,o=r.slices;L(e,6),j(e,i.top),j(e,i.left),j(e,i.bottom),j(e,i.right),Oe(e,a),L(e,o.length);for(var l=0;l<o.length;l++){var f=o[l],s=f.backgroundColor,u=s.a,d=s.r,h=s.g,p=s.b;f.backgroundColorType==="none"?u=d=h=p=0:f.backgroundColorType==="matte"&&(u=0,d=h=p=255),L(e,f.id),L(e,f.groupId),L(e,la.indexOf(f.origin)),f.origin==="layer"&&L(e,f.associatedLayerId),Oe(e,f.name||""),L(e,sa.indexOf(f.type)),j(e,f.bounds.left),j(e,f.bounds.top),j(e,f.bounds.right),j(e,f.bounds.bottom),Oe(e,f.url),Oe(e,f.target),Oe(e,f.message),Oe(e,f.altTag),B(e,f.cellTextIsHTML?1:0),Oe(e,f.cellText),L(e,Et.indexOf(f.horizontalAlignment)),L(e,Et.indexOf(f.verticalAlignment)),B(e,u),B(e,d),B(e,h),B(e,p)}var y={bounds:aa(i),slices:[]};o.forEach(function(v){var F=Ln(Ln({sliceID:v.id,groupID:v.groupId,origin:Ki.encode(v.origin),Type:Yi.encode(v.type),bounds:aa(v.bounds)},v.name?{"Nm  ":v.name}:{}),{url:v.url,null:v.target,Msge:v.message,altTag:v.altTag,cellTextIsHTML:v.cellTextIsHTML,cellText:v.cellText,horzAlign:Zi.encode(v.horizontalAlignment),vertAlign:qi.encode(v.verticalAlignment),bgColorType:$i.encode(v.backgroundColorType)});if(v.backgroundColorType==="color"){var g=v.backgroundColor,b=g.r,S=g.g,m=g.b,x=g.a;F.bgColor={"Rd  ":b,"Grn ":S,"Bl  ":m,alpha:x}}F.topOutset=v.topOutset||0,F.leftOutset=v.leftOutset||0,F.bottomOutset=v.bottomOutset||0,F.rightOutset=v.rightOutset||0,y.slices.push(F)}),$(e,"","null",y,"slices")});ne(1064,function(e){return e.pixelAspectRatio!==void 0},function(e,t){if(w(e)>2)throw new Error("Invalid pixelAspectRatio version");t.pixelAspectRatio={aspect:ze(e)}},function(e,t){L(e,2),$e(e,t.pixelAspectRatio.aspect)});ne(1041,function(e){return e.iccUntaggedProfile!==void 0},function(e,t){t.iccUntaggedProfile=!!T(e)},function(e,t){B(e,t.iccUntaggedProfile?1:0)});ne(1044,function(e){return e.idsSeedNumber!==void 0},function(e,t){return t.idsSeedNumber=w(e)},function(e,t){return L(e,t.idsSeedNumber)});ne(1036,function(e){return e.thumbnail!==void 0||e.thumbnailRaw!==void 0},function(e,t,n){var r=w(e),i=w(e),a=w(e);w(e),w(e),w(e);var o=E(e),l=E(e);if(r!==1||o!==24||l!==1){e.logMissingFeatures&&e.log("Invalid thumbnail data (format: ".concat(r,", bitsPerPixel: ").concat(o,", planes: ").concat(l,")")),R(e,n());return}var f=n(),s=ke(e,f);e.useRawThumbnail?t.thumbnailRaw={width:i,height:a,data:s}:s.byteLength&&(t.thumbnail=Hs(s))},function(e,t){var n,r=0,i=0,a=new Uint8Array(0);if(t.thumbnailRaw)r=t.thumbnailRaw.width,i=t.thumbnailRaw.height,a=t.thumbnailRaw.data;else try{var o=(n=t.thumbnail.toDataURL("image/jpeg",1))===null||n===void 0?void 0:n.substring(23);o&&(a=Ka(o),r=t.thumbnail.width,i=t.thumbnail.height)}catch{}var l=24,f=Math.floor((r*l+31)/32)*4,s=1,u=f*i*s,d=a.length;L(e,1),L(e,r),L(e,i),L(e,f),L(e,u),L(e,d),I(e,l),I(e,s),sn(e,a)});ne(1057,function(e){return e.versionInfo!==void 0},function(e,t,n){var r=w(e);if(r!==1)throw new Error("Invalid versionInfo version");t.versionInfo={hasRealMergedData:!!T(e),writerName:xe(e),readerName:xe(e),fileVersion:w(e)},R(e,n())},function(e,t){var n=t.versionInfo;L(e,1),B(e,n.hasRealMergedData?1:0),Oe(e,n.writerName),Oe(e,n.readerName),L(e,n.fileVersion)});ne(7e3,function(e){return e.imageReadyVariables!==void 0},function(e,t,n){t.imageReadyVariables=Lr(e,n())},function(e,t){Tr(e,t.imageReadyVariables)});ne(7001,function(e){return e.imageReadyDataSets!==void 0},function(e,t,n){t.imageReadyDataSets=Lr(e,n())},function(e,t){Tr(e,t.imageReadyDataSets)});ne(1088,function(e){return e.pathSelectionState!==void 0},function(e,t,n){var r=K(e);t.pathSelectionState=r.null},function(e,t){var n={null:t.pathSelectionState};$(e,"","null",n)});var fa=z("FrmD","",{auto:"Auto",none:"None",dispose:"Disp"});ne(4e3,function(e){return e.animations!==void 0},function(e,t,n){var r=le(e);if(r==="mani")vn(e,"IRFR"),Me(e,1,function(a){for(var o=function(){vn(e,"8BIM");var l=le(e);Me(e,1,function(f){if(l==="AnDs"){var s=K(e);t.animations={frames:s.FrIn.map(function(d){return{id:d.FrID,delay:(d.FrDl||0)/100,dispose:d.FrDs?fa.decode(d.FrDs):"auto"}}),animations:s.FSts.map(function(d){return{id:d.FsID,frames:d.FsFr,repeats:d.LCnt,activeFrame:d.AFrm||0}})}}else if(l==="Roll"){var u=ke(e,f());e.logDevFeatures&&e.log("#4000 Roll",u)}else e.logMissingFeatures&&e.log("Unhandled subsection in #4000",l)})};a()>0;)o()});else if(r==="mopt"){var i=ke(e,n());e.logDevFeatures&&e.log("#4000 mopt",i)}else e.logMissingFeatures&&e.log("Unhandled key in #4000:",r)},function(e,t){t.animations&&(G(e,"mani"),G(e,"IRFR"),yn(e,1,function(){G(e,"8BIM"),G(e,"AnDs"),yn(e,1,function(){for(var n={FrIn:[],FSts:[]},r=0;r<t.animations.frames.length;r++){var i=t.animations.frames[r],a={FrID:i.id};i.delay&&(a.FrDl=i.delay*100|0),a.FrDs=fa.encode(i.dispose),n.FrIn.push(a)}for(var r=0;r<t.animations.animations.length;r++){var o=t.animations.animations[r],l={FsID:o.id,AFrm:o.activeFrame|0,FsFr:o.frames,LCnt:o.repeats|0};n.FSts.push(l)}$(e,"","null",n)})}))});var pf=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},qo=[0,1,3,2],vf=["bitmap","grayscale","indexed","RGB","CMYK","multichannel","duotone","lab"];function Cr(e){for(var t=e.width*e.height*4,n=0;n<t;n+=4){var r=e.data[n];e.data[n+1]=r,e.data[n+2]=r}}function ua(e,t,n){var r=new DataView(e,t,n);return{view:r,offset:0,strict:!1,debug:!1,large:!1,globalAlpha:!1,log:console.log}}function Ir(e,t){if(e.strict)throw new Error(t);e.debug&&e.log(t)}function T(e){return e.offset+=1,e.view.getUint8(e.offset-1)}function mf(e){return e.view.getUint8(e.offset)}function Q(e){return e.offset+=2,e.view.getInt16(e.offset-2,!1)}function E(e){return e.offset+=2,e.view.getUint16(e.offset-2,!1)}function gf(e){return e.offset+=2,e.view.getUint16(e.offset-2,!0)}function _(e){return e.offset+=4,e.view.getInt32(e.offset-4,!1)}function ca(e){return e.offset+=4,e.view.getInt32(e.offset-4,!0)}function w(e){return e.offset+=4,e.view.getUint32(e.offset-4,!1)}function He(e){return e.offset+=4,e.view.getFloat32(e.offset-4,!1)}function ze(e){return e.offset+=8,e.view.getFloat64(e.offset-8,!1)}function De(e){return _(e)/65536}function Ve(e){return _(e)/(1<<24)}function ke(e,t){var n=e.view.byteOffset+e.offset;if(e.offset+=t,n+t>e.view.buffer.byteLength){if(Ir(e,"Reading bytes exceeding buffer length"),t>100*1024*1024)throw new Error("Reading past end of file");var r=new Uint8Array(t),i=Math.min(t,e.view.byteLength-n);return i>0&&r.set(new Uint8Array(e.view.buffer,n,i)),r}else return new Uint8Array(e.view.buffer,n,t)}function le(e){return Ko(e,4)}function bf(e,t){var n=String.fromCharCode(e.view.getUint8(t))+String.fromCharCode(e.view.getUint8(t+1))+String.fromCharCode(e.view.getUint8(t+2))+String.fromCharCode(e.view.getUint8(t+3));return n=="8BIM"||n=="8B64"}function pn(e,t){for(var n=T(e),r=n?Ko(e,n):"";++n%t;)e.offset++;return r}function xe(e){var t=w(e);return Or(e,t)}function Or(e,t){for(var n="";t--;){var r=E(e);(r||t>0)&&(n+=String.fromCharCode(r))}return n}function yf(e,t){for(var n="";t--;){var r=gf(e);(r||t>0)&&(n+=String.fromCharCode(r))}return n}function Yt(e,t){for(var n="";t--;)n+=String.fromCharCode(T(e));return n}function R(e,t){e.offset+=t}function vn(e,t,n){var r=e.offset,i=le(e);if(i!==t&&i!==n)throw new Error("Invalid signature: '".concat(i,"' at 0x").concat(r.toString(16)))}function Ko(e,t){for(var n=ke(e,t),r="",i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}function Sf(e){return e==="8BIM"||e==="MeSa"||e==="AgHg"||e==="PHUT"||e==="DCSR"}function Ff(e,t){var n;t===void 0&&(t={}),vn(e,"8BPS");var r=E(e);if(r!==1&&r!==2)throw new Error("Invalid PSD file version: ".concat(r));R(e,6);var i=E(e),a=w(e),o=w(e),l=E(e),f=E(e),s=r===1?3e4:3e5;if(o>s||a>s)throw new Error("Invalid size: ".concat(o,"x").concat(a));if(i>16)throw new Error("Invalid channel count: ".concat(i));if(![1,8,16,32].includes(l))throw new Error("Invalid bitsPerChannel: ".concat(l));if(qo.indexOf(f)===-1)throw new Error("Color mode not supported: ".concat((n=vf[f])!==null&&n!==void 0?n:f));var u={width:o,height:a,channels:i,bitsPerChannel:l,colorMode:f};Object.assign(e,t),e.large=r===2,e.globalAlpha=!1,Me(e,1,function(v){if(v()){if(f===2){if(v()!=768)throw new Error("Invalid color palette size");u.palette=[];for(var F=0;F<256;F++)u.palette.push({r:T(e),g:0,b:0});for(var F=0;F<256;F++)u.palette[F].g=T(e);for(var F=0;F<256;F++)u.palette[F].b=T(e)}R(e,v())}});var d={};Me(e,1,function(v){for(var F=function(){$o(e,Sf);var g=E(e);pn(e,2),Me(e,2,function(b){var S=Zo[g],m=g===1036&&!!e.skipThumbnail;if(S&&!m)try{S.read(e,d,b)}catch(x){if(e.throwForMissingFeatures)throw x;R(e,b())}else R(e,b())})};v()>0;)F()}),d.layersGroup,d.layerGroupsEnabledId;var h=pf(d,["layersGroup","layerGroupsEnabledId"]);Object.keys(h)&&(u.imageResources=h),Me(e,1,function(v){if(Me(e,2,function(g){Mr(e,u,d),R(e,g())},void 0,e.large),v()>0){var F=Pf(e);F&&(u.globalLayerMaskInfo=F)}else R(e,v());for(;v()>0;){for(;v()&&mf(e)===0;)R(e,1);v()>=12?Jo(e,u,u,d):R(e,v())}},void 0,e.large);var p=u.children&&u.children.length,y=e.skipCompositeImageData&&(e.skipLayerImageData||p);return y||Af(e,u),u}function Mr(e,t,n){var r,i,a=n.layersGroup,o=a===void 0?[]:a,l=n.layerGroupsEnabledId,f=l===void 0?[]:l,s=Q(e);s<0&&(e.globalAlpha=!0,s=-s);for(var u=[],d=[],h=0;h<s;h++){var p=xf(e,t,n),y=p.layer,v=p.channels;o[h]!==void 0&&(y.linkGroup=o[h]),f[h]!==void 0&&(y.linkGroupEnabled=!!f[h]),u.push(y),d.push(v)}if(!e.skipLayerImageData)for(var h=0;h<s;h++)If(e,t,u[h],d[h]);t.children||(t.children=[]);for(var F=[t],h=u.length-1;h>=0;h--){var g=u[h],b=g.sectionDivider?g.sectionDivider.type:0;b===1||b===2?(g.opened=b===1,g.children=[],!((r=g.sectionDivider)===null||r===void 0)&&r.key&&(g.blendMode=(i=Bn[g.sectionDivider.key])!==null&&i!==void 0?i:g.blendMode),F[F.length-1].children.unshift(g),F.push(g)):b===3?F.pop():F[F.length-1].children.unshift(g)}}function xf(e,t,n){var r={};r.top=_(e),r.left=_(e),r.bottom=_(e),r.right=_(e);for(var i=E(e),a=[],o=0;o<i;o++){var l=Q(e),f=w(e);if(e.large){if(f!==0)throw new Error("Sizes larger than 4GB are not supported");f=w(e)}a.push({id:l,length:f})}vn(e,"8BIM");var s=le(e);if(!Bn[s])throw new Error("Invalid blend mode: '".concat(s,"'"));r.blendMode=Bn[s],r.opacity=T(e)/255,r.clipping=T(e)===1;var u=T(e);return r.transparencyProtected=(u&1)!==0,r.hidden=(u&2)!==0,u&32&&(r.effectsOpen=!0),R(e,1),Me(e,1,function(d){kf(e,r);var h=Cf(e);for(h&&(r.blendingRanges=h),r.name=pn(e,1);d()>4&&!bf(e,e.offset);)e.offset++;for(;d()>=12;)Jo(e,r,t,n);R(e,d())}),{layer:r,channels:a}}function kf(e,t){return Me(e,1,function(n){if(n()){var r={};t.mask=r,r.top=_(e),r.left=_(e),r.bottom=_(e),r.right=_(e),r.defaultColor=T(e);var i=T(e);if(r.positionRelativeToLayer=(i&1)!==0,r.disabled=(i&2)!==0,r.fromVectorData=(i&8)!==0,n()>=18){var a={};t.realMask=a;var o=T(e);a.positionRelativeToLayer=(o&1)!==0,a.disabled=(o&2)!==0,a.fromVectorData=(o&8)!==0,a.defaultColor=T(e),a.top=_(e),a.left=_(e),a.bottom=_(e),a.right=_(e)}if(i&16){var l=T(e);l&1&&(r.userMaskDensity=T(e)/255),l&2&&(r.userMaskFeather=ze(e)),l&4&&(r.vectorMaskDensity=T(e)/255),l&8&&(r.vectorMaskFeather=ze(e))}R(e,n())}})}function wt(e){return[T(e),T(e),T(e),T(e)]}function Cf(e){return Me(e,1,function(t){for(var n=wt(e),r=wt(e),i=[];t()>0;){var a=wt(e),o=wt(e);i.push({sourceRange:a,destRange:o})}return{compositeGrayBlendSource:n,compositeGraphBlendDestinationRange:r,ranges:i}})}function If(e,t,n,r){var i,a,o,l,f=(n.right||0)-(n.left||0),s=(n.bottom||0)-(n.top||0),u=t.colorMode===4,d;if(f&&s)if(u){if(t.bitsPerChannel!==8)throw new Error("bitsPerChannel Not supproted");d={width:f,height:s,data:new Uint8ClampedArray(f*s*5)};for(var h=4;h<d.data.byteLength;h+=5)d.data[h]=255}else d=Pr(f,s,(i=t.bitsPerChannel)!==null&&i!==void 0?i:8),Fr(d);for(var p=0,y=r;p<y.length;p++){var v=y[p];if(v.length!==0){if(v.length<2)throw new Error("Invalid channel length");var F=e.offset,g=E(e);if(g>3&&(e.offset-=1,g=E(e)),g>3&&(e.offset-=3,g=E(e)),g>3)throw new Error("Invalid compression: ".concat(g));if(v.id===-2||v.id===-3){var b=v.id===-2?n.mask:n.realMask;if(!b)throw new Error("Missing layer ".concat(v.id===-2?"mask":"real mask"," data"));var S=(b.right||0)-(b.left||0),m=(b.bottom||0)-(b.top||0);if(S<0||m<0||S>3e4||m>3e4)throw new Error("Invalid mask size");if(S&&m){var x=Pr(S,m,(a=t.bitsPerChannel)!==null&&a!==void 0?a:8);Fr(x),e.offset,da(e,v.length,x,g,S,m,(o=t.bitsPerChannel)!==null&&o!==void 0?o:8,0,e.large,4),Cr(x),e.useImageData?b.imageData=x:b.canvas=xr(x)}}else{var P=Vs(v.id,u),k=d;if(P<0&&(k=void 0,e.throwForMissingFeatures))throw new Error("Channel not supported: ".concat(v.id));da(e,v.length,k,g,f,s,(l=t.bitsPerChannel)!==null&&l!==void 0?l:8,P,e.large,u?5:4),e.offset=F+v.length,k&&t.colorMode===1&&Cr(k)}}}if(d){if(u){var C=d;d=Ar(C.width,C.height),Qo(C,d,!1)}e.useImageData?n.imageData=d:n.canvas=xr(d)}}function da(e,t,n,r,i,a,o,l,f,s){if(r===0)nl(e,n,i,a,o,s,l);else if(r===1)qn(e,n,i,a,o,s,[l],f);else if(r===2)ha(e,t,n,i,a,o,s,l,!1);else if(r===3)ha(e,t,n,i,a,o,s,l,!0);else throw new Error("Invalid Compression type: ".concat(r))}function Pf(e){return Me(e,1,function(t){if(t()){var n=E(e),r=E(e),i=E(e),a=E(e),o=E(e),l=E(e)/255,f=T(e);return R(e,t()),{overlayColorSpace:n,colorSpace1:r,colorSpace2:i,colorSpace3:a,colorSpace4:o,opacity:l,kind:f}}})}var Ef=[0,1,-1,2,-2,3,-3,4,-4];function $o(e,t){for(var n=e.offset,r="",i=0,a=Ef;i<a.length;i++){var o=a[i];try{e.offset=n+o,r=le(e)}catch{}if(t(r))break}if(!t(r))throw new Error("Invalid signature: '".concat(r,"' at 0x").concat(n.toString(16)));return r}function wf(e){return e==="8BIM"||e==="8B64"}function Jo(e,t,n,r){var i=$o(e,wf),a=le(e),o=i==="8B64"||e.large&&Us.indexOf(a)!==-1;Me(e,2,function(l){var f=Ut[a];if(f)try{f.read(e,t,l,n,r)}catch(s){if(e.throwForMissingFeatures)throw s}else e.logMissingFeatures&&e.log("Unhandled additional info: ".concat(a)),R(e,l());l()&&(e.logMissingFeatures&&e.log("Unread ".concat(l()," bytes left for additional info: ").concat(a)),R(e,l()))},!1,o)}function Pr(e,t,n,r){if(r===void 0&&(r=4),n===1||n===8)return r===4?Ar(e,t):{width:e,height:t,data:new Uint8ClampedArray(e*t*r)};if(n===16)return{width:e,height:t,data:new Uint16Array(e*t*r)};if(n===32)return{width:e,height:t,data:new Float32Array(e*t*r)};throw new Error("Invalid bitDepth (".concat(n,")"))}function Af(e,t){var n,r=E(e),i=(n=t.bitsPerChannel)!==null&&n!==void 0?n:8;if(qo.indexOf(t.colorMode)===-1)throw new Error("Color mode not supported: ".concat(t.colorMode));if(r!==0&&r!==1)throw new Error("Compression type not supported: ".concat(r));var a=Pr(t.width,t.height,i);switch(Fr(a),t.colorMode){case 0:{if(i!==1)throw new Error("Invalid bitsPerChannel for bitmap color mode");var o=void 0;if(r===0)o=ke(e,Math.ceil(t.width/8)*t.height);else if(r===1)o=new Uint8Array(t.width*t.height),qn(e,{data:o,width:t.width,height:t.height},t.width,t.height,8,1,[0],e.large);else throw new Error("Bitmap compression not supported: ".concat(r));js(o,a.data,t.width,t.height);break}case 3:case 1:{var l=t.colorMode===1?[0]:[0,1,2];if(t.channels&&t.channels>3)for(var f=3;f<t.channels;f++)l.push(f);else e.globalAlpha&&l.push(3);if(r===0)for(var f=0;f<l.length;f++)nl(e,a,t.width,t.height,i,4,l[f]);else r===1&&(e.offset,qn(e,a,t.width,t.height,i,4,l,e.large));t.colorMode===1&&Cr(a);break}case 2:{if(i!==8)throw new Error("bitsPerChannel Not supproted");if(t.channels!==1)throw new Error("Invalid channel count");if(!t.palette)throw new Error("Missing color palette");if(r===0)throw new Error("Not implemented");if(r===1){var s={width:a.width,height:a.height,data:new Uint8Array(a.width*a.height)};qn(e,s,t.width,t.height,i,1,[0],e.large),Df(s,a,t.palette)}else throw new Error("Not implemented");break}case 4:{if(i!==8)throw new Error("bitsPerChannel Not supproted");if(t.channels!==4)throw new Error("Invalid channel count");var l=[0,1,2,3];if(e.globalAlpha&&l.push(4),r===0)throw new Error("Not implemented");if(r===1){var u={width:a.width,height:a.height,data:new Uint8Array(a.width*a.height*5)};e.offset,qn(e,u,t.width,t.height,i,5,l,e.large),Qo(u,a,!0)}else throw new Error("Not implemented");break}default:throw new Error("Color mode not supported: ".concat(t.colorMode))}if(e.globalAlpha){if(t.bitsPerChannel!==8)throw new Error("bitsPerChannel Not supproted");for(var d=a.data,h=a.width*a.height*4,f=0;f<h;f+=4){var p=d[f+3];if(p!=0&&p!=255){var y=p/255,v=1/y,F=255*(1-v);d[f+0]=d[f+0]*v+F,d[f+1]=d[f+1]*v+F,d[f+2]=d[f+2]*v+F}}}e.useImageData?t.imageData=a:t.canvas=xr(a)}function Qo(e,t,n){for(var r=t.width*t.height*4,i=e.data,a=t.data,o=0,l=0;l<r;o+=5,l+=4){var f=i[o],s=i[o+1],u=i[o+2],d=i[o+3];a[l]=(f*d|0)/255|0,a[l+1]=(s*d|0)/255|0,a[l+2]=(u*d|0)/255|0,a[l+3]=n?255-i[o+4]:i[o+4]}}function Df(e,t,n){for(var r=e.width*e.height,i=e.data,a=t.data,o=0,l=0;o<r;o++,l+=4){var f=n[i[o]];a[l+0]=f.r,a[l+1]=f.g,a[l+2]=f.b,a[l+3]=255}}function Lf(e,t){if(e.byteLength/e.length!==t.byteLength/t.length)throw new Error("Invalid array types")}function el(e,t){if(t===8)return e;if(t===16)if(e.byteOffset%2){var n=new Uint16Array(e.byteLength/2);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength).set(e),n}else return new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);else if(t===32)if(e.byteOffset%4){var n=new Float32Array(e.byteLength/4);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength).set(e),n}else return new Float32Array(e.buffer,e.byteOffset,e.byteLength/4);else throw new Error("Invalid bitDepth (".concat(t,")"))}function Er(e,t,n,r){Lf(e.data,t);for(var i=e.width*e.height,a=e.data,o=0,l=n|0;o<i;o++,l=l+r|0)a[l]=t[o]}function nl(e,t,n,r,i,a,o){var l=ke(e,n*r*Math.floor(i/8));if(i==32)for(var f=0;f<l.byteLength;f+=4){var s=l[f+0],u=l[f+1],d=l[f+2],h=l[f+3];l[f+0]=h,l[f+1]=d,l[f+2]=u,l[f+3]=s}var p=el(l,i);t&&o<a&&Er(t,p,o,a)}function sr(e,t,n,r){for(var i=0;i<n;i++)for(var a=i*t,o=1,l=a+1;o<t;o++,l++)e[l]=(e[l-1]+e[l])%r}function ha(e,t,n,r,i,a,o,l,f){var s=ke(e,t),u=Ts(s);if(n&&l<o){var d=el(u,a);if(a===8)f&&sr(u,r,i,256),Er(n,u,l,o);else if(a===16)f&&sr(d,r,i,65536),Er(n,d,l,o);else if(a===32){f&&sr(u,r*4,i,256);for(var h=l,p=new Uint32Array(n.data.buffer,n.data.byteOffset,n.data.length),y=0;y<i;y++)for(var v=r*4*y,F=0;F<r;F++,v++,h+=o){var g=v+r,b=g+r,S=b+r;p[h]=(u[v]<<24|u[g]<<16|u[b]<<8|u[S])>>>0}}else throw new Error("Invalid bitDepth")}}function qn(e,t,n,r,i,a,o,l){var f=t&&t.data,s;if(l){s=new Uint32Array(o.length*r);for(var u=0,d=0;u<o.length;u++)for(var h=0;h<r;h++,d++)s[d]=w(e)}else{s=new Uint16Array(o.length*r);for(var u=0,d=0;u<o.length;u++)for(var h=0;h<r;h++,d++)s[d]=E(e)}if(i!==1&&i!==8)throw new Error("Invalid bit depth (".concat(i,")"));for(var p=a-1|0,y=0,d=0;y<o.length;y++){var v=o[y]|0,F=y>p||v>p;if(!f||F)for(var h=0;h<r;h++,d++)R(e,s[d]);else for(var h=0,g=v|0;h<r;h++,d++)for(var b=s[d],S=ke(e,b),m=0,x=0;m<b;m++){var P=S[m];if(P>128){var k=S[++m];P=256-P|0;for(var C=0;C<=P&&x<n;C=C+1|0,x=x+1|0)f[g]=k,g=g+a|0}else if(P<128)for(var C=0;C<=P&&x<n;C=C+1|0,x=x+1|0)f[g]=S[++m],g=g+a|0}}}function Me(e,t,n,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1);var a=w(e);if(i){if(a!==0)throw new Error("Sizes larger than 4GB are not supported");a=w(e)}if(!(a<=0&&r)){var o=e.offset+a;if(o>e.view.byteLength)throw new Error("Section exceeds file size");var l=n(function(){return o-e.offset});for(e.offset!==o&&(e.offset>o?Ir(e,"Exceeded section limits"):Ir(e,"Unread section data"));a%t;)a++,o++;return e.offset=o,l}}function ye(e){var t=E(e);switch(t){case 0:{var n=E(e)/257,r=E(e)/257,i=E(e)/257;return R(e,2),{r:n,g:r,b:i}}case 1:{var a=E(e)/65535,o=E(e)/65535,i=E(e)/65535;return R(e,2),{h:a,s:o,b:i}}case 2:{var l=E(e)/257,f=E(e)/257,s=E(e)/257,u=E(e)/257;return{c:l,m:f,y:s,k:u}}case 7:{var d=Q(e)/1e4,h=Q(e),p=Q(e),y=h<0?h/12800:h/12700,i=p<0?p/12800:p/12700;return R(e,2),{l:d,a:y,b:i}}case 8:{var u=E(e)*255/1e4;return R(e,6),{k:u}}default:throw new Error("Invalid color space")}}var tl=[void 0,"outer bevel","inner bevel","emboss","pillow emboss","stroke emboss"];function En(e){return vn(e,"8BIM"),Bn[le(e)]||"normal"}function An(e,t){G(e,"8BIM"),G(e,Za[t]||"norm")}function wn(e){return T(e)/255}function Dn(e,t){B(e,Math.round(t*255)|0)}function Tf(e){var t=E(e);if(t!==0)throw new Error("Invalid effects layer version: ".concat(t));for(var n=E(e),r={},i=0;i<n;i++){vn(e,"8BIM");var a=le(e);switch(a){case"cmnS":{var o=w(e),l=w(e),f=!!T(e);if(R(e,2),o!==7||l!==0||!f)throw new Error("Invalid effects common state");break}case"dsdw":case"isdw":{var s=w(e),u=w(e);if(s!==41&&s!==51)throw new Error("Invalid shadow size: ".concat(s));if(u!==0&&u!==2)throw new Error("Invalid shadow version: ".concat(u));var o=De(e);De(e);var d=De(e),h=De(e),p=ye(e),y=En(e),v=!!T(e),F=!!T(e),g=wn(e);s>=51&&ye(e);var b={size:{units:"Pixels",value:o},distance:{units:"Pixels",value:h},angle:d,color:p,blendMode:y,enabled:v,useGlobalLight:F,opacity:g};a==="dsdw"?r.dropShadow=[b]:r.innerShadow=[b];break}case"oglw":{var s=w(e),S=w(e);if(s!==32&&s!==42)throw new Error("Invalid outer glow size: ".concat(s));if(S!==0&&S!==2)throw new Error("Invalid outer glow version: ".concat(S));var o=De(e);De(e);var p=ye(e),y=En(e),v=!!T(e),g=wn(e);s>=42&&ye(e),r.outerGlow={size:{units:"Pixels",value:o},color:p,blendMode:y,enabled:v,opacity:g};break}case"iglw":{var s=w(e),m=w(e);if(s!==32&&s!==43)throw new Error("Invalid inner glow size: ".concat(s));if(m!==0&&m!==2)throw new Error("Invalid inner glow version: ".concat(m));var o=De(e);De(e);var p=ye(e),y=En(e),v=!!T(e),g=wn(e);s>=43&&(T(e),ye(e)),r.innerGlow={size:{units:"Pixels",value:o},color:p,blendMode:y,enabled:v,opacity:g};break}case"bevl":{var s=w(e),x=w(e);if(s!==58&&s!==78)throw new Error("Invalid bevel size: ".concat(s));if(x!==0&&x!==2)throw new Error("Invalid bevel version: ".concat(x));var d=De(e),P=De(e),o=De(e),k=En(e),C=En(e),O=ye(e),D=ye(e),M=tl[T(e)]||"inner bevel",H=wn(e),U=wn(e),v=!!T(e),F=!!T(e),W=T(e)?"down":"up";s>=78&&(ye(e),ye(e)),r.bevel={size:{units:"Pixels",value:o},angle:d,strength:P,highlightBlendMode:k,shadowBlendMode:C,highlightColor:O,shadowColor:D,style:M,highlightOpacity:H,shadowOpacity:U,enabled:v,useGlobalLight:F,direction:W};break}case"sofi":{var o=w(e),Y=w(e);if(o!==34)throw new Error("Invalid effects solid fill info size: ".concat(o));if(Y!==2)throw new Error("Invalid effects solid fill info version: ".concat(Y));var y=En(e),p=ye(e),g=wn(e),v=!!T(e);ye(e),r.solidFill=[{blendMode:y,color:p,opacity:g,enabled:v}];break}default:throw new Error("Invalid effect type: '".concat(a,"'"))}}return r}function pa(e,t){var n;L(e,51),L(e,2),Te(e,t.size&&t.size.value||0),Te(e,0),Te(e,t.angle||0),Te(e,t.distance&&t.distance.value||0),Fe(e,t.color),An(e,t.blendMode),B(e,t.enabled?1:0),B(e,t.useGlobalLight?1:0),Dn(e,(n=t.opacity)!==null&&n!==void 0?n:1),Fe(e,t.color)}function Of(e,t){var n,r,i,a,o,l,f=(n=t.dropShadow)===null||n===void 0?void 0:n[0],s=(r=t.innerShadow)===null||r===void 0?void 0:r[0],u=t.outerGlow,d=t.innerGlow,h=t.bevel,p=(i=t.solidFill)===null||i===void 0?void 0:i[0],y=1;if(f&&y++,s&&y++,u&&y++,d&&y++,h&&y++,p&&y++,I(e,0),I(e,y),G(e,"8BIM"),G(e,"cmnS"),L(e,7),L(e,0),B(e,1),ie(e,2),f&&(G(e,"8BIM"),G(e,"dsdw"),pa(e,f)),s&&(G(e,"8BIM"),G(e,"isdw"),pa(e,s)),u&&(G(e,"8BIM"),G(e,"oglw"),L(e,42),L(e,2),Te(e,((a=u.size)===null||a===void 0?void 0:a.value)||0),Te(e,0),Fe(e,u.color),An(e,u.blendMode),B(e,u.enabled?1:0),Dn(e,u.opacity||0),Fe(e,u.color)),d&&(G(e,"8BIM"),G(e,"iglw"),L(e,43),L(e,2),Te(e,((o=d.size)===null||o===void 0?void 0:o.value)||0),Te(e,0),Fe(e,d.color),An(e,d.blendMode),B(e,d.enabled?1:0),Dn(e,d.opacity||0),B(e,0),Fe(e,d.color)),h){G(e,"8BIM"),G(e,"bevl"),L(e,78),L(e,2),Te(e,h.angle||0),Te(e,h.strength||0),Te(e,((l=h.size)===null||l===void 0?void 0:l.value)||0),An(e,h.highlightBlendMode),An(e,h.shadowBlendMode),Fe(e,h.highlightColor),Fe(e,h.shadowColor);var v=tl.indexOf(h.style);B(e,v<=0?1:v),Dn(e,h.highlightOpacity||0),Dn(e,h.shadowOpacity||0),B(e,h.enabled?1:0),B(e,h.useGlobalLight?1:0),B(e,h.direction==="down"?1:0),Fe(e,h.highlightColor),Fe(e,h.shadowColor)}p&&(G(e,"8BIM"),G(e,"sofi"),L(e,34),L(e,2),An(e,p.blendMode),Fe(e,p.color),Dn(e,p.opacity||0),B(e,p.enabled?1:0),Fe(e,p.color))}function va(e){return e===32||e===10||e===13||e===9}function ma(e){return e>=48&&e<=57||e===46||e===45}function rl(e){var t=0;function n(){for(;t<e.length&&va(e[t]);)t++}function r(){var b=e[t];return t++,b===92&&(b=e[t],t++),b}function i(){var b="";if(e[t]===41)return t++,b;if(e[t]!==254||e[t+1]!==255)throw new Error("Invalid utf-16 BOM");for(t+=2;t<e.length&&e[t]!==41;){var S=r(),m=r(),x=S<<8|m;b+=String.fromCharCode(x)}return t++,b}var a=null,o=[];function l(b){o.length?(f(b),o.push(b)):(o.push(b),a=b)}function f(b){if(!o.length)throw new Error("Invalid data");var S=o[o.length-1];if(typeof S=="string")o[o.length-2][S]=b,u();else if(Array.isArray(S))S.push(b);else throw new Error("Invalid data")}function s(b){o.length||l({});var S=o[o.length-1];if(S&&typeof S=="string")f(b==="nil"?null:"/".concat(b));else if(S&&typeof S=="object")o.push(b);else throw new Error("Invalid data")}function u(){if(!o.length)throw new Error("Invalid data");o.pop()}n();for(var d=e.length;d>0&&e[d-1]===0;)d--;for(;t<d;){var h=t,p=e[h];if(p===60&&e[h+1]===60)t+=2,l({});else if(p===62&&e[h+1]===62)t+=2,u();else if(p===47){t+=1;for(var y=t;t<e.length&&!va(e[t]);)t++;for(var v="",F=y;F<t;F++)v+=String.fromCharCode(e[F]);s(v)}else if(p===40)t+=1,f(i());else if(p===91)t+=1,l([]);else if(p===93)t+=1,u();else if(p===110&&e[h+1]===117&&e[h+2]===108&&e[h+3]===108)t+=4,f(null);else if(p===116&&e[h+1]===114&&e[h+2]===117&&e[h+3]===101)t+=4,f(!0);else if(p===102&&e[h+1]===97&&e[h+2]===108&&e[h+3]===115&&e[h+4]===101)t+=5,f(!1);else if(ma(p)){for(var g="";t<e.length&&ma(e[t]);)g+=String.fromCharCode(e[t]),t++;f(parseFloat(g))}else t+=1,console.log("Invalid token '".concat(String.fromCharCode(p),"' (").concat(p,") at ").concat(t));n()}return a}var Mf=["Axis","XY","Zone","WordSpacing","FirstLineIndent","GlyphSpacing","StartIndent","EndIndent","SpaceBefore","SpaceAfter","LetterSpacing","Values","GridSize","GridLeading","PointBase","BoxBounds","TransformPoint0","TransformPoint1","TransformPoint2","FontSize","Leading","HorizontalScale","VerticalScale","BaselineShift","Tsume","OutlineWidth","AutoLeading"],Rf=["RunLengthArray"];function Bf(e,t){t===void 0&&(t=!1);var n=new Uint8Array(1024),r=0,i=0;function a(b){if(r>=n.length){var S=new Uint8Array(n.length*2);S.set(n),n=S}n[r]=b,r++}function o(b){for(var S=0;S<b.length;S++)a(b.charCodeAt(S))}function l(){if(t)o(" ");else for(var b=0;b<i;b++)o("	")}function f(b,S){l(),o("/".concat(b)),y(S,b,!0),t||o(`
`)}function s(b){return b.toString()}function u(b){return b.toFixed(5).replace(/(\d)0+$/g,"$1").replace(/^0+\.([1-9])/g,".$1").replace(/^-0+\.0(\d)/g,"-.0$1")}function d(b,S){var m=S&&Mf.indexOf(S)!==-1||(b|0)!==b;return m?u(b):s(b)}function h(b){var S=Object.keys(b);return S.indexOf("98")!==-1&&S.unshift.apply(S,S.splice(S.indexOf("99"),1)),S.indexOf("99")!==-1&&S.unshift.apply(S,S.splice(S.indexOf("99"),1)),S}function p(b){(b===40||b===41||b===92)&&a(92),a(b)}function y(b,S,m){m===void 0&&(m=!1);function x(){m?o(" "):l()}if(b===null)x(),o(t?"/nil":"null");else if(typeof b=="number")x(),o(d(b,S));else if(typeof b=="boolean")x(),o(b?"true":"false");else if(typeof b=="string")if(x(),(S==="99"||S==="98")&&b.charAt(0)==="/")o(b);else{o("("),a(254),a(255);for(var P=0;P<b.length;P++){var k=b.charCodeAt(P);p(k>>8&255),p(k&255)}o(")")}else if(Array.isArray(b))if(x(),b.every(function(X){return typeof X=="number"})){o("[");for(var C=Rf.indexOf(S)!==-1,O=0,D=b;O<D.length;O++){var M=D[O];o(" "),o(C?d(M):u(M))}o(" ]")}else{o("["),t||o(`
`);for(var H=0,U=b;H<U.length;H++){var M=U[H];y(M,S),t||o(`
`)}l(),o("]")}else if(typeof b=="object"){m&&!t&&o(`
`),l(),o("<<"),t||o(`
`),i++;for(var W=0,Y=h(b);W<Y.length;W++){var V=Y[W];f(V,b[V])}i--,l(),o(">>")}}if(t){if(typeof e=="object")for(var v=0,F=h(e);v<F.length;v++){var g=F[v];f(g,e[g])}}else o(`

`),y(e);return n.slice(0,r)}var ve=function(){return ve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ve.apply(this,arguments)},il={name:"MyriadPro-Regular",script:0,type:0,synthetic:0},At={justification:"left",firstLineIndent:0,startIndent:0,endIndent:0,spaceBefore:0,spaceAfter:0,autoHyphenate:!0,hyphenatedWordSize:6,preHyphen:2,postHyphen:2,consecutiveHyphens:8,zone:36,wordSpacing:[.8,1,1.33],letterSpacing:[0,0,0],glyphSpacing:[1,1,1],autoLeading:1.2,leadingType:0,hanging:!1,burasagari:!1,kinsokuOrder:0,everyLineComposer:!1},_f={font:il,fontSize:12,fauxBold:!1,fauxItalic:!1,autoLeading:!0,leading:0,horizontalScale:1,verticalScale:1,tracking:0,autoKerning:!0,kerning:0,baselineShift:0,fontCaps:0,fontBaseline:0,underline:!1,strikethrough:!1,ligatures:!0,dLigatures:!1,baselineDirection:2,tsume:0,styleRunAlignment:2,language:0,noBreak:!1,fillColor:{r:0,g:0,b:0},strokeColor:{r:0,g:0,b:0},fillFlag:!0,strokeFlag:!1,fillFirst:!0,yUnderline:1,outlineWidth:1,characterDirection:0,hindiNumbers:!1,kashida:1,diacriticPos:2},Nf={isOn:!1,show:!1,size:18,leading:22,color:{r:0,g:0,b:255},leadingFillColor:{r:0,g:0,b:255},alignLineHeightToGridFlags:!1},Rr=["justification","firstLineIndent","startIndent","endIndent","spaceBefore","spaceAfter","autoHyphenate","hyphenatedWordSize","preHyphen","postHyphen","consecutiveHyphens","zone","wordSpacing","letterSpacing","glyphSpacing","autoLeading","leadingType","hanging","burasagari","kinsokuOrder","everyLineComposer"],Br=["font","fontSize","fauxBold","fauxItalic","autoLeading","leading","horizontalScale","verticalScale","tracking","autoKerning","kerning","baselineShift","fontCaps","fontBaseline","underline","strikethrough","ligatures","dLigatures","baselineDirection","tsume","styleRunAlignment","language","noBreak","fillColor","strokeColor","fillFlag","strokeFlag","fillFirst","yUnderline","outlineWidth","characterDirection","hindiNumbers","kashida","diacriticPos"],al=["none","crisp","strong","smooth","sharp"],ol=["left","right","center","justify-left","justify-right","justify-center","justify-all"];function ll(e){return e.substring(0,1).toUpperCase()+e.substring(1)}function zf(e){var t=e.Values;switch(e.Type){case 0:return{k:t[1]*255};case 1:return t[0]===1?{r:t[1]*255,g:t[2]*255,b:t[3]*255}:{r:t[1]*255,g:t[2]*255,b:t[3]*255,a:t[0]*255};case 2:return{c:t[1]*255,m:t[2]*255,y:t[3]*255,k:t[4]*255};default:throw new Error("Unknown color type in text layer")}}function wr(e){if(e){if("r"in e)return{Type:1,Values:["a"in e?e.a/255:1,e.r/255,e.g/255,e.b/255]};if("c"in e)return{Type:2,Values:[1,e.c/255,e.m/255,e.y/255,e.k/255]};if("k"in e)return{Type:0,Values:[1,e.k/255]};throw new Error("Invalid color type in text layer")}else return{Type:1,Values:[0,0,0,0]}}function ga(e,t){if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ba(e,t){if(!e||!t)return!1;for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(e[i]!==t[i])return!1}for(var a=0,o=Object.keys(t);a<o.length;a++){var i=o[a];if(e[i]!==t[i])return!1}return!0}function Uf(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t.name)return n;return e.push(t),e.length-1}function sl(e,t,n){for(var r={},i=0,a=t;i<a.length;i++){var o=a[i],l=ll(o);e[l]!==void 0&&(o==="justification"?r[o]=ol[e[l]]:o==="font"?r[o]=n[e[l]]:o==="fillColor"||o==="strokeColor"?r[o]=zf(e[l]):r[o]=e[l])}return r}function fl(e,t,n){for(var r,i={},a=0,o=t;a<o.length;a++){var l=o[a],f=ll(l);e[l]!==void 0&&(l==="justification"?i[f]=ol.indexOf((r=e[l])!==null&&r!==void 0?r:"left"):l==="font"?i[f]=Uf(n,e[l]):l==="fillColor"||l==="strokeColor"?i[f]=wr(e[l]):i[f]=e[l])}return i}function Gf(e,t){return sl(e,Rr,t)}function Vf(e,t){return sl(e,Br,t)}function Dt(e,t){return fl(e,Rr,t)}function fr(e,t){return fl(e,Br,t)}function ya(e,t,n){if(t.length){for(var r=function(l){var f=t[0].style[l];if(f!==void 0){var s=!1;Array.isArray(f)?s=t.every(function(v){return ga(v.style[l],f)}):typeof f=="object"?s=t.every(function(v){return ba(v.style[l],f)}):s=t.every(function(v){return v.style[l]===f}),s&&(e[l]=f)}var u=e[l];if(u!==void 0)for(var d=0,h=t;d<h.length;d++){var p=h[d],y=!1;Array.isArray(f)?y=ga(p.style[l],f):typeof f=="object"?y=ba(p.style[l],f):y=p.style[l]===f,y&&delete p.style[l]}},i=0,a=n;i<a.length;i++){var o=a[i];r(o)}t.every(function(l){return Object.keys(l.style).length===0})&&(t.length=0)}}function jf(e){for(var t,n,r,i,a,o,l=e.EngineDict,f=e.ResourceDict,s=f.FontSet.map(function(P){return{name:P.Name,script:P.Script,type:P.FontType,synthetic:P.Synthetic}}),u=l.Editor.Text.replace(/\r/g,`
`),d=0;/\n$/.test(u);)u=u.substring(0,u.length-1),d++;var h={text:u,antiAlias:(t=al[l.AntiAlias])!==null&&t!==void 0?t:"smooth",useFractionalGlyphWidths:!!l.UseFractionalGlyphWidths,superscriptSize:f.SuperscriptSize,superscriptPosition:f.SuperscriptPosition,subscriptSize:f.SubscriptSize,subscriptPosition:f.SubscriptPosition,smallCapSize:f.SmallCapSize},p=(o=(a=(i=(r=(n=l.Rendered)===null||n===void 0?void 0:n.Shapes)===null||r===void 0?void 0:r.Children)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.Cookie)===null||o===void 0?void 0:o.Photoshop;p&&(h.shapeType=p.ShapeType===1?"box":"point",p.PointBase&&(h.pointBase=p.PointBase),p.BoxBounds&&(h.boxBounds=p.BoxBounds));var y=l.ParagraphRun;h.paragraphStyle={},h.paragraphStyleRuns=[];for(var v=0;v<y.RunArray.length;v++){var F=y.RunArray[v],g=y.RunLengthArray[v],b=Gf(F.ParagraphSheet.Properties,s);h.paragraphStyleRuns.push({length:g,style:b})}for(var S=d;h.paragraphStyleRuns.length&&S>0;S--)--h.paragraphStyleRuns[h.paragraphStyleRuns.length-1].length===0&&h.paragraphStyleRuns.pop();ya(h.paragraphStyle,h.paragraphStyleRuns,Rr),h.paragraphStyleRuns.length||delete h.paragraphStyleRuns;var m=l.StyleRun;h.style={},h.styleRuns=[];for(var v=0;v<m.RunArray.length;v++){var x=m.RunLengthArray[v],b=Vf(m.RunArray[v].StyleSheet.StyleSheetData,s);b.font||(b.font=s[0]),h.styleRuns.push({length:x,style:b})}for(var S=d;h.styleRuns.length&&S>0;S--)--h.styleRuns[h.styleRuns.length-1].length===0&&h.styleRuns.pop();return ya(h.style,h.styleRuns,Br),h.styleRuns.length||delete h.styleRuns,h}function Hf(e){var t,n,r,i,a,o,l,f,s,u,d,h,p="".concat((e.text||"").replace(/\r?\n/g,"\r"),"\r"),y=[{name:"AdobeInvisFont",script:0,type:0,synthetic:0}],v=((t=e.style)===null||t===void 0?void 0:t.font)||((r=(n=e.styleRuns)===null||n===void 0?void 0:n.find(function(q){return q.style.font}))===null||r===void 0?void 0:r.style.font)||il,F=[],g=[],b=e.paragraphStyleRuns;if(b&&b.length){for(var S=p.length,m=0,x=b;m<x.length;m++){var P=x[m],k=Math.min(P.length,S);S-=k,k&&(S===1&&P===b[b.length-1]&&(k++,S--),g.push(k),F.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Dt(ve(ve(ve({},At),e.paragraphStyle),P.style),y)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}S&&(g.push(S),F.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Dt(ve(ve({},At),e.paragraphStyle),y)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}else for(var C=0,O=0;C<p.length;C++)p.charCodeAt(C)===13&&(g.push(C-O+1),F.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Dt(ve(ve({},At),e.paragraphStyle),y)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}),O=C+1);for(var D=fr(ve(ve({},_f),{font:v}),y),M=e.styleRuns||[{length:p.length,style:e.style||{}}],H=[],U=[],W=p.length,Y=0,V=M;Y<V.length;Y++){var X=V[Y],k=Math.min(X.length,W);W-=k,k&&(W===1&&X===M[M.length-1]&&(k++,W--),U.push(k),H.push({StyleSheet:{StyleSheetData:fr(ve(ve({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),X.style),y)}}))}W&&M.length&&(U.push(W),H.push({StyleSheet:{StyleSheetData:fr(ve({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),y)}}));var se=ve(ve({},Nf),e.gridInfo),he=e.orientation==="vertical"?2:0,Z=e.orientation==="vertical"?1:0,me=e.shapeType==="box"?1:0,Ge={ShapeType:me};me===0?Ge.PointBase=e.pointBase||[0,0]:Ge.BoxBounds=e.boxBounds||[0,0,0,0],Ge.Base={ShapeType:me,TransformPoint0:[1,0],TransformPoint1:[0,1],TransformPoint2:[0,0]};var un={KinsokuSet:[{Name:"PhotoshopKinsokuHard",NoStart:"?!)]},.:;",NoEnd:"([{",Keep:"",Hanging:".,"},{Name:"PhotoshopKinsokuSoft",NoStart:"",NoEnd:"",Keep:"",Hanging:".,"}],MojiKumiSet:[{InternalName:"Photoshop6MojiKumiSet1"},{InternalName:"Photoshop6MojiKumiSet2"},{InternalName:"Photoshop6MojiKumiSet3"},{InternalName:"Photoshop6MojiKumiSet4"}],TheNormalStyleSheet:0,TheNormalParagraphSheet:0,ParagraphSheetSet:[{Name:"Normal RGB",DefaultStyleSheet:0,Properties:Dt(ve(ve({},At),e.paragraphStyle),y)}],StyleSheetSet:[{Name:"Normal RGB",StyleSheetData:D}],FontSet:y.map(function(q){return{Name:q.name,Script:q.script||0,FontType:q.type||0,Synthetic:q.synthetic||0}}),SuperscriptSize:(i=e.superscriptSize)!==null&&i!==void 0?i:.583,SuperscriptPosition:(a=e.superscriptPosition)!==null&&a!==void 0?a:.333,SubscriptSize:(o=e.subscriptSize)!==null&&o!==void 0?o:.583,SubscriptPosition:(l=e.subscriptPosition)!==null&&l!==void 0?l:.333,SmallCapSize:(f=e.smallCapSize)!==null&&f!==void 0?f:.7},J={EngineDict:{Editor:{Text:p},ParagraphRun:{DefaultRunData:{ParagraphSheet:{DefaultStyleSheet:0,Properties:{}},Adjustments:{Axis:[1,0,1],XY:[0,0]}},RunArray:F,RunLengthArray:g,IsJoinable:1},StyleRun:{DefaultRunData:{StyleSheet:{StyleSheetData:{}}},RunArray:H,RunLengthArray:U,IsJoinable:2},GridInfo:{GridIsOn:!!se.isOn,ShowGrid:!!se.show,GridSize:(s=se.size)!==null&&s!==void 0?s:18,GridLeading:(u=se.leading)!==null&&u!==void 0?u:22,GridColor:wr(se.color),GridLeadingFillColor:wr(se.color),AlignLineHeightToGridFlags:!!se.alignLineHeightToGridFlags},AntiAlias:al.indexOf((d=e.antiAlias)!==null&&d!==void 0?d:"sharp"),UseFractionalGlyphWidths:(h=e.useFractionalGlyphWidths)!==null&&h!==void 0?h:!0,Rendered:{Version:1,Shapes:{WritingDirection:he,Children:[{ShapeType:me,Procession:Z,Lines:{WritingDirection:he,Children:[]},Cookie:{Photoshop:Ge}}]}}},ResourceDict:ve({},un),DocumentResources:ve({},un)};return J}var ur={0:{uproot:!0,children:{0:{name:"Type"},1:{name:"Values"}}}},_r={0:{name:"Font"},1:{name:"FontSize"},2:{name:"FauxBold"},3:{name:"FauxItalic"},4:{name:"AutoLeading"},5:{name:"Leading"},6:{name:"HorizontalScale"},7:{name:"VerticalScale"},8:{name:"Tracking"},9:{name:"BaselineShift"},11:{name:"Kerning?"},12:{name:"FontCaps"},13:{name:"FontBaseline"},15:{name:"Strikethrough?"},16:{name:"Underline?"},18:{name:"Ligatures"},19:{name:"DLigatures"},23:{name:"Fractions"},24:{name:"Ordinals"},28:{name:"StylisticAlternates"},30:{name:"OldStyle?"},35:{name:"BaselineDirection"},38:{name:"Language"},52:{name:"NoBreak"},53:{name:"FillColor",children:ur},54:{name:"StrokeColor",children:ur},55:{children:{99:{uproot:!0}}},79:{children:ur}},cr={0:{name:"Justification"},1:{name:"FirstLineIndent"},2:{name:"StartIndent"},3:{name:"EndIndent"},4:{name:"SpaceBefore"},5:{name:"SpaceAfter"},7:{name:"AutoLeading"},9:{name:"AutoHyphenate"},10:{name:"HyphenatedWordSize"},11:{name:"PreHyphen"},12:{name:"PostHyphen"},13:{name:"ConsecutiveHyphens?"},14:{name:"Zone"},15:{name:"HypenateCapitalizedWords"},17:{name:"WordSpacing"},18:{name:"LetterSpacing"},19:{name:"GlyphSpacing"},32:{name:"StyleSheet",children:_r}},Sa={name:"StyleSheetData",children:_r},Wf={0:{name:"ResourceDict",children:{1:{name:"FontSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},2:{name:"FontType"}}}}}}}}},2:{name:"2",children:{}},3:{name:"MojiKumiSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"InternalName"}}}}}}},4:{name:"KinsokuSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{uproot:!0,children:{0:{name:"NoStart"},1:{name:"NoEnd"},2:{name:"Keep"},3:{name:"Hanging"},4:{name:"Name"}}}}}}}}},5:{name:"StyleSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},6:Sa}}}}}},6:{name:"ParagraphSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{name:"Properties",children:cr},6:{name:"DefaultStyleSheet"}}}}}}},8:{name:"TextFrameSet",children:{0:{uproot:!0,children:{0:{name:"path",children:{0:{name:"name"},1:{name:"bezierCurve",children:{0:{name:"controlPoints"}}},2:{name:"data",children:{0:{name:"type"},1:{name:"orientation"},2:{name:"frameMatrix"},4:{name:"4"},6:{name:"textRange"},7:{name:"rowGutter"},8:{name:"columnGutter"},9:{name:"9"},10:{name:"baselineAlignment",children:{0:{name:"flag"},1:{name:"min"}}},11:{name:"pathData",children:{1:{name:"1"},0:{name:"reversed"},2:{name:"2"},3:{name:"3"},4:{name:"spacing"},5:{name:"5"},6:{name:"6"},7:{name:"7"},18:{name:"18"}}},12:{name:"12"},13:{name:"13"}}},3:{name:"3"},97:{name:"uuid"}}}}}}},9:{name:"Predefined",children:{0:{children:{0:{uproot:!0}}},1:{children:{0:{uproot:!0}}}}}}},1:{name:"EngineDict",children:{0:{name:"0",children:{3:{name:"SuperscriptSize"},4:{name:"SuperscriptPosition"},5:{name:"SubscriptSize"},6:{name:"SubscriptPosition"},7:{name:"SmallCapSize"},8:{name:"UseFractionalGlyphWidths"},15:{children:{0:{uproot:!0}}}}},1:{name:"Editors?",children:{0:{name:"Editor",children:{0:{name:"Text"},5:{name:"ParagraphRun",children:{0:{name:"RunArray",children:{0:{name:"ParagraphSheet",children:{0:{uproot:!0,children:{0:{name:"0"},5:{name:"5",children:cr},6:{name:"6"}}}}},1:{name:"RunLength"}}}}},6:{name:"StyleRun",children:{0:{name:"RunArray",children:{0:{name:"StyleSheet",children:{0:{uproot:!0,children:{6:Sa}}}},1:{name:"RunLength"}}}}}}},1:{name:"FontVectorData ???"}}},2:{name:"StyleSheet",children:_r},3:{name:"ParagraphSheet",children:cr}}}};function Kn(e,t){var n,r;if(e===null)return e;if(Array.isArray(e))return e.map(function(f){return Kn(f,t)});if(typeof e!="object")return e;for(var i={},a=0,o=Object.keys(e);a<o.length;a++){var l=o[a];if(t[l])if(t[l].uproot){l!=="99"&&(i=Kn(e[l],(n=t[l].children)!==null&&n!==void 0?n:{})),e[99]&&(i._type=e[99]);break}else i[t[l].name||l]=Kn(e[l],(r=t[l].children)!==null&&r!==void 0?r:{});else l==="99"?i._type=e[l]:i[l]=Kn(e[l],{})}return i}function Xf(e){return Kn(e,Wf)}var c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},c.apply(this,arguments)},Le="abcdefghijklmnopqrstuvwxyz",Ut={};function N(e,t,n,r){var i={key:e,has:t,read:n,write:r};Ut[i.key]=i}function Un(e,t){Ut[e]=Ut[t]}function ae(e){return function(t){return t[e]!==void 0}}function dr(e){if(w(e))throw new Error("Resource size above 4 GB limit at ".concat(e.offset.toString(16)));return w(e)}function hr(e,t){L(e,0),L(e,t)}N("TySh",ae("text"),function(e,t,n){if(Q(e)!==1)throw new Error("Invalid TySh version");for(var r=[],i=0;i<6;i++)r.push(ze(e));if(Q(e)!==50)throw new Error("Invalid TySh text version");var a=K(e);if(Q(e)!==1)throw new Error("Invalid TySh warp version");var o=K(e);if(t.text={transform:r,left:He(e),top:He(e),right:He(e),bottom:He(e),text:a["Txt "].replace(/\r/g,`
`),index:a.TextIndex||0,gridding:Wi.decode(a.textGridding),antiAlias:Xi.decode(a.AntA),orientation:tt.decode(a.Ornt),warp:{style:Dr.decode(o.warpStyle),value:o.warpValue||0,perspective:o.warpPerspective||0,perspectiveOther:o.warpPerspectiveOther||0,rotate:tt.decode(o.warpRotate)}},a.bounds&&(t.text.bounds=zi(a.bounds)),a.boundingBox&&(t.text.boundingBox=zi(a.boundingBox)),a.EngineData){var l=rl(a.EngineData),f=jf(l);t.text=c(c({},t.text),f)}R(e,n())},function(e,t){var n=t.text,r=n.warp||{},i=n.transform||[1,0,0,1,0,0],a=c(c(c({"Txt ":(n.text||"").replace(/\r?\n/g,"\r"),textGridding:Wi.encode(n.gridding),Ornt:tt.encode(n.orientation),AntA:Xi.encode(n.antiAlias)},n.bounds?{bounds:Ui(n.bounds)}:{}),n.boundingBox?{boundingBox:Ui(n.boundingBox)}:{}),{TextIndex:n.index||0,EngineData:Bf(Hf(n))});te(e,1);for(var o=0;o<6;o++)$e(e,i[o]);te(e,50),$(e,"","TxLr",a,"text"),te(e,1),$(e,"","warp",Gt(r)),We(e,n.left),We(e,n.top),We(e,n.right),We(e,n.bottom)});N("SoCo",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&e.vectorFill.type==="color"},function(e,t){var n=K(e);t.vectorFill=st(n)},function(e,t){var n=ft(t.vectorFill).descriptor;$(e,"","null",n)});N("GdFl",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&(e.vectorFill.type==="solid"||e.vectorFill.type==="noise")},function(e,t,n){var r=K(e);t.vectorFill=st(r),R(e,n())},function(e,t){var n=ft(t.vectorFill).descriptor;$(e,"","null",n)});N("PtFl",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&e.vectorFill.type==="pattern"},function(e,t){var n=K(e);t.vectorFill=st(n)},function(e,t){var n=ft(t.vectorFill).descriptor;$(e,"","null",n)});N("vscg",function(e){return e.vectorFill!==void 0&&e.vectorStroke!==void 0},function(e,t,n){le(e);var r=K(e);t.vectorFill=st(r),R(e,n())},function(e,t){var n=ft(t.vectorFill),r=n.descriptor,i=n.key;G(e,i),$(e,"","null",r)});function Yf(e,t,n){var r=Ve(e)*n,i=Ve(e)*t,a=Ve(e)*n,o=Ve(e)*t,l=Ve(e)*n,f=Ve(e)*t;return[i,r,o,a,f,l]}function Zf(e,t,n,r){je(e,t[1]/r),je(e,t[0]/n),je(e,t[3]/r),je(e,t[2]/n),je(e,t[5]/r),je(e,t[4]/n)}var ul=["exclude","combine","subtract","intersect"];function qf(e,t,n,r,i){for(var a=e.offset+i,o=t.paths,l=void 0;a-e.offset>=26;){var f=E(e);switch(f){case 0:case 3:{E(e);var s=Q(e),u=E(e);R(e,18),l={open:f===3,knots:[],fillRule:u===2?"non-zero":"even-odd"},s!==-1&&(l.operation=ul[s]),o.push(l);break}case 1:case 2:case 4:case 5:l.knots.push({linked:f===1||f===4,points:Yf(e,n,r)});break;case 6:R(e,24);break;case 7:{var d=Ve(e),h=Ve(e),p=Ve(e),y=Ve(e),v=Ve(e);R(e,4),t.clipboard={top:d,left:h,bottom:p,right:y,resolution:v};break}case 8:t.fillStartsWithAllPixels=!!E(e),R(e,22);break;default:throw new Error("Invalid vmsk section")}}return o}N("vmsk",ae("vectorMask"),function(e,t,n,r){var i=r.width,a=r.height;if(w(e)!==3)throw new Error("Invalid vmsk version");t.vectorMask={paths:[]};var o=t.vectorMask,l=w(e);o.invert=(l&1)!==0,o.notLink=(l&2)!==0,o.disable=(l&4)!==0,qf(e,o,i,a,n()),R(e,n())},function(e,t,n){var r=n.width,i=n.height,a=t.vectorMask,o=(a.invert?1:0)|(a.notLink?2:0)|(a.disable?4:0);L(e,3),L(e,o),I(e,6),ie(e,24);var l=a.clipboard;l&&(I(e,7),je(e,l.top),je(e,l.left),je(e,l.bottom),je(e,l.right),je(e,l.resolution),ie(e,4)),I(e,8),I(e,a.fillStartsWithAllPixels?1:0),ie(e,22);for(var f=0,s=a.paths;f<s.length;f++){var u=s[f];I(e,u.open?3:0),I(e,u.knots.length),I(e,u.operation?ul.indexOf(u.operation):-1),I(e,u.fillRule==="non-zero"?2:1),ie(e,18);for(var d=u.open?4:1,h=u.open?5:2,p=0,y=u.knots;p<y.length;p++){var v=y[p],F=v.linked,g=v.points;I(e,F?d:h),Zf(e,g,r,i)}}});Un("vsms","vmsk");N("vowv",ae("vowv"),function(e,t){t.vowv=w(e)},function(e,t){L(e,t.vowv)});N("vogk",ae("vectorOrigination"),function(e,t,n){if(_(e)!==1)throw new Error("Invalid vogk version");var r=K(e);t.vectorOrigination={keyDescriptorList:[]};for(var i=0,a=r.keyDescriptorList;i<a.length;i++){var o=a[i],l={};o.keyShapeInvalidated!=null&&(l.keyShapeInvalidated=o.keyShapeInvalidated),o.keyOriginType!=null&&(l.keyOriginType=o.keyOriginType),o.keyOriginResolution!=null&&(l.keyOriginResolution=o.keyOriginResolution),o.keyOriginShapeBBox&&(l.keyOriginShapeBoundingBox={top:hn(o.keyOriginShapeBBox["Top "]),left:hn(o.keyOriginShapeBBox.Left),bottom:hn(o.keyOriginShapeBBox.Btom),right:hn(o.keyOriginShapeBBox.Rght)});var f=o.keyOriginRRectRadii;f&&(l.keyOriginRRectRadii={topRight:re(f.topRight),topLeft:re(f.topLeft),bottomLeft:re(f.bottomLeft),bottomRight:re(f.bottomRight)});var s=o.keyOriginBoxCorners;s&&(l.keyOriginBoxCorners=[{x:s.rectangleCornerA.Hrzn,y:s.rectangleCornerA.Vrtc},{x:s.rectangleCornerB.Hrzn,y:s.rectangleCornerB.Vrtc},{x:s.rectangleCornerC.Hrzn,y:s.rectangleCornerC.Vrtc},{x:s.rectangleCornerD.Hrzn,y:s.rectangleCornerD.Vrtc}]);var u=o.Trnf;u&&(l.transform=[u.xx,u.xy,u.yx,u.yy,u.tx,u.ty]),t.vectorOrigination.keyDescriptorList.push(l)}R(e,n())},function(e,t){for(var n=t.vectorOrigination,r={keyDescriptorList:[]},i=0;i<n.keyDescriptorList.length;i++){var a=n.keyDescriptorList[i];r.keyDescriptorList.push({});var o=r.keyDescriptorList[r.keyDescriptorList.length-1];a.keyOriginType!=null&&(o.keyOriginType=a.keyOriginType),a.keyOriginResolution!=null&&(o.keyOriginResolution=a.keyOriginResolution);var l=a.keyOriginRRectRadii;l&&(o.keyOriginRRectRadii={unitValueQuadVersion:1,topRight:fe(l.topRight,"topRight"),topLeft:fe(l.topLeft,"topLeft"),bottomLeft:fe(l.bottomLeft,"bottomLeft"),bottomRight:fe(l.bottomRight,"bottomRight")});var f=a.keyOriginShapeBoundingBox;f&&(o.keyOriginShapeBBox={unitValueQuadVersion:1,"Top ":fe(f.top,"top"),Left:fe(f.left,"left"),Btom:fe(f.bottom,"bottom"),Rght:fe(f.right,"right")});var s=a.keyOriginBoxCorners;s&&s.length===4&&(o.keyOriginBoxCorners={rectangleCornerA:{Hrzn:s[0].x,Vrtc:s[0].y},rectangleCornerB:{Hrzn:s[1].x,Vrtc:s[1].y},rectangleCornerC:{Hrzn:s[2].x,Vrtc:s[2].y},rectangleCornerD:{Hrzn:s[3].x,Vrtc:s[3].y}});var u=a.transform;u&&u.length===6&&(o.Trnf={xx:u[0],xy:u[1],yx:u[2],yy:u[3],tx:u[4],ty:u[5]}),a.keyShapeInvalidated!=null&&(o.keyShapeInvalidated=a.keyShapeInvalidated),o.keyOriginIndex=i}j(e,1),$(e,"","null",r)});N("lmfx",function(e){return e.effects!==void 0&&pl(e.effects)},function(e,t,n){var r=w(e);if(r!==0)throw new Error("Invalid lmfx version");var i=K(e);t.effects=lt(i,!!e.logMissingFeatures),R(e,n())},function(e,t,n,r){var i=ot(t.effects,!!r.logMissingFeatures,!0);L(e,0),$(e,"","null",i)});N("lrFX",ae("effects"),function(e,t,n){t.effects||(t.effects=Tf(e)),R(e,n())},function(e,t){Of(e,t.effects)});N("luni",ae("name"),function(e,t,n){if(n()>4){var r=w(e);n()>=r*2?t.name=Or(e,r):e.logDevFeatures&&e.log("name in luni section is too long")}else e.logDevFeatures&&e.log("empty luni section");R(e,n())},function(e,t){Oe(e,t.name)});N("lnsr",ae("nameSource"),function(e,t){return t.nameSource=le(e)},function(e,t){return G(e,t.nameSource)});N("lyid",ae("id"),function(e,t){t.id=w(e)},function(e,t,n,r){for(var i=t.id;r.layerIds.has(i);)i+=100;L(e,i),r.layerIds.add(i),r.layerToId.set(t,i)});N("lsct",ae("sectionDivider"),function(e,t,n){t.sectionDivider={type:w(e)},n()&&(vn(e,"8BIM"),t.sectionDivider.key=le(e)),n()&&(t.sectionDivider.subType=w(e))},function(e,t){L(e,t.sectionDivider.type),t.sectionDivider.key&&(G(e,"8BIM"),G(e,t.sectionDivider.key),t.sectionDivider.subType!==void 0&&L(e,t.sectionDivider.subType))});Un("lsdk","lsct");N("clbl",ae("blendClippendElements"),function(e,t){t.blendClippendElements=!!T(e),R(e,3)},function(e,t){B(e,t.blendClippendElements?1:0),ie(e,3)});N("infx",ae("blendInteriorElements"),function(e,t){t.blendInteriorElements=!!T(e),R(e,3)},function(e,t){B(e,t.blendInteriorElements?1:0),ie(e,3)});N("knko",ae("knockout"),function(e,t){t.knockout=!!T(e),R(e,3)},function(e,t){B(e,t.knockout?1:0),ie(e,3)});N("lmgm",ae("layerMaskAsGlobalMask"),function(e,t){t.layerMaskAsGlobalMask=!!T(e),R(e,3)},function(e,t){B(e,t.layerMaskAsGlobalMask?1:0),ie(e,3)});N("lspf",ae("protected"),function(e,t){var n=w(e);t.protected={transparency:(n&1)!==0,composite:(n&2)!==0,position:(n&4)!==0},n&8&&(t.protected.artboards=!0)},function(e,t){var n=(t.protected.transparency?1:0)|(t.protected.composite?2:0)|(t.protected.position?4:0)|(t.protected.artboards?8:0);L(e,n)});N("lclr",ae("layerColor"),function(e,t){var n=E(e);R(e,6),t.layerColor=Ii[n]},function(e,t){var n=Ii.indexOf(t.layerColor);I(e,n===-1?0:n),ie(e,6)});N("shmd",function(e){return e.timestamp!==void 0||e.animationFrames!==void 0||e.animationFrameFlags!==void 0||e.timeline!==void 0||e.comps!==void 0},function(e,t,n){for(var r=w(e),i=function(o){vn(e,"8BIM");var l=le(e);T(e),R(e,3),Me(e,1,function(f){if(l==="cust"){var s=K(e);s.layerTime!==void 0&&(t.timestamp=s.layerTime)}else if(l==="mlst"){var s=K(e);t.animationFrames=[];for(var u=0;u<s.LaSt.length;u++){var d=s.LaSt[u],h={frames:d.FrLs};d.enab!==void 0&&(h.enable=d.enab),d.Ofst&&(h.offset=Qn(d.Ofst)),d.FXRf&&(h.referencePoint=Qn(d.FXRf)),d.Lefx&&(h.effects=lt(d.Lefx,!!e.logMissingFeatures)),d.blendOptions&&d.blendOptions.Opct&&(h.opacity=oe(d.blendOptions.Opct)),t.animationFrames.push(h)}}else if(l==="mdyn"){E(e);var p=T(e),y=T(e);t.animationFrameFlags={propagateFrameOne:!p,unifyLayerPosition:(y&1)!==0,unifyLayerStyle:(y&2)!==0,unifyLayerVisibility:(y&4)!==0}}else if(l==="tmln"){var s=K(e),v=s.timeScope,F={start:Pe(v.Strt),duration:Pe(v.duration),inTime:Pe(v.inTime),outTime:Pe(v.outTime),autoScope:s.autoScope,audioLevel:s.audioLevel};s.trackList&&(F.tracks=oo(s.trackList,!!e.logMissingFeatures)),t.timeline=F}else if(l==="cmls"){var s=K(e);t.comps={settings:[]},s.origFXRefPoint&&(t.comps.originalEffectsReferencePoint={x:s.origFXRefPoint.Hrzn,y:s.origFXRefPoint.Vrtc});for(var g=0,b=s.layerSettings;g<b.length;g++){var S=b[g];t.comps.settings.push({compList:S.compList});var m=t.comps.settings[t.comps.settings.length-1];"enab"in S&&(m.enabled=S.enab),S.Ofst&&(m.offset={x:S.Ofst.Hrzn,y:S.Ofst.Vrtc}),S.FXRefPoint&&(m.effectsReferencePoint={x:S.FXRefPoint.Hrzn,y:S.FXRefPoint.Vrtc})}}else if(l==="extn"){var s=K(e);e.logMissingFeatures&&e.log('Unhandled "shmd" section key',l)}else e.logMissingFeatures&&e.log('Unhandled "shmd" section key',l);R(e,f())})},a=0;a<r;a++)i();R(e,n())},function(e,t,n,r){var i=t.animationFrames,a=t.animationFrameFlags,o=t.timestamp,l=t.timeline,f=t.comps,s=0;i&&s++,a&&s++,l&&s++,o!==void 0&&s++,f&&s++,L(e,s),i&&(G(e,"8BIM"),G(e,"mlst"),B(e,0),ie(e,3),yn(e,2,function(){for(var u,d={LaID:(u=t.id)!==null&&u!==void 0?u:0,LaSt:[]},h=0;h<i.length;h++){var p=i[h],y={};p.enable!==void 0&&(y.enab=p.enable),y.FrLs=p.frames,p.offset&&(y.Ofst=et(p.offset)),p.referencePoint&&(y.FXRf=et(p.referencePoint)),p.effects&&(y.Lefx=ot(p.effects,!1,!1)),p.opacity!==void 0&&(y.blendOptions={Opct:Se(p.opacity)}),d.LaSt.push(y)}$(e,"","null",d)},!0)),a&&(G(e,"8BIM"),G(e,"mdyn"),B(e,0),ie(e,3),yn(e,2,function(){I(e,0),B(e,a.propagateFrameOne?0:15),B(e,(a.unifyLayerPosition?1:0)|(a.unifyLayerStyle?2:0)|(a.unifyLayerVisibility?4:0))})),l&&(G(e,"8BIM"),G(e,"tmln"),B(e,0),ie(e,3),yn(e,2,function(){var u={Vrsn:1,timeScope:{Vrsn:1,Strt:l.start,duration:l.duration,inTime:l.inTime,outTime:l.outTime},autoScope:l.autoScope,audioLevel:l.audioLevel};l.tracks&&(u.trackList=lo(l.tracks));var d=r.layerToId.get(t)||t.id;if(!d)throw new Error("You need to provide layer.id value whan writing document with animations");u.LyrI=d,$(e,"","null",u,"anim")},!0)),o!==void 0&&(G(e,"8BIM"),G(e,"cust"),B(e,0),ie(e,3),yn(e,2,function(){var u={layerTime:o};$(e,"","metadata",u)},!0)),f&&(G(e,"8BIM"),G(e,"cmls"),B(e,0),ie(e,3),yn(e,2,function(){var u=r.layerToId.get(t)||t.id;if(!u)throw new Error("You need to provide layer.id value whan writing document with layer comps");var d={};f.originalEffectsReferencePoint&&(d.origFXRefPoint={Hrzn:f.originalEffectsReferencePoint.x,Vrtc:f.originalEffectsReferencePoint.y}),d.LyrI=u,d.layerSettings=[];for(var h=0,p=f.settings;h<p.length;h++){var y=p[h],v={};y.enabled!==void 0&&(v.enab=y.enabled),y.offset&&(v.Ofst={Hrzn:y.offset.x,Vrtc:y.offset.y}),y.effectsReferencePoint&&(v.FXRefPoint={Hrzn:y.effectsReferencePoint.x,Vrtc:y.effectsReferencePoint.y}),v.compList=y.compList,d.layerSettings.push(v)}$(e,"","null",d)},!0))});N("PxSc",function(){return!1},function(e,t){var n=K(e,!0);n.pixelSourceType===1986285651?t.pixelSource={type:"vdPS",origin:{x:n.origin.Hrzn,y:n.origin.Vrtc},interpretation:{interpretAlpha:n.interpretation.interpretAlpha.split(".")[1],profile:n.interpretation.profile},frameReader:{type:"QTFR",link:{name:n.frameReader["Lnk "]["Nm  "],fullPath:n.frameReader["Lnk "].fullPath,originalPath:n.frameReader["Lnk "].originalPath,relativePath:n.frameReader["Lnk "].relPath,alias:n.frameReader["Lnk "].alis},mediaDescriptor:n.frameReader.mediaDescriptor},showAlteredVideo:n.showAlteredVideo}:e.log("Unknown pixelSourceType")},function(e,t){var n=t.pixelSource,r={_name:"",_classID:"PixelSource",pixelSourceType:1986285651,descVersion:1,origin:{Hrzn:n.origin.x,Vrtc:n.origin.y},interpretation:{_name:"",_classID:"footageInterpretation",Vrsn:1,interpretAlpha:"alphaInterpretation.".concat(n.interpretation.interpretAlpha),profile:n.interpretation.profile},frameReader:{_name:"",_classID:"FrameReader",frameReaderType:1364477522,descVersion:1,"Lnk ":{_name:"",_classID:"ExternalFileLink",descVersion:2,"Nm  ":n.frameReader.link.name,fullPath:n.frameReader.link.fullPath,originalPath:n.frameReader.link.originalPath,alis:n.frameReader.link.alias,relPath:n.frameReader.link.relativePath},mediaDescriptor:n.frameReader.mediaDescriptor},showAlteredVideo:n.showAlteredVideo};$(e,"","PixelSource",r)});N("vstk",ae("vectorStroke"),function(e,t,n){var r=K(e);t.vectorStroke={strokeEnabled:r.strokeEnabled,fillEnabled:r.fillEnabled,lineWidth:re(r.strokeStyleLineWidth),lineDashOffset:re(r.strokeStyleLineDashOffset),miterLimit:r.strokeStyleMiterLimit,lineCapType:Ji.decode(r.strokeStyleLineCapType),lineJoinType:Qi.decode(r.strokeStyleLineJoinType),lineAlignment:ea.decode(r.strokeStyleLineAlignment),scaleLock:r.strokeStyleScaleLock,strokeAdjust:r.strokeStyleStrokeAdjust,lineDashSet:r.strokeStyleLineDashSet.map(re),blendMode:Ne.decode(r.strokeStyleBlendMode),opacity:oe(r.strokeStyleOpacity),content:st(r.strokeStyleContent),resolution:r.strokeStyleResolution},R(e,n())},function(e,t){var n,r,i,a=t.vectorStroke,o={strokeStyleVersion:2,strokeEnabled:!!a.strokeEnabled,fillEnabled:!!a.fillEnabled,strokeStyleLineWidth:a.lineWidth||{value:3,units:"Points"},strokeStyleLineDashOffset:a.lineDashOffset||{value:0,units:"Points"},strokeStyleMiterLimit:(n=a.miterLimit)!==null&&n!==void 0?n:100,strokeStyleLineCapType:Ji.encode(a.lineCapType),strokeStyleLineJoinType:Qi.encode(a.lineJoinType),strokeStyleLineAlignment:ea.encode(a.lineAlignment),strokeStyleScaleLock:!!a.scaleLock,strokeStyleStrokeAdjust:!!a.strokeAdjust,strokeStyleLineDashSet:a.lineDashSet||[],strokeStyleBlendMode:Ne.encode(a.blendMode),strokeStyleOpacity:Se((r=a.opacity)!==null&&r!==void 0?r:1),strokeStyleContent:ft(a.content||{type:"color",color:{r:0,g:0,b:0}}).descriptor,strokeStyleResolution:(i=a.resolution)!==null&&i!==void 0?i:72};$(e,"","strokeStyle",o)});N("artb",ae("artboard"),function(e,t,n){var r=K(e),i=r.artboardRect;t.artboard={rect:{top:i["Top "],left:i.Left,bottom:i.Btom,right:i.Rght},guideIndices:r.guideIndeces,presetName:r.artboardPresetName,color:Xe(r["Clr "]),backgroundType:r.artboardBackgroundType},R(e,n())},function(e,t){var n,r=t.artboard,i=r.rect,a={artboardRect:{"Top ":i.top,Left:i.left,Btom:i.bottom,Rght:i.right},guideIndeces:r.guideIndices||[],artboardPresetName:r.presetName||"","Clr ":Ye(r.color),artboardBackgroundType:(n=r.backgroundType)!==null&&n!==void 0?n:1};$(e,"","artboard",a)});N("sn2P",ae("usingAlignedRendering"),function(e,t){return t.usingAlignedRendering=!!w(e)},function(e,t){return L(e,t.usingAlignedRendering?1:0)});var Tn=["unknown","vector","raster","image stack"];function cl(e){var t,n,r,i,a,o,l=c(c({style:Dr.decode(e.warpStyle)},e.warpValues?{values:e.warpValues}:{value:e.warpValue||0}),{perspective:e.warpPerspective||0,perspectiveOther:e.warpPerspectiveOther||0,rotate:tt.decode(e.warpRotate),bounds:e.bounds&&{top:hn(e.bounds["Top "]),left:hn(e.bounds.Left),bottom:hn(e.bounds.Btom),right:hn(e.bounds.Rght)},uOrder:e.uOrder,vOrder:e.vOrder});(e.deformNumRows!=null||e.deformNumCols!=null)&&(l.deformNumRows=e.deformNumRows,l.deformNumCols=e.deformNumCols);var f=e.customEnvelopeWarp;if(f){l.customEnvelopeWarp={meshPoints:[]};for(var s=((t=f.meshPoints.find(function(h){return h.type==="Hrzn"}))===null||t===void 0?void 0:t.values)||[],u=((n=f.meshPoints.find(function(h){return h.type==="Vrtc"}))===null||n===void 0?void 0:n.values)||[],d=0;d<s.length;d++)l.customEnvelopeWarp.meshPoints.push({x:s[d],y:u[d]});(f.quiltSliceX||f.quiltSliceY)&&(l.customEnvelopeWarp.quiltSliceX=((i=(r=f.quiltSliceX)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.values)||[],l.customEnvelopeWarp.quiltSliceY=((o=(a=f.quiltSliceY)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.values)||[])}return l}function Nr(e){var t,n;return e.deformNumCols!=null||e.deformNumRows!=null||((t=e.customEnvelopeWarp)===null||t===void 0?void 0:t.quiltSliceX)||((n=e.customEnvelopeWarp)===null||n===void 0?void 0:n.quiltSliceY)}function Gt(e){var t=e.bounds,n=c(c({warpStyle:Dr.encode(e.style)},e.values?{warpValues:e.values}:{warpValue:e.value||0}),{warpPerspective:e.perspective||0,warpPerspectiveOther:e.perspectiveOther||0,warpRotate:tt.encode(e.rotate),bounds:{"Top ":fe(t&&t.top||{units:"Pixels",value:0},"bounds.top"),Left:fe(t&&t.left||{units:"Pixels",value:0},"bounds.left"),Btom:fe(t&&t.bottom||{units:"Pixels",value:0},"bounds.bottom"),Rght:fe(t&&t.right||{units:"Pixels",value:0},"bounds.right")},uOrder:e.uOrder||0,vOrder:e.vOrder||0}),r=Nr(e);if(r){var i=n;i.deformNumRows=e.deformNumRows||0,i.deformNumCols=e.deformNumCols||0}var a=e.customEnvelopeWarp;if(a){var o=a.meshPoints||[];if(r){var i=n;i.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",quiltSliceX:[{type:"quiltSliceX",values:a.quiltSliceX||[]}],quiltSliceY:[{type:"quiltSliceY",values:a.quiltSliceY||[]}],meshPoints:[{type:"Hrzn",values:o.map(function(f){return f.x})},{type:"Vrtc",values:o.map(function(f){return f.y})}]}}else n.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",meshPoints:[{type:"Hrzn",values:o.map(function(l){return l.x})},{type:"Vrtc",values:o.map(function(l){return l.y})}]}}return n}N("PlLd",ae("placedLayer"),function(e,t,n){if(le(e)!=="plcL")throw new Error("Invalid PlLd signature");if(_(e)!==3)throw new Error("Invalid PlLd version");var r=pn(e,1),i=_(e),a=_(e);_(e);var o=_(e);if(!Tn[o])throw new Error("Invalid PlLd type");for(var l=[],f=0;f<8;f++)l.push(ze(e));var s=_(e);if(s!==0)throw new Error("Invalid Warp version ".concat(s));var u=K(e);t.placedLayer=t.placedLayer||{id:r,type:Tn[o],pageNumber:i,totalPages:a,transform:l,warp:cl(u)},R(e,n())},function(e,t){var n=t.placedLayer;if(G(e,"plcL"),j(e,3),!n.id||typeof n.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(n.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if(Rn(e,n.id,1),j(e,1),j(e,1),j(e,16),Tn.indexOf(n.type)===-1)throw new Error("Invalid placedLayer type");j(e,Tn.indexOf(n.type));for(var r=0;r<8;r++)$e(e,n.transform[r]);j(e,0);var i=dl(n),a=Nr(i),o=a?"quiltWarp":"warp";$(e,"",o,Gt(i),o)});function Kf(e){return new Float32Array(e.buffer.slice(e.byteOffset),0,e.byteLength/4)}function $f(e){return new Uint32Array(e.buffer.slice(e.byteOffset),0,e.byteLength/4)}function pr(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function Bt(e){for(var t=[],n=0;n<e.length;n+=2)t.push({x:e[n],y:e[n+1]});return t}function jn(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].x,e[n].y);return t}function Fa(e){return Bt(Kf(e))}function Hn(e){return{x:re(e.Hrzn),y:re(e.Vrtc)}}function Wn(e){return{_name:"",_classID:"Pnt ",Hrzn:fe(e.x,"x"),Vrtc:fe(e.y,"y")}}function Jf(e,t){var n={name:e["Nm  "],opacity:oe(e.blendOptions.Opct),blendMode:Ne.decode(e.blendOptions["Md  "]),enabled:e.enab,hasOptions:e.hasoptions,foregroundColor:Xe(e.FrgC),backgroundColor:Xe(e.BckC)};if("Fltr"in e)switch(e.Fltr._classID){case"boxblur":return c(c({},n),{type:"box blur",filter:{radius:re(e.Fltr["Rds "])}});case"GsnB":return c(c({},n),{type:"gaussian blur",filter:{radius:re(e.Fltr["Rds "])}});case"MtnB":return c(c({},n),{type:"motion blur",filter:{angle:e.Fltr.Angl,distance:re(e.Fltr.Dstn)}});case"RdlB":return c(c({},n),{type:"radial blur",filter:{amount:e.Fltr.Amnt,method:ko.decode(e.Fltr.BlrM),quality:Co.decode(e.Fltr.BlrQ)}});case"shapeBlur":return c(c({},n),{type:"shape blur",filter:{radius:re(e.Fltr["Rds "]),customShape:{name:e.Fltr.customShape["Nm  "],id:e.Fltr.customShape.Idnt}}});case"SmrB":return c(c({},n),{type:"smart blur",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh,quality:Po.decode(e.Fltr.SmBQ),mode:Io.decode(e.Fltr.SmBM)}});case"surfaceBlur":return c(c({},n),{type:"surface blur",filter:{radius:re(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dspl":return c(c({},n),{type:"displace",filter:{horizontalScale:e.Fltr.HrzS,verticalScale:e.Fltr.VrtS,displacementMap:Eo.decode(e.Fltr.DspM),undefinedAreas:Mn.decode(e.Fltr.UndA),displacementFile:{signature:e.Fltr.DspF.sig,path:e.Fltr.DspF.path}}});case"Pnch":return c(c({},n),{type:"pinch",filter:{amount:e.Fltr.Amnt}});case"Plr ":return c(c({},n),{type:"polar coordinates",filter:{conversion:wo.decode(e.Fltr.Cnvr)}});case"Rple":return c(c({},n),{type:"ripple",filter:{amount:e.Fltr.Amnt,size:Ao.decode(e.Fltr.RplS)}});case"Shr ":return c(c({},n),{type:"shear",filter:{shearPoints:e.Fltr.ShrP.map(function(l){return{x:l.Hrzn,y:l.Vrtc}}),shearStart:e.Fltr.ShrS,shearEnd:e.Fltr.ShrE,undefinedAreas:Mn.decode(e.Fltr.UndA)}});case"Sphr":return c(c({},n),{type:"spherize",filter:{amount:e.Fltr.Amnt,mode:Do.decode(e.Fltr.SphM)}});case"Twrl":return c(c({},n),{type:"twirl",filter:{angle:e.Fltr.Angl}});case"Wave":return c(c({},n),{type:"wave",filter:{numberOfGenerators:e.Fltr.NmbG,type:Lo.decode(e.Fltr.Wvtp),wavelength:{min:e.Fltr.WLMn,max:e.Fltr.WLMx},amplitude:{min:e.Fltr.AmMn,max:e.Fltr.AmMx},scale:{x:e.Fltr.SclH,y:e.Fltr.SclV},randomSeed:e.Fltr.RndS,undefinedAreas:Mn.decode(e.Fltr.UndA)}});case"ZgZg":return c(c({},n),{type:"zigzag",filter:{amount:e.Fltr.Amnt,ridges:e.Fltr.NmbR,style:To.decode(e.Fltr.ZZTy)}});case"AdNs":return c(c({},n),{type:"add noise",filter:{amount:oe(e.Fltr.Nose),distribution:Oo.decode(e.Fltr.Dstr),monochromatic:e.Fltr.Mnch,randomSeed:e.Fltr.FlRs}});case"DstS":return c(c({},n),{type:"dust and scratches",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh}});case"Mdn ":return c(c({},n),{type:"median",filter:{radius:re(e.Fltr["Rds "])}});case"denoise":return c(c({},n),{type:"reduce noise",filter:{preset:e.Fltr.preset,removeJpegArtifact:e.Fltr.removeJPEGArtifact,reduceColorNoise:oe(e.Fltr.ClNs),sharpenDetails:oe(e.Fltr.Shrp),channelDenoise:e.Fltr.channelDenoise.map(function(l){return c({channels:l.Chnl.map(rt.decode),amount:l.Amnt},l.EdgF?{preserveDetails:l.EdgF}:{})})}});case"ClrH":return c(c({},n),{type:"color halftone",filter:{radius:e.Fltr["Rds "],angle1:e.Fltr.Ang1,angle2:e.Fltr.Ang2,angle3:e.Fltr.Ang3,angle4:e.Fltr.Ang4}});case"Crst":return c(c({},n),{type:"crystallize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Mztn":return c(c({},n),{type:"mezzotint",filter:{type:Mo.decode(e.Fltr.MztT),randomSeed:e.Fltr.FlRs}});case"Msc ":return c(c({},n),{type:"mosaic",filter:{cellSize:re(e.Fltr.ClSz)}});case"Pntl":return c(c({},n),{type:"pointillize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Clds":return c(c({},n),{type:"clouds",filter:{randomSeed:e.Fltr.FlRs}});case"DfrC":return c(c({},n),{type:"difference clouds",filter:{randomSeed:e.Fltr.FlRs}});case"Fbrs":return c(c({},n),{type:"fibers",filter:{variance:e.Fltr.Vrnc,strength:e.Fltr.Strg,randomSeed:e.Fltr.RndS}});case"LnsF":return c(c({},n),{type:"lens flare",filter:{brightness:e.Fltr.Brgh,position:{x:e.Fltr.FlrC.Hrzn,y:e.Fltr.FlrC.Vrtc},lensType:Ro.decode(e.Fltr["Lns "])}});case"smartSharpen":return c(c({},n),{type:"smart sharpen",filter:{amount:oe(e.Fltr.Amnt),radius:re(e.Fltr["Rds "]),threshold:e.Fltr.Thsh,angle:e.Fltr.Angl,moreAccurate:e.Fltr.moreAccurate,blur:Bo.decode(e.Fltr.blur),preset:e.Fltr.preset,shadow:{fadeAmount:oe(e.Fltr.sdwM.Amnt),tonalWidth:oe(e.Fltr.sdwM.Wdth),radius:e.Fltr.sdwM["Rds "]},highlight:{fadeAmount:oe(e.Fltr.hglM.Amnt),tonalWidth:oe(e.Fltr.hglM.Wdth),radius:e.Fltr.hglM["Rds "]}}});case"UnsM":return c(c({},n),{type:"unsharp mask",filter:{amount:oe(e.Fltr.Amnt),radius:re(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dfs ":return c(c({},n),{type:"diffuse",filter:{mode:_o.decode(e.Fltr["Md  "]),randomSeed:e.Fltr.FlRs}});case"Embs":return c(c({},n),{type:"emboss",filter:{angle:e.Fltr.Angl,height:e.Fltr.Hght,amount:e.Fltr.Amnt}});case"Extr":return c(c({},n),{type:"extrude",filter:{type:No.decode(e.Fltr.ExtT),size:e.Fltr.ExtS,depth:e.Fltr.ExtD,depthMode:zo.decode(e.Fltr.ExtR),randomSeed:e.Fltr.FlRs,solidFrontFaces:e.Fltr.ExtF,maskIncompleteBlocks:e.Fltr.ExtM}});case"Tls ":return c(c({},n),{type:"tiles",filter:{numberOfTiles:e.Fltr.TlNm,maximumOffset:e.Fltr.TlOf,fillEmptyAreaWith:Uo.decode(e.Fltr.FlCl),randomSeed:e.Fltr.FlRs}});case"TrcC":return c(c({},n),{type:"trace contour",filter:{level:e.Fltr["Lvl "],edge:Go.decode(e.Fltr["Edg "])}});case"Wnd ":return c(c({},n),{type:"wind",filter:{method:Vo.decode(e.Fltr.WndM),direction:jo.decode(e.Fltr.Drct)}});case"Dntr":return c(c({},n),{type:"de-interlace",filter:{eliminate:Ho.decode(e.Fltr.IntE),newFieldsBy:Wo.decode(e.Fltr.IntC)}});case"Cstm":return c(c({},n),{type:"custom",filter:{scale:e.Fltr["Scl "],offset:e.Fltr.Ofst,matrix:e.Fltr.Mtrx}});case"HghP":return c(c({},n),{type:"high pass",filter:{radius:re(e.Fltr["Rds "])}});case"Mxm ":return c(c({},n),{type:"maximum",filter:{radius:re(e.Fltr["Rds "])}});case"Mnm ":return c(c({},n),{type:"minimum",filter:{radius:re(e.Fltr["Rds "])}});case"Ofst":return c(c({},n),{type:"offset",filter:{horizontal:e.Fltr.Hrzn,vertical:e.Fltr.Vrtc,undefinedAreas:Xo.decode(e.Fltr["Fl  "])}});case"rigidTransform":return c(c({},n),{type:"puppet",filter:{rigidType:e.Fltr.rigidType,bounds:[{x:e.Fltr.PuX0,y:e.Fltr.PuY0},{x:e.Fltr.PuX1,y:e.Fltr.PuY1},{x:e.Fltr.PuX2,y:e.Fltr.PuY2},{x:e.Fltr.PuX3,y:e.Fltr.PuY3}],puppetShapeList:e.Fltr.puppetShapeList.map(function(l){return{rigidType:l.rigidType,originalVertexArray:Fa(l.originalVertexArray),deformedVertexArray:Fa(l.deformedVertexArray),indexArray:Array.from($f(l.indexArray)),pinOffsets:Bt(l.pinOffsets),posFinalPins:Bt(l.posFinalPins),pinVertexIndices:l.pinVertexIndices,selectedPin:l.selectedPin,pinPosition:Bt(l.PinP),pinRotation:l.PnRt,pinOverlay:l.PnOv,pinDepth:l.PnDp,meshQuality:l.meshQuality,meshExpansion:l.meshExpansion,meshRigidity:l.meshRigidity,imageResolution:l.imageResolution,meshBoundaryPath:{pathComponents:l.meshBoundaryPath.pathComponents.map(function(f){return{shapeOperation:f.shapeOperation.split(".")[1],paths:f.SbpL.map(function(s){return{closed:s.Clsp,points:s["Pts "].map(function(u){return{anchor:Hn(u.Anch),forward:Hn(u["Fwd "]),backward:Hn(u["Bwd "]),smooth:u.Smoo}})}})}})}}})}});case"PbPl":{for(var r=[],i=e.Fltr,a=0;a<Le.length&&i["PN".concat(Le[a],"a")];a++)for(var o=0;o<Le.length&&i["PN".concat(Le[a]).concat(Le[o])];o++)r.push({name:i["PN".concat(Le[a]).concat(Le[o])],value:i["PF".concat(Le[a]).concat(Le[o])]});return c(c({},n),{type:"oil paint plugin",filter:{name:e.Fltr.KnNm,gpu:e.Fltr.GpuY,lighting:e.Fltr.LIWy,parameters:r}})}case"HsbP":return c(c({},n),{type:"hsb/hsl",filter:{inputMode:zt.decode(e.Fltr.Inpt),rowOrder:zt.decode(e.Fltr.Otpt)}});case"oilPaint":return c(c({},n),{type:"oil paint",filter:{lightingOn:e.Fltr.lightingOn,stylization:e.Fltr.stylization,cleanliness:e.Fltr.cleanliness,brushScale:e.Fltr.brushScale,microBrush:e.Fltr.microBrush,lightDirection:e.Fltr.LghD,specularity:e.Fltr.specularity}});case"LqFy":return c(c({},n),{type:"liquify",filter:{liquifyMesh:e.Fltr.LqMe}});case"perspectiveWarpTransform":return c(c({},n),{type:"perspective warp",filter:{vertices:e.Fltr.vertices.map(Hn),warpedVertices:e.Fltr.warpedVertices.map(Hn),quads:e.Fltr.quads.map(function(l){return l.indices})}});case"Crvs":return c(c({},n),{type:"curves",filter:c({presetKind:Yo.decode(e.Fltr.presetKind)},e.Fltr.Adjs?{adjustments:e.Fltr.Adjs.map(function(l){var f=l.Chnl.map(rt.decode);if(l["Crv "])return{channels:f,curve:l["Crv "].map(function(s){var u={x:s.Hrzn,y:s.Vrtc};return s.Cnty&&(u.curved=!0),u})};if(l.Mpng)return{channels:f,values:l.Mpng};throw new Error("Unknown curve adjustment")})}:{})});case"BrgC":return c(c({},n),{type:"brightness/contrast",filter:{brightness:e.Fltr.Brgh,contrast:e.Fltr.Cntr,useLegacy:!!e.Fltr.useLegacy}});default:if(t.throwForMissingFeatures)throw new Error("Unknown filter classId: ".concat(e.Fltr._classID));return}else switch(e.filterID){case 1098281575:return c(c({},n),{type:"average"});case 1114403360:return c(c({},n),{type:"blur"});case 1114403405:return c(c({},n),{type:"blur more"});case 1148416099:return c(c({},n),{type:"despeckle"});case 1180922912:return c(c({},n),{type:"facet"});case 1181902701:return c(c({},n),{type:"fragment"});case 1399353968:return c(c({},n),{type:"sharpen"});case 1399353925:return c(c({},n),{type:"sharpen edges"});case 1399353933:return c(c({},n),{type:"sharpen more"});case 1181639749:return c(c({},n),{type:"find edges"});case 1399616122:return c(c({},n),{type:"solarize"});case 1314149187:return c(c({},n),{type:"ntsc colors"});case 1231976050:return c(c({},n),{type:"invert"});default:if(t.throwForMissingFeatures)throw new Error("Unknown filterID: ".concat(e.filterID))}}function Qf(e,t){return{enabled:e.enab,validAtPosition:e.validAtPosition,maskEnabled:e.filterMaskEnable,maskLinked:e.filterMaskLinked,maskExtendWithWhite:e.filterMaskExtendWithWhite,list:e.filterFXList.map(function(n){return Jf(n,t)}).filter(function(n){return!!n})}}function qe(e){return fe(e.radius,"radius")}function eu(e){var t={_name:"",_classID:"filterFX","Nm  ":e.name,blendOptions:{_name:"",_classID:"blendOptions",Opct:Be(e.opacity),"Md  ":Ne.encode(e.blendMode)},enab:e.enabled,hasoptions:e.hasOptions,FrgC:Ye(e.foregroundColor),BckC:Ye(e.backgroundColor)};switch(e.type){case"average":return c(c({},t),{filterID:1098281575});case"blur":return c(c({},t),{filterID:1114403360});case"blur more":return c(c({},t),{filterID:1114403405});case"box blur":return c(c({},t),{Fltr:{_name:"Box Blur",_classID:"boxblur","Rds ":qe(e.filter)},filterID:697});case"gaussian blur":return c(c({},t),{Fltr:{_name:"Gaussian Blur",_classID:"GsnB","Rds ":qe(e.filter)},filterID:1198747202});case"motion blur":return c(c({},t),{Fltr:{_name:"Motion Blur",_classID:"MtnB",Angl:e.filter.angle,Dstn:fe(e.filter.distance,"distance")},filterID:1299476034});case"radial blur":return c(c({},t),{Fltr:{_name:"Radial Blur",_classID:"RdlB",Amnt:e.filter.amount,BlrM:ko.encode(e.filter.method),BlrQ:Co.encode(e.filter.quality)},filterID:1382313026});case"shape blur":return c(c({},t),{Fltr:{_name:"Shape Blur",_classID:"shapeBlur","Rds ":qe(e.filter),customShape:{_name:"",_classID:"customShape","Nm  ":e.filter.customShape.name,Idnt:e.filter.customShape.id}},filterID:702});case"smart blur":return c(c({},t),{Fltr:{_name:"Smart Blur",_classID:"SmrB","Rds ":e.filter.radius,Thsh:e.filter.threshold,SmBQ:Po.encode(e.filter.quality),SmBM:Io.encode(e.filter.mode)},filterID:1399681602});case"surface blur":return c(c({},t),{Fltr:{_name:"Surface Blur",_classID:"surfaceBlur","Rds ":qe(e.filter),Thsh:e.filter.threshold},filterID:701});case"displace":return c(c({},t),{Fltr:{_name:"Displace",_classID:"Dspl",HrzS:e.filter.horizontalScale,VrtS:e.filter.verticalScale,DspM:Eo.encode(e.filter.displacementMap),UndA:Mn.encode(e.filter.undefinedAreas),DspF:{sig:e.filter.displacementFile.signature,path:e.filter.displacementFile.path}},filterID:1148416108});case"pinch":return c(c({},t),{Fltr:{_name:"Pinch",_classID:"Pnch",Amnt:e.filter.amount},filterID:1349411688});case"polar coordinates":return c(c({},t),{Fltr:{_name:"Polar Coordinates",_classID:"Plr ",Cnvr:wo.encode(e.filter.conversion)},filterID:1349284384});case"ripple":return c(c({},t),{Fltr:{_name:"Ripple",_classID:"Rple",Amnt:e.filter.amount,RplS:Ao.encode(e.filter.size)},filterID:1383099493});case"shear":return c(c({},t),{Fltr:{_name:"Shear",_classID:"Shr ",ShrP:e.filter.shearPoints.map(function(f){return{_name:"",_classID:"Pnt ",Hrzn:f.x,Vrtc:f.y}}),UndA:Mn.encode(e.filter.undefinedAreas),ShrS:e.filter.shearStart,ShrE:e.filter.shearEnd},filterID:1399353888});case"spherize":return c(c({},t),{Fltr:{_name:"Spherize",_classID:"Sphr",Amnt:e.filter.amount,SphM:Do.encode(e.filter.mode)},filterID:1399875698});case"twirl":return c(c({},t),{Fltr:{_name:"Twirl",_classID:"Twrl",Angl:e.filter.angle},filterID:1417114220});case"wave":return c(c({},t),{Fltr:{_name:"Wave",_classID:"Wave",Wvtp:Lo.encode(e.filter.type),NmbG:e.filter.numberOfGenerators,WLMn:e.filter.wavelength.min,WLMx:e.filter.wavelength.max,AmMn:e.filter.amplitude.min,AmMx:e.filter.amplitude.max,SclH:e.filter.scale.x,SclV:e.filter.scale.y,UndA:Mn.encode(e.filter.undefinedAreas),RndS:e.filter.randomSeed},filterID:1466005093});case"zigzag":return c(c({},t),{Fltr:{_name:"ZigZag",_classID:"ZgZg",Amnt:e.filter.amount,NmbR:e.filter.ridges,ZZTy:To.encode(e.filter.style)},filterID:1516722791});case"add noise":return c(c({},t),{Fltr:{_name:"Add Noise",_classID:"AdNs",Dstr:Oo.encode(e.filter.distribution),Nose:Be(e.filter.amount),Mnch:e.filter.monochromatic,FlRs:e.filter.randomSeed},filterID:1097092723});case"despeckle":return c(c({},t),{filterID:1148416099});case"dust and scratches":return c(c({},t),{Fltr:{_name:"Dust & Scratches",_classID:"DstS","Rds ":e.filter.radius,Thsh:e.filter.threshold},filterID:1148417107});case"median":return c(c({},t),{Fltr:{_name:"Median",_classID:"Mdn ","Rds ":qe(e.filter)},filterID:1298427424});case"reduce noise":return c(c({},t),{Fltr:{_name:"Reduce Noise",_classID:"denoise",ClNs:Be(e.filter.reduceColorNoise),Shrp:Be(e.filter.sharpenDetails),removeJPEGArtifact:e.filter.removeJpegArtifact,channelDenoise:e.filter.channelDenoise.map(function(f){return c({_name:"",_classID:"channelDenoiseParams",Chnl:f.channels.map(function(s){return rt.encode(s)}),Amnt:f.amount},f.preserveDetails?{EdgF:f.preserveDetails}:{})}),preset:e.filter.preset},filterID:633});case"color halftone":return c(c({},t),{Fltr:{_name:"Color Halftone",_classID:"ClrH","Rds ":e.filter.radius,Ang1:e.filter.angle1,Ang2:e.filter.angle2,Ang3:e.filter.angle3,Ang4:e.filter.angle4},filterID:1131180616});case"crystallize":return c(c({},t),{Fltr:{_name:"Crystallize",_classID:"Crst",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1131574132});case"facet":return c(c({},t),{filterID:1180922912});case"fragment":return c(c({},t),{filterID:1181902701});case"mezzotint":return c(c({},t),{Fltr:{_name:"Mezzotint",_classID:"Mztn",MztT:Mo.encode(e.filter.type),FlRs:e.filter.randomSeed},filterID:1299870830});case"mosaic":return c(c({},t),{Fltr:{_name:"Mosaic",_classID:"Msc ",ClSz:fe(e.filter.cellSize,"cellSize")},filterID:1299407648});case"pointillize":return c(c({},t),{Fltr:{_name:"Pointillize",_classID:"Pntl",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1349416044});case"clouds":return c(c({},t),{Fltr:{_name:"Clouds",_classID:"Clds",FlRs:e.filter.randomSeed},filterID:1131177075});case"difference clouds":return c(c({},t),{Fltr:{_name:"Difference Clouds",_classID:"DfrC",FlRs:e.filter.randomSeed},filterID:1147564611});case"fibers":return c(c({},t),{Fltr:{_name:"Fibers",_classID:"Fbrs",Vrnc:e.filter.variance,Strg:e.filter.strength,RndS:e.filter.randomSeed},filterID:1180856947});case"lens flare":return c(c({},t),{Fltr:{_name:"Lens Flare",_classID:"LnsF",Brgh:e.filter.brightness,FlrC:{_name:"",_classID:"Pnt ",Hrzn:e.filter.position.x,Vrtc:e.filter.position.y},"Lns ":Ro.encode(e.filter.lensType)},filterID:1282306886});case"sharpen":return c(c({},t),{filterID:1399353968});case"sharpen edges":return c(c({},t),{filterID:1399353925});case"sharpen more":return c(c({},t),{filterID:1399353933});case"smart sharpen":return c(c({},t),{Fltr:{_name:"Smart Sharpen",_classID:"smartSharpen",Amnt:Be(e.filter.amount),"Rds ":qe(e.filter),Thsh:e.filter.threshold,Angl:e.filter.angle,moreAccurate:e.filter.moreAccurate,blur:Bo.encode(e.filter.blur),preset:e.filter.preset,sdwM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:Be(e.filter.shadow.fadeAmount),Wdth:Be(e.filter.shadow.tonalWidth),"Rds ":e.filter.shadow.radius},hglM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:Be(e.filter.highlight.fadeAmount),Wdth:Be(e.filter.highlight.tonalWidth),"Rds ":e.filter.highlight.radius}},filterID:698});case"unsharp mask":return c(c({},t),{Fltr:{_name:"Unsharp Mask",_classID:"UnsM",Amnt:Be(e.filter.amount),"Rds ":qe(e.filter),Thsh:e.filter.threshold},filterID:1433301837});case"diffuse":return c(c({},t),{Fltr:{_name:"Diffuse",_classID:"Dfs ","Md  ":_o.encode(e.filter.mode),FlRs:e.filter.randomSeed},filterID:1147564832});case"emboss":return c(c({},t),{Fltr:{_name:"Emboss",_classID:"Embs",Angl:e.filter.angle,Hght:e.filter.height,Amnt:e.filter.amount},filterID:1164796531});case"extrude":return c(c({},t),{Fltr:{_name:"Extrude",_classID:"Extr",ExtS:e.filter.size,ExtD:e.filter.depth,ExtF:e.filter.solidFrontFaces,ExtM:e.filter.maskIncompleteBlocks,ExtT:No.encode(e.filter.type),ExtR:zo.encode(e.filter.depthMode),FlRs:e.filter.randomSeed},filterID:1165522034});case"find edges":return c(c({},t),{filterID:1181639749});case"solarize":return c(c({},t),{filterID:1399616122});case"tiles":return c(c({},t),{Fltr:{_name:"Tiles",_classID:"Tls ",TlNm:e.filter.numberOfTiles,TlOf:e.filter.maximumOffset,FlCl:Uo.encode(e.filter.fillEmptyAreaWith),FlRs:e.filter.randomSeed},filterID:1416393504});case"trace contour":return c(c({},t),{Fltr:{_name:"Trace Contour",_classID:"TrcC","Lvl ":e.filter.level,"Edg ":Go.encode(e.filter.edge)},filterID:1416782659});case"wind":return c(c({},t),{Fltr:{_name:"Wind",_classID:"Wnd ",WndM:Vo.encode(e.filter.method),Drct:jo.encode(e.filter.direction)},filterID:1466852384});case"de-interlace":return c(c({},t),{Fltr:{_name:"De-Interlace",_classID:"Dntr",IntE:Ho.encode(e.filter.eliminate),IntC:Wo.encode(e.filter.newFieldsBy)},filterID:1148089458});case"ntsc colors":return c(c({},t),{filterID:1314149187});case"invert":return c(c({},t),{filterID:1231976050});case"custom":return c(c({},t),{Fltr:{_name:"Custom",_classID:"Cstm","Scl ":e.filter.scale,Ofst:e.filter.offset,Mtrx:e.filter.matrix},filterID:1131639917});case"high pass":return c(c({},t),{Fltr:{_name:"High Pass",_classID:"HghP","Rds ":qe(e.filter)},filterID:1214736464});case"maximum":return c(c({},t),{Fltr:{_name:"Maximum",_classID:"Mxm ","Rds ":qe(e.filter)},filterID:1299737888});case"minimum":return c(c({},t),{Fltr:{_name:"Minimum",_classID:"Mnm ","Rds ":qe(e.filter)},filterID:1299082528});case"offset":return c(c({},t),{Fltr:{_name:"Offset",_classID:"Ofst",Hrzn:e.filter.horizontal,Vrtc:e.filter.vertical,"Fl  ":Xo.encode(e.filter.undefinedAreas)},filterID:1332114292});case"puppet":return c(c({},t),{Fltr:{_name:"Rigid Transform",_classID:"rigidTransform",null:["Ordn.Trgt"],rigidType:e.filter.rigidType,puppetShapeList:e.filter.puppetShapeList.map(function(f){return{_name:"",_classID:"puppetShape",rigidType:f.rigidType,VrsM:1,VrsN:0,originalVertexArray:pr(new Float32Array(jn(f.originalVertexArray))),deformedVertexArray:pr(new Float32Array(jn(f.deformedVertexArray))),indexArray:pr(new Uint32Array(f.indexArray)),pinOffsets:jn(f.pinOffsets),posFinalPins:jn(f.posFinalPins),pinVertexIndices:f.pinVertexIndices,PinP:jn(f.pinPosition),PnRt:f.pinRotation,PnOv:f.pinOverlay,PnDp:f.pinDepth,meshQuality:f.meshQuality,meshExpansion:f.meshExpansion,meshRigidity:f.meshRigidity,imageResolution:f.imageResolution,meshBoundaryPath:{_name:"",_classID:"pathClass",pathComponents:f.meshBoundaryPath.pathComponents.map(function(s){return{_name:"",_classID:"PaCm",shapeOperation:"shapeOperation.".concat(s.shapeOperation),SbpL:s.paths.map(function(u){return{_name:"",_classID:"Sbpl",Clsp:u.closed,"Pts ":u.points.map(function(d){return{_name:"",_classID:"Pthp",Anch:Wn(d.anchor),"Fwd ":Wn(d.forward),"Bwd ":Wn(d.backward),Smoo:d.smooth}})}})}})},selectedPin:f.selectedPin}}),PuX0:e.filter.bounds[0].x,PuX1:e.filter.bounds[1].x,PuX2:e.filter.bounds[2].x,PuX3:e.filter.bounds[3].x,PuY0:e.filter.bounds[0].y,PuY1:e.filter.bounds[1].y,PuY2:e.filter.bounds[2].y,PuY3:e.filter.bounds[3].y},filterID:991});case"oil paint plugin":{for(var n={},r=0;r<e.filter.parameters.length;r++){var i=e.filter.parameters[r],a=i.name,o=i.value,l="".concat(Le[Math.floor(r/Le.length)]).concat(Le[r%Le.length]);n["PN".concat(l)]=a,n["PT".concat(l)]=0,n["PF".concat(l)]=o}return c(c({},t),{Fltr:c({_name:"Oil Paint Plugin",_classID:"PbPl",KnNm:e.filter.name,GpuY:e.filter.gpu,LIWy:e.filter.lighting,FPth:"1"},n),filterID:1348620396})}case"oil paint":return c(c({},t),{Fltr:{_name:"Oil Paint",_classID:"oilPaint",lightingOn:e.filter.lightingOn,stylization:e.filter.stylization,cleanliness:e.filter.cleanliness,brushScale:e.filter.brushScale,microBrush:e.filter.microBrush,LghD:e.filter.lightDirection,specularity:e.filter.specularity},filterID:1122});case"liquify":return c(c({},t),{Fltr:{_name:"Liquify",_classID:"LqFy",LqMe:e.filter.liquifyMesh},filterID:1282492025});case"perspective warp":return c(c({},t),{Fltr:{_name:"Perspective Warp",_classID:"perspectiveWarpTransform",vertices:e.filter.vertices.map(Wn),warpedVertices:e.filter.warpedVertices.map(Wn),quads:e.filter.quads.map(function(f){return{indices:f}})},filterID:442});case"curves":return c(c({},t),{Fltr:c({_name:"Curves",_classID:"Crvs",presetKind:Yo.encode(e.filter.presetKind)},e.filter.adjustments?{Adjs:e.filter.adjustments.map(function(f){return"curve"in f?{_name:"",_classID:"CrvA",Chnl:f.channels.map(rt.encode),"Crv ":f.curve.map(function(s){return c({_name:"",_classID:"Pnt ",Hrzn:s.x,Vrtc:s.y},s.curved?{Cnty:!0}:{})})}:{_name:"",_classID:"CrvA",Chnl:f.channels.map(rt.encode),Mpng:f.values}})}:{}),filterID:1131574899});case"brightness/contrast":return c(c({},t),{Fltr:{_name:"Brightness/Contrast",_classID:"BrgC",Brgh:e.filter.brightness,Cntr:e.filter.contrast,useLegacy:!!e.filter.useLegacy},filterID:1114793795});default:throw new Error("Unknow filter type: ".concat(e.type))}}function dl(e){if(e.warp)return e.warp;if(!e.width||!e.height)throw new Error("You must provide width and height of the linked image in placedLayer");var t=e.width,n=e.height,r=0,i=t/3,a=t*2/3,o=t,l=0,f=n/3,s=n*2/3,u=n;return{style:"custom",value:0,perspective:0,perspectiveOther:0,rotate:"horizontal",bounds:{top:{value:0,units:"Pixels"},left:{value:0,units:"Pixels"},bottom:{value:n,units:"Pixels"},right:{value:t,units:"Pixels"}},uOrder:4,vOrder:4,customEnvelopeWarp:{meshPoints:[{x:r,y:l},{x:i,y:l},{x:a,y:l},{x:o,y:l},{x:r,y:f},{x:i,y:f},{x:a,y:f},{x:o,y:f},{x:r,y:s},{x:i,y:s},{x:a,y:s},{x:o,y:s},{x:r,y:u},{x:i,y:u},{x:a,y:u},{x:o,y:u}]}}}N("SoLd",ae("placedLayer"),function(e,t,n){if(le(e)!=="soLD")throw new Error("Invalid SoLd type");var r=_(e);if(r!==4&&r!==5)throw new Error("Invalid SoLd version");var i=K(e,!0);t.placedLayer={id:i.Idnt,placed:i.placed,type:Tn[i.Type],pageNumber:i.PgNm,totalPages:i.totalPages,frameStep:Pe(i.frameStep),duration:Pe(i.duration),frameCount:i.frameCount,transform:i.Trnf,width:i["Sz  "].Wdth,height:i["Sz  "].Hght,resolution:re(i.Rslt),warp:cl(i.quiltWarp||i.warp)},i.nonAffineTransform&&i.nonAffineTransform.some(function(a,o){return a!==i.Trnf[o]})&&(t.placedLayer.nonAffineTransform=i.nonAffineTransform),i.Crop&&(t.placedLayer.crop=i.Crop),i.comp&&(t.placedLayer.comp=i.comp),i.compInfo&&(t.placedLayer.compInfo={compID:i.compInfo.compID,originalCompID:i.compInfo.originalCompID}),i.filterFX&&(t.placedLayer.filter=Qf(i.filterFX,e)),R(e,n())},function(e,t){var n,r;G(e,"soLD"),j(e,4);var i=t.placedLayer;if(!i.id||typeof i.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(i.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");var a=c(c({Idnt:i.id,placed:(n=i.placed)!==null&&n!==void 0?n:i.id,PgNm:i.pageNumber||1,totalPages:i.totalPages||1},i.crop?{Crop:i.crop}:{}),{frameStep:i.frameStep||{numerator:0,denominator:600},duration:i.duration||{numerator:0,denominator:600},frameCount:i.frameCount||0,Annt:16,Type:Tn.indexOf(i.type),Trnf:i.transform,nonAffineTransform:(r=i.nonAffineTransform)!==null&&r!==void 0?r:i.transform,warp:Gt(dl(i)),"Sz  ":{_name:"",_classID:"Pnt ",Wdth:i.width||0,Hght:i.height||0},Rslt:i.resolution?fe(i.resolution,"resolution"):{units:"Density",value:72}});if(i.filter&&(a.filterFX={_name:"",_classID:"filterFXStyle",enab:i.filter.enabled,validAtPosition:i.filter.validAtPosition,filterMaskEnable:i.filter.maskEnabled,filterMaskLinked:i.filter.maskLinked,filterMaskExtendWithWhite:i.filter.maskExtendWithWhite,filterFXList:i.filter.list.map(function(l){return eu(l)})}),i.warp&&Nr(i.warp)){var o=Gt(i.warp);a.quiltWarp=o,a.warp={warpStyle:"warpStyle.warpNone",warpValue:o.warpValue,warpPerspective:o.warpPerspective,warpPerspectiveOther:o.warpPerspectiveOther,warpRotate:o.warpRotate,bounds:o.bounds,uOrder:o.uOrder,vOrder:o.vOrder}}else delete a.quiltWarp;i.comp&&(a.comp=i.comp),i.compInfo&&(a.compInfo=i.compInfo),$(e,"","null",a,a.quiltWarp?"quiltWarp":"warp")});Un("SoLE","SoLd");N("fxrp",ae("referencePoint"),function(e,t){t.referencePoint={x:ze(e),y:ze(e)}},function(e,t){$e(e,t.referencePoint.x),$e(e,t.referencePoint.y)});N("Lr16",function(){return!1},function(e,t,n,r,i){Mr(e,r,i)},function(e,t){});N("Lr32",function(){return!1},function(e,t,n,r,i){Mr(e,r,i)},function(e,t){});N("LMsk",ae("userMask"),function(e,t){t.userMask={colorSpace:ye(e),opacity:E(e)/255};var n=T(e);if(n!==128)throw new Error("Invalid flag value");R(e,1)},function(e,t){var n=t.userMask;Fe(e,n.colorSpace),I(e,qa(n.opacity,0,1)*255),B(e,128),ie(e,1)});N("Patt",function(e){return!e},function(e,t,n){n()&&R(e,n())},function(e,t){});function xa(e){var t=_(e),n=_(e),r=_(e),i=_(e);return{top:t,left:n,bottom:r,right:i}}function ka(e,t){j(e,t.top),j(e,t.left),j(e,t.bottom),j(e,t.right)}N("Anno",function(e){return e.annotations!==void 0},function(e,t,n){var r=E(e),i=E(e);if(r!==2||i!==1)throw new Error("Invalid Anno version");for(var a=w(e),o=[],l=0;l<a;l++){w(e);var f=le(e),s=!!T(e);T(e),E(e);var u=xa(e),d=xa(e),h=ye(e),p=pn(e,2),y=pn(e,2),v=pn(e,2);w(e),le(e);var F=w(e),g=void 0;if(f==="txtA")F>=2&&E(e)===65279?g=Or(e,(F-2)/2):(e.offset-=2,g=Yt(e,F)),g=g.replace(/\r/g,`
`);else if(f==="sndA")g=ke(e,F);else throw new Error("Unknown annotation type");o.push({type:f==="txtA"?"text":"sound",open:s,iconLocation:u,popupLocation:d,color:h,author:p,name:y,date:v,data:g})}t.annotations=o,R(e,n())},function(e,t){var n=t.annotations;I(e,2),I(e,1),L(e,n.length);for(var r=0,i=n;r<i.length;r++){var a=i[r],o=a.type==="sound";if(o&&!(a.data instanceof Uint8Array))throw new Error("Sound annotation data should be Uint8Array");if(!o&&typeof a.data!="string")throw new Error("Text annotation data should be string");var l=e.offset;L(e,0),G(e,o?"sndA":"txtA"),B(e,a.open?1:0),B(e,28),I(e,1),ka(e,a.iconLocation),ka(e,a.popupLocation),Fe(e,a.color),Rn(e,a.author||"",2),Rn(e,a.name||"",2),Rn(e,a.date||"",2);var f=e.offset;L(e,0),G(e,o?"sndM":"txtC"),L(e,0);var s=e.offset;if(o)sn(e,a.data);else{I(e,65279);for(var u=a.data.replace(/\n/g,"\r"),d=0;d<u.length;d++)I(e,u.charCodeAt(d))}e.view.setUint32(l,e.offset-l,!1),e.view.setUint32(f,e.offset-f,!1),e.view.setUint32(s-4,e.offset-s,!1)}});function hl(e){N(e,function(t){var n=t;return!(!n.linkedFiles||!n.linkedFiles.length||e==="lnkE"&&!n.linkedFiles.some(function(r){return r.linkedFile}))},function(t,n,r,i){var a=n;for(a.linkedFiles=a.linkedFiles||[];r()>8;){var o=dr(t),l=t.offset,f=le(t),s=_(t),u=pn(t,1),d=xe(t),h=le(t).trim(),p=le(t).trim(),y=dr(t),v=T(t),F=v?K(t):void 0,g=f==="liFE"?K(t):void 0,b={id:u,name:d};if(h&&(b.type=h),p&&(b.creator=p),F&&(b.descriptor={compInfo:{compID:F.compInfo.compID,originalCompID:F.compInfo.originalCompID}}),f==="liFE"&&s>3){var S=_(t),m=T(t),x=T(t),P=T(t),k=T(t),C=ze(t),O=Math.floor(C),D=(C-O)*1e3;b.time=new Date(Date.UTC(S,m,x,P,k,O,D)).toISOString()}var M=f==="liFE"?dr(t):0;for(f==="liFA"&&R(t,8),f==="liFD"&&(b.data=ke(t,y)),s>=5&&(b.childDocumentID=xe(t)),s>=6&&(b.assetModTime=ze(t)),s>=7&&(b.assetLockedState=T(t)),f==="liFE"&&s===2&&(b.data=ke(t,M)),t.skipLinkedFilesData&&(b.data=void 0),e==="lnkE"&&(b.linkedFile={fileSize:M,name:(g==null?void 0:g["Nm  "])||"",fullPath:(g==null?void 0:g.fullPath)||"",originalPath:(g==null?void 0:g.originalPath)||"",relativePath:(g==null?void 0:g.relPath)||""}),a.linkedFiles.push(b);o%4;)o++;t.offset=l+o}R(t,r())},function(t,n){for(var r,i,a,o,l,f,s,u,d,h=n,p=0,y=h.linkedFiles;p<y.length;p++){var v=y[p];if(e==="lnkE"==!!v.linkedFile){var F=2;v.assetLockedState!=null?F=7:v.assetModTime!=null?F=6:v.childDocumentID!=null?F=5:e=="lnkE"&&(F=3),hr(t,0);var g=t.offset;if(G(t,e==="lnkE"?"liFE":v.data?"liFD":"liFA"),j(t,F),!v.id||typeof v.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(v.id))throw new Error("Linked file ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if(Rn(t,v.id,1),Fn(t,v.name||""),G(t,v.type?"".concat(v.type,"    ").substring(0,4):"    "),G(t,v.creator?"".concat(v.creator,"    ").substring(0,4):"\0\0\0\0"),hr(t,v.data?v.data.byteLength:0),v.descriptor&&v.descriptor.compInfo){var b={compInfo:{compID:v.descriptor.compInfo.compID,originalCompID:v.descriptor.compInfo.originalCompID}};B(t,1),$(t,"","null",b)}else B(t,0);if(e==="lnkE"){var b={descVersion:2,"Nm  ":(i=(r=v.linkedFile)===null||r===void 0?void 0:r.name)!==null&&i!==void 0?i:"",fullPath:(o=(a=v.linkedFile)===null||a===void 0?void 0:a.fullPath)!==null&&o!==void 0?o:"",originalPath:(f=(l=v.linkedFile)===null||l===void 0?void 0:l.originalPath)!==null&&f!==void 0?f:"",relPath:(u=(s=v.linkedFile)===null||s===void 0?void 0:s.relativePath)!==null&&u!==void 0?u:""};$(t,"","ExternalFileLink",b);var S=v.time?new Date(v.time):new Date;j(t,S.getUTCFullYear()),B(t,S.getUTCMonth()),B(t,S.getUTCDate()),B(t,S.getUTCHours()),B(t,S.getUTCMinutes()),$e(t,S.getUTCSeconds()+S.getUTCMilliseconds()/1e3)}v.data?sn(t,v.data):hr(t,((d=v.linkedFile)===null||d===void 0?void 0:d.fileSize)||0),F>=5&&Fn(t,v.childDocumentID||""),F>=6&&$e(t,v.assetModTime||0),F>=7&&B(t,v.assetLockedState||0);var m=t.offset-g;for(t.view.setUint32(g-4,m,!1);m%4;)m++,B(t,0)}}})}hl("lnk2");hl("lnkE");Un("lnkD","lnk2");Un("lnk3","lnk2");N("pths",ae("pathList"),function(e,t){K(e,!0),t.pathList=[]},function(e,t){var n={pathList:[]};$(e,"","pathsDataClass",n)});N("lyvr",ae("version"),function(e,t){return t.version=w(e)},function(e,t){return L(e,t.version)});N("lfxs",function(){return!1},function(e,t,n){var r=w(e);if(r!==0)throw new Error("Invalid lfxs version");var i=K(e);t.effects=lt(i,!!e.logMissingFeatures),R(e,n())},function(e,t,n,r){var i=ot(t.effects,!!r.logMissingFeatures,!0);L(e,0),$(e,"","null",i)});function Ce(e){return function(t){return!!t.adjustment&&t.adjustment.type===e}}N("brit",Ce("brightness/contrast"),function(e,t,n){t.adjustment||(t.adjustment={type:"brightness/contrast",brightness:Q(e),contrast:Q(e),meanValue:Q(e),labColorOnly:!!T(e),useLegacy:!0}),R(e,n())},function(e,t){var n,r=t.adjustment;te(e,r.brightness||0),te(e,r.contrast||0),te(e,(n=r.meanValue)!==null&&n!==void 0?n:127),B(e,r.labColorOnly?1:0),ie(e,1)});function Lt(e){var t=Q(e),n=Q(e),r=Q(e),i=Q(e),a=Q(e)/100;return{shadowInput:t,highlightInput:n,shadowOutput:r,highlightOutput:i,midtoneInput:a}}function Xn(e,t){te(e,t.shadowInput),te(e,t.highlightInput),te(e,t.shadowOutput),te(e,t.highlightOutput),te(e,Math.round(t.midtoneInput*100))}N("levl",Ce("levels"),function(e,t,n){if(E(e)!==2)throw new Error("Invalid levl version");t.adjustment=c(c({},t.adjustment),{type:"levels",rgb:Lt(e),red:Lt(e),green:Lt(e),blue:Lt(e)}),R(e,n())},function(e,t){var n=t.adjustment,r={shadowInput:0,highlightInput:255,shadowOutput:0,highlightOutput:255,midtoneInput:1};I(e,2),Xn(e,n.rgb||r),Xn(e,n.red||r),Xn(e,n.blue||r),Xn(e,n.green||r);for(var i=0;i<59;i++)Xn(e,r)});function Tt(e){for(var t=E(e),n=[],r=0;r<t;r++){var i=Q(e),a=Q(e);n.push({input:a,output:i})}return n}function dn(e,t){I(e,t.length);for(var n=0,r=t;n<r.length;n++){var i=r[n];I(e,i.output),I(e,i.input)}}N("curv",Ce("curves"),function(e,t,n){if(T(e),E(e)!==1)throw new Error("Invalid curv version");E(e);var r=E(e),i={type:"curves"};r&1&&(i.rgb=Tt(e)),r&2&&(i.red=Tt(e)),r&4&&(i.green=Tt(e)),r&8&&(i.blue=Tt(e)),t.adjustment=c(c({},t.adjustment),i),R(e,n())},function(e,t){var n=t.adjustment,r=n.rgb,i=n.red,a=n.green,o=n.blue,l=0,f=0;r&&r.length&&(l|=1,f++),i&&i.length&&(l|=2,f++),a&&a.length&&(l|=4,f++),o&&o.length&&(l|=8,f++),B(e,0),I(e,1),I(e,0),I(e,l),r&&r.length&&dn(e,r),i&&i.length&&dn(e,i),a&&a.length&&dn(e,a),o&&o.length&&dn(e,o),G(e,"Crv "),I(e,4),I(e,0),I(e,f),r&&r.length&&(I(e,0),dn(e,r)),i&&i.length&&(I(e,1),dn(e,i)),a&&a.length&&(I(e,2),dn(e,a)),o&&o.length&&(I(e,3),dn(e,o))});N("expA",Ce("exposure"),function(e,t,n){if(E(e)!==1)throw new Error("Invalid expA version");t.adjustment=c(c({},t.adjustment),{type:"exposure",exposure:He(e),offset:He(e),gamma:He(e)}),R(e,n())},function(e,t){var n=t.adjustment;I(e,1),We(e,n.exposure),We(e,n.offset),We(e,n.gamma),ie(e,2)});N("vibA",Ce("vibrance"),function(e,t,n){var r=K(e);t.adjustment={type:"vibrance"},r.vibrance!==void 0&&(t.adjustment.vibrance=r.vibrance),r.Strt!==void 0&&(t.adjustment.saturation=r.Strt),R(e,n())},function(e,t){var n=t.adjustment,r={};n.vibrance!==void 0&&(r.vibrance=n.vibrance),n.saturation!==void 0&&(r.Strt=n.saturation),$(e,"","null",r)});function mn(e){return{a:Q(e),b:Q(e),c:Q(e),d:Q(e),hue:Q(e),saturation:Q(e),lightness:Q(e)}}function gn(e,t){var n=t||{};te(e,n.a||0),te(e,n.b||0),te(e,n.c||0),te(e,n.d||0),te(e,n.hue||0),te(e,n.saturation||0),te(e,n.lightness||0)}N("hue2",Ce("hue/saturation"),function(e,t,n){if(E(e)!==2)throw new Error("Invalid hue2 version");t.adjustment=c(c({},t.adjustment),{type:"hue/saturation",master:mn(e),reds:mn(e),yellows:mn(e),greens:mn(e),cyans:mn(e),blues:mn(e),magentas:mn(e)}),R(e,n())},function(e,t){var n=t.adjustment;I(e,2),gn(e,n.master),gn(e,n.reds),gn(e,n.yellows),gn(e,n.greens),gn(e,n.cyans),gn(e,n.blues),gn(e,n.magentas)});function vr(e){return{cyanRed:Q(e),magentaGreen:Q(e),yellowBlue:Q(e)}}function mr(e,t){te(e,t.cyanRed||0),te(e,t.magentaGreen||0),te(e,t.yellowBlue||0)}N("blnc",Ce("color balance"),function(e,t,n){t.adjustment={type:"color balance",shadows:vr(e),midtones:vr(e),highlights:vr(e),preserveLuminosity:!!T(e)},R(e,n())},function(e,t){var n=t.adjustment;mr(e,n.shadows||{}),mr(e,n.midtones||{}),mr(e,n.highlights||{}),B(e,n.preserveLuminosity?1:0),ie(e,1)});N("blwh",Ce("black & white"),function(e,t,n){var r=K(e);t.adjustment={type:"black & white",reds:r["Rd  "],yellows:r.Yllw,greens:r["Grn "],cyans:r["Cyn "],blues:r["Bl  "],magentas:r.Mgnt,useTint:!!r.useTint,presetKind:r.bwPresetKind,presetFileName:r.blackAndWhitePresetFileName},r.tintColor!==void 0&&(t.adjustment.tintColor=Xe(r.tintColor)),R(e,n())},function(e,t){var n=t.adjustment,r={"Rd  ":n.reds||0,Yllw:n.yellows||0,"Grn ":n.greens||0,"Cyn ":n.cyans||0,"Bl  ":n.blues||0,Mgnt:n.magentas||0,useTint:!!n.useTint,tintColor:Ye(n.tintColor),bwPresetKind:n.presetKind||0,blackAndWhitePresetFileName:n.presetFileName||""};$(e,"","null",r)});N("phfl",Ce("photo filter"),function(e,t,n){var r=E(e);if(r!==2&&r!==3)throw new Error("Invalid phfl version");var i;r===2?i=ye(e):i={l:_(e)/100,a:_(e)/100,b:_(e)/100},t.adjustment={type:"photo filter",color:i,density:w(e)/100,preserveLuminosity:!!T(e)},R(e,n())},function(e,t){var n=t.adjustment;I(e,2),Fe(e,n.color||{l:0,a:0,b:0}),L(e,(n.density||0)*100),B(e,n.preserveLuminosity?1:0),ie(e,3)});function Ot(e){var t=Q(e),n=Q(e),r=Q(e);R(e,2);var i=Q(e);return{red:t,green:n,blue:r,constant:i}}function Yn(e,t){var n=t||{};te(e,n.red),te(e,n.green),te(e,n.blue),ie(e,2),te(e,n.constant)}N("mixr",Ce("channel mixer"),function(e,t,n){if(E(e)!==1)throw new Error("Invalid mixr version");var r=t.adjustment=c(c({},t.adjustment),{type:"channel mixer",monochrome:!!E(e)});r.monochrome||(r.red=Ot(e),r.green=Ot(e),r.blue=Ot(e)),r.gray=Ot(e),R(e,n())},function(e,t){var n=t.adjustment;I(e,1),I(e,n.monochrome?1:0),n.monochrome?(Yn(e,n.gray),ie(e,3*5*2)):(Yn(e,n.red),Yn(e,n.green),Yn(e,n.blue),Yn(e,n.gray))});var Ca=z("colorLookupType","3DLUT",{"3dlut":"3DLUT",abstractProfile:"abstractProfile",deviceLinkProfile:"deviceLinkProfile"}),Ia=z("LUTFormatType","look",{look:"LUTFormatLOOK",cube:"LUTFormatCUBE","3dl":"LUTFormat3DL"}),Mt=z("colorLookupOrder","rgb",{rgb:"rgbOrder",bgr:"bgrOrder"});N("clrL",Ce("color lookup"),function(e,t,n){if(E(e)!==1)throw new Error("Invalid clrL version");var r=K(e);t.adjustment={type:"color lookup"};var i=t.adjustment;r.lookupType!==void 0&&(i.lookupType=Ca.decode(r.lookupType)),r["Nm  "]!==void 0&&(i.name=r["Nm  "]),r.Dthr!==void 0&&(i.dither=r.Dthr),r.profile!==void 0&&(i.profile=r.profile),r.LUTFormat!==void 0&&(i.lutFormat=Ia.decode(r.LUTFormat)),r.dataOrder!==void 0&&(i.dataOrder=Mt.decode(r.dataOrder)),r.tableOrder!==void 0&&(i.tableOrder=Mt.decode(r.tableOrder)),r.LUT3DFileData!==void 0&&(i.lut3DFileData=r.LUT3DFileData),r.LUT3DFileName!==void 0&&(i.lut3DFileName=r.LUT3DFileName),R(e,n())},function(e,t){var n=t.adjustment,r={};n.lookupType!==void 0&&(r.lookupType=Ca.encode(n.lookupType)),n.name!==void 0&&(r["Nm  "]=n.name),n.dither!==void 0&&(r.Dthr=n.dither),n.profile!==void 0&&(r.profile=n.profile),n.lutFormat!==void 0&&(r.LUTFormat=Ia.encode(n.lutFormat)),n.dataOrder!==void 0&&(r.dataOrder=Mt.encode(n.dataOrder)),n.tableOrder!==void 0&&(r.tableOrder=Mt.encode(n.tableOrder)),n.lut3DFileData!==void 0&&(r.LUT3DFileData=n.lut3DFileData),n.lut3DFileName!==void 0&&(r.LUT3DFileName=n.lut3DFileName),I(e,1),$(e,"","null",r)});N("nvrt",Ce("invert"),function(e,t,n){t.adjustment={type:"invert"},R(e,n())},function(){});N("post",Ce("posterize"),function(e,t,n){t.adjustment={type:"posterize",levels:E(e)},R(e,n())},function(e,t){var n,r=t.adjustment;I(e,(n=r.levels)!==null&&n!==void 0?n:4),ie(e,2)});N("thrs",Ce("threshold"),function(e,t,n){t.adjustment={type:"threshold",level:E(e)},R(e,n())},function(e,t){var n,r=t.adjustment;I(e,(n=r.level)!==null&&n!==void 0?n:128),ie(e,2)});var Pa=["","","","rgb","hsb","","lab"];N("grdm",Ce("gradient map"),function(e,t,n){var r=E(e);if(r!==1&&r!==3)throw new Error("Invalid grdm version");var i={type:"gradient map",gradientType:"solid"};i.reverse=!!T(e),i.dither=!!T(e);var a=!!T(e);if(e.offset--,a){var o=le(e);i.method=Nn.decode(o)}i.name=xe(e),i.colorStops=[],i.opacityStops=[];for(var l=E(e),f=0;f<l;f++)i.colorStops.push({location:w(e),midpoint:w(e)/100,color:ye(e)}),R(e,2);for(var s=E(e),f=0;f<s;f++)i.opacityStops.push({location:w(e),midpoint:w(e)/100,opacity:E(e)/255});var u=E(e);if(u!==2)throw new Error("Invalid grdm expansion count");var d=E(e);i.smoothness=d/4096;var h=E(e);if(h!==32)throw new Error("Invalid grdm length");i.gradientType=E(e)?"noise":"solid",i.randomSeed=w(e),i.addTransparency=!!E(e),i.restrictColors=!!E(e),i.roughness=w(e)/4096,i.colorModel=Pa[E(e)]||"rgb",i.min=[E(e)/32768,E(e)/32768,E(e)/32768,E(e)/32768],i.max=[E(e)/32768,E(e)/32768,E(e)/32768,E(e)/32768],R(e,n());for(var p=0,y=i.colorStops;p<y.length;p++){var v=y[p];v.location/=d}for(var F=0,g=i.opacityStops;F<g.length;F++){var v=g[F];v.location/=d}t.adjustment=i},function(e,t){var n,r,i,a=t.adjustment;I(e,a.method!==void 0?3:1),B(e,a.reverse?1:0),B(e,a.dither?1:0),a.method!==void 0&&G(e,Nn.encode(a.method)),Fn(e,a.name||""),I(e,a.colorStops&&a.colorStops.length||0);for(var o=Math.round(((n=a.smoothness)!==null&&n!==void 0?n:1)*4096),l=0,f=a.colorStops||[];l<f.length;l++){var s=f[l];L(e,Math.round(s.location*o)),L(e,Math.round(s.midpoint*100)),Fe(e,s.color),ie(e,2)}I(e,a.opacityStops&&a.opacityStops.length||0);for(var u=0,d=a.opacityStops||[];u<d.length;u++){var s=d[u];L(e,Math.round(s.location*o)),L(e,Math.round(s.midpoint*100)),I(e,Math.round(s.opacity*255))}I(e,2),I(e,o),I(e,32),I(e,a.gradientType==="noise"?1:0),L(e,a.randomSeed||0),I(e,a.addTransparency?1:0),I(e,a.restrictColors?1:0),L(e,Math.round(((r=a.roughness)!==null&&r!==void 0?r:1)*4096));var h=Pa.indexOf((i=a.colorModel)!==null&&i!==void 0?i:"rgb");I(e,h===-1?3:h);for(var p=0;p<4;p++)I(e,Math.round((a.min&&a.min[p]||0)*32768));for(var p=0;p<4;p++)I(e,Math.round((a.max&&a.max[p]||0)*32768));ie(e,4)});function en(e){return{c:Q(e),m:Q(e),y:Q(e),k:Q(e)}}function nn(e,t){var n=t||{};te(e,n.c),te(e,n.m),te(e,n.y),te(e,n.k)}N("selc",Ce("selective color"),function(e,t){if(E(e)!==1)throw new Error("Invalid selc version");var n=E(e)?"absolute":"relative";R(e,8),t.adjustment={type:"selective color",mode:n,reds:en(e),yellows:en(e),greens:en(e),cyans:en(e),blues:en(e),magentas:en(e),whites:en(e),neutrals:en(e),blacks:en(e)}},function(e,t){var n=t.adjustment;I(e,1),I(e,n.mode==="absolute"?1:0),ie(e,8),nn(e,n.reds),nn(e,n.yellows),nn(e,n.greens),nn(e,n.cyans),nn(e,n.blues),nn(e,n.magentas),nn(e,n.whites),nn(e,n.neutrals),nn(e,n.blacks)});N("CgEd",function(e){var t=e.adjustment;return t?t.type==="brightness/contrast"&&!t.useLegacy||(t.type==="levels"||t.type==="curves"||t.type==="exposure"||t.type==="channel mixer"||t.type==="hue/saturation")&&t.presetFileName!==void 0:!1},function(e,t,n){var r=K(e);if(r.Vrsn!==1)throw new Error("Invalid CgEd version");"presetFileName"in r?t.adjustment=c(c({},t.adjustment),{presetKind:r.presetKind,presetFileName:r.presetFileName}):"curvesPresetFileName"in r?t.adjustment=c(c({},t.adjustment),{presetKind:r.curvesPresetKind,presetFileName:r.curvesPresetFileName}):"mixerPresetFileName"in r?t.adjustment=c(c({},t.adjustment),{presetKind:r.mixerPresetKind,presetFileName:r.mixerPresetFileName}):t.adjustment={type:"brightness/contrast",brightness:r.Brgh,contrast:r.Cntr,meanValue:r.means,useLegacy:!!r.useLegacy,labColorOnly:!!r["Lab "],auto:!!r.Auto},R(e,n())},function(e,t){var n,r,i,a,o=t.adjustment;if(o.type==="levels"||o.type==="exposure"||o.type==="hue/saturation"){var l={Vrsn:1,presetKind:(n=o.presetKind)!==null&&n!==void 0?n:1,presetFileName:o.presetFileName||""};$(e,"","null",l)}else if(o.type==="curves"){var l={Vrsn:1,curvesPresetKind:(r=o.presetKind)!==null&&r!==void 0?r:1,curvesPresetFileName:o.presetFileName||""};$(e,"","null",l)}else if(o.type==="channel mixer"){var l={Vrsn:1,mixerPresetKind:(i=o.presetKind)!==null&&i!==void 0?i:1,mixerPresetFileName:o.presetFileName||""};$(e,"","null",l)}else if(o.type==="brightness/contrast"){var l={Vrsn:1,Brgh:o.brightness||0,Cntr:o.contrast||0,means:(a=o.meanValue)!==null&&a!==void 0?a:127,"Lab ":!!o.labColorOnly,useLegacy:!!o.useLegacy,Auto:!!o.auto};$(e,"","null",l)}else throw new Error("Unhandled CgEd case")});function nu(e){var t=[];function n(r){var i;if(r.children)for(var a=0,o=r.children;a<o.length;a++){var l=o[a];((i=l.text)===null||i===void 0?void 0:i.index)!==void 0&&(t[l.text.index]=l),n(l)}}return n(e),t}N("Txt2",ae("engineData"),function(e,t,n,r){var i=ke(e,n());t.engineData=Ws(i);var a=nu(r),o=rl(i),l=Xf(o),f=l.ResourceDict.TextFrameSet;if(f)for(var s=0;s<f.length;s++){var u=a[s];f[s].path&&(u!=null&&u.text)&&(u.text.textPath=f[s].path)}},function(e,t){var n=Ka(t.engineData);sn(e,n)});N("FEid",ae("filterEffectsMasks"),function(e,t,n){var r=_(e);if(r<1||r>3)throw new Error("Invalid filterEffects version ".concat(r));for(t.filterEffectsMasks=[];n()>8;){if(w(e))throw new Error("filterEffects: 64 bit length is not supported");var i=w(e),a=e.offset+i,o=pn(e,1),l=_(e);if(l!==1)throw new Error("Invalid filterEffect version ".concat(l));if(w(e))throw new Error("filterEffect: 64 bit length is not supported");w(e);for(var f=_(e),s=_(e),u=_(e),d=_(e),h=_(e),p=_(e),y=[],v=0;v<p+2;v++){var F=_(e);if(F){if(w(e))throw new Error("filterEffect: 64 bit length is not supported");var g=w(e);if(!g)throw new Error("filterEffect: Empty channel");var b=E(e),S=ke(e,g-2);y.push({compressionMode:b,data:S})}else y.push(void 0)}if(t.filterEffectsMasks.push({id:o,top:f,left:s,bottom:u,right:d,depth:h,channels:y}),e.offset<a&&T(e)){var m=_(e),x=_(e),P=_(e),k=_(e);if(w(e))throw new Error("filterEffect: 64 bit length is not supported");var C=w(e),b=E(e),S=ke(e,C-2);t.filterEffectsMasks[t.filterEffectsMasks.length-1].extra={top:m,left:x,bottom:P,right:k,compressionMode:b,data:S}}e.offset=a;for(var O=i;O%4;)e.offset++,O++}},function(e,t){var n;j(e,3);for(var r=0,i=t.filterEffectsMasks;r<i.length;r++){var a=i[r];L(e,0),L(e,0);var o=e.offset;Rn(e,a.id,1),j(e,1),L(e,0),L(e,0);var l=e.offset;j(e,a.top),j(e,a.left),j(e,a.bottom),j(e,a.right),j(e,a.depth);var f=Math.max(0,a.channels.length-2);j(e,f);for(var s=0;s<f+2;s++){var u=a.channels[s];j(e,u?1:0),u&&(L(e,0),L(e,u.data.length+2),I(e,u.compressionMode),sn(e,u.data))}e.view.setUint32(l-4,e.offset-l,!1);var d=(n=t.filterEffectsMasks[t.filterEffectsMasks.length-1])===null||n===void 0?void 0:n.extra;d&&(B(e,1),j(e,d.top),j(e,d.left),j(e,d.bottom),j(e,d.right),L(e,0),L(e,d.data.byteLength+2),I(e,d.compressionMode),sn(e,d.data));var h=e.offset-o;for(e.view.setUint32(o-4,h,!1);h%4;)ie(e,1),h++}});Un("FXid","FEid");N("FMsk",ae("filterMask"),function(e,t){t.filterMask={colorSpace:ye(e),opacity:E(e)/255}},function(e,t){var n;Fe(e,t.filterMask.colorSpace),I(e,qa((n=t.filterMask.opacity)!==null&&n!==void 0?n:1,0,1)*255)});N("artd",function(e){return e.artboards!==void 0},function(e,t,n){var r=K(e);t.artboards={count:r["Cnt "],autoExpandOffset:{horizontal:r.autoExpandOffset.Hrzn,vertical:r.autoExpandOffset.Vrtc},origin:{horizontal:r.origin.Hrzn,vertical:r.origin.Vrtc},autoExpandEnabled:r.autoExpandEnabled,autoNestEnabled:r.autoNestEnabled,autoPositionEnabled:r.autoPositionEnabled,shrinkwrapOnSaveEnabled:!!r.shrinkwrapOnSaveEnabled,docDefaultNewArtboardBackgroundColor:Xe(r.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:r.docDefaultNewArtboardBackgroundType},R(e,n())},function(e,t){var n,r,i,a,o,l=t.artboards,f={"Cnt ":l.count,autoExpandOffset:l.autoExpandOffset?{Hrzn:l.autoExpandOffset.horizontal,Vrtc:l.autoExpandOffset.vertical}:{Hrzn:0,Vrtc:0},origin:l.origin?{Hrzn:l.origin.horizontal,Vrtc:l.origin.vertical}:{Hrzn:0,Vrtc:0},autoExpandEnabled:(n=l.autoExpandEnabled)!==null&&n!==void 0?n:!0,autoNestEnabled:(r=l.autoNestEnabled)!==null&&r!==void 0?r:!0,autoPositionEnabled:(i=l.autoPositionEnabled)!==null&&i!==void 0?i:!0,shrinkwrapOnSaveEnabled:(a=l.shrinkwrapOnSaveEnabled)!==null&&a!==void 0?a:!0,docDefaultNewArtboardBackgroundColor:Ye(l.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:(o=l.docDefaultNewArtboardBackgroundType)!==null&&o!==void 0?o:1};$(e,"","null",f,"artd")});function pl(e){return Object.keys(e).map(function(t){return e[t]}).some(function(t){return Array.isArray(t)&&t.length>1})}N("lfx2",function(e){return e.effects!==void 0&&!pl(e.effects)},function(e,t,n){var r=w(e);if(r!==0)throw new Error("Invalid lfx2 version");var i=K(e);t.effects=lt(i,!!e.logMissingFeatures),R(e,n())},function(e,t,n,r){var i=ot(t.effects,!!r.logMissingFeatures,!0);L(e,0),$(e,"","null",i)});N("cinf",ae("compositorUsed"),function(e,t,n){var r=K(e);function i(a){return a.split(".")[1]}t.compositorUsed={description:r.description,reason:r.reason,engine:i(r.Engn)},r.Vrsn&&(t.compositorUsed.version=r.Vrsn),r.psVersion&&(t.compositorUsed.photoshopVersion=r.psVersion),r.enableCompCore&&(t.compositorUsed.enableCompCore=i(r.enableCompCore)),r.enableCompCoreGPU&&(t.compositorUsed.enableCompCoreGPU=i(r.enableCompCoreGPU)),r.enableCompCoreThreads&&(t.compositorUsed.enableCompCoreThreads=i(r.enableCompCoreThreads)),r.compCoreSupport&&(t.compositorUsed.compCoreSupport=i(r.compCoreSupport)),r.compCoreGPUSupport&&(t.compositorUsed.compCoreGPUSupport=i(r.compCoreGPUSupport)),R(e,n())},function(e,t){var n=t.compositorUsed,r={Vrsn:n.version||{major:1,minor:0,fix:0}};n.photoshopVersion&&(r.psVersion=n.photoshopVersion),r.description=n.description,r.reason=n.reason,r.Engn="Engn.".concat(n.engine),n.enableCompCore&&(r.enableCompCore="enable.".concat(n.enableCompCore)),n.enableCompCoreGPU&&(r.enableCompCoreGPU="enable.".concat(n.enableCompCoreGPU)),n.enableCompCoreThreads&&(r.enableCompCoreThreads="enable.".concat(n.enableCompCoreThreads)),n.compCoreSupport&&(r.compCoreSupport="reason.".concat(n.compCoreSupport)),n.compCoreGPUSupport&&(r.compCoreGPUSupport="reason.".concat(n.compCoreGPUSupport)),$(e,"","null",r)});N("extn",function(e){return e._extn!==void 0},function(e,t){K(e)},function(e,t){});N("iOpa",ae("fillOpacity"),function(e,t){t.fillOpacity=T(e)/255,R(e,3)},function(e,t){B(e,t.fillOpacity*255),ie(e,3)});N("brst",ae("channelBlendingRestrictions"),function(e,t,n){for(t.channelBlendingRestrictions=[];n()>4;)t.channelBlendingRestrictions.push(_(e))},function(e,t){for(var n=0,r=t.channelBlendingRestrictions;n<r.length;n++){var i=r[n];j(e,i)}});N("tsly",ae("transparencyShapesLayer"),function(e,t){t.transparencyShapesLayer=!!T(e),R(e,3)},function(e,t){B(e,t.transparencyShapesLayer?1:0),ie(e,3)});function B(e,t){var n=fn(e,1);e.view.setUint8(n,t)}function te(e,t){var n=fn(e,2);e.view.setInt16(n,t,!1)}function I(e,t){var n=fn(e,2);e.view.setUint16(n,t,!1)}function tu(e,t){var n=fn(e,2);e.view.setUint16(n,t,!0)}function j(e,t){var n=fn(e,4);e.view.setInt32(n,t,!1)}function Ea(e,t){var n=fn(e,4);e.view.setInt32(n,t,!0)}function L(e,t){var n=fn(e,4);e.view.setUint32(n,t,!1)}function We(e,t){var n=fn(e,4);e.view.setFloat32(n,t,!1)}function $e(e,t){var n=fn(e,8);e.view.setFloat64(n,t,!1)}function Te(e,t){j(e,t*65536)}function je(e,t){j(e,t*(1<<24))}function sn(e,t){if(t){vl(e,e.offset+t.length);var n=new Uint8Array(e.buffer);n.set(t,e.offset),e.offset+=t.length}}function ie(e,t){for(var n=0;n<t;n++)B(e,0)}function G(e,t){if(t.length!==4)throw new Error("Invalid signature: '".concat(t,"'"));for(var n=0;n<4;n++)B(e,t.charCodeAt(n))}function ru(e,t){for(var n=0;n<t.length;n++)B(e,t.charCodeAt(n))}function Rn(e,t,n){var r=t.length;if(r>255)throw new Error("String too long");B(e,r);for(var i=0;i<r;i++){var a=t.charCodeAt(i);B(e,a<128?a:63)}for(;++r%n;)B(e,0)}function iu(e,t){for(var n=0;n<t.length;n++)I(e,t.charCodeAt(n))}function au(e,t){for(var n=0;n<t.length;n++)tu(e,t.charCodeAt(n))}function Oe(e,t){L(e,t.length),iu(e,t)}function Fn(e,t){L(e,t.length+1);for(var n=0;n<t.length;n++)I(e,t.charCodeAt(n));I(e,0)}function yn(e,t,n,r,i){r===void 0&&(r=!1),i===void 0&&(i=!1),i&&L(e,0);var a=e.offset;L(e,0),n();for(var o=e.offset-a-4,l=o;l%t;)B(e,0),l++;r&&(o=l),e.view.setUint32(a,o,!1)}function ou(e,t){var n=e.buffer.byteLength;do n*=2;while(t>n);var r=new ArrayBuffer(n),i=new Uint8Array(r),a=new Uint8Array(e.buffer);i.set(a),e.buffer=r,e.view=new DataView(e.buffer)}function vl(e,t){t>e.buffer.byteLength&&ou(e,t)}function fn(e,t){var n=e.offset;return vl(e,e.offset+=t),n}function Fe(e,t){t?"r"in t?(I(e,0),I(e,Math.round(t.r*257)),I(e,Math.round(t.g*257)),I(e,Math.round(t.b*257)),I(e,0)):"fr"in t?(I(e,0),I(e,Math.round(t.fr*255*257)),I(e,Math.round(t.fg*255*257)),I(e,Math.round(t.fb*255*257)),I(e,0)):"l"in t?(I(e,7),te(e,Math.round(t.l*1e4)),te(e,Math.round(t.a<0?t.a*12800:t.a*12700)),te(e,Math.round(t.b<0?t.b*12800:t.b*12700)),I(e,0)):"h"in t?(I(e,1),I(e,Math.round(t.h*65535)),I(e,Math.round(t.s*65535)),I(e,Math.round(t.b*65535)),I(e,0)):"c"in t?(I(e,2),I(e,Math.round(t.c*257)),I(e,Math.round(t.m*257)),I(e,Math.round(t.y*257)),I(e,Math.round(t.k*257))):(I(e,8),I(e,Math.round(t.k*1e4/255)),ie(e,6)):(I(e,0),ie(e,8))}var wa;(function(e){e[e.Bitmap=0]="Bitmap",e[e.Grayscale=1]="Grayscale",e[e.Indexed=2]="Indexed",e[e.RGB=3]="RGB",e[e.CMYK=4]="CMYK",e[e.Multichannel=7]="Multichannel",e[e.Duotone=8]="Duotone",e[e.Lab=9]="Lab"})(wa||(wa={}));var Aa;(function(e){e[e.Other=0]="Other",e[e.OpenFolder=1]="OpenFolder",e[e.ClosedFolder=2]="ClosedFolder",e[e.BoundingSectionDivider=3]="BoundingSectionDivider"})(Aa||(Aa={}));var Da;(function(e){e[e.None=0]="None",e[e.Visibility=1]="Visibility",e[e.Position=2]="Position",e[e.Appearance=4]="Appearance"})(Da||(Da={}));function lu(e,t){var n="buffer"in e?ua(e.buffer,e.byteOffset,e.byteLength):ua(e);return Ff(n,t)}async function su(e){try{const t=await e.arrayBuffer(),n=lu(t);return n.canvas?n.canvas.toDataURL("image/png"):(console.warn("No composite image found in PSD, attempting to render layers is not supported in this simple implementation yet."),null)}catch(t){return console.error("Error parsing PSD file:",t),null}}export{su as convertPSDToImage};
