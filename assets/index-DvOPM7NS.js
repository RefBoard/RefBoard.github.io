(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function A(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=A(r);fetch(r.href,s)}})();function Rv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Cb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var A=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};A.prototype=e.prototype}else A={};return Object.defineProperty(A,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(A,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),A}var Pv={exports:{}},vd={},Mv={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ql=Symbol.for("react.element"),xb=Symbol.for("react.portal"),Eb=Symbol.for("react.fragment"),Fb=Symbol.for("react.strict_mode"),_b=Symbol.for("react.profiler"),bb=Symbol.for("react.provider"),Ib=Symbol.for("react.context"),Qb=Symbol.for("react.forward_ref"),Ub=Symbol.for("react.suspense"),Sb=Symbol.for("react.memo"),Tb=Symbol.for("react.lazy"),s0=Symbol.iterator;function Nb(t){return t===null||typeof t!="object"?null:(t=s0&&t[s0]||t["@@iterator"],typeof t=="function"?t:null)}var Ov={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kv=Object.assign,jv={};function No(t,e,A){this.props=t,this.context=e,this.refs=jv,this.updater=A||Ov}No.prototype.isReactComponent={};No.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};No.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wv(){}Wv.prototype=No.prototype;function Sp(t,e,A){this.props=t,this.context=e,this.refs=jv,this.updater=A||Ov}var Tp=Sp.prototype=new Wv;Tp.constructor=Sp;Kv(Tp,No.prototype);Tp.isPureReactComponent=!0;var i0=Array.isArray,zv=Object.prototype.hasOwnProperty,Np={current:null},Gv={key:!0,ref:!0,__self:!0,__source:!0};function Vv(t,e,A){var n,r={},s=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)zv.call(e,n)&&!Gv.hasOwnProperty(n)&&(r[n]=e[n]);var a=arguments.length-2;if(a===1)r.children=A;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)r[n]===void 0&&(r[n]=a[n]);return{$$typeof:Ql,type:t,key:s,ref:i,props:r,_owner:Np.current}}function kb(t,e){return{$$typeof:Ql,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ql}function Db(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(A){return e[A]})}var o0=/\/+/g;function Ef(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Db(""+t.key):e.toString(36)}function Vc(t,e,A,n,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Ql:case xb:i=!0}}if(i)return i=t,r=r(i),t=n===""?"."+Ef(i,0):n,i0(r)?(A="",t!=null&&(A=t.replace(o0,"$&/")+"/"),Vc(r,e,A,"",function(l){return l})):r!=null&&(kp(r)&&(r=kb(r,A+(!r.key||i&&i.key===r.key?"":(""+r.key).replace(o0,"$&/")+"/")+t)),e.push(r)),1;if(i=0,n=n===""?".":n+":",i0(t))for(var a=0;a<t.length;a++){s=t[a];var o=n+Ef(s,a);i+=Vc(s,e,A,o,r)}else if(o=Nb(t),typeof o=="function")for(t=o.call(t),a=0;!(s=t.next()).done;)s=s.value,o=n+Ef(s,a++),i+=Vc(s,e,A,o,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function ql(t,e,A){if(t==null)return t;var n=[],r=0;return Vc(t,n,"","",function(s){return e.call(A,s,r++)}),n}function Lb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(A){(t._status===0||t._status===-1)&&(t._status=1,t._result=A)},function(A){(t._status===0||t._status===-1)&&(t._status=2,t._result=A)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kA={current:null},$c={transition:null},Hb={ReactCurrentDispatcher:kA,ReactCurrentBatchConfig:$c,ReactCurrentOwner:Np};function $v(){throw Error("act(...) is not supported in production builds of React.")}We.Children={map:ql,forEach:function(t,e,A){ql(t,function(){e.apply(this,arguments)},A)},count:function(t){var e=0;return ql(t,function(){e++}),e},toArray:function(t){return ql(t,function(e){return e})||[]},only:function(t){if(!kp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};We.Component=No;We.Fragment=Eb;We.Profiler=_b;We.PureComponent=Sp;We.StrictMode=Fb;We.Suspense=Ub;We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hb;We.act=$v;We.cloneElement=function(t,e,A){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Kv({},t.props),r=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=Np.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(o in e)zv.call(e,o)&&!Gv.hasOwnProperty(o)&&(n[o]=e[o]===void 0&&a!==void 0?a[o]:e[o])}var o=arguments.length-2;if(o===1)n.children=A;else if(1<o){a=Array(o);for(var l=0;l<o;l++)a[l]=arguments[l+2];n.children=a}return{$$typeof:Ql,type:t.type,key:r,ref:s,props:n,_owner:i}};We.createContext=function(t){return t={$$typeof:Ib,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bb,_context:t},t.Consumer=t};We.createElement=Vv;We.createFactory=function(t){var e=Vv.bind(null,t);return e.type=t,e};We.createRef=function(){return{current:null}};We.forwardRef=function(t){return{$$typeof:Qb,render:t}};We.isValidElement=kp;We.lazy=function(t){return{$$typeof:Tb,_payload:{_status:-1,_result:t},_init:Lb}};We.memo=function(t,e){return{$$typeof:Sb,type:t,compare:e===void 0?null:e}};We.startTransition=function(t){var e=$c.transition;$c.transition={};try{t()}finally{$c.transition=e}};We.unstable_act=$v;We.useCallback=function(t,e){return kA.current.useCallback(t,e)};We.useContext=function(t){return kA.current.useContext(t)};We.useDebugValue=function(){};We.useDeferredValue=function(t){return kA.current.useDeferredValue(t)};We.useEffect=function(t,e){return kA.current.useEffect(t,e)};We.useId=function(){return kA.current.useId()};We.useImperativeHandle=function(t,e,A){return kA.current.useImperativeHandle(t,e,A)};We.useInsertionEffect=function(t,e){return kA.current.useInsertionEffect(t,e)};We.useLayoutEffect=function(t,e){return kA.current.useLayoutEffect(t,e)};We.useMemo=function(t,e){return kA.current.useMemo(t,e)};We.useReducer=function(t,e,A){return kA.current.useReducer(t,e,A)};We.useRef=function(t){return kA.current.useRef(t)};We.useState=function(t){return kA.current.useState(t)};We.useSyncExternalStore=function(t,e,A){return kA.current.useSyncExternalStore(t,e,A)};We.useTransition=function(){return kA.current.useTransition()};We.version="18.3.1";Mv.exports=We;var x=Mv.exports;const cA=Rv(x);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb=x,Pb=Symbol.for("react.element"),Mb=Symbol.for("react.fragment"),Ob=Object.prototype.hasOwnProperty,Kb=Rb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jb={key:!0,ref:!0,__self:!0,__source:!0};function Xv(t,e,A){var n,r={},s=null,i=null;A!==void 0&&(s=""+A),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)Ob.call(e,n)&&!jb.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Pb,type:t,key:s,ref:i,props:r,_owner:Kb.current}}vd.Fragment=Mb;vd.jsx=Xv;vd.jsxs=Xv;Pv.exports=vd;var c=Pv.exports,Rh={},Yv={exports:{}},fn={},Jv={exports:{}},qv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Ae){var j=z.length;z.push(Ae);e:for(;0<j;){var te=j-1>>>1,re=z[te];if(0<r(re,Ae))z[te]=Ae,z[j]=re,j=te;else break e}}function A(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var Ae=z[0],j=z.pop();if(j!==Ae){z[0]=j;e:for(var te=0,re=z.length,ee=re>>>1;te<ee;){var ue=2*(te+1)-1,ge=z[ue],we=ue+1,xe=z[we];if(0>r(ge,j))we<re&&0>r(xe,ge)?(z[te]=xe,z[we]=j,te=we):(z[te]=ge,z[ue]=j,te=ue);else if(we<re&&0>r(xe,j))z[te]=xe,z[we]=j,te=we;else break e}}return Ae}function r(z,Ae){var j=z.sortIndex-Ae.sortIndex;return j!==0?j:z.id-Ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var o=[],l=[],u=1,d=null,f=3,B=!1,h=!1,y=!1,C=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(z){for(var Ae=A(l);Ae!==null;){if(Ae.callback===null)n(l);else if(Ae.startTime<=z)n(l),Ae.sortIndex=Ae.expirationTime,e(o,Ae);else break;Ae=A(l)}}function E(z){if(y=!1,v(z),!h)if(A(o)!==null)h=!0,V(S);else{var Ae=A(l);Ae!==null&&W(E,Ae.startTime-z)}}function S(z,Ae){h=!1,y&&(y=!1,p(L),L=-1),B=!0;var j=f;try{for(v(Ae),d=A(o);d!==null&&(!(d.expirationTime>Ae)||z&&!q());){var te=d.callback;if(typeof te=="function"){d.callback=null,f=d.priorityLevel;var re=te(d.expirationTime<=Ae);Ae=t.unstable_now(),typeof re=="function"?d.callback=re:d===A(o)&&n(o),v(Ae)}else n(o);d=A(o)}if(d!==null)var ee=!0;else{var ue=A(l);ue!==null&&W(E,ue.startTime-Ae),ee=!1}return ee}finally{d=null,f=j,B=!1}}var U=!1,b=null,L=-1,N=5,I=-1;function q(){return!(t.unstable_now()-I<N)}function O(){if(b!==null){var z=t.unstable_now();I=z;var Ae=!0;try{Ae=b(!0,z)}finally{Ae?H():(U=!1,b=null)}}else U=!1}var H;if(typeof g=="function")H=function(){g(O)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Z=G.port2;G.port1.onmessage=O,H=function(){Z.postMessage(null)}}else H=function(){C(O,0)};function V(z){b=z,U||(U=!0,H())}function W(z,Ae){L=C(function(){z(t.unstable_now())},Ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){h||B||(h=!0,V(S))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return A(o)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var Ae=3;break;default:Ae=f}var j=f;f=Ae;try{return z()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Ae){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var j=f;f=z;try{return Ae()}finally{f=j}},t.unstable_scheduleCallback=function(z,Ae,j){var te=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?te+j:te):j=te,z){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=j+re,z={id:u++,callback:Ae,priorityLevel:z,startTime:j,expirationTime:re,sortIndex:-1},j>te?(z.sortIndex=j,e(l,z),A(o)===null&&z===A(l)&&(y?(p(L),L=-1):y=!0,W(E,j-te))):(z.sortIndex=re,e(o,z),h||B||(h=!0,V(S))),z},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(z){var Ae=f;return function(){var j=f;f=Ae;try{return z.apply(this,arguments)}finally{f=j}}}})(qv);Jv.exports=qv;var Wb=Jv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb=x,dn=Wb;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,A=1;A<arguments.length;A++)e+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zv=new Set,qa={};function yi(t,e){mo(t,e),mo(t+"Capture",e)}function mo(t,e){for(qa[t]=e,t=0;t<e.length;t++)Zv.add(e[t])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ph=Object.prototype.hasOwnProperty,Gb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a0={},l0={};function Vb(t){return Ph.call(l0,t)?!0:Ph.call(a0,t)?!1:Gb.test(t)?l0[t]=!0:(a0[t]=!0,!1)}function $b(t,e,A,n){if(A!==null&&A.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:A!==null?!A.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Xb(t,e,A,n){if(e===null||typeof e>"u"||$b(t,e,A,n))return!0;if(n)return!1;if(A!==null)switch(A.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function DA(t,e,A,n,r,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=A,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var dA={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dA[t]=new DA(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dA[e]=new DA(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dA[t]=new DA(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dA[t]=new DA(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dA[t]=new DA(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dA[t]=new DA(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dA[t]=new DA(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dA[t]=new DA(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dA[t]=new DA(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dp=/[\-:]([a-z])/g;function Lp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dp,Lp);dA[e]=new DA(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dp,Lp);dA[e]=new DA(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dp,Lp);dA[e]=new DA(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dA[t]=new DA(t,1,!1,t.toLowerCase(),null,!1,!1)});dA.xlinkHref=new DA("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dA[t]=new DA(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hp(t,e,A,n){var r=dA.hasOwnProperty(e)?dA[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Xb(e,A,r,n)&&(A=null),n||r===null?Vb(e)&&(A===null?t.removeAttribute(e):t.setAttribute(e,""+A)):r.mustUseProperty?t[r.propertyName]=A===null?r.type===3?!1:"":A:(e=r.attributeName,n=r.attributeNamespace,A===null?t.removeAttribute(e):(r=r.type,A=r===3||r===4&&A===!0?"":""+A,n?t.setAttributeNS(n,e,A):t.setAttribute(e,A))))}var Wr=zb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zl=Symbol.for("react.element"),Ki=Symbol.for("react.portal"),ji=Symbol.for("react.fragment"),Rp=Symbol.for("react.strict_mode"),Mh=Symbol.for("react.profiler"),eC=Symbol.for("react.provider"),tC=Symbol.for("react.context"),Pp=Symbol.for("react.forward_ref"),Oh=Symbol.for("react.suspense"),Kh=Symbol.for("react.suspense_list"),Mp=Symbol.for("react.memo"),ts=Symbol.for("react.lazy"),AC=Symbol.for("react.offscreen"),c0=Symbol.iterator;function ta(t){return t===null||typeof t!="object"?null:(t=c0&&t[c0]||t["@@iterator"],typeof t=="function"?t:null)}var _t=Object.assign,Ff;function ya(t){if(Ff===void 0)try{throw Error()}catch(A){var e=A.stack.trim().match(/\n( *(at )?)/);Ff=e&&e[1]||""}return`
`+Ff+t}var _f=!1;function bf(t,e){if(!t||_f)return"";_f=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var r=l.stack.split(`
`),s=n.stack.split(`
`),i=r.length-1,a=s.length-1;1<=i&&0<=a&&r[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(r[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||r[i]!==s[a]){var o=`
`+r[i].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=i&&0<=a);break}}}finally{_f=!1,Error.prepareStackTrace=A}return(t=t?t.displayName||t.name:"")?ya(t):""}function Yb(t){switch(t.tag){case 5:return ya(t.type);case 16:return ya("Lazy");case 13:return ya("Suspense");case 19:return ya("SuspenseList");case 0:case 2:case 15:return t=bf(t.type,!1),t;case 11:return t=bf(t.type.render,!1),t;case 1:return t=bf(t.type,!0),t;default:return""}}function jh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ji:return"Fragment";case Ki:return"Portal";case Mh:return"Profiler";case Rp:return"StrictMode";case Oh:return"Suspense";case Kh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tC:return(t.displayName||"Context")+".Consumer";case eC:return(t._context.displayName||"Context")+".Provider";case Pp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mp:return e=t.displayName||null,e!==null?e:jh(t.type)||"Memo";case ts:e=t._payload,t=t._init;try{return jh(t(e))}catch{}}return null}function Jb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jh(e);case 8:return e===Rp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Us(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qb(t){var e=nC(t)?"checked":"value",A=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var r=A.get,s=A.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(i){n=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:A.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ec(t){t._valueTracker||(t._valueTracker=qb(t))}function rC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var A=e.getValue(),n="";return t&&(n=nC(t)?t.checked?"true":"false":t.value),t=n,t!==A?(e.setValue(t),!0):!1}function hu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wh(t,e){var A=e.checked;return _t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??t._wrapperState.initialChecked})}function u0(t,e){var A=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;A=Us(e.value!=null?e.value:A),t._wrapperState={initialChecked:n,initialValue:A,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sC(t,e){e=e.checked,e!=null&&Hp(t,"checked",e,!1)}function zh(t,e){sC(t,e);var A=Us(e.value),n=e.type;if(A!=null)n==="number"?(A===0&&t.value===""||t.value!=A)&&(t.value=""+A):t.value!==""+A&&(t.value=""+A);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gh(t,e.type,A):e.hasOwnProperty("defaultValue")&&Gh(t,e.type,Us(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function d0(t,e,A){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,A||e===t.value||(t.value=e),t.defaultValue=e}A=t.name,A!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,A!==""&&(t.name=A)}function Gh(t,e,A){(e!=="number"||hu(t.ownerDocument)!==t)&&(A==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+A&&(t.defaultValue=""+A))}var Ba=Array.isArray;function no(t,e,A,n){if(t=t.options,e){e={};for(var r=0;r<A.length;r++)e["$"+A[r]]=!0;for(A=0;A<t.length;A++)r=e.hasOwnProperty("$"+t[A].value),t[A].selected!==r&&(t[A].selected=r),r&&n&&(t[A].defaultSelected=!0)}else{for(A=""+Us(A),e=null,r=0;r<t.length;r++){if(t[r].value===A){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Vh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return _t({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function f0(t,e){var A=e.value;if(A==null){if(A=e.children,e=e.defaultValue,A!=null){if(e!=null)throw Error(se(92));if(Ba(A)){if(1<A.length)throw Error(se(93));A=A[0]}e=A}e==null&&(e=""),A=e}t._wrapperState={initialValue:Us(A)}}function iC(t,e){var A=Us(e.value),n=Us(e.defaultValue);A!=null&&(A=""+A,A!==t.value&&(t.value=A),e.defaultValue==null&&t.defaultValue!==A&&(t.defaultValue=A)),n!=null&&(t.defaultValue=""+n)}function h0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $h(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tc,aC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,A,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,A,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tc=tc||document.createElement("div"),tc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Za(t,e){if(e){var A=t.firstChild;if(A&&A===t.lastChild&&A.nodeType===3){A.nodeValue=e;return}}t.textContent=e}var Sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zb=["Webkit","ms","Moz","O"];Object.keys(Sa).forEach(function(t){Zb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sa[e]=Sa[t]})});function lC(t,e,A){return e==null||typeof e=="boolean"||e===""?"":A||typeof e!="number"||e===0||Sa.hasOwnProperty(t)&&Sa[t]?(""+e).trim():e+"px"}function cC(t,e){t=t.style;for(var A in e)if(e.hasOwnProperty(A)){var n=A.indexOf("--")===0,r=lC(A,e[A],n);A==="float"&&(A="cssFloat"),n?t.setProperty(A,r):t[A]=r}}var eI=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xh(t,e){if(e){if(eI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function Yh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jh=null;function Op(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qh=null,ro=null,so=null;function g0(t){if(t=Tl(t)){if(typeof qh!="function")throw Error(se(280));var e=t.stateNode;e&&(e=_d(e),qh(t.stateNode,t.type,e))}}function uC(t){ro?so?so.push(t):so=[t]:ro=t}function dC(){if(ro){var t=ro,e=so;if(so=ro=null,g0(t),e)for(t=0;t<e.length;t++)g0(e[t])}}function fC(t,e){return t(e)}function hC(){}var If=!1;function gC(t,e,A){if(If)return t(e,A);If=!0;try{return fC(t,e,A)}finally{If=!1,(ro!==null||so!==null)&&(hC(),dC())}}function el(t,e){var A=t.stateNode;if(A===null)return null;var n=_d(A);if(n===null)return null;A=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(A&&typeof A!="function")throw Error(se(231,e,typeof A));return A}var Zh=!1;if(Lr)try{var Aa={};Object.defineProperty(Aa,"passive",{get:function(){Zh=!0}}),window.addEventListener("test",Aa,Aa),window.removeEventListener("test",Aa,Aa)}catch{Zh=!1}function tI(t,e,A,n,r,s,i,a,o){var l=Array.prototype.slice.call(arguments,3);try{e.apply(A,l)}catch(u){this.onError(u)}}var Ta=!1,gu=null,pu=!1,eg=null,AI={onError:function(t){Ta=!0,gu=t}};function nI(t,e,A,n,r,s,i,a,o){Ta=!1,gu=null,tI.apply(AI,arguments)}function rI(t,e,A,n,r,s,i,a,o){if(nI.apply(this,arguments),Ta){if(Ta){var l=gu;Ta=!1,gu=null}else throw Error(se(198));pu||(pu=!0,eg=l)}}function Bi(t){var e=t,A=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(A=e.return),t=e.return;while(t)}return e.tag===3?A:null}function pC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function p0(t){if(Bi(t)!==t)throw Error(se(188))}function sI(t){var e=t.alternate;if(!e){if(e=Bi(t),e===null)throw Error(se(188));return e!==t?null:t}for(var A=t,n=e;;){var r=A.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){A=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===A)return p0(r),t;if(s===n)return p0(r),e;s=s.sibling}throw Error(se(188))}if(A.return!==n.return)A=r,n=s;else{for(var i=!1,a=r.child;a;){if(a===A){i=!0,A=r,n=s;break}if(a===n){i=!0,n=r,A=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===A){i=!0,A=s,n=r;break}if(a===n){i=!0,n=s,A=r;break}a=a.sibling}if(!i)throw Error(se(189))}}if(A.alternate!==n)throw Error(se(190))}if(A.tag!==3)throw Error(se(188));return A.stateNode.current===A?t:e}function mC(t){return t=sI(t),t!==null?wC(t):null}function wC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wC(t);if(e!==null)return e;t=t.sibling}return null}var yC=dn.unstable_scheduleCallback,m0=dn.unstable_cancelCallback,iI=dn.unstable_shouldYield,oI=dn.unstable_requestPaint,Dt=dn.unstable_now,aI=dn.unstable_getCurrentPriorityLevel,Kp=dn.unstable_ImmediatePriority,BC=dn.unstable_UserBlockingPriority,mu=dn.unstable_NormalPriority,lI=dn.unstable_LowPriority,vC=dn.unstable_IdlePriority,Cd=null,cr=null;function cI(t){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Cd,t,void 0,(t.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:fI,uI=Math.log,dI=Math.LN2;function fI(t){return t>>>=0,t===0?32:31-(uI(t)/dI|0)|0}var Ac=64,nc=4194304;function va(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wu(t,e){var A=t.pendingLanes;if(A===0)return 0;var n=0,r=t.suspendedLanes,s=t.pingedLanes,i=A&268435455;if(i!==0){var a=i&~r;a!==0?n=va(a):(s&=i,s!==0&&(n=va(s)))}else i=A&~r,i!==0?n=va(i):s!==0&&(n=va(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(n&4&&(n|=A&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)A=31-Xn(e),r=1<<A,n|=t[A],e&=~r;return n}function hI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gI(t,e){for(var A=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Xn(s),a=1<<i,o=r[i];o===-1?(!(a&A)||a&n)&&(r[i]=hI(a,e)):o<=e&&(t.expiredLanes|=a),s&=~a}}function tg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function CC(){var t=Ac;return Ac<<=1,!(Ac&4194240)&&(Ac=64),t}function Qf(t){for(var e=[],A=0;31>A;A++)e.push(t);return e}function Ul(t,e,A){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xn(e),t[e]=A}function pI(t,e){var A=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<A;){var r=31-Xn(A),s=1<<r;e[r]=0,n[r]=-1,t[r]=-1,A&=~s}}function jp(t,e){var A=t.entangledLanes|=e;for(t=t.entanglements;A;){var n=31-Xn(A),r=1<<n;r&e|t[n]&e&&(t[n]|=e),A&=~r}}var it=0;function xC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var EC,Wp,FC,_C,bC,Ag=!1,rc=[],ps=null,ms=null,ws=null,tl=new Map,Al=new Map,ss=[],mI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function w0(t,e){switch(t){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":ws=null;break;case"pointerover":case"pointerout":tl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(e.pointerId)}}function na(t,e,A,n,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:A,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Tl(e),e!==null&&Wp(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function wI(t,e,A,n,r){switch(e){case"focusin":return ps=na(ps,t,e,A,n,r),!0;case"dragenter":return ms=na(ms,t,e,A,n,r),!0;case"mouseover":return ws=na(ws,t,e,A,n,r),!0;case"pointerover":var s=r.pointerId;return tl.set(s,na(tl.get(s)||null,t,e,A,n,r)),!0;case"gotpointercapture":return s=r.pointerId,Al.set(s,na(Al.get(s)||null,t,e,A,n,r)),!0}return!1}function IC(t){var e=Ys(t.target);if(e!==null){var A=Bi(e);if(A!==null){if(e=A.tag,e===13){if(e=pC(A),e!==null){t.blockedOn=e,bC(t.priority,function(){FC(A)});return}}else if(e===3&&A.stateNode.current.memoizedState.isDehydrated){t.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var A=ng(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(A===null){A=t.nativeEvent;var n=new A.constructor(A.type,A);Jh=n,A.target.dispatchEvent(n),Jh=null}else return e=Tl(A),e!==null&&Wp(e),t.blockedOn=A,!1;e.shift()}return!0}function y0(t,e,A){Xc(t)&&A.delete(e)}function yI(){Ag=!1,ps!==null&&Xc(ps)&&(ps=null),ms!==null&&Xc(ms)&&(ms=null),ws!==null&&Xc(ws)&&(ws=null),tl.forEach(y0),Al.forEach(y0)}function ra(t,e){t.blockedOn===e&&(t.blockedOn=null,Ag||(Ag=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,yI)))}function nl(t){function e(r){return ra(r,t)}if(0<rc.length){ra(rc[0],t);for(var A=1;A<rc.length;A++){var n=rc[A];n.blockedOn===t&&(n.blockedOn=null)}}for(ps!==null&&ra(ps,t),ms!==null&&ra(ms,t),ws!==null&&ra(ws,t),tl.forEach(e),Al.forEach(e),A=0;A<ss.length;A++)n=ss[A],n.blockedOn===t&&(n.blockedOn=null);for(;0<ss.length&&(A=ss[0],A.blockedOn===null);)IC(A),A.blockedOn===null&&ss.shift()}var io=Wr.ReactCurrentBatchConfig,yu=!0;function BI(t,e,A,n){var r=it,s=io.transition;io.transition=null;try{it=1,zp(t,e,A,n)}finally{it=r,io.transition=s}}function vI(t,e,A,n){var r=it,s=io.transition;io.transition=null;try{it=4,zp(t,e,A,n)}finally{it=r,io.transition=s}}function zp(t,e,A,n){if(yu){var r=ng(t,e,A,n);if(r===null)Pf(t,e,n,Bu,A),w0(t,n);else if(wI(r,t,e,A,n))n.stopPropagation();else if(w0(t,n),e&4&&-1<mI.indexOf(t)){for(;r!==null;){var s=Tl(r);if(s!==null&&EC(s),s=ng(t,e,A,n),s===null&&Pf(t,e,n,Bu,A),s===r)break;r=s}r!==null&&n.stopPropagation()}else Pf(t,e,n,null,A)}}var Bu=null;function ng(t,e,A,n){if(Bu=null,t=Op(n),t=Ys(t),t!==null)if(e=Bi(t),e===null)t=null;else if(A=e.tag,A===13){if(t=pC(e),t!==null)return t;t=null}else if(A===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bu=t,null}function QC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aI()){case Kp:return 1;case BC:return 4;case mu:case lI:return 16;case vC:return 536870912;default:return 16}default:return 16}}var cs=null,Gp=null,Yc=null;function UC(){if(Yc)return Yc;var t,e=Gp,A=e.length,n,r="value"in cs?cs.value:cs.textContent,s=r.length;for(t=0;t<A&&e[t]===r[t];t++);var i=A-t;for(n=1;n<=i&&e[A-n]===r[s-n];n++);return Yc=r.slice(t,1<n?1-n:void 0)}function Jc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sc(){return!0}function B0(){return!1}function hn(t){function e(A,n,r,s,i){this._reactName=A,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(A=t[a],this[a]=A?A(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sc:B0,this.isPropagationStopped=B0,this}return _t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=sc)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=sc)},persist:function(){},isPersistent:sc}),e}var ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vp=hn(ko),Sl=_t({},ko,{view:0,detail:0}),CI=hn(Sl),Uf,Sf,sa,xd=_t({},Sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$p,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sa&&(sa&&t.type==="mousemove"?(Uf=t.screenX-sa.screenX,Sf=t.screenY-sa.screenY):Sf=Uf=0,sa=t),Uf)},movementY:function(t){return"movementY"in t?t.movementY:Sf}}),v0=hn(xd),xI=_t({},xd,{dataTransfer:0}),EI=hn(xI),FI=_t({},Sl,{relatedTarget:0}),Tf=hn(FI),_I=_t({},ko,{animationName:0,elapsedTime:0,pseudoElement:0}),bI=hn(_I),II=_t({},ko,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QI=hn(II),UI=_t({},ko,{data:0}),C0=hn(UI),SI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NI[t])?!!e[t]:!1}function $p(){return kI}var DI=_t({},Sl,{key:function(t){if(t.key){var e=SI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$p,charCode:function(t){return t.type==="keypress"?Jc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LI=hn(DI),HI=_t({},xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x0=hn(HI),RI=_t({},Sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$p}),PI=hn(RI),MI=_t({},ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),OI=hn(MI),KI=_t({},xd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jI=hn(KI),WI=[9,13,27,32],Xp=Lr&&"CompositionEvent"in window,Na=null;Lr&&"documentMode"in document&&(Na=document.documentMode);var zI=Lr&&"TextEvent"in window&&!Na,SC=Lr&&(!Xp||Na&&8<Na&&11>=Na),E0=" ",F0=!1;function TC(t,e){switch(t){case"keyup":return WI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wi=!1;function GI(t,e){switch(t){case"compositionend":return NC(e);case"keypress":return e.which!==32?null:(F0=!0,E0);case"textInput":return t=e.data,t===E0&&F0?null:t;default:return null}}function VI(t,e){if(Wi)return t==="compositionend"||!Xp&&TC(t,e)?(t=UC(),Yc=Gp=cs=null,Wi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return SC&&e.locale!=="ko"?null:e.data;default:return null}}var $I={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$I[t.type]:e==="textarea"}function kC(t,e,A,n){uC(n),e=vu(e,"onChange"),0<e.length&&(A=new Vp("onChange","change",null,A,n),t.push({event:A,listeners:e}))}var ka=null,rl=null;function XI(t){zC(t,0)}function Ed(t){var e=Vi(t);if(rC(e))return t}function YI(t,e){if(t==="change")return e}var DC=!1;if(Lr){var Nf;if(Lr){var kf="oninput"in document;if(!kf){var b0=document.createElement("div");b0.setAttribute("oninput","return;"),kf=typeof b0.oninput=="function"}Nf=kf}else Nf=!1;DC=Nf&&(!document.documentMode||9<document.documentMode)}function I0(){ka&&(ka.detachEvent("onpropertychange",LC),rl=ka=null)}function LC(t){if(t.propertyName==="value"&&Ed(rl)){var e=[];kC(e,rl,t,Op(t)),gC(XI,e)}}function JI(t,e,A){t==="focusin"?(I0(),ka=e,rl=A,ka.attachEvent("onpropertychange",LC)):t==="focusout"&&I0()}function qI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ed(rl)}function ZI(t,e){if(t==="click")return Ed(e)}function eQ(t,e){if(t==="input"||t==="change")return Ed(e)}function tQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zn=typeof Object.is=="function"?Object.is:tQ;function sl(t,e){if(Zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var A=Object.keys(t),n=Object.keys(e);if(A.length!==n.length)return!1;for(n=0;n<A.length;n++){var r=A[n];if(!Ph.call(e,r)||!Zn(t[r],e[r]))return!1}return!0}function Q0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function U0(t,e){var A=Q0(t);t=0;for(var n;A;){if(A.nodeType===3){if(n=t+A.textContent.length,t<=e&&n>=e)return{node:A,offset:e-t};t=n}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=Q0(A)}}function HC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?HC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function RC(){for(var t=window,e=hu();e instanceof t.HTMLIFrameElement;){try{var A=typeof e.contentWindow.location.href=="string"}catch{A=!1}if(A)t=e.contentWindow;else break;e=hu(t.document)}return e}function Yp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AQ(t){var e=RC(),A=t.focusedElem,n=t.selectionRange;if(e!==A&&A&&A.ownerDocument&&HC(A.ownerDocument.documentElement,A)){if(n!==null&&Yp(A)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in A)A.selectionStart=e,A.selectionEnd=Math.min(t,A.value.length);else if(t=(e=A.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=A.textContent.length,s=Math.min(n.start,r);n=n.end===void 0?s:Math.min(n.end,r),!t.extend&&s>n&&(r=n,n=s,s=r),r=U0(A,s);var i=U0(A,n);r&&i&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=A;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<e.length;A++)t=e[A],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nQ=Lr&&"documentMode"in document&&11>=document.documentMode,zi=null,rg=null,Da=null,sg=!1;function S0(t,e,A){var n=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;sg||zi==null||zi!==hu(n)||(n=zi,"selectionStart"in n&&Yp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Da&&sl(Da,n)||(Da=n,n=vu(rg,"onSelect"),0<n.length&&(e=new Vp("onSelect","select",null,e,A),t.push({event:e,listeners:n}),e.target=zi)))}function ic(t,e){var A={};return A[t.toLowerCase()]=e.toLowerCase(),A["Webkit"+t]="webkit"+e,A["Moz"+t]="moz"+e,A}var Gi={animationend:ic("Animation","AnimationEnd"),animationiteration:ic("Animation","AnimationIteration"),animationstart:ic("Animation","AnimationStart"),transitionend:ic("Transition","TransitionEnd")},Df={},PC={};Lr&&(PC=document.createElement("div").style,"AnimationEvent"in window||(delete Gi.animationend.animation,delete Gi.animationiteration.animation,delete Gi.animationstart.animation),"TransitionEvent"in window||delete Gi.transitionend.transition);function Fd(t){if(Df[t])return Df[t];if(!Gi[t])return t;var e=Gi[t],A;for(A in e)if(e.hasOwnProperty(A)&&A in PC)return Df[t]=e[A];return t}var MC=Fd("animationend"),OC=Fd("animationiteration"),KC=Fd("animationstart"),jC=Fd("transitionend"),WC=new Map,T0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ls(t,e){WC.set(t,e),yi(e,[t])}for(var Lf=0;Lf<T0.length;Lf++){var Hf=T0[Lf],rQ=Hf.toLowerCase(),sQ=Hf[0].toUpperCase()+Hf.slice(1);Ls(rQ,"on"+sQ)}Ls(MC,"onAnimationEnd");Ls(OC,"onAnimationIteration");Ls(KC,"onAnimationStart");Ls("dblclick","onDoubleClick");Ls("focusin","onFocus");Ls("focusout","onBlur");Ls(jC,"onTransitionEnd");mo("onMouseEnter",["mouseout","mouseover"]);mo("onMouseLeave",["mouseout","mouseover"]);mo("onPointerEnter",["pointerout","pointerover"]);mo("onPointerLeave",["pointerout","pointerover"]);yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yi("onBeforeInput",["compositionend","keypress","textInput","paste"]);yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function N0(t,e,A){var n=t.type||"unknown-event";t.currentTarget=A,rI(n,e,void 0,t),t.currentTarget=null}function zC(t,e){e=(e&4)!==0;for(var A=0;A<t.length;A++){var n=t[A],r=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var i=n.length-1;0<=i;i--){var a=n[i],o=a.instance,l=a.currentTarget;if(a=a.listener,o!==s&&r.isPropagationStopped())break e;N0(r,a,l),s=o}else for(i=0;i<n.length;i++){if(a=n[i],o=a.instance,l=a.currentTarget,a=a.listener,o!==s&&r.isPropagationStopped())break e;N0(r,a,l),s=o}}}if(pu)throw t=eg,pu=!1,eg=null,t}function pt(t,e){var A=e[cg];A===void 0&&(A=e[cg]=new Set);var n=t+"__bubble";A.has(n)||(GC(e,t,2,!1),A.add(n))}function Rf(t,e,A){var n=0;e&&(n|=4),GC(A,t,n,e)}var oc="_reactListening"+Math.random().toString(36).slice(2);function il(t){if(!t[oc]){t[oc]=!0,Zv.forEach(function(A){A!=="selectionchange"&&(iQ.has(A)||Rf(A,!1,t),Rf(A,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[oc]||(e[oc]=!0,Rf("selectionchange",!1,e))}}function GC(t,e,A,n){switch(QC(e)){case 1:var r=BI;break;case 4:r=vI;break;default:r=zp}A=r.bind(null,e,A,t),r=void 0,!Zh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,A,{capture:!0,passive:r}):t.addEventListener(e,A,!0):r!==void 0?t.addEventListener(e,A,{passive:r}):t.addEventListener(e,A,!1)}function Pf(t,e,A,n,r){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var a=n.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(i===4)for(i=n.return;i!==null;){var o=i.tag;if((o===3||o===4)&&(o=i.stateNode.containerInfo,o===r||o.nodeType===8&&o.parentNode===r))return;i=i.return}for(;a!==null;){if(i=Ys(a),i===null)return;if(o=i.tag,o===5||o===6){n=s=i;continue e}a=a.parentNode}}n=n.return}gC(function(){var l=s,u=Op(A),d=[];e:{var f=WC.get(t);if(f!==void 0){var B=Vp,h=t;switch(t){case"keypress":if(Jc(A)===0)break e;case"keydown":case"keyup":B=LI;break;case"focusin":h="focus",B=Tf;break;case"focusout":h="blur",B=Tf;break;case"beforeblur":case"afterblur":B=Tf;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=v0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=EI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=PI;break;case MC:case OC:case KC:B=bI;break;case jC:B=OI;break;case"scroll":B=CI;break;case"wheel":B=jI;break;case"copy":case"cut":case"paste":B=QI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=x0}var y=(e&4)!==0,C=!y&&t==="scroll",p=y?f!==null?f+"Capture":null:f;y=[];for(var g=l,v;g!==null;){v=g;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,p!==null&&(E=el(g,p),E!=null&&y.push(ol(g,E,v)))),C)break;g=g.return}0<y.length&&(f=new B(f,h,null,A,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",B=t==="mouseout"||t==="pointerout",f&&A!==Jh&&(h=A.relatedTarget||A.fromElement)&&(Ys(h)||h[Hr]))break e;if((B||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,B?(h=A.relatedTarget||A.toElement,B=l,h=h?Ys(h):null,h!==null&&(C=Bi(h),h!==C||h.tag!==5&&h.tag!==6)&&(h=null)):(B=null,h=l),B!==h)){if(y=v0,E="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=x0,E="onPointerLeave",p="onPointerEnter",g="pointer"),C=B==null?f:Vi(B),v=h==null?f:Vi(h),f=new y(E,g+"leave",B,A,u),f.target=C,f.relatedTarget=v,E=null,Ys(u)===l&&(y=new y(p,g+"enter",h,A,u),y.target=v,y.relatedTarget=C,E=y),C=E,B&&h)t:{for(y=B,p=h,g=0,v=y;v;v=Ui(v))g++;for(v=0,E=p;E;E=Ui(E))v++;for(;0<g-v;)y=Ui(y),g--;for(;0<v-g;)p=Ui(p),v--;for(;g--;){if(y===p||p!==null&&y===p.alternate)break t;y=Ui(y),p=Ui(p)}y=null}else y=null;B!==null&&k0(d,f,B,y,!1),h!==null&&C!==null&&k0(d,C,h,y,!0)}}e:{if(f=l?Vi(l):window,B=f.nodeName&&f.nodeName.toLowerCase(),B==="select"||B==="input"&&f.type==="file")var S=YI;else if(_0(f))if(DC)S=eQ;else{S=qI;var U=JI}else(B=f.nodeName)&&B.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=ZI);if(S&&(S=S(t,l))){kC(d,S,A,u);break e}U&&U(t,f,l),t==="focusout"&&(U=f._wrapperState)&&U.controlled&&f.type==="number"&&Gh(f,"number",f.value)}switch(U=l?Vi(l):window,t){case"focusin":(_0(U)||U.contentEditable==="true")&&(zi=U,rg=l,Da=null);break;case"focusout":Da=rg=zi=null;break;case"mousedown":sg=!0;break;case"contextmenu":case"mouseup":case"dragend":sg=!1,S0(d,A,u);break;case"selectionchange":if(nQ)break;case"keydown":case"keyup":S0(d,A,u)}var b;if(Xp)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Wi?TC(t,A)&&(L="onCompositionEnd"):t==="keydown"&&A.keyCode===229&&(L="onCompositionStart");L&&(SC&&A.locale!=="ko"&&(Wi||L!=="onCompositionStart"?L==="onCompositionEnd"&&Wi&&(b=UC()):(cs=u,Gp="value"in cs?cs.value:cs.textContent,Wi=!0)),U=vu(l,L),0<U.length&&(L=new C0(L,t,null,A,u),d.push({event:L,listeners:U}),b?L.data=b:(b=NC(A),b!==null&&(L.data=b)))),(b=zI?GI(t,A):VI(t,A))&&(l=vu(l,"onBeforeInput"),0<l.length&&(u=new C0("onBeforeInput","beforeinput",null,A,u),d.push({event:u,listeners:l}),u.data=b))}zC(d,e)})}function ol(t,e,A){return{instance:t,listener:e,currentTarget:A}}function vu(t,e){for(var A=e+"Capture",n=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=el(t,A),s!=null&&n.unshift(ol(t,s,r)),s=el(t,e),s!=null&&n.push(ol(t,s,r))),t=t.return}return n}function Ui(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function k0(t,e,A,n,r){for(var s=e._reactName,i=[];A!==null&&A!==n;){var a=A,o=a.alternate,l=a.stateNode;if(o!==null&&o===n)break;a.tag===5&&l!==null&&(a=l,r?(o=el(A,s),o!=null&&i.unshift(ol(A,o,a))):r||(o=el(A,s),o!=null&&i.push(ol(A,o,a)))),A=A.return}i.length!==0&&t.push({event:e,listeners:i})}var oQ=/\r\n?/g,aQ=/\u0000|\uFFFD/g;function D0(t){return(typeof t=="string"?t:""+t).replace(oQ,`
`).replace(aQ,"")}function ac(t,e,A){if(e=D0(e),D0(t)!==e&&A)throw Error(se(425))}function Cu(){}var ig=null,og=null;function ag(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lg=typeof setTimeout=="function"?setTimeout:void 0,lQ=typeof clearTimeout=="function"?clearTimeout:void 0,L0=typeof Promise=="function"?Promise:void 0,cQ=typeof queueMicrotask=="function"?queueMicrotask:typeof L0<"u"?function(t){return L0.resolve(null).then(t).catch(uQ)}:lg;function uQ(t){setTimeout(function(){throw t})}function Mf(t,e){var A=e,n=0;do{var r=A.nextSibling;if(t.removeChild(A),r&&r.nodeType===8)if(A=r.data,A==="/$"){if(n===0){t.removeChild(r),nl(e);return}n--}else A!=="$"&&A!=="$?"&&A!=="$!"||n++;A=r}while(A);nl(e)}function ys(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function H0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var A=t.data;if(A==="$"||A==="$!"||A==="$?"){if(e===0)return t;e--}else A==="/$"&&e++}t=t.previousSibling}return null}var Do=Math.random().toString(36).slice(2),ar="__reactFiber$"+Do,al="__reactProps$"+Do,Hr="__reactContainer$"+Do,cg="__reactEvents$"+Do,dQ="__reactListeners$"+Do,fQ="__reactHandles$"+Do;function Ys(t){var e=t[ar];if(e)return e;for(var A=t.parentNode;A;){if(e=A[Hr]||A[ar]){if(A=e.alternate,e.child!==null||A!==null&&A.child!==null)for(t=H0(t);t!==null;){if(A=t[ar])return A;t=H0(t)}return e}t=A,A=t.parentNode}return null}function Tl(t){return t=t[ar]||t[Hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function _d(t){return t[al]||null}var ug=[],$i=-1;function Hs(t){return{current:t}}function mt(t){0>$i||(t.current=ug[$i],ug[$i]=null,$i--)}function ht(t,e){$i++,ug[$i]=t.current,t.current=e}var Ss={},xA=Hs(Ss),$A=Hs(!1),oi=Ss;function wo(t,e){var A=t.type.contextTypes;if(!A)return Ss;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in A)r[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function XA(t){return t=t.childContextTypes,t!=null}function xu(){mt($A),mt(xA)}function R0(t,e,A){if(xA.current!==Ss)throw Error(se(168));ht(xA,e),ht($A,A)}function VC(t,e,A){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return A;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(se(108,Jb(t)||"Unknown",r));return _t({},A,n)}function Eu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ss,oi=xA.current,ht(xA,t),ht($A,$A.current),!0}function P0(t,e,A){var n=t.stateNode;if(!n)throw Error(se(169));A?(t=VC(t,e,oi),n.__reactInternalMemoizedMergedChildContext=t,mt($A),mt(xA),ht(xA,t)):mt($A),ht($A,A)}var _r=null,bd=!1,Of=!1;function $C(t){_r===null?_r=[t]:_r.push(t)}function hQ(t){bd=!0,$C(t)}function Rs(){if(!Of&&_r!==null){Of=!0;var t=0,e=it;try{var A=_r;for(it=1;t<A.length;t++){var n=A[t];do n=n(!0);while(n!==null)}_r=null,bd=!1}catch(r){throw _r!==null&&(_r=_r.slice(t+1)),yC(Kp,Rs),r}finally{it=e,Of=!1}}return null}var Xi=[],Yi=0,Fu=null,_u=0,Bn=[],vn=0,ai=null,br=1,Ir="";function zs(t,e){Xi[Yi++]=_u,Xi[Yi++]=Fu,Fu=t,_u=e}function XC(t,e,A){Bn[vn++]=br,Bn[vn++]=Ir,Bn[vn++]=ai,ai=t;var n=br;t=Ir;var r=32-Xn(n)-1;n&=~(1<<r),A+=1;var s=32-Xn(e)+r;if(30<s){var i=r-r%5;s=(n&(1<<i)-1).toString(32),n>>=i,r-=i,br=1<<32-Xn(e)+r|A<<r|n,Ir=s+t}else br=1<<s|A<<r|n,Ir=t}function Jp(t){t.return!==null&&(zs(t,1),XC(t,1,0))}function qp(t){for(;t===Fu;)Fu=Xi[--Yi],Xi[Yi]=null,_u=Xi[--Yi],Xi[Yi]=null;for(;t===ai;)ai=Bn[--vn],Bn[vn]=null,Ir=Bn[--vn],Bn[vn]=null,br=Bn[--vn],Bn[vn]=null}var cn=null,ln=null,Bt=!1,jn=null;function YC(t,e){var A=xn(5,null,null,0);A.elementType="DELETED",A.stateNode=e,A.return=t,e=t.deletions,e===null?(t.deletions=[A],t.flags|=16):e.push(A)}function M0(t,e){switch(t.tag){case 5:var A=t.type;return e=e.nodeType!==1||A.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,ln=ys(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(A=ai!==null?{id:br,overflow:Ir}:null,t.memoizedState={dehydrated:e,treeContext:A,retryLane:1073741824},A=xn(18,null,null,0),A.stateNode=e,A.return=t,t.child=A,cn=t,ln=null,!0):!1;default:return!1}}function dg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fg(t){if(Bt){var e=ln;if(e){var A=e;if(!M0(t,e)){if(dg(t))throw Error(se(418));e=ys(A.nextSibling);var n=cn;e&&M0(t,e)?YC(n,A):(t.flags=t.flags&-4097|2,Bt=!1,cn=t)}}else{if(dg(t))throw Error(se(418));t.flags=t.flags&-4097|2,Bt=!1,cn=t}}}function O0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function lc(t){if(t!==cn)return!1;if(!Bt)return O0(t),Bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ag(t.type,t.memoizedProps)),e&&(e=ln)){if(dg(t))throw JC(),Error(se(418));for(;e;)YC(t,e),e=ys(e.nextSibling)}if(O0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var A=t.data;if(A==="/$"){if(e===0){ln=ys(t.nextSibling);break e}e--}else A!=="$"&&A!=="$!"&&A!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=cn?ys(t.stateNode.nextSibling):null;return!0}function JC(){for(var t=ln;t;)t=ys(t.nextSibling)}function yo(){ln=cn=null,Bt=!1}function Zp(t){jn===null?jn=[t]:jn.push(t)}var gQ=Wr.ReactCurrentBatchConfig;function ia(t,e,A){if(t=A.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(se(309));var n=A.stateNode}if(!n)throw Error(se(147,t));var r=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var a=r.refs;i===null?delete a[s]:a[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(se(284));if(!A._owner)throw Error(se(290,t))}return t}function cc(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function K0(t){var e=t._init;return e(t._payload)}function qC(t){function e(p,g){if(t){var v=p.deletions;v===null?(p.deletions=[g],p.flags|=16):v.push(g)}}function A(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function n(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function r(p,g){return p=xs(p,g),p.index=0,p.sibling=null,p}function s(p,g,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<g?(p.flags|=2,g):v):(p.flags|=2,g)):(p.flags|=1048576,g)}function i(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,g,v,E){return g===null||g.tag!==6?(g=$f(v,p.mode,E),g.return=p,g):(g=r(g,v),g.return=p,g)}function o(p,g,v,E){var S=v.type;return S===ji?u(p,g,v.props.children,E,v.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ts&&K0(S)===g.type)?(E=r(g,v.props),E.ref=ia(p,g,v),E.return=p,E):(E=ru(v.type,v.key,v.props,null,p.mode,E),E.ref=ia(p,g,v),E.return=p,E)}function l(p,g,v,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Xf(v,p.mode,E),g.return=p,g):(g=r(g,v.children||[]),g.return=p,g)}function u(p,g,v,E,S){return g===null||g.tag!==7?(g=ni(v,p.mode,E,S),g.return=p,g):(g=r(g,v),g.return=p,g)}function d(p,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=$f(""+g,p.mode,v),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Zl:return v=ru(g.type,g.key,g.props,null,p.mode,v),v.ref=ia(p,null,g),v.return=p,v;case Ki:return g=Xf(g,p.mode,v),g.return=p,g;case ts:var E=g._init;return d(p,E(g._payload),v)}if(Ba(g)||ta(g))return g=ni(g,p.mode,v,null),g.return=p,g;cc(p,g)}return null}function f(p,g,v,E){var S=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(p,g,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zl:return v.key===S?o(p,g,v,E):null;case Ki:return v.key===S?l(p,g,v,E):null;case ts:return S=v._init,f(p,g,S(v._payload),E)}if(Ba(v)||ta(v))return S!==null?null:u(p,g,v,E,null);cc(p,v)}return null}function B(p,g,v,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return p=p.get(v)||null,a(g,p,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Zl:return p=p.get(E.key===null?v:E.key)||null,o(g,p,E,S);case Ki:return p=p.get(E.key===null?v:E.key)||null,l(g,p,E,S);case ts:var U=E._init;return B(p,g,v,U(E._payload),S)}if(Ba(E)||ta(E))return p=p.get(v)||null,u(g,p,E,S,null);cc(g,E)}return null}function h(p,g,v,E){for(var S=null,U=null,b=g,L=g=0,N=null;b!==null&&L<v.length;L++){b.index>L?(N=b,b=null):N=b.sibling;var I=f(p,b,v[L],E);if(I===null){b===null&&(b=N);break}t&&b&&I.alternate===null&&e(p,b),g=s(I,g,L),U===null?S=I:U.sibling=I,U=I,b=N}if(L===v.length)return A(p,b),Bt&&zs(p,L),S;if(b===null){for(;L<v.length;L++)b=d(p,v[L],E),b!==null&&(g=s(b,g,L),U===null?S=b:U.sibling=b,U=b);return Bt&&zs(p,L),S}for(b=n(p,b);L<v.length;L++)N=B(b,p,L,v[L],E),N!==null&&(t&&N.alternate!==null&&b.delete(N.key===null?L:N.key),g=s(N,g,L),U===null?S=N:U.sibling=N,U=N);return t&&b.forEach(function(q){return e(p,q)}),Bt&&zs(p,L),S}function y(p,g,v,E){var S=ta(v);if(typeof S!="function")throw Error(se(150));if(v=S.call(v),v==null)throw Error(se(151));for(var U=S=null,b=g,L=g=0,N=null,I=v.next();b!==null&&!I.done;L++,I=v.next()){b.index>L?(N=b,b=null):N=b.sibling;var q=f(p,b,I.value,E);if(q===null){b===null&&(b=N);break}t&&b&&q.alternate===null&&e(p,b),g=s(q,g,L),U===null?S=q:U.sibling=q,U=q,b=N}if(I.done)return A(p,b),Bt&&zs(p,L),S;if(b===null){for(;!I.done;L++,I=v.next())I=d(p,I.value,E),I!==null&&(g=s(I,g,L),U===null?S=I:U.sibling=I,U=I);return Bt&&zs(p,L),S}for(b=n(p,b);!I.done;L++,I=v.next())I=B(b,p,L,I.value,E),I!==null&&(t&&I.alternate!==null&&b.delete(I.key===null?L:I.key),g=s(I,g,L),U===null?S=I:U.sibling=I,U=I);return t&&b.forEach(function(O){return e(p,O)}),Bt&&zs(p,L),S}function C(p,g,v,E){if(typeof v=="object"&&v!==null&&v.type===ji&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Zl:e:{for(var S=v.key,U=g;U!==null;){if(U.key===S){if(S=v.type,S===ji){if(U.tag===7){A(p,U.sibling),g=r(U,v.props.children),g.return=p,p=g;break e}}else if(U.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ts&&K0(S)===U.type){A(p,U.sibling),g=r(U,v.props),g.ref=ia(p,U,v),g.return=p,p=g;break e}A(p,U);break}else e(p,U);U=U.sibling}v.type===ji?(g=ni(v.props.children,p.mode,E,v.key),g.return=p,p=g):(E=ru(v.type,v.key,v.props,null,p.mode,E),E.ref=ia(p,g,v),E.return=p,p=E)}return i(p);case Ki:e:{for(U=v.key;g!==null;){if(g.key===U)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){A(p,g.sibling),g=r(g,v.children||[]),g.return=p,p=g;break e}else{A(p,g);break}else e(p,g);g=g.sibling}g=Xf(v,p.mode,E),g.return=p,p=g}return i(p);case ts:return U=v._init,C(p,g,U(v._payload),E)}if(Ba(v))return h(p,g,v,E);if(ta(v))return y(p,g,v,E);cc(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(A(p,g.sibling),g=r(g,v),g.return=p,p=g):(A(p,g),g=$f(v,p.mode,E),g.return=p,p=g),i(p)):A(p,g)}return C}var Bo=qC(!0),ZC=qC(!1),bu=Hs(null),Iu=null,Ji=null,em=null;function tm(){em=Ji=Iu=null}function Am(t){var e=bu.current;mt(bu),t._currentValue=e}function hg(t,e,A){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===A)break;t=t.return}}function oo(t,e){Iu=t,em=Ji=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zA=!0),t.firstContext=null)}function Qn(t){var e=t._currentValue;if(em!==t)if(t={context:t,memoizedValue:e,next:null},Ji===null){if(Iu===null)throw Error(se(308));Ji=t,Iu.dependencies={lanes:0,firstContext:t}}else Ji=Ji.next=t;return e}var Js=null;function nm(t){Js===null?Js=[t]:Js.push(t)}function ex(t,e,A,n){var r=e.interleaved;return r===null?(A.next=A,nm(e)):(A.next=r.next,r.next=A),e.interleaved=A,Rr(t,n)}function Rr(t,e){t.lanes|=e;var A=t.alternate;for(A!==null&&(A.lanes|=e),A=t,t=t.return;t!==null;)t.childLanes|=e,A=t.alternate,A!==null&&(A.childLanes|=e),A=t,t=t.return;return A.tag===3?A.stateNode:null}var As=!1;function rm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bs(t,e,A){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,et&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,Rr(t,A)}return r=n.interleaved,r===null?(e.next=e,nm(n)):(e.next=r.next,r.next=e),n.interleaved=e,Rr(t,A)}function qc(t,e,A){if(e=e.updateQueue,e!==null&&(e=e.shared,(A&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,A|=n,e.lanes=A,jp(t,A)}}function j0(t,e){var A=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,A===n)){var r=null,s=null;if(A=A.firstBaseUpdate,A!==null){do{var i={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};s===null?r=s=i:s=s.next=i,A=A.next}while(A!==null);s===null?r=s=e:s=s.next=e}else r=s=e;A={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=A;return}t=A.lastBaseUpdate,t===null?A.firstBaseUpdate=e:t.next=e,A.lastBaseUpdate=e}function Qu(t,e,A,n){var r=t.updateQueue;As=!1;var s=r.firstBaseUpdate,i=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var o=a,l=o.next;o.next=null,i===null?s=l:i.next=l,i=o;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==i&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=o))}if(s!==null){var d=r.baseState;i=0,u=l=o=null,a=s;do{var f=a.lane,B=a.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:B,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=t,y=a;switch(f=e,B=A,y.tag){case 1:if(h=y.payload,typeof h=="function"){d=h.call(B,d,f);break e}d=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=y.payload,f=typeof h=="function"?h.call(B,d,f):h,f==null)break e;d=_t({},d,f);break e;case 2:As=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else B={eventTime:B,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=B,o=d):u=u.next=B,i|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(o=d),r.baseState=o,r.firstBaseUpdate=l,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do i|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);ci|=i,t.lanes=i,t.memoizedState=d}}function W0(t,e,A){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=A,typeof r!="function")throw Error(se(191,r));r.call(n)}}}var Nl={},ur=Hs(Nl),ll=Hs(Nl),cl=Hs(Nl);function qs(t){if(t===Nl)throw Error(se(174));return t}function sm(t,e){switch(ht(cl,e),ht(ll,t),ht(ur,Nl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$h(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$h(e,t)}mt(ur),ht(ur,e)}function vo(){mt(ur),mt(ll),mt(cl)}function Ax(t){qs(cl.current);var e=qs(ur.current),A=$h(e,t.type);e!==A&&(ht(ll,t),ht(ur,A))}function im(t){ll.current===t&&(mt(ur),mt(ll))}var Et=Hs(0);function Uu(t){for(var e=t;e!==null;){if(e.tag===13){var A=e.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kf=[];function om(){for(var t=0;t<Kf.length;t++)Kf[t]._workInProgressVersionPrimary=null;Kf.length=0}var Zc=Wr.ReactCurrentDispatcher,jf=Wr.ReactCurrentBatchConfig,li=0,Ft=null,zt=null,qt=null,Su=!1,La=!1,ul=0,pQ=0;function mA(){throw Error(se(321))}function am(t,e){if(e===null)return!1;for(var A=0;A<e.length&&A<t.length;A++)if(!Zn(t[A],e[A]))return!1;return!0}function lm(t,e,A,n,r,s){if(li=s,Ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zc.current=t===null||t.memoizedState===null?BQ:vQ,t=A(n,r),La){s=0;do{if(La=!1,ul=0,25<=s)throw Error(se(301));s+=1,qt=zt=null,e.updateQueue=null,Zc.current=CQ,t=A(n,r)}while(La)}if(Zc.current=Tu,e=zt!==null&&zt.next!==null,li=0,qt=zt=Ft=null,Su=!1,e)throw Error(se(300));return t}function cm(){var t=ul!==0;return ul=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Ft.memoizedState=qt=t:qt=qt.next=t,qt}function Un(){if(zt===null){var t=Ft.alternate;t=t!==null?t.memoizedState:null}else t=zt.next;var e=qt===null?Ft.memoizedState:qt.next;if(e!==null)qt=e,zt=t;else{if(t===null)throw Error(se(310));zt=t,t={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},qt===null?Ft.memoizedState=qt=t:qt=qt.next=t}return qt}function dl(t,e){return typeof e=="function"?e(t):e}function Wf(t){var e=Un(),A=e.queue;if(A===null)throw Error(se(311));A.lastRenderedReducer=t;var n=zt,r=n.baseQueue,s=A.pending;if(s!==null){if(r!==null){var i=r.next;r.next=s.next,s.next=i}n.baseQueue=r=s,A.pending=null}if(r!==null){s=r.next,n=n.baseState;var a=i=null,o=null,l=s;do{var u=l.lane;if((li&u)===u)o!==null&&(o=o.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};o===null?(a=o=d,i=n):o=o.next=d,Ft.lanes|=u,ci|=u}l=l.next}while(l!==null&&l!==s);o===null?i=n:o.next=a,Zn(n,e.memoizedState)||(zA=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=o,A.lastRenderedState=n}if(t=A.interleaved,t!==null){r=t;do s=r.lane,Ft.lanes|=s,ci|=s,r=r.next;while(r!==t)}else r===null&&(A.lanes=0);return[e.memoizedState,A.dispatch]}function zf(t){var e=Un(),A=e.queue;if(A===null)throw Error(se(311));A.lastRenderedReducer=t;var n=A.dispatch,r=A.pending,s=e.memoizedState;if(r!==null){A.pending=null;var i=r=r.next;do s=t(s,i.action),i=i.next;while(i!==r);Zn(s,e.memoizedState)||(zA=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),A.lastRenderedState=s}return[s,n]}function nx(){}function rx(t,e){var A=Ft,n=Un(),r=e(),s=!Zn(n.memoizedState,r);if(s&&(n.memoizedState=r,zA=!0),n=n.queue,um(ox.bind(null,A,n,t),[t]),n.getSnapshot!==e||s||qt!==null&&qt.memoizedState.tag&1){if(A.flags|=2048,fl(9,ix.bind(null,A,n,r,e),void 0,null),AA===null)throw Error(se(349));li&30||sx(A,e,r)}return r}function sx(t,e,A){t.flags|=16384,t={getSnapshot:e,value:A},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.stores=[t]):(A=e.stores,A===null?e.stores=[t]:A.push(t))}function ix(t,e,A,n){e.value=A,e.getSnapshot=n,ax(e)&&lx(t)}function ox(t,e,A){return A(function(){ax(e)&&lx(t)})}function ax(t){var e=t.getSnapshot;t=t.value;try{var A=e();return!Zn(t,A)}catch{return!0}}function lx(t){var e=Rr(t,1);e!==null&&Yn(e,t,1,-1)}function z0(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dl,lastRenderedState:t},e.queue=t,t=t.dispatch=yQ.bind(null,Ft,t),[e.memoizedState,t]}function fl(t,e,A,n){return t={tag:t,create:e,destroy:A,deps:n,next:null},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.lastEffect=t.next=t):(A=e.lastEffect,A===null?e.lastEffect=t.next=t:(n=A.next,A.next=t,t.next=n,e.lastEffect=t)),t}function cx(){return Un().memoizedState}function eu(t,e,A,n){var r=sr();Ft.flags|=t,r.memoizedState=fl(1|e,A,void 0,n===void 0?null:n)}function Id(t,e,A,n){var r=Un();n=n===void 0?null:n;var s=void 0;if(zt!==null){var i=zt.memoizedState;if(s=i.destroy,n!==null&&am(n,i.deps)){r.memoizedState=fl(e,A,s,n);return}}Ft.flags|=t,r.memoizedState=fl(1|e,A,s,n)}function G0(t,e){return eu(8390656,8,t,e)}function um(t,e){return Id(2048,8,t,e)}function ux(t,e){return Id(4,2,t,e)}function dx(t,e){return Id(4,4,t,e)}function fx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hx(t,e,A){return A=A!=null?A.concat([t]):null,Id(4,4,fx.bind(null,e,t),A)}function dm(){}function gx(t,e){var A=Un();e=e===void 0?null:e;var n=A.memoizedState;return n!==null&&e!==null&&am(e,n[1])?n[0]:(A.memoizedState=[t,e],t)}function px(t,e){var A=Un();e=e===void 0?null:e;var n=A.memoizedState;return n!==null&&e!==null&&am(e,n[1])?n[0]:(t=t(),A.memoizedState=[t,e],t)}function mx(t,e,A){return li&21?(Zn(A,e)||(A=CC(),Ft.lanes|=A,ci|=A,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zA=!0),t.memoizedState=A)}function mQ(t,e){var A=it;it=A!==0&&4>A?A:4,t(!0);var n=jf.transition;jf.transition={};try{t(!1),e()}finally{it=A,jf.transition=n}}function wx(){return Un().memoizedState}function wQ(t,e,A){var n=Cs(t);if(A={lane:n,action:A,hasEagerState:!1,eagerState:null,next:null},yx(t))Bx(e,A);else if(A=ex(t,e,A,n),A!==null){var r=QA();Yn(A,t,n,r),vx(A,e,n)}}function yQ(t,e,A){var n=Cs(t),r={lane:n,action:A,hasEagerState:!1,eagerState:null,next:null};if(yx(t))Bx(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,A);if(r.hasEagerState=!0,r.eagerState=a,Zn(a,i)){var o=e.interleaved;o===null?(r.next=r,nm(e)):(r.next=o.next,o.next=r),e.interleaved=r;return}}catch{}finally{}A=ex(t,e,r,n),A!==null&&(r=QA(),Yn(A,t,n,r),vx(A,e,n))}}function yx(t){var e=t.alternate;return t===Ft||e!==null&&e===Ft}function Bx(t,e){La=Su=!0;var A=t.pending;A===null?e.next=e:(e.next=A.next,A.next=e),t.pending=e}function vx(t,e,A){if(A&4194240){var n=e.lanes;n&=t.pendingLanes,A|=n,e.lanes=A,jp(t,A)}}var Tu={readContext:Qn,useCallback:mA,useContext:mA,useEffect:mA,useImperativeHandle:mA,useInsertionEffect:mA,useLayoutEffect:mA,useMemo:mA,useReducer:mA,useRef:mA,useState:mA,useDebugValue:mA,useDeferredValue:mA,useTransition:mA,useMutableSource:mA,useSyncExternalStore:mA,useId:mA,unstable_isNewReconciler:!1},BQ={readContext:Qn,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:Qn,useEffect:G0,useImperativeHandle:function(t,e,A){return A=A!=null?A.concat([t]):null,eu(4194308,4,fx.bind(null,e,t),A)},useLayoutEffect:function(t,e){return eu(4194308,4,t,e)},useInsertionEffect:function(t,e){return eu(4,2,t,e)},useMemo:function(t,e){var A=sr();return e=e===void 0?null:e,t=t(),A.memoizedState=[t,e],t},useReducer:function(t,e,A){var n=sr();return e=A!==void 0?A(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=wQ.bind(null,Ft,t),[n.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:z0,useDebugValue:dm,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=z0(!1),e=t[0];return t=mQ.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,A){var n=Ft,r=sr();if(Bt){if(A===void 0)throw Error(se(407));A=A()}else{if(A=e(),AA===null)throw Error(se(349));li&30||sx(n,e,A)}r.memoizedState=A;var s={value:A,getSnapshot:e};return r.queue=s,G0(ox.bind(null,n,s,t),[t]),n.flags|=2048,fl(9,ix.bind(null,n,s,A,e),void 0,null),A},useId:function(){var t=sr(),e=AA.identifierPrefix;if(Bt){var A=Ir,n=br;A=(n&~(1<<32-Xn(n)-1)).toString(32)+A,e=":"+e+"R"+A,A=ul++,0<A&&(e+="H"+A.toString(32)),e+=":"}else A=pQ++,e=":"+e+"r"+A.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vQ={readContext:Qn,useCallback:gx,useContext:Qn,useEffect:um,useImperativeHandle:hx,useInsertionEffect:ux,useLayoutEffect:dx,useMemo:px,useReducer:Wf,useRef:cx,useState:function(){return Wf(dl)},useDebugValue:dm,useDeferredValue:function(t){var e=Un();return mx(e,zt.memoizedState,t)},useTransition:function(){var t=Wf(dl)[0],e=Un().memoizedState;return[t,e]},useMutableSource:nx,useSyncExternalStore:rx,useId:wx,unstable_isNewReconciler:!1},CQ={readContext:Qn,useCallback:gx,useContext:Qn,useEffect:um,useImperativeHandle:hx,useInsertionEffect:ux,useLayoutEffect:dx,useMemo:px,useReducer:zf,useRef:cx,useState:function(){return zf(dl)},useDebugValue:dm,useDeferredValue:function(t){var e=Un();return zt===null?e.memoizedState=t:mx(e,zt.memoizedState,t)},useTransition:function(){var t=zf(dl)[0],e=Un().memoizedState;return[t,e]},useMutableSource:nx,useSyncExternalStore:rx,useId:wx,unstable_isNewReconciler:!1};function On(t,e){if(t&&t.defaultProps){e=_t({},e),t=t.defaultProps;for(var A in t)e[A]===void 0&&(e[A]=t[A]);return e}return e}function gg(t,e,A,n){e=t.memoizedState,A=A(n,e),A=A==null?e:_t({},e,A),t.memoizedState=A,t.lanes===0&&(t.updateQueue.baseState=A)}var Qd={isMounted:function(t){return(t=t._reactInternals)?Bi(t)===t:!1},enqueueSetState:function(t,e,A){t=t._reactInternals;var n=QA(),r=Cs(t),s=Tr(n,r);s.payload=e,A!=null&&(s.callback=A),e=Bs(t,s,r),e!==null&&(Yn(e,t,r,n),qc(e,t,r))},enqueueReplaceState:function(t,e,A){t=t._reactInternals;var n=QA(),r=Cs(t),s=Tr(n,r);s.tag=1,s.payload=e,A!=null&&(s.callback=A),e=Bs(t,s,r),e!==null&&(Yn(e,t,r,n),qc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var A=QA(),n=Cs(t),r=Tr(A,n);r.tag=2,e!=null&&(r.callback=e),e=Bs(t,r,n),e!==null&&(Yn(e,t,n,A),qc(e,t,n))}};function V0(t,e,A,n,r,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,i):e.prototype&&e.prototype.isPureReactComponent?!sl(A,n)||!sl(r,s):!0}function Cx(t,e,A){var n=!1,r=Ss,s=e.contextType;return typeof s=="object"&&s!==null?s=Qn(s):(r=XA(e)?oi:xA.current,n=e.contextTypes,s=(n=n!=null)?wo(t,r):Ss),e=new e(A,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qd,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function $0(t,e,A,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(A,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(A,n),e.state!==t&&Qd.enqueueReplaceState(e,e.state,null)}function pg(t,e,A,n){var r=t.stateNode;r.props=A,r.state=t.memoizedState,r.refs={},rm(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Qn(s):(s=XA(e)?oi:xA.current,r.context=wo(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(gg(t,e,s,A),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Qd.enqueueReplaceState(r,r.state,null),Qu(t,A,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Co(t,e){try{var A="",n=e;do A+=Yb(n),n=n.return;while(n);var r=A}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Gf(t,e,A){return{value:t,source:null,stack:A??null,digest:e??null}}function mg(t,e){try{console.error(e.value)}catch(A){setTimeout(function(){throw A})}}var xQ=typeof WeakMap=="function"?WeakMap:Map;function xx(t,e,A){A=Tr(-1,A),A.tag=3,A.payload={element:null};var n=e.value;return A.callback=function(){ku||(ku=!0,bg=n),mg(t,e)},A}function Ex(t,e,A){A=Tr(-1,A),A.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;A.payload=function(){return n(r)},A.callback=function(){mg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(A.callback=function(){mg(t,e),typeof n!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),A}function X0(t,e,A){var n=t.pingCache;if(n===null){n=t.pingCache=new xQ;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(A)||(r.add(A),t=HQ.bind(null,t,e,A),e.then(t,t))}function Y0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function J0(t,e,A,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(e=Tr(-1,1),e.tag=2,Bs(A,e,1))),A.lanes|=1),t)}var EQ=Wr.ReactCurrentOwner,zA=!1;function IA(t,e,A,n){e.child=t===null?ZC(e,null,A,n):Bo(e,t.child,A,n)}function q0(t,e,A,n,r){A=A.render;var s=e.ref;return oo(e,r),n=lm(t,e,A,n,s,r),A=cm(),t!==null&&!zA?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Pr(t,e,r)):(Bt&&A&&Jp(e),e.flags|=1,IA(t,e,n,r),e.child)}function Z0(t,e,A,n,r){if(t===null){var s=A.type;return typeof s=="function"&&!Bm(s)&&s.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(e.tag=15,e.type=s,Fx(t,e,s,n,r)):(t=ru(A.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var i=s.memoizedProps;if(A=A.compare,A=A!==null?A:sl,A(i,n)&&t.ref===e.ref)return Pr(t,e,r)}return e.flags|=1,t=xs(s,n),t.ref=e.ref,t.return=e,e.child=t}function Fx(t,e,A,n,r){if(t!==null){var s=t.memoizedProps;if(sl(s,n)&&t.ref===e.ref)if(zA=!1,e.pendingProps=n=s,(t.lanes&r)!==0)t.flags&131072&&(zA=!0);else return e.lanes=t.lanes,Pr(t,e,r)}return wg(t,e,A,n,r)}function _x(t,e,A){var n=e.pendingProps,r=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(Zi,an),an|=A;else{if(!(A&1073741824))return t=s!==null?s.baseLanes|A:A,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ht(Zi,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:A,ht(Zi,an),an|=n}else s!==null?(n=s.baseLanes|A,e.memoizedState=null):n=A,ht(Zi,an),an|=n;return IA(t,e,r,A),e.child}function bx(t,e){var A=e.ref;(t===null&&A!==null||t!==null&&t.ref!==A)&&(e.flags|=512,e.flags|=2097152)}function wg(t,e,A,n,r){var s=XA(A)?oi:xA.current;return s=wo(e,s),oo(e,r),A=lm(t,e,A,n,s,r),n=cm(),t!==null&&!zA?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Pr(t,e,r)):(Bt&&n&&Jp(e),e.flags|=1,IA(t,e,A,r),e.child)}function ey(t,e,A,n,r){if(XA(A)){var s=!0;Eu(e)}else s=!1;if(oo(e,r),e.stateNode===null)tu(t,e),Cx(e,A,n),pg(e,A,n,r),n=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var o=i.context,l=A.contextType;typeof l=="object"&&l!==null?l=Qn(l):(l=XA(A)?oi:xA.current,l=wo(e,l));var u=A.getDerivedStateFromProps,d=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==n||o!==l)&&$0(e,i,n,l),As=!1;var f=e.memoizedState;i.state=f,Qu(e,n,i,r),o=e.memoizedState,a!==n||f!==o||$A.current||As?(typeof u=="function"&&(gg(e,A,u,n),o=e.memoizedState),(a=As||V0(e,A,a,n,f,o,l))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=o),i.props=n,i.state=o,i.context=l,n=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,tx(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:On(e.type,a),i.props=l,d=e.pendingProps,f=i.context,o=A.contextType,typeof o=="object"&&o!==null?o=Qn(o):(o=XA(A)?oi:xA.current,o=wo(e,o));var B=A.getDerivedStateFromProps;(u=typeof B=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||f!==o)&&$0(e,i,n,o),As=!1,f=e.memoizedState,i.state=f,Qu(e,n,i,r);var h=e.memoizedState;a!==d||f!==h||$A.current||As?(typeof B=="function"&&(gg(e,A,B,n),h=e.memoizedState),(l=As||V0(e,A,l,n,f,h,o)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,h,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,h,o)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=h),i.props=n,i.state=h,i.context=o,n=l):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return yg(t,e,A,n,s,r)}function yg(t,e,A,n,r,s){bx(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return r&&P0(e,A,!1),Pr(t,e,s);n=e.stateNode,EQ.current=e;var a=i&&typeof A.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Bo(e,t.child,null,s),e.child=Bo(e,null,a,s)):IA(t,e,a,s),e.memoizedState=n.state,r&&P0(e,A,!0),e.child}function Ix(t){var e=t.stateNode;e.pendingContext?R0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&R0(t,e.context,!1),sm(t,e.containerInfo)}function ty(t,e,A,n,r){return yo(),Zp(r),e.flags|=256,IA(t,e,A,n),e.child}var Bg={dehydrated:null,treeContext:null,retryLane:0};function vg(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qx(t,e,A){var n=e.pendingProps,r=Et.current,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ht(Et,r&1),t===null)return fg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,s?(n=e.mode,s=e.child,i={mode:"hidden",children:i},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Td(i,n,0,null),t=ni(t,n,A,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=vg(A),e.memoizedState=Bg,t):fm(e,i));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return FQ(t,e,i,n,a,r,A);if(s){s=n.fallback,i=e.mode,r=t.child,a=r.sibling;var o={mode:"hidden",children:n.children};return!(i&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=o,e.deletions=null):(n=xs(r,o),n.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=xs(a,s):(s=ni(s,i,A,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,i=t.child.memoizedState,i=i===null?vg(A):{baseLanes:i.baseLanes|A,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~A,e.memoizedState=Bg,n}return s=t.child,t=s.sibling,n=xs(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=A),n.return=e,n.sibling=null,t!==null&&(A=e.deletions,A===null?(e.deletions=[t],e.flags|=16):A.push(t)),e.child=n,e.memoizedState=null,n}function fm(t,e){return e=Td({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uc(t,e,A,n){return n!==null&&Zp(n),Bo(e,t.child,null,A),t=fm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FQ(t,e,A,n,r,s,i){if(A)return e.flags&256?(e.flags&=-257,n=Gf(Error(se(422))),uc(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,r=e.mode,n=Td({mode:"visible",children:n.children},r,0,null),s=ni(s,r,i,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Bo(e,t.child,null,i),e.child.memoizedState=vg(i),e.memoizedState=Bg,s);if(!(e.mode&1))return uc(t,e,i,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(se(419)),n=Gf(s,n,void 0),uc(t,e,i,n)}if(a=(i&t.childLanes)!==0,zA||a){if(n=AA,n!==null){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|i)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Rr(t,r),Yn(n,t,r,-1))}return ym(),n=Gf(Error(se(421))),uc(t,e,i,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=RQ.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,ln=ys(r.nextSibling),cn=e,Bt=!0,jn=null,t!==null&&(Bn[vn++]=br,Bn[vn++]=Ir,Bn[vn++]=ai,br=t.id,Ir=t.overflow,ai=e),e=fm(e,n.children),e.flags|=4096,e)}function Ay(t,e,A){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),hg(t.return,e,A)}function Vf(t,e,A,n,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:A,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=A,s.tailMode=r)}function Ux(t,e,A){var n=e.pendingProps,r=n.revealOrder,s=n.tail;if(IA(t,e,n.children,A),n=Et.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ay(t,A,e);else if(t.tag===19)Ay(t,A,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ht(Et,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(A=e.child,r=null;A!==null;)t=A.alternate,t!==null&&Uu(t)===null&&(r=A),A=A.sibling;A=r,A===null?(r=e.child,e.child=null):(r=A.sibling,A.sibling=null),Vf(e,!1,r,A,s);break;case"backwards":for(A=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Uu(t)===null){e.child=r;break}t=r.sibling,r.sibling=A,A=r,r=t}Vf(e,!0,A,null,s);break;case"together":Vf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pr(t,e,A){if(t!==null&&(e.dependencies=t.dependencies),ci|=e.lanes,!(A&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,A=xs(t,t.pendingProps),e.child=A,A.return=e;t.sibling!==null;)t=t.sibling,A=A.sibling=xs(t,t.pendingProps),A.return=e;A.sibling=null}return e.child}function _Q(t,e,A){switch(e.tag){case 3:Ix(e),yo();break;case 5:Ax(e);break;case 1:XA(e.type)&&Eu(e);break;case 4:sm(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;ht(bu,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ht(Et,Et.current&1),e.flags|=128,null):A&e.child.childLanes?Qx(t,e,A):(ht(Et,Et.current&1),t=Pr(t,e,A),t!==null?t.sibling:null);ht(Et,Et.current&1);break;case 19:if(n=(A&e.childLanes)!==0,t.flags&128){if(n)return Ux(t,e,A);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ht(Et,Et.current),n)break;return null;case 22:case 23:return e.lanes=0,_x(t,e,A)}return Pr(t,e,A)}var Sx,Cg,Tx,Nx;Sx=function(t,e){for(var A=e.child;A!==null;){if(A.tag===5||A.tag===6)t.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break;for(;A.sibling===null;){if(A.return===null||A.return===e)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};Cg=function(){};Tx=function(t,e,A,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,qs(ur.current);var s=null;switch(A){case"input":r=Wh(t,r),n=Wh(t,n),s=[];break;case"select":r=_t({},r,{value:void 0}),n=_t({},n,{value:void 0}),s=[];break;case"textarea":r=Vh(t,r),n=Vh(t,n),s=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Cu)}Xh(A,n);var i;A=null;for(l in r)if(!n.hasOwnProperty(l)&&r.hasOwnProperty(l)&&r[l]!=null)if(l==="style"){var a=r[l];for(i in a)a.hasOwnProperty(i)&&(A||(A={}),A[i]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(qa.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var o=n[l];if(a=r!=null?r[l]:void 0,n.hasOwnProperty(l)&&o!==a&&(o!=null||a!=null))if(l==="style")if(a){for(i in a)!a.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(A||(A={}),A[i]="");for(i in o)o.hasOwnProperty(i)&&a[i]!==o[i]&&(A||(A={}),A[i]=o[i])}else A||(s||(s=[]),s.push(l,A)),A=o;else l==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,a=a?a.__html:void 0,o!=null&&a!==o&&(s=s||[]).push(l,o)):l==="children"?typeof o!="string"&&typeof o!="number"||(s=s||[]).push(l,""+o):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(qa.hasOwnProperty(l)?(o!=null&&l==="onScroll"&&pt("scroll",t),s||a===o||(s=[])):(s=s||[]).push(l,o))}A&&(s=s||[]).push("style",A);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};Nx=function(t,e,A,n){A!==n&&(e.flags|=4)};function oa(t,e){if(!Bt)switch(t.tailMode){case"hidden":e=t.tail;for(var A=null;e!==null;)e.alternate!==null&&(A=e),e=e.sibling;A===null?t.tail=null:A.sibling=null;break;case"collapsed":A=t.tail;for(var n=null;A!==null;)A.alternate!==null&&(n=A),A=A.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function wA(t){var e=t.alternate!==null&&t.alternate.child===t.child,A=0,n=0;if(e)for(var r=t.child;r!==null;)A|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)A|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=A,e}function bQ(t,e,A){var n=e.pendingProps;switch(qp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wA(e),null;case 1:return XA(e.type)&&xu(),wA(e),null;case 3:return n=e.stateNode,vo(),mt($A),mt(xA),om(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(lc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(Ug(jn),jn=null))),Cg(t,e),wA(e),null;case 5:im(e);var r=qs(cl.current);if(A=e.type,t!==null&&e.stateNode!=null)Tx(t,e,A,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(se(166));return wA(e),null}if(t=qs(ur.current),lc(e)){n=e.stateNode,A=e.type;var s=e.memoizedProps;switch(n[ar]=e,n[al]=s,t=(e.mode&1)!==0,A){case"dialog":pt("cancel",n),pt("close",n);break;case"iframe":case"object":case"embed":pt("load",n);break;case"video":case"audio":for(r=0;r<Ca.length;r++)pt(Ca[r],n);break;case"source":pt("error",n);break;case"img":case"image":case"link":pt("error",n),pt("load",n);break;case"details":pt("toggle",n);break;case"input":u0(n,s),pt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},pt("invalid",n);break;case"textarea":f0(n,s),pt("invalid",n)}Xh(A,s),r=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&ac(n.textContent,a,t),r=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ac(n.textContent,a,t),r=["children",""+a]):qa.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&pt("scroll",n)}switch(A){case"input":ec(n),d0(n,s,!0);break;case"textarea":ec(n),h0(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Cu)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oC(A)),t==="http://www.w3.org/1999/xhtml"?A==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(A,{is:n.is}):(t=i.createElement(A),A==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,A),t[ar]=e,t[al]=n,Sx(t,e,!1,!1),e.stateNode=t;e:{switch(i=Yh(A,n),A){case"dialog":pt("cancel",t),pt("close",t),r=n;break;case"iframe":case"object":case"embed":pt("load",t),r=n;break;case"video":case"audio":for(r=0;r<Ca.length;r++)pt(Ca[r],t);r=n;break;case"source":pt("error",t),r=n;break;case"img":case"image":case"link":pt("error",t),pt("load",t),r=n;break;case"details":pt("toggle",t),r=n;break;case"input":u0(t,n),r=Wh(t,n),pt("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=_t({},n,{value:void 0}),pt("invalid",t);break;case"textarea":f0(t,n),r=Vh(t,n),pt("invalid",t);break;default:r=n}Xh(A,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="style"?cC(t,o):s==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&aC(t,o)):s==="children"?typeof o=="string"?(A!=="textarea"||o!=="")&&Za(t,o):typeof o=="number"&&Za(t,""+o):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(qa.hasOwnProperty(s)?o!=null&&s==="onScroll"&&pt("scroll",t):o!=null&&Hp(t,s,o,i))}switch(A){case"input":ec(t),d0(t,n,!1);break;case"textarea":ec(t),h0(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Us(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?no(t,!!n.multiple,s,!1):n.defaultValue!=null&&no(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Cu)}switch(A){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wA(e),null;case 6:if(t&&e.stateNode!=null)Nx(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(se(166));if(A=qs(cl.current),qs(ur.current),lc(e)){if(n=e.stateNode,A=e.memoizedProps,n[ar]=e,(s=n.nodeValue!==A)&&(t=cn,t!==null))switch(t.tag){case 3:ac(n.nodeValue,A,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ac(n.nodeValue,A,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(A.nodeType===9?A:A.ownerDocument).createTextNode(n),n[ar]=e,e.stateNode=n}return wA(e),null;case 13:if(mt(Et),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Bt&&ln!==null&&e.mode&1&&!(e.flags&128))JC(),yo(),e.flags|=98560,s=!1;else if(s=lc(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(se(317));s[ar]=e}else yo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wA(e),s=!1}else jn!==null&&(Ug(jn),jn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=A,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Et.current&1?Vt===0&&(Vt=3):ym())),e.updateQueue!==null&&(e.flags|=4),wA(e),null);case 4:return vo(),Cg(t,e),t===null&&il(e.stateNode.containerInfo),wA(e),null;case 10:return Am(e.type._context),wA(e),null;case 17:return XA(e.type)&&xu(),wA(e),null;case 19:if(mt(Et),s=e.memoizedState,s===null)return wA(e),null;if(n=(e.flags&128)!==0,i=s.rendering,i===null)if(n)oa(s,!1);else{if(Vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Uu(t),i!==null){for(e.flags|=128,oa(s,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=A,A=e.child;A!==null;)s=A,t=n,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),A=A.sibling;return ht(Et,Et.current&1|2),e.child}t=t.sibling}s.tail!==null&&Dt()>xo&&(e.flags|=128,n=!0,oa(s,!1),e.lanes=4194304)}else{if(!n)if(t=Uu(i),t!==null){if(e.flags|=128,n=!0,A=t.updateQueue,A!==null&&(e.updateQueue=A,e.flags|=4),oa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Bt)return wA(e),null}else 2*Dt()-s.renderingStartTime>xo&&A!==1073741824&&(e.flags|=128,n=!0,oa(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(A=s.last,A!==null?A.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Dt(),e.sibling=null,A=Et.current,ht(Et,n?A&1|2:A&1),e):(wA(e),null);case 22:case 23:return wm(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?an&1073741824&&(wA(e),e.subtreeFlags&6&&(e.flags|=8192)):wA(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function IQ(t,e){switch(qp(e),e.tag){case 1:return XA(e.type)&&xu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vo(),mt($A),mt(xA),om(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return im(e),null;case 13:if(mt(Et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));yo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return mt(Et),null;case 4:return vo(),null;case 10:return Am(e.type._context),null;case 22:case 23:return wm(),null;case 24:return null;default:return null}}var dc=!1,CA=!1,QQ=typeof WeakSet=="function"?WeakSet:Set,fe=null;function qi(t,e){var A=t.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(n){It(t,e,n)}else A.current=null}function xg(t,e,A){try{A()}catch(n){It(t,e,n)}}var ny=!1;function UQ(t,e){if(ig=yu,t=RC(),Yp(t)){if("selectionStart"in t)var A={start:t.selectionStart,end:t.selectionEnd};else e:{A=(A=t.ownerDocument)&&A.defaultView||window;var n=A.getSelection&&A.getSelection();if(n&&n.rangeCount!==0){A=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{A.nodeType,s.nodeType}catch{A=null;break e}var i=0,a=-1,o=-1,l=0,u=0,d=t,f=null;t:for(;;){for(var B;d!==A||r!==0&&d.nodeType!==3||(a=i+r),d!==s||n!==0&&d.nodeType!==3||(o=i+n),d.nodeType===3&&(i+=d.nodeValue.length),(B=d.firstChild)!==null;)f=d,d=B;for(;;){if(d===t)break t;if(f===A&&++l===r&&(a=i),f===s&&++u===n&&(o=i),(B=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=B}A=a===-1||o===-1?null:{start:a,end:o}}else A=null}A=A||{start:0,end:0}}else A=null;for(og={focusedElem:t,selectionRange:A},yu=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var y=h.memoizedProps,C=h.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?y:On(e.type,y),C);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(E){It(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return h=ny,ny=!1,h}function Ha(t,e,A){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&xg(e,A,s)}r=r.next}while(r!==n)}}function Ud(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var A=e=e.next;do{if((A.tag&t)===t){var n=A.create;A.destroy=n()}A=A.next}while(A!==e)}}function Eg(t){var e=t.ref;if(e!==null){var A=t.stateNode;switch(t.tag){case 5:t=A;break;default:t=A}typeof e=="function"?e(t):e.current=t}}function kx(t){var e=t.alternate;e!==null&&(t.alternate=null,kx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[al],delete e[cg],delete e[dQ],delete e[fQ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Dx(t){return t.tag===5||t.tag===3||t.tag===4}function ry(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fg(t,e,A){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?A.nodeType===8?A.parentNode.insertBefore(t,e):A.insertBefore(t,e):(A.nodeType===8?(e=A.parentNode,e.insertBefore(t,A)):(e=A,e.appendChild(t)),A=A._reactRootContainer,A!=null||e.onclick!==null||(e.onclick=Cu));else if(n!==4&&(t=t.child,t!==null))for(Fg(t,e,A),t=t.sibling;t!==null;)Fg(t,e,A),t=t.sibling}function _g(t,e,A){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?A.insertBefore(t,e):A.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(_g(t,e,A),t=t.sibling;t!==null;)_g(t,e,A),t=t.sibling}var iA=null,Kn=!1;function Xr(t,e,A){for(A=A.child;A!==null;)Lx(t,e,A),A=A.sibling}function Lx(t,e,A){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Cd,A)}catch{}switch(A.tag){case 5:CA||qi(A,e);case 6:var n=iA,r=Kn;iA=null,Xr(t,e,A),iA=n,Kn=r,iA!==null&&(Kn?(t=iA,A=A.stateNode,t.nodeType===8?t.parentNode.removeChild(A):t.removeChild(A)):iA.removeChild(A.stateNode));break;case 18:iA!==null&&(Kn?(t=iA,A=A.stateNode,t.nodeType===8?Mf(t.parentNode,A):t.nodeType===1&&Mf(t,A),nl(t)):Mf(iA,A.stateNode));break;case 4:n=iA,r=Kn,iA=A.stateNode.containerInfo,Kn=!0,Xr(t,e,A),iA=n,Kn=r;break;case 0:case 11:case 14:case 15:if(!CA&&(n=A.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var s=r,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&xg(A,e,i),r=r.next}while(r!==n)}Xr(t,e,A);break;case 1:if(!CA&&(qi(A,e),n=A.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=A.memoizedProps,n.state=A.memoizedState,n.componentWillUnmount()}catch(a){It(A,e,a)}Xr(t,e,A);break;case 21:Xr(t,e,A);break;case 22:A.mode&1?(CA=(n=CA)||A.memoizedState!==null,Xr(t,e,A),CA=n):Xr(t,e,A);break;default:Xr(t,e,A)}}function sy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var A=t.stateNode;A===null&&(A=t.stateNode=new QQ),e.forEach(function(n){var r=PQ.bind(null,t,n);A.has(n)||(A.add(n),n.then(r,r))})}}function Ln(t,e){var A=e.deletions;if(A!==null)for(var n=0;n<A.length;n++){var r=A[n];try{var s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:iA=a.stateNode,Kn=!1;break e;case 3:iA=a.stateNode.containerInfo,Kn=!0;break e;case 4:iA=a.stateNode.containerInfo,Kn=!0;break e}a=a.return}if(iA===null)throw Error(se(160));Lx(s,i,r),iA=null,Kn=!1;var o=r.alternate;o!==null&&(o.return=null),r.return=null}catch(l){It(r,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hx(e,t),e=e.sibling}function Hx(t,e){var A=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),nr(t),n&4){try{Ha(3,t,t.return),Ud(3,t)}catch(y){It(t,t.return,y)}try{Ha(5,t,t.return)}catch(y){It(t,t.return,y)}}break;case 1:Ln(e,t),nr(t),n&512&&A!==null&&qi(A,A.return);break;case 5:if(Ln(e,t),nr(t),n&512&&A!==null&&qi(A,A.return),t.flags&32){var r=t.stateNode;try{Za(r,"")}catch(y){It(t,t.return,y)}}if(n&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,i=A!==null?A.memoizedProps:s,a=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&sC(r,s),Yh(a,i);var l=Yh(a,s);for(i=0;i<o.length;i+=2){var u=o[i],d=o[i+1];u==="style"?cC(r,d):u==="dangerouslySetInnerHTML"?aC(r,d):u==="children"?Za(r,d):Hp(r,u,d,l)}switch(a){case"input":zh(r,s);break;case"textarea":iC(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var B=s.value;B!=null?no(r,!!s.multiple,B,!1):f!==!!s.multiple&&(s.defaultValue!=null?no(r,!!s.multiple,s.defaultValue,!0):no(r,!!s.multiple,s.multiple?[]:"",!1))}r[al]=s}catch(y){It(t,t.return,y)}}break;case 6:if(Ln(e,t),nr(t),n&4){if(t.stateNode===null)throw Error(se(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(y){It(t,t.return,y)}}break;case 3:if(Ln(e,t),nr(t),n&4&&A!==null&&A.memoizedState.isDehydrated)try{nl(e.containerInfo)}catch(y){It(t,t.return,y)}break;case 4:Ln(e,t),nr(t);break;case 13:Ln(e,t),nr(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(pm=Dt())),n&4&&sy(t);break;case 22:if(u=A!==null&&A.memoizedState!==null,t.mode&1?(CA=(l=CA)||u,Ln(e,t),CA=l):Ln(e,t),nr(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(fe=t,u=t.child;u!==null;){for(d=fe=u;fe!==null;){switch(f=fe,B=f.child,f.tag){case 0:case 11:case 14:case 15:Ha(4,f,f.return);break;case 1:qi(f,f.return);var h=f.stateNode;if(typeof h.componentWillUnmount=="function"){n=f,A=f.return;try{e=n,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(y){It(n,A,y)}}break;case 5:qi(f,f.return);break;case 22:if(f.memoizedState!==null){oy(d);continue}}B!==null?(B.return=f,fe=B):oy(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,l?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,o=d.memoizedProps.style,i=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=lC("display",i))}catch(y){It(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(y){It(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ln(e,t),nr(t),n&4&&sy(t);break;case 21:break;default:Ln(e,t),nr(t)}}function nr(t){var e=t.flags;if(e&2){try{e:{for(var A=t.return;A!==null;){if(Dx(A)){var n=A;break e}A=A.return}throw Error(se(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(Za(r,""),n.flags&=-33);var s=ry(t);_g(t,s,r);break;case 3:case 4:var i=n.stateNode.containerInfo,a=ry(t);Fg(t,a,i);break;default:throw Error(se(161))}}catch(o){It(t,t.return,o)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SQ(t,e,A){fe=t,Rx(t)}function Rx(t,e,A){for(var n=(t.mode&1)!==0;fe!==null;){var r=fe,s=r.child;if(r.tag===22&&n){var i=r.memoizedState!==null||dc;if(!i){var a=r.alternate,o=a!==null&&a.memoizedState!==null||CA;a=dc;var l=CA;if(dc=i,(CA=o)&&!l)for(fe=r;fe!==null;)i=fe,o=i.child,i.tag===22&&i.memoizedState!==null?ay(r):o!==null?(o.return=i,fe=o):ay(r);for(;s!==null;)fe=s,Rx(s),s=s.sibling;fe=r,dc=a,CA=l}iy(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,fe=s):iy(t)}}function iy(t){for(;fe!==null;){var e=fe;if(e.flags&8772){var A=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:CA||Ud(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!CA)if(A===null)n.componentDidMount();else{var r=e.elementType===e.type?A.memoizedProps:On(e.type,A.memoizedProps);n.componentDidUpdate(r,A.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&W0(e,s,n);break;case 3:var i=e.updateQueue;if(i!==null){if(A=null,e.child!==null)switch(e.child.tag){case 5:A=e.child.stateNode;break;case 1:A=e.child.stateNode}W0(e,i,A)}break;case 5:var a=e.stateNode;if(A===null&&e.flags&4){A=a;var o=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&A.focus();break;case"img":o.src&&(A.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&nl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}CA||e.flags&512&&Eg(e)}catch(f){It(e,e.return,f)}}if(e===t){fe=null;break}if(A=e.sibling,A!==null){A.return=e.return,fe=A;break}fe=e.return}}function oy(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var A=e.sibling;if(A!==null){A.return=e.return,fe=A;break}fe=e.return}}function ay(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var A=e.return;try{Ud(4,e)}catch(o){It(e,A,o)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(o){It(e,r,o)}}var s=e.return;try{Eg(e)}catch(o){It(e,s,o)}break;case 5:var i=e.return;try{Eg(e)}catch(o){It(e,i,o)}}}catch(o){It(e,e.return,o)}if(e===t){fe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,fe=a;break}fe=e.return}}var TQ=Math.ceil,Nu=Wr.ReactCurrentDispatcher,hm=Wr.ReactCurrentOwner,In=Wr.ReactCurrentBatchConfig,et=0,AA=null,Mt=null,uA=0,an=0,Zi=Hs(0),Vt=0,hl=null,ci=0,Sd=0,gm=0,Ra=null,WA=null,pm=0,xo=1/0,Fr=null,ku=!1,bg=null,vs=null,fc=!1,us=null,Du=0,Pa=0,Ig=null,Au=-1,nu=0;function QA(){return et&6?Dt():Au!==-1?Au:Au=Dt()}function Cs(t){return t.mode&1?et&2&&uA!==0?uA&-uA:gQ.transition!==null?(nu===0&&(nu=CC()),nu):(t=it,t!==0||(t=window.event,t=t===void 0?16:QC(t.type)),t):1}function Yn(t,e,A,n){if(50<Pa)throw Pa=0,Ig=null,Error(se(185));Ul(t,A,n),(!(et&2)||t!==AA)&&(t===AA&&(!(et&2)&&(Sd|=A),Vt===4&&is(t,uA)),YA(t,n),A===1&&et===0&&!(e.mode&1)&&(xo=Dt()+500,bd&&Rs()))}function YA(t,e){var A=t.callbackNode;gI(t,e);var n=wu(t,t===AA?uA:0);if(n===0)A!==null&&m0(A),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(A!=null&&m0(A),e===1)t.tag===0?hQ(ly.bind(null,t)):$C(ly.bind(null,t)),cQ(function(){!(et&6)&&Rs()}),A=null;else{switch(xC(n)){case 1:A=Kp;break;case 4:A=BC;break;case 16:A=mu;break;case 536870912:A=vC;break;default:A=mu}A=Gx(A,Px.bind(null,t))}t.callbackPriority=e,t.callbackNode=A}}function Px(t,e){if(Au=-1,nu=0,et&6)throw Error(se(327));var A=t.callbackNode;if(ao()&&t.callbackNode!==A)return null;var n=wu(t,t===AA?uA:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Lu(t,n);else{e=n;var r=et;et|=2;var s=Ox();(AA!==t||uA!==e)&&(Fr=null,xo=Dt()+500,Ai(t,e));do try{DQ();break}catch(a){Mx(t,a)}while(!0);tm(),Nu.current=s,et=r,Mt!==null?e=0:(AA=null,uA=0,e=Vt)}if(e!==0){if(e===2&&(r=tg(t),r!==0&&(n=r,e=Qg(t,r))),e===1)throw A=hl,Ai(t,0),is(t,n),YA(t,Dt()),A;if(e===6)is(t,n);else{if(r=t.current.alternate,!(n&30)&&!NQ(r)&&(e=Lu(t,n),e===2&&(s=tg(t),s!==0&&(n=s,e=Qg(t,s))),e===1))throw A=hl,Ai(t,0),is(t,n),YA(t,Dt()),A;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(se(345));case 2:Gs(t,WA,Fr);break;case 3:if(is(t,n),(n&130023424)===n&&(e=pm+500-Dt(),10<e)){if(wu(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){QA(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=lg(Gs.bind(null,t,WA,Fr),e);break}Gs(t,WA,Fr);break;case 4:if(is(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var i=31-Xn(n);s=1<<i,i=e[i],i>r&&(r=i),n&=~s}if(n=r,n=Dt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*TQ(n/1960))-n,10<n){t.timeoutHandle=lg(Gs.bind(null,t,WA,Fr),n);break}Gs(t,WA,Fr);break;case 5:Gs(t,WA,Fr);break;default:throw Error(se(329))}}}return YA(t,Dt()),t.callbackNode===A?Px.bind(null,t):null}function Qg(t,e){var A=Ra;return t.current.memoizedState.isDehydrated&&(Ai(t,e).flags|=256),t=Lu(t,e),t!==2&&(e=WA,WA=A,e!==null&&Ug(e)),t}function Ug(t){WA===null?WA=t:WA.push.apply(WA,t)}function NQ(t){for(var e=t;;){if(e.flags&16384){var A=e.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var n=0;n<A.length;n++){var r=A[n],s=r.getSnapshot;r=r.value;try{if(!Zn(s(),r))return!1}catch{return!1}}}if(A=e.child,e.subtreeFlags&16384&&A!==null)A.return=e,e=A;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function is(t,e){for(e&=~gm,e&=~Sd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var A=31-Xn(e),n=1<<A;t[A]=-1,e&=~n}}function ly(t){if(et&6)throw Error(se(327));ao();var e=wu(t,0);if(!(e&1))return YA(t,Dt()),null;var A=Lu(t,e);if(t.tag!==0&&A===2){var n=tg(t);n!==0&&(e=n,A=Qg(t,n))}if(A===1)throw A=hl,Ai(t,0),is(t,e),YA(t,Dt()),A;if(A===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,WA,Fr),YA(t,Dt()),null}function mm(t,e){var A=et;et|=1;try{return t(e)}finally{et=A,et===0&&(xo=Dt()+500,bd&&Rs())}}function ui(t){us!==null&&us.tag===0&&!(et&6)&&ao();var e=et;et|=1;var A=In.transition,n=it;try{if(In.transition=null,it=1,t)return t()}finally{it=n,In.transition=A,et=e,!(et&6)&&Rs()}}function wm(){an=Zi.current,mt(Zi)}function Ai(t,e){t.finishedWork=null,t.finishedLanes=0;var A=t.timeoutHandle;if(A!==-1&&(t.timeoutHandle=-1,lQ(A)),Mt!==null)for(A=Mt.return;A!==null;){var n=A;switch(qp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&xu();break;case 3:vo(),mt($A),mt(xA),om();break;case 5:im(n);break;case 4:vo();break;case 13:mt(Et);break;case 19:mt(Et);break;case 10:Am(n.type._context);break;case 22:case 23:wm()}A=A.return}if(AA=t,Mt=t=xs(t.current,null),uA=an=e,Vt=0,hl=null,gm=Sd=ci=0,WA=Ra=null,Js!==null){for(e=0;e<Js.length;e++)if(A=Js[e],n=A.interleaved,n!==null){A.interleaved=null;var r=n.next,s=A.pending;if(s!==null){var i=s.next;s.next=r,n.next=i}A.pending=n}Js=null}return t}function Mx(t,e){do{var A=Mt;try{if(tm(),Zc.current=Tu,Su){for(var n=Ft.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Su=!1}if(li=0,qt=zt=Ft=null,La=!1,ul=0,hm.current=null,A===null||A.return===null){Vt=1,hl=e,Mt=null;break}e:{var s=t,i=A.return,a=A,o=e;if(e=uA,a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var l=o,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var B=Y0(i);if(B!==null){B.flags&=-257,J0(B,i,a,s,e),B.mode&1&&X0(s,l,e),e=B,o=l;var h=e.updateQueue;if(h===null){var y=new Set;y.add(o),e.updateQueue=y}else h.add(o);break e}else{if(!(e&1)){X0(s,l,e),ym();break e}o=Error(se(426))}}else if(Bt&&a.mode&1){var C=Y0(i);if(C!==null){!(C.flags&65536)&&(C.flags|=256),J0(C,i,a,s,e),Zp(Co(o,a));break e}}s=o=Co(o,a),Vt!==4&&(Vt=2),Ra===null?Ra=[s]:Ra.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=xx(s,o,e);j0(s,p);break e;case 1:a=o;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(vs===null||!vs.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=Ex(s,a,e);j0(s,E);break e}}s=s.return}while(s!==null)}jx(A)}catch(S){e=S,Mt===A&&A!==null&&(Mt=A=A.return);continue}break}while(!0)}function Ox(){var t=Nu.current;return Nu.current=Tu,t===null?Tu:t}function ym(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),AA===null||!(ci&268435455)&&!(Sd&268435455)||is(AA,uA)}function Lu(t,e){var A=et;et|=2;var n=Ox();(AA!==t||uA!==e)&&(Fr=null,Ai(t,e));do try{kQ();break}catch(r){Mx(t,r)}while(!0);if(tm(),et=A,Nu.current=n,Mt!==null)throw Error(se(261));return AA=null,uA=0,Vt}function kQ(){for(;Mt!==null;)Kx(Mt)}function DQ(){for(;Mt!==null&&!iI();)Kx(Mt)}function Kx(t){var e=zx(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?jx(t):Mt=e,hm.current=null}function jx(t){var e=t;do{var A=e.alternate;if(t=e.return,e.flags&32768){if(A=IQ(A,e),A!==null){A.flags&=32767,Mt=A;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vt=6,Mt=null;return}}else if(A=bQ(A,e,an),A!==null){Mt=A;return}if(e=e.sibling,e!==null){Mt=e;return}Mt=e=t}while(e!==null);Vt===0&&(Vt=5)}function Gs(t,e,A){var n=it,r=In.transition;try{In.transition=null,it=1,LQ(t,e,A,n)}finally{In.transition=r,it=n}return null}function LQ(t,e,A,n){do ao();while(us!==null);if(et&6)throw Error(se(327));A=t.finishedWork;var r=t.finishedLanes;if(A===null)return null;if(t.finishedWork=null,t.finishedLanes=0,A===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var s=A.lanes|A.childLanes;if(pI(t,s),t===AA&&(Mt=AA=null,uA=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||fc||(fc=!0,Gx(mu,function(){return ao(),null})),s=(A.flags&15990)!==0,A.subtreeFlags&15990||s){s=In.transition,In.transition=null;var i=it;it=1;var a=et;et|=4,hm.current=null,UQ(t,A),Hx(A,t),AQ(og),yu=!!ig,og=ig=null,t.current=A,SQ(A),oI(),et=a,it=i,In.transition=s}else t.current=A;if(fc&&(fc=!1,us=t,Du=r),s=t.pendingLanes,s===0&&(vs=null),cI(A.stateNode),YA(t,Dt()),e!==null)for(n=t.onRecoverableError,A=0;A<e.length;A++)r=e[A],n(r.value,{componentStack:r.stack,digest:r.digest});if(ku)throw ku=!1,t=bg,bg=null,t;return Du&1&&t.tag!==0&&ao(),s=t.pendingLanes,s&1?t===Ig?Pa++:(Pa=0,Ig=t):Pa=0,Rs(),null}function ao(){if(us!==null){var t=xC(Du),e=In.transition,A=it;try{if(In.transition=null,it=16>t?16:t,us===null)var n=!1;else{if(t=us,us=null,Du=0,et&6)throw Error(se(331));var r=et;for(et|=4,fe=t.current;fe!==null;){var s=fe,i=s.child;if(fe.flags&16){var a=s.deletions;if(a!==null){for(var o=0;o<a.length;o++){var l=a[o];for(fe=l;fe!==null;){var u=fe;switch(u.tag){case 0:case 11:case 15:Ha(8,u,s)}var d=u.child;if(d!==null)d.return=u,fe=d;else for(;fe!==null;){u=fe;var f=u.sibling,B=u.return;if(kx(u),u===l){fe=null;break}if(f!==null){f.return=B,fe=f;break}fe=B}}}var h=s.alternate;if(h!==null){var y=h.child;if(y!==null){h.child=null;do{var C=y.sibling;y.sibling=null,y=C}while(y!==null)}}fe=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,fe=i;else e:for(;fe!==null;){if(s=fe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ha(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,fe=p;break e}fe=s.return}}var g=t.current;for(fe=g;fe!==null;){i=fe;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,fe=v;else e:for(i=g;fe!==null;){if(a=fe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ud(9,a)}}catch(S){It(a,a.return,S)}if(a===i){fe=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,fe=E;break e}fe=a.return}}if(et=r,Rs(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Cd,t)}catch{}n=!0}return n}finally{it=A,In.transition=e}}return!1}function cy(t,e,A){e=Co(A,e),e=xx(t,e,1),t=Bs(t,e,1),e=QA(),t!==null&&(Ul(t,1,e),YA(t,e))}function It(t,e,A){if(t.tag===3)cy(t,t,A);else for(;e!==null;){if(e.tag===3){cy(e,t,A);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(vs===null||!vs.has(n))){t=Co(A,t),t=Ex(e,t,1),e=Bs(e,t,1),t=QA(),e!==null&&(Ul(e,1,t),YA(e,t));break}}e=e.return}}function HQ(t,e,A){var n=t.pingCache;n!==null&&n.delete(e),e=QA(),t.pingedLanes|=t.suspendedLanes&A,AA===t&&(uA&A)===A&&(Vt===4||Vt===3&&(uA&130023424)===uA&&500>Dt()-pm?Ai(t,0):gm|=A),YA(t,e)}function Wx(t,e){e===0&&(t.mode&1?(e=nc,nc<<=1,!(nc&130023424)&&(nc=4194304)):e=1);var A=QA();t=Rr(t,e),t!==null&&(Ul(t,e,A),YA(t,A))}function RQ(t){var e=t.memoizedState,A=0;e!==null&&(A=e.retryLane),Wx(t,A)}function PQ(t,e){var A=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(A=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(se(314))}n!==null&&n.delete(e),Wx(t,A)}var zx;zx=function(t,e,A){if(t!==null)if(t.memoizedProps!==e.pendingProps||$A.current)zA=!0;else{if(!(t.lanes&A)&&!(e.flags&128))return zA=!1,_Q(t,e,A);zA=!!(t.flags&131072)}else zA=!1,Bt&&e.flags&1048576&&XC(e,_u,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;tu(t,e),t=e.pendingProps;var r=wo(e,xA.current);oo(e,A),r=lm(null,e,n,t,r,A);var s=cm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,XA(n)?(s=!0,Eu(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,rm(e),r.updater=Qd,e.stateNode=r,r._reactInternals=e,pg(e,n,t,A),e=yg(null,e,n,!0,s,A)):(e.tag=0,Bt&&s&&Jp(e),IA(null,e,r,A),e=e.child),e;case 16:n=e.elementType;e:{switch(tu(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=OQ(n),t=On(n,t),r){case 0:e=wg(null,e,n,t,A);break e;case 1:e=ey(null,e,n,t,A);break e;case 11:e=q0(null,e,n,t,A);break e;case 14:e=Z0(null,e,n,On(n.type,t),A);break e}throw Error(se(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:On(n,r),wg(t,e,n,r,A);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:On(n,r),ey(t,e,n,r,A);case 3:e:{if(Ix(e),t===null)throw Error(se(387));n=e.pendingProps,s=e.memoizedState,r=s.element,tx(t,e),Qu(e,n,null,A);var i=e.memoizedState;if(n=i.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Co(Error(se(423)),e),e=ty(t,e,n,A,r);break e}else if(n!==r){r=Co(Error(se(424)),e),e=ty(t,e,n,A,r);break e}else for(ln=ys(e.stateNode.containerInfo.firstChild),cn=e,Bt=!0,jn=null,A=ZC(e,null,n,A),e.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(yo(),n===r){e=Pr(t,e,A);break e}IA(t,e,n,A)}e=e.child}return e;case 5:return Ax(e),t===null&&fg(e),n=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,i=r.children,ag(n,r)?i=null:s!==null&&ag(n,s)&&(e.flags|=32),bx(t,e),IA(t,e,i,A),e.child;case 6:return t===null&&fg(e),null;case 13:return Qx(t,e,A);case 4:return sm(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Bo(e,null,n,A):IA(t,e,n,A),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:On(n,r),q0(t,e,n,r,A);case 7:return IA(t,e,e.pendingProps,A),e.child;case 8:return IA(t,e,e.pendingProps.children,A),e.child;case 12:return IA(t,e,e.pendingProps.children,A),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,s=e.memoizedProps,i=r.value,ht(bu,n._currentValue),n._currentValue=i,s!==null)if(Zn(s.value,i)){if(s.children===r.children&&!$A.current){e=Pr(t,e,A);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var o=a.firstContext;o!==null;){if(o.context===n){if(s.tag===1){o=Tr(-1,A&-A),o.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?o.next=o:(o.next=u.next,u.next=o),l.pending=o}}s.lanes|=A,o=s.alternate,o!==null&&(o.lanes|=A),hg(s.return,A,e),a.lanes|=A;break}o=o.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(se(341));i.lanes|=A,a=i.alternate,a!==null&&(a.lanes|=A),hg(i,A,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}IA(t,e,r.children,A),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,oo(e,A),r=Qn(r),n=n(r),e.flags|=1,IA(t,e,n,A),e.child;case 14:return n=e.type,r=On(n,e.pendingProps),r=On(n.type,r),Z0(t,e,n,r,A);case 15:return Fx(t,e,e.type,e.pendingProps,A);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:On(n,r),tu(t,e),e.tag=1,XA(n)?(t=!0,Eu(e)):t=!1,oo(e,A),Cx(e,n,r),pg(e,n,r,A),yg(null,e,n,!0,t,A);case 19:return Ux(t,e,A);case 22:return _x(t,e,A)}throw Error(se(156,e.tag))};function Gx(t,e){return yC(t,e)}function MQ(t,e,A,n){this.tag=t,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,e,A,n){return new MQ(t,e,A,n)}function Bm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OQ(t){if(typeof t=="function")return Bm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pp)return 11;if(t===Mp)return 14}return 2}function xs(t,e){var A=t.alternate;return A===null?(A=xn(t.tag,e,t.key,t.mode),A.elementType=t.elementType,A.type=t.type,A.stateNode=t.stateNode,A.alternate=t,t.alternate=A):(A.pendingProps=e,A.type=t.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=t.flags&14680064,A.childLanes=t.childLanes,A.lanes=t.lanes,A.child=t.child,A.memoizedProps=t.memoizedProps,A.memoizedState=t.memoizedState,A.updateQueue=t.updateQueue,e=t.dependencies,A.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},A.sibling=t.sibling,A.index=t.index,A.ref=t.ref,A}function ru(t,e,A,n,r,s){var i=2;if(n=t,typeof t=="function")Bm(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case ji:return ni(A.children,r,s,e);case Rp:i=8,r|=8;break;case Mh:return t=xn(12,A,e,r|2),t.elementType=Mh,t.lanes=s,t;case Oh:return t=xn(13,A,e,r),t.elementType=Oh,t.lanes=s,t;case Kh:return t=xn(19,A,e,r),t.elementType=Kh,t.lanes=s,t;case AC:return Td(A,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eC:i=10;break e;case tC:i=9;break e;case Pp:i=11;break e;case Mp:i=14;break e;case ts:i=16,n=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=xn(i,A,e,r),e.elementType=t,e.type=n,e.lanes=s,e}function ni(t,e,A,n){return t=xn(7,t,n,e),t.lanes=A,t}function Td(t,e,A,n){return t=xn(22,t,n,e),t.elementType=AC,t.lanes=A,t.stateNode={isHidden:!1},t}function $f(t,e,A){return t=xn(6,t,null,e),t.lanes=A,t}function Xf(t,e,A){return e=xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=A,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KQ(t,e,A,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qf(0),this.expirationTimes=Qf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qf(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function vm(t,e,A,n,r,s,i,a,o){return t=new KQ(t,e,A,a,o),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},rm(s),t}function jQ(t,e,A){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ki,key:n==null?null:""+n,children:t,containerInfo:e,implementation:A}}function Vx(t){if(!t)return Ss;t=t._reactInternals;e:{if(Bi(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(XA(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var A=t.type;if(XA(A))return VC(t,A,e)}return e}function $x(t,e,A,n,r,s,i,a,o){return t=vm(A,n,!0,t,r,s,i,a,o),t.context=Vx(null),A=t.current,n=QA(),r=Cs(A),s=Tr(n,r),s.callback=e??null,Bs(A,s,r),t.current.lanes=r,Ul(t,r,n),YA(t,n),t}function Nd(t,e,A,n){var r=e.current,s=QA(),i=Cs(r);return A=Vx(A),e.context===null?e.context=A:e.pendingContext=A,e=Tr(s,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Bs(r,e,i),t!==null&&(Yn(t,r,i,s),qc(t,r,i)),i}function Hu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var A=t.retryLane;t.retryLane=A!==0&&A<e?A:e}}function Cm(t,e){uy(t,e),(t=t.alternate)&&uy(t,e)}function WQ(){return null}var Xx=typeof reportError=="function"?reportError:function(t){console.error(t)};function xm(t){this._internalRoot=t}kd.prototype.render=xm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));Nd(t,e,null,null)};kd.prototype.unmount=xm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ui(function(){Nd(null,t,null,null)}),e[Hr]=null}};function kd(t){this._internalRoot=t}kd.prototype.unstable_scheduleHydration=function(t){if(t){var e=_C();t={blockedOn:null,target:t,priority:e};for(var A=0;A<ss.length&&e!==0&&e<ss[A].priority;A++);ss.splice(A,0,t),A===0&&IC(t)}};function Em(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dy(){}function zQ(t,e,A,n,r){if(r){if(typeof n=="function"){var s=n;n=function(){var l=Hu(i);s.call(l)}}var i=$x(e,n,t,0,null,!1,!1,"",dy);return t._reactRootContainer=i,t[Hr]=i.current,il(t.nodeType===8?t.parentNode:t),ui(),i}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var a=n;n=function(){var l=Hu(o);a.call(l)}}var o=vm(t,0,!1,null,null,!1,!1,"",dy);return t._reactRootContainer=o,t[Hr]=o.current,il(t.nodeType===8?t.parentNode:t),ui(function(){Nd(e,o,A,n)}),o}function Ld(t,e,A,n,r){var s=A._reactRootContainer;if(s){var i=s;if(typeof r=="function"){var a=r;r=function(){var o=Hu(i);a.call(o)}}Nd(e,i,t,r)}else i=zQ(A,e,t,r,n);return Hu(i)}EC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var A=va(e.pendingLanes);A!==0&&(jp(e,A|1),YA(e,Dt()),!(et&6)&&(xo=Dt()+500,Rs()))}break;case 13:ui(function(){var n=Rr(t,1);if(n!==null){var r=QA();Yn(n,t,1,r)}}),Cm(t,1)}};Wp=function(t){if(t.tag===13){var e=Rr(t,134217728);if(e!==null){var A=QA();Yn(e,t,134217728,A)}Cm(t,134217728)}};FC=function(t){if(t.tag===13){var e=Cs(t),A=Rr(t,e);if(A!==null){var n=QA();Yn(A,t,e,n)}Cm(t,e)}};_C=function(){return it};bC=function(t,e){var A=it;try{return it=t,e()}finally{it=A}};qh=function(t,e,A){switch(e){case"input":if(zh(t,A),e=A.name,A.type==="radio"&&e!=null){for(A=t;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<A.length;e++){var n=A[e];if(n!==t&&n.form===t.form){var r=_d(n);if(!r)throw Error(se(90));rC(n),zh(n,r)}}}break;case"textarea":iC(t,A);break;case"select":e=A.value,e!=null&&no(t,!!A.multiple,e,!1)}};fC=mm;hC=ui;var GQ={usingClientEntryPoint:!1,Events:[Tl,Vi,_d,uC,dC,mm]},aa={findFiberByHostInstance:Ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VQ={bundleType:aa.bundleType,version:aa.version,rendererPackageName:aa.rendererPackageName,rendererConfig:aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mC(t),t===null?null:t.stateNode},findFiberByHostInstance:aa.findFiberByHostInstance||WQ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{Cd=hc.inject(VQ),cr=hc}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GQ;fn.createPortal=function(t,e){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Em(e))throw Error(se(200));return jQ(t,e,null,A)};fn.createRoot=function(t,e){if(!Em(t))throw Error(se(299));var A=!1,n="",r=Xx;return e!=null&&(e.unstable_strictMode===!0&&(A=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=vm(t,1,!1,null,null,A,!1,n,r),t[Hr]=e.current,il(t.nodeType===8?t.parentNode:t),new xm(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=mC(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return ui(t)};fn.hydrate=function(t,e,A){if(!Dd(e))throw Error(se(200));return Ld(null,t,e,!0,A)};fn.hydrateRoot=function(t,e,A){if(!Em(t))throw Error(se(405));var n=A!=null&&A.hydratedSources||null,r=!1,s="",i=Xx;if(A!=null&&(A.unstable_strictMode===!0&&(r=!0),A.identifierPrefix!==void 0&&(s=A.identifierPrefix),A.onRecoverableError!==void 0&&(i=A.onRecoverableError)),e=$x(e,null,t,1,A??null,r,!1,s,i),t[Hr]=e.current,il(t),n)for(t=0;t<n.length;t++)A=n[t],r=A._getVersion,r=r(A._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[A,r]:e.mutableSourceEagerHydrationData.push(A,r);return new kd(e)};fn.render=function(t,e,A){if(!Dd(e))throw Error(se(200));return Ld(null,t,e,!1,A)};fn.unmountComponentAtNode=function(t){if(!Dd(t))throw Error(se(40));return t._reactRootContainer?(ui(function(){Ld(null,null,t,!1,function(){t._reactRootContainer=null,t[Hr]=null})}),!0):!1};fn.unstable_batchedUpdates=mm;fn.unstable_renderSubtreeIntoContainer=function(t,e,A,n){if(!Dd(A))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return Ld(t,e,A,!1,n)};fn.version="18.3.1-next-f1338f8080-20240426";function Yx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yx)}catch(t){console.error(t)}}Yx(),Yv.exports=fn;var Ps=Yv.exports,fy=Ps;Rh.createRoot=fy.createRoot,Rh.hydrateRoot=fy.hydrateRoot;const $Q="modulepreload",XQ=function(t){return"/refboard/"+t},hy={},or=function(e,A,n){let r=Promise.resolve();if(A&&A.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.allSettled(A.map(o=>{if(o=XQ(o),o in hy)return;hy[o]=!0;const l=o.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":$Q,l||(d.as="script"),d.crossOrigin="",d.href=o,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((f,B)=>{d.addEventListener("load",f),d.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${o}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return r.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},YQ=x.forwardRef(({connections:t,getItemPosition:e,tempConnection:A,onConnectionContextMenu:n,items:r,activeGenerationNodeIds:s=[],hoveredSocket:i},a)=>{const o=x.useRef({}),l=(h,y,C,p,g,v)=>{const E=Math.abs(C-h)*.5,S=Math.max(E,50);let U=1;g&&(g.includes("input")||g.includes("Input"))&&(U=-1);let b=U===-1?1:-1;v&&(v.includes("output")||v.includes("Output")||v==="text-output"||v==="image-output"?b=1:(v.includes("input")||v.includes("Input")||v==="text-input"||v==="image-input")&&(b=-1));const L=h+S*U,N=y,I=C+S*b;return`M ${h} ${y} C ${L} ${N}, ${I} ${p}, ${C} ${p} `},u=h=>{if(o.current[h]){const y=r.find(C=>C.id===h);return y?{...y,x:o.current[h].x,y:o.current[h].y}:{x:o.current[h].x,y:o.current[h].y,width:200,height:200,type:"unknown"}}return r.find(y=>y.id===h)},d=(h,y)=>{const C=u(h);if(!C)return null;const p=24;if(C.type==="generation_node"){if(y==="output"||y==="image-output")return{x:C.x+C.width+p,y:C.y+40};if(y==="text-input")return{x:C.x-p,y:C.y+C.height-40};if(y==="image-input")return{x:C.x-p,y:C.y+C.height-88}}else if(C.type==="prompt_node"&&(y==="output"||y==="text-output"))return{x:C.x+C.width+p,y:C.y+40};return y==="output"||y==="image-output"?{x:C.x+C.width+32,y:C.y+32}:y==="image-input"?{x:C.x-32,y:C.y+32}:y&&y.startsWith("input")?{x:C.x-p,y:C.y+C.height/2}:{x:C.x,y:C.y}};x.useImperativeHandle(a,()=>({updateTracker:(h,y,C)=>{o.current[h]={x:y,y:C},t.filter(g=>g.fromNodeId===h||g.toNodeId===h).forEach(g=>{const v=d(g.fromNodeId,g.fromSocketId),E=d(g.toNodeId,g.toSocketId);if(v&&E){const S=l(v.x,v.y,E.x,E.y,g.fromSocketId,g.toSocketId),U=document.getElementById(`conn-path-${g.id}`);U&&U.setAttribute("d",S);const b=document.getElementById(`conn-bg-${g.id}`);b&&b.setAttribute("d",S);const L=document.getElementById(`conn-flow-${g.id}`);L&&L.setAttribute("d",S)}})},removeTracker:h=>{delete o.current[h]}}));const f=(h,y,C)=>{if(y==="image-output"&&h==="image-input"){const p=r.find(g=>g.id===C);return(p==null?void 0:p.type)==="generation_node"?"#6366f1":"#eab308"}return h==="text-input"||h==="text-output"?"#10b981":h==="image-input"||h==="image-output"?"#6366f1":"#60a5fa"},B=(h,y,C,p,g,v=!1,E,S=!1,U,b)=>{const L=l(h,y,C,p,U,E),N=v?"#3b82f6":f(E,U,b);return c.jsxs("g",{children:[!v&&c.jsx("path",{id:`conn-bg-${g}`,d:L,stroke:"transparent",fill:"none",style:{strokeWidth:"calc(15px / var(--canvas-scale, 1))",pointerEvents:"stroke",cursor:"context-menu"},onContextMenu:I=>{n&&(I.preventDefault(),I.stopPropagation(),n(g,I))}}),c.jsx("path",{id:`conn-path-${g}`,d:L,stroke:N,strokeDasharray:v?"5,5":"none",fill:"none",style:{strokeWidth:v?"calc(2px / var(--canvas-scale, 1))":"calc(3px / var(--canvas-scale, 1))",pointerEvents:"none",opacity:S?.3:1}}),S&&c.jsx(c.Fragment,{children:[0,1,2].map(I=>{const q=g.split("").reduce((z,Ae)=>z+Ae.charCodeAt(0),0)+I*999,O=1+q%150/100,H=-(q*17%300)/100,G=40+q%30,Z=150+q%50,V=600+q%200,W=G+V;return c.jsxs(cA.Fragment,{children:[c.jsx("path",{d:L,stroke:"url(#conn-led-gradient)",strokeWidth:6,fill:"none",strokeDasharray:`${Z} ${V}`,strokeLinecap:"round",style:{opacity:.6,pointerEvents:"none",filter:"blur(4px)"},children:c.jsx("animate",{attributeName:"stroke-dashoffset",from:W,to:"0",dur:`${O}s`,begin:`${H}s`,repeatCount:"indefinite"})}),c.jsx("path",{d:L,stroke:"#ffffff",strokeWidth:3,fill:"none",strokeDasharray:`${G} ${V}`,strokeLinecap:"round",style:{opacity:1,pointerEvents:"none",filter:"drop-shadow(0 0 2px white)"},children:c.jsx("animate",{attributeName:"stroke-dashoffset",from:W,to:"0",dur:`${O}s`,begin:`${H}s`,repeatCount:"indefinite"})})]},I)})})]},g)};return c.jsxs("svg",{className:"absolute inset-0 pointer-events-none",style:{width:"100%",height:"100%",zIndex:15,overflow:"visible"},children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"conn-led-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:"#10b981"}),c.jsx("stop",{offset:"50%",stopColor:"#06b6d4"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1"})]})}),t.map(h=>{const y=d(h.fromNodeId,h.fromSocketId),C=d(h.toNodeId,h.toSocketId),p=s.includes(h.toNodeId);return y&&C?B(y.x,y.y,C.x,C.y,h.id,!1,h.toSocketId,p,h.fromSocketId,h.toNodeId):null}),A&&(()=>{const h=d(A.fromNodeId,A.fromSocketId);let y=A.toPoint.x,C=A.toPoint.y,p,g="#3b82f6";if(i){const v=d(i.nodeId,i.socketId);if(v){y=v.x,C=v.y,p=i.socketId;const E=A.fromSocketId,S=i.socketId;let U=!1;(E==="text-output"&&S==="text-input"||E==="image-output"&&S==="image-input")&&(U=!0),A.fromNodeId===i.nodeId&&(U=!1),g=U?"#22c55e":"#ef4444"}}if(h){const v=l(h.x,h.y,y,C,A.fromSocketId,p);return c.jsx("g",{children:c.jsx("path",{d:v,stroke:g,strokeDasharray:"5,5",fill:"none",style:{strokeWidth:"calc(3px / var(--canvas-scale, 1))",pointerEvents:"none"}})},"temp")}return null})()]})}),JQ=cA.memo(YQ,(t,e)=>{var r,s,i,a,o,l;const A=Array.isArray(t.connections)?t.connections:[],n=Array.isArray(e.connections)?e.connections:[];return!(A.length!==n.length||A.some((u,d)=>{var f;return u.id!==((f=n[d])==null?void 0:f.id)})||t.items.length!==e.items.length||t.items!==e.items||((r=t.tempConnection)==null?void 0:r.fromNodeId)!==((s=e.tempConnection)==null?void 0:s.fromNodeId)||((i=t.tempConnection)==null?void 0:i.toPoint.x)!==((a=e.tempConnection)==null?void 0:a.toPoint.x)||((o=t.tempConnection)==null?void 0:o.toPoint.y)!==((l=e.tempConnection)==null?void 0:l.toPoint.y)||t.hoveredSocket!==e.hoveredSocket||JSON.stringify(t.activeGenerationNodeIds)!==JSON.stringify(e.activeGenerationNodeIds))}),qQ=x.forwardRef(({arrows:t,items:e,onArrowSelect:A,selectedArrowIds:n},r)=>{const s=x.useRef({}),i=o=>{if(s.current[o]){const l=e.find(u=>u.id===o);return l?{...l,x:s.current[o].x,y:s.current[o].y}:{x:s.current[o].x,y:s.current[o].y,width:100,height:100}}return e.find(l=>l.id===o)},a=(o,l)=>{if(!o||!l)return"";const u=o.x+o.width,d=o.y+o.height/2,f=l.x,B=l.y+l.height/2,h=Math.abs(f-u),y=Math.max(h*.5,50),C=u+y,p=d,g=f-y;return`M ${u} ${d} C ${C} ${p}, ${g} ${B}, ${f} ${B}`};return x.useImperativeHandle(r,()=>({updateTracker:(o,l,u)=>{s.current[o]={x:l,y:u},t.filter(f=>f.sourceId===o||f.targetId===o).forEach(f=>{const B=i(f.sourceId),h=i(f.targetId),y=a(B,h);if(y){const C=document.getElementById(`arrow-visible-${f.id}`),p=document.getElementById(`arrow-clickable-${f.id}`);C&&C.setAttribute("d",y),p&&p.setAttribute("d",y)}})}})),c.jsxs("svg",{className:"absolute inset-0 pointer-events-auto",style:{width:"100%",height:"100%",zIndex:10,overflow:"visible"},children:[c.jsx("defs",{children:t.map(o=>c.jsx("marker",{id:`arrowhead-${o.id}`,markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:c.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:o.color})},`marker-${o.id}`))}),t.map(o=>{const l=i(o.sourceId),u=i(o.targetId),d=a(l,u),f=n.includes(o.id),B=o.strokeWidth||2;return d?c.jsxs("g",{children:[c.jsx("path",{id:`arrow-clickable-${o.id}`,d,stroke:"transparent",strokeWidth:"12",fill:"none",onClick:h=>{h.stopPropagation(),A(o.id)},style:{cursor:"pointer",pointerEvents:"stroke"}}),c.jsx("path",{id:`arrow-visible-${o.id}`,d,stroke:f?"#60a5fa":o.color,strokeWidth:f?B+1:B,fill:"none",markerEnd:`url(#arrowhead-${o.id})`,style:{pointerEvents:"none"}})]},o.id):null})]})}),ZQ=cA.memo(qQ,(t,e)=>t.arrows===e.arrows&&t.items===e.items&&t.selectedArrowIds===e.selectedArrowIds),Fm=x.createContext({scale:1,position:{x:0,y:0},isSelecting:!1,scaleRef:{current:1},positionRef:{current:{x:0,y:0}}}),eU=()=>x.useContext(Fm);let gy=null;function tU(){if(!document.getElementById("gis-script")){const t=document.createElement("script");t.id="gis-script",t.src="https://accounts.google.com/gsi/client",t.async=!0,t.defer=!0,document.head.appendChild(t)}}async function Sg(t){return new Promise((e,A)=>{const n=setInterval(()=>{var r,s;(s=(r=window.google)==null?void 0:r.accounts)!=null&&s.oauth2&&(clearInterval(n),window.electronAPI?(gy=window.google.accounts.oauth2.initCodeClient({client_id:t,scope:"https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/cloud-platform",ux_mode:"popup",callback:async i=>{var a;if(i.error){console.error("GIS auth error:",i),A(new Error(i.error));return}if(i.code){console.log("Got auth code, exchanging via Electron...");try{const o=await window.electronAPI.exchangeGoogleAuthCode(i.code);if(o.success&&((a=o.tokens)!=null&&a.access_token)){const l=o.tokens.access_token;sessionStorage.setItem("google_access_token",l),console.log(" Offline Access setup complete. Token cached (session)."),e(l)}else console.error("Token exchange failed:",o.error),A(new Error(o.error||"Exchange failed"))}catch(o){console.error("Electron IPC error:",o),A(o)}}}}),gy.requestCode()):window.google.accounts.oauth2.initTokenClient({client_id:t,scope:"https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/cloud-platform",callback:a=>{if(a.error){console.error("GIS auth error (Web):",a),A(new Error(a.error));return}a.access_token&&(sessionStorage.setItem("google_access_token",a.access_token),console.log(" Web Access setup complete. Token cached (session)."),e(a.access_token))}}).requestAccessToken())},100);setTimeout(()=>{clearInterval(n),A(new Error("GIS init timeout"))},1e4)})}async function Tg(t,e=!1){if(window.electronAPI)try{console.log("Requesting fresh token from Electron...");const A=await window.electronAPI.getGoogleAccessToken();if(A.success&&A.token)return sessionStorage.setItem("google_access_token",A.token),console.log(" Token refreshed via Electron"),!0;if(console.warn("Background refresh failed:",A.error),e){console.log("Attempting interactive re-login...");try{return await Sg(t),!0}catch{return!1}}return!1}catch(A){return console.error("Electron refresh error:",A),!1}else{if(e)try{return await Sg(t),!0}catch{return!1}return!1}}const Ru=Object.freeze(Object.defineProperty({__proto__:null,initGoogleIdentityServices:tU,refreshDriveAccessToken:Tg,requestDriveAccess:Sg},Symbol.toStringTag,{value:"Module"})),py="RefBoard",gl="application/vnd.google-apps.folder",_m="application/json",my="145147670860-l0bu8h9lvmf1gjqd09q66g4jbb4i69q2.apps.googleusercontent.com";function Nr(){return sessionStorage.getItem("google_access_token")}async function Ts(t,e={},A=0){let n=Nr();!n&&A===0&&await Tg(my,!1)&&(n=Nr());const r=new Headers(e.headers||{});n&&(r.has("Authorization")||r.set("Authorization",`Bearer ${n}`));const s={...e,headers:r},i=await fetch(t,s);if((i.status===401||i.status===403)&&A<1){if(console.log(`Drive API ${i.status}, attempting interactive refresh...`),await Tg(my,!0)){const o=Nr();if(o)return r.set("Authorization",`Bearer ${o}`),Ts(t,{...e,headers:r},A+1)}i.status===401&&(sessionStorage.removeItem("google_access_token"),window.dispatchEvent(new Event("google_auth_error")))}return i}async function Ot(t,e={}){const A=await Ts(`https://www.googleapis.com/drive/v3/${t}`,{...e,headers:{"Content-Type":"application/json",...e.headers}});if(!A.ok){const n=await A.text().catch(()=>"");throw new Error(`Drive API error (${A.status}): ${A.statusText} ${n}`)}return A.status===204?null:A.json()}async function Hd(){const t=`name='${py}' and mimeType='${gl}' and trashed=false`,e=await Ot(`files?q=${encodeURIComponent(t)}&fields=files(id,name)`);return e.files&&e.files.length>0?e.files[0].id:(await Ot("files",{method:"POST",body:JSON.stringify({name:py,mimeType:gl})})).id}async function Ng(t,e,A,n){const r=await Hd(),s={name:e,mimeType:_m,parents:A?void 0:[r]};n&&(s.contentHints={thumbnail:{image:n.replace(/^data:image\/(png|jpeg|jpg);base64,/,""),mimeType:"image/png"}});const i="-------314159265358979323846",a=`\r
--${i}\r
`,o=`\r
--${i}--`,l=a+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(s)+a+`Content-Type: application/json\r
\r
`+JSON.stringify(t)+o;if(!Nr())throw new Error("No access token");const d=A?`https://www.googleapis.com/upload/drive/v3/files/${A}?uploadType=multipart`:"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",f=await Ts(d,{method:A?"PATCH":"POST",headers:{"Content-Type":`multipart/related; boundary=${i}`},body:l});if(!f.ok)throw new Error(`Failed to save: ${f.statusText}`);const B=await f.json();if(!A)try{await vi(B.id,e),console.log(`Created images folder for new board: ${e}`)}catch(h){console.warn("Failed to create images folder:",h)}return B.id}async function Jx(t){if(!Nr())throw new Error("No access token");const A=await Ts(`https://www.googleapis.com/drive/v3/files/${t}?alt=media`);if(!A.ok)throw new Error(`Failed to load: ${A.statusText}`);return A.json()}async function qx(){const t=await Hd();return bm(t,`mimeType='${_m}'`)}async function bm(t,e=""){let A=`'${t}' in parents and trashed=false`;return e&&(A+=` and ${e}`),((await Ot(`files?q=${encodeURIComponent(A)}&fields=files(id,name,modifiedTime,thumbnailLink,size)&orderBy=modifiedTime desc`)).files||[]).map(r=>({...r,thumbnail:r.thumbnailLink}))}async function Zx(t){await Ot(`files/${t}`,{method:"DELETE"});try{const e=await Hd(),n=`name='${`${t}_images`}' and mimeType='${gl}' and '${e}' in parents and trashed=false`,r=await Ot(`files?q=${encodeURIComponent(n)}&fields=files(id,name)`);if(r.files&&r.files.length>0){const s=r.files[0].id;await Ot(`files/${s}`,{method:"DELETE"}),console.log(`Deleted images folder for board ${t}`)}}catch(e){console.warn("Failed to delete images folder:",e)}}async function Pu(t,e,A){try{if(await Ot(`files/${t}`,{method:"DELETE"}),console.log("Image deleted from Drive:",t),e)try{const n=await vi(e,A),r=A?`${A}_images`:`${e}_images`;await AU(n,r)}catch(n){console.warn("Failed to check/delete empty images folder:",n)}}catch(n){throw console.error("Failed to delete image from Drive:",n),n}}async function Im(t,e,A){const n={type:"user",role:A,emailAddress:e};await Ot(`files/${t}/permissions?sendNotificationEmail=true`,{method:"POST",body:JSON.stringify(n)})}async function eE(t){return(await Ot(`files/${t}/permissions?fields=permissions(id,emailAddress,displayName,role,type)`)).permissions||[]}async function tE(t,e){await Ot(`files/${t}/permissions/${e}`,{method:"DELETE"})}async function AE(){const t=`sharedWithMe=true and mimeType='${_m}' and trashed=false`;return((await Ot(`files?q=${encodeURIComponent(t)}&fields=files(id,name,modifiedTime,thumbnailLink,owners(displayName,emailAddress))&orderBy=modifiedTime desc`)).files||[]).map(A=>({...A,thumbnail:A.thumbnailLink}))}async function AU(t,e){try{const A=`'${t}' in parents and trashed=false`,n=await Ot(`files?q=${encodeURIComponent(A)}&fields=files(id)&pageSize=1`),r=n.files?n.files.length:0;r===0?(await Ot(`files/${t}`,{method:"DELETE"}),console.log(`Deleted empty folder: ${e}`)):console.log(`Folder "${e}" is not empty (${r} files), keeping it`)}catch(A){console.error(`Failed to check/delete folder "${e}":`,A)}}async function vi(t,e){const A=await Hd();console.log("[getOrCreateBoardImagesFolder] boardId:",t,"boardName:",e);const n=e?`${e}_images`:`${t}_images`;console.log("[getOrCreateBoardImagesFolder] Creating/Finding folder:",n);const r=`name='${n.replace(/'/g,"\\'")}' and mimeType='${gl}' and '${A}' in parents and trashed=false`,s=await Ot(`files?q=${encodeURIComponent(r)}&fields=files(id,name)`);if(s.files&&s.files.length>0)return console.log("[getOrCreateBoardImagesFolder] Found existing folder:",s.files[0].name),s.files[0].id;const a=await Ot("files",{method:"POST",body:JSON.stringify({name:n,mimeType:gl,parents:[A]})});return console.log("[getOrCreateBoardImagesFolder] Created new folder:",n),a.id}async function nE(){return vi("default")}async function Mu(t,e){try{const A=`name='${e}' and '${t}' in parents and trashed=false`,n=await Ot(`files?q=${encodeURIComponent(A)}&fields=files(id,name)`);return n.files&&n.files.length>0?n.files[0].id:null}catch(A){return console.error("Failed to find file:",A),null}}async function rE(t,e){const A=e.split(".").pop()||"",n=e.replace(`.${A}`,"");if(!await Mu(t,e))return e;let s=1,i;do{if(i=`${n}_copy${s.toString().padStart(2,"0")}.${A}`,!await Mu(t,i))return i;s++}while(s<1e3);return`${n}_copy${Date.now()}.${A}`}async function kg(t,e,A=!1,n=!1,r,s){var U;const i=r?await vi(r,s):await nE();if(!Nr())throw new Error("No access token");let o=e;A||(o=await rE(i,e));const l=A?await Mu(i,o):null;let u,d;if(t instanceof File){u=t.type||(n?"video/mp4":"image/png");const b=await t.arrayBuffer();d=new Uint8Array(b)}else{if(u="image/png",t.startsWith("data:")){const I=t.match(/data:([^;]+)/);I&&(u=I[1])}else{const I=(U=e.split(".").pop())==null?void 0:U.toLowerCase();I==="jpg"||I==="jpeg"?u="image/jpeg":I==="gif"?u="image/gif":I==="webp"?u="image/webp":I==="mp4"?u="video/mp4":I==="webm"?u="video/webm":I==="mov"&&(u="video/quicktime")}let b;t.startsWith("data:")?b=t.split(",")[1]:b=t;const L=atob(b),N=new Array(L.length);for(let I=0;I<L.length;I++)N[I]=L.charCodeAt(I);d=new Uint8Array(N)}const f="-------314159265358979323846",B=`\r
--${f}\r
`,h=`\r
--${f}--`,y={name:o,mimeType:u};l||(y.parents=[i]);const C=JSON.stringify(y),p=new TextEncoder,g=[];g.push(p.encode(B)),g.push(p.encode(`Content-Type: application/json; charset=UTF-8\r
\r
`)),g.push(p.encode(C)),g.push(p.encode(B)),g.push(p.encode(`Content-Type: ${u}\r
\r
`)),g.push(d),g.push(p.encode(h));let v=0;for(const b of g)v+=b.length;const E=new Uint8Array(v);let S=0;for(const b of g)E.set(b,S),S+=b.length;try{if(l){const b=await Ts(`https://www.googleapis.com/upload/drive/v3/files/${l}?uploadType=multipart`,{method:"PATCH",headers:{"Content-Type":`multipart/related; boundary=${f}`,"Content-Length":v.toString()},body:E});if(!b.ok){const N=await b.text();let I;try{I=JSON.parse(N)}catch{I={message:N}}throw new Error(`Failed to update media: ${JSON.stringify(I)}`)}const L=await b.json();if(!L.id||L.id.trim()==="")throw new Error(`Update succeeded but no file ID returned: ${JSON.stringify(L)}`);console.log("Media updated successfully, file ID:",L.id);try{await Ot(`files/${L.id}/permissions`,{method:"POST",body:JSON.stringify({role:"reader",type:"anyone"})}),console.log("Refreshed public read permission for file:",L.id)}catch(N){console.warn("Note: Failed to refresh permission for file (might already exist):",L.id,N)}return L.id}else{const b=await Ts("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{"Content-Type":`multipart/related; boundary=${f}`,"Content-Length":v.toString()},body:E});if(!b.ok){const N=await b.text();let I;try{I=JSON.parse(N)}catch{I={message:N}}throw new Error(`Failed to upload media: ${JSON.stringify(I)}`)}const L=await b.json();if(!L.id)throw new Error(`Upload succeeded but no file ID returned: ${JSON.stringify(L)}`);console.log("Media uploaded successfully, file ID:",L.id);try{await Ot(`files/${L.id}/permissions`,{method:"POST",body:JSON.stringify({role:"reader",type:"anyone"})}),console.log("Set public read permission for file:",L.id)}catch(N){console.warn("Failed to set public permission for file:",L.id,N)}return L.id}}catch(b){throw console.error("Error uploading/updating media in Drive:",b),b}}async function ns(t,e,A=!1,n,r){var q;const s=n?await vi(n,r):await nE(),i=Nr();if(!i)throw new Error("No access token");let a=e;A||(a=await rE(s,e));const o=A?await Mu(s,a):null;let l="image/png";if(t.startsWith("data:")){const O=t.match(/data:([^;]+)/);O&&(l=O[1])}else{const O=(q=e.split(".").pop())==null?void 0:q.toLowerCase();O==="jpg"||O==="jpeg"?l="image/jpeg":O==="gif"?l="image/gif":O==="webp"&&(l="image/webp")}let u;t.startsWith("data:")?u=t.split(",")[1]:u=t;const d=atob(u),f=new Array(d.length);for(let O=0;O<d.length;O++)f[O]=d.charCodeAt(O);const B=new Uint8Array(f),h="-------314159265358979323846",y=`\r
--${h}\r
`,C=`\r
--${h}--`,p={name:a,mimeType:l};o||(p.parents=[s]);const g=JSON.stringify(p),v=new TextEncoder,E=[];E.push(v.encode(y)),E.push(v.encode(`Content-Type: application/json; charset=UTF-8\r
\r
`)),E.push(v.encode(g)),E.push(v.encode(y)),E.push(v.encode(`Content-Type: ${l}\r
\r
`)),E.push(B),E.push(v.encode(C));let S=0;for(const O of E)S+=O.length;const U=new Uint8Array(S);let b=0;for(const O of E)U.set(O,b),b+=O.length;const L=o?`https://www.googleapis.com/upload/drive/v3/files/${o}?uploadType=multipart`:"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",N=await fetch(L,{method:o?"PATCH":"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":`multipart/related; boundary=${h}`},body:U});if(!N.ok){const O=await N.text();throw new Error(`Failed to ${o?"update":"upload"} image: ${N.statusText} - ${O}`)}const I=await N.json();try{await Ot(`files/${I.id}/permissions`,{method:"POST",body:JSON.stringify({role:"reader",type:"anyone"})}),console.log("Set public read permission for image:",I.id)}catch(O){console.warn("Failed to set public permission for image:",I.id,O)}return I.id}async function xa(t,e,A,n){return ns(t,e,!1,A,n)}async function sE(t,e=!1){if(!Nr())throw new Error("No access token");const n=3;let r;for(let s=0;s<n;s++)try{if(s>0){const l=1e3*Math.pow(2,s-1);await new Promise(u=>setTimeout(u,l))}const i=e?`https://www.googleapis.com/drive/v3/files/${t}?alt=media&t=${Date.now()}`:`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,a=await Ts(i,{headers:{},cache:e?"no-cache":"default"});if(!a.ok){if(a.status>=500&&a.status<600)throw new Error(`Server error ${a.status}`);if(a.status===403)throw new Error(`Media is not accessible (403 Forbidden). File ID: ${t}. Please ask the board owner to share the media files.`);if(a.status===404)throw new Error(`Media file not found (404 Not Found). File ID: ${t}. The file may have been deleted, the ID is incorrect, or you do not have permission to view it.`);const l=await a.text().catch(()=>"Unknown error");throw new Error(`Failed to load media (${a.status}): ${a.statusText}. File ID: ${t}. Error: ${l}`)}const o=await a.blob();return URL.createObjectURL(o)}catch(i){r=i;const a=i.message.includes("Server error")||i.message.includes("500")||i.message.includes("502")||i.message.includes("503");if(s<n-1&&a){console.warn(`Retry ${s+1}/${n} for file ${t} due to: ${i.message}`);continue}throw i}throw r}async function Wn(t,e=!1){if(Nr())try{return await sE(t,e)}catch(r){console.warn(`Authenticated media load failed for ${t}:`,r)}const n=`https://drive.google.com/uc?id=${t}&export=download${e?`&t=${Date.now()}`:""}`;try{const r=await fetch(n,{cache:e?"no-cache":"default"});if(r.ok){const s=await r.blob();return console.log(`Loaded media via public URL: ${t}`),URL.createObjectURL(s)}console.log(`Public URL returned ${r.status} for ${t}`)}catch(r){console.warn(`Public URL fetch failed for ${t}:`,r)}return n}async function iE(t,e,A){await Im(t,e,A)}async function oE(t,e,A){await Promise.all(t.map(n=>iE(n,e,A)))}async function aE(t){let e=0,A=0;const n=5;for(let r=0;r<t.length;r+=n){const s=t.slice(r,r+n);await Promise.all(s.map(async i=>{try{await Ot(`files/${i}/permissions`,{method:"POST",body:JSON.stringify({role:"reader",type:"anyone"})}),e++}catch(a){console.warn(`Failed to fix permission for file ${i}:`,a),A++}}))}return{success:e,failed:A}}const nU=Object.freeze(Object.defineProperty({__proto__:null,authorizedFetch:Ts,deleteBoard:Zx,deleteImageFromDrive:Pu,fixMediaPermissions:aE,getBoardPermissions:eE,getOrCreateBoardImagesFolder:vi,listBoards:qx,listFilesByFolder:bm,listSharedBoards:AE,loadBoardFromDrive:Jx,loadImageFromDrive:Wn,loadMediaFromDrive:sE,removeBoardPermission:tE,saveBoardToDrive:Ng,shareBoard:Im,shareImage:iE,shareImages:oE,uploadImageToDrive:xa,uploadOrUpdateImageInDrive:ns,uploadOrUpdateMediaInDrive:kg},Symbol.toStringTag,{value:"Module"})),rU=x.forwardRef(({items:t,selectedIds:e,onRender:A,onImageDoubleClick:n},r)=>{const s=x.useRef(null),i=x.useRef(new Map),a=x.useRef(new Set),o=x.useRef({}),l=x.useRef(new Set),{positionRef:u,scaleRef:d}=x.useContext(Fm),f=N=>{const I=o.current[N.id];return I?{...N,x:I.x,y:I.y}:N},B=x.useRef(new Set),h=x.useRef(null),y=x.useRef(0),C=x.useRef(!1),p=x.useRef(t);p.current=t;const g=x.useRef(e);g.current=e;const v=N=>{var Z;const I=N,q=I.driveFileId||I.src||I.url;if(!q)return;const O=i.current.get(I.id);if(O&&O.sourceKey===q&&(O.original||O.loading)||B.current.has(I.id))return;O&&(O.loading=!0),B.current.add(I.id);const H=new Image;H.crossOrigin="anonymous";const G=()=>{O&&(O.loading=!1),B.current.delete(I.id)};if(H.onload=()=>{let W=H.naturalWidth,z=H.naturalHeight;const Ae=i.current.get(I.id);if(Ae&&Ae.thumbnail&&Ae.thumbnail!==Ae.original){i.current.set(I.id,{...Ae,original:H,sourceKey:q,lastUsed:Date.now(),loading:!1}),G(),E();return}let j=W,te=z;if(j>512||te>512){const re=Math.min(512/j,512/te);j=Math.floor(j*re),te=Math.floor(te*re)}createImageBitmap(H,{resizeWidth:j,resizeHeight:te,resizeQuality:"high"}).then(re=>{i.current.set(I.id,{thumbnail:re,original:H,sourceKey:q,width:W,height:z,lastUsed:Date.now(),loading:!1}),G(),E()}).catch(re=>{console.warn("Bitmap creation failed, falling back to image",re),i.current.set(I.id,{thumbnail:H,original:H,sourceKey:q,width:W,height:z,lastUsed:Date.now(),loading:!1}),G(),E()})},H.onerror=V=>{console.error("Failed to load image:",I.id,V),G()},I.driveFileId&&(!I.src||I.src===""||I.src.startsWith("blob:"))){if((Z=a.current)!=null&&Z.has(I.driveFileId)){G();return}Wn(I.driveFileId,!1).then(V=>{H.src=V}).catch(()=>{var V;(V=a.current)==null||V.add(I.driveFileId),console.warn(`Failed to load image from Drive (will not retry): ${I.driveFileId}`),G()})}else if(I.src){let V=I.src;V&&!V.startsWith("http")&&!V.startsWith("data:")&&!V.startsWith("file:")&&!V.startsWith("blob:")&&/^[a-zA-Z]:/.test(V)&&(V=`file:///${V.replace(/\\/g,"/")}`),H.src=V}else G()};x.useEffect(()=>{t.forEach(N=>{(N.type==="image"||N.type==="ad")&&v(N)})},[t]),x.useEffect(()=>{const N=setInterval(()=>{const I=Date.now();i.current.forEach(q=>{q.original&&I-(q.lastUsed||0)>5e3&&(q.original=null)})},2e3);return()=>clearInterval(N)},[]);const E=()=>{const N=s.current;if(!N)return;const I=N.getContext("2d");if(!I)return;const q=performance.now();if(q-y.current<5)return;y.current=q;const O=window.devicePixelRatio||1,H=N.getBoundingClientRect();(N.width!==H.width*O||N.height!==H.height*O)&&(N.width=H.width*O,N.height=H.height*O),I.setTransform(1,0,0,1,0,0),I.clearRect(0,0,N.width,N.height),I.scale(O,O),I.save();const G=u.current,Z=d.current;I.translate(G.x,G.y),I.scale(Z,Z);const V=-G.x/Z,W=-G.y/Z,z=(N.width/O-G.x)/Z,Ae=(N.height/O-G.y)/Z,j=Z>=.2,te=g.current;[...p.current].map(ee=>f(ee)).filter(ee=>{if(l.current.has(ee.id))return!1;if(o.current[ee.id],j&&ee.type!=="ad"){const ue=Math.max(ee.width,ee.height),ge=ee.x+ee.width,we=ee.y+ee.height;if(ge+ue<V||ee.x-ue>z||we+ue<W||ee.y-ue>Ae)return!1}return!0}).sort((ee,ue)=>{const ge=e.includes(ee.id),we=e.includes(ue.id);if(ge&&!we)return 1;if(!ge&&we)return-1;const xe=(ee.zIndex||0)-(ue.zIndex||0);return xe!==0?xe:ee.id.localeCompare(ue.id)}).forEach(ee=>{I.save();const ue=ee.x+ee.width/2,ge=ee.y+ee.height/2;if(I.translate(ue,ge),ee.type==="image"||ee.type==="ad"||ee.type==="video"){const we=ee;we.rotation&&I.rotate(we.rotation*Math.PI/180),(we.flipHorizontal||we.flipVertical)&&I.scale(we.flipHorizontal?-1:1,we.flipVertical?-1:1)}if(I.translate(-ee.width/2,-ee.height/2),(ee.type==="image"||ee.type==="ad")&&(ee.driveFileId?`drive:${ee.driveFileId}`:ee.src)&&!i.current.has(ee.id)&&v(ee),ee.type==="ad"){I.restore(),I.save();const we=Math.max(1e-4,d.current);I.translate(ee.x,ee.y),I.scale(1/we,1/we);const xe=ee.width,Re=ee.height;I.shadowColor="rgba(0,0,0,0.3)",I.shadowBlur=10,I.shadowOffsetY=5,I.fillStyle="#ffffff",I.fillRect(0,0,xe,Re),I.shadowColor="transparent",I.lineWidth=4,I.strokeStyle="#facc15",I.strokeRect(0,0,xe,Re),I.fillStyle="#eab308",I.beginPath(),I.moveTo(xe,0),I.lineTo(xe,20),I.lineTo(xe-25,20),I.lineTo(xe-25,0),I.fill(),I.fillStyle="#000000",I.font="bold 10px Inter, sans-serif",I.fillText("AD",xe-18,13);const qe=i.current.get(ee.id);let Ne=!1;if(qe){let ct=qe.thumbnail;ee.width>512&&qe.original&&(ct=qe.original),(ct instanceof ImageBitmap||ct instanceof HTMLImageElement&&ct.complete)&&(I.drawImage(ct,0,0,xe,Re),Ne=!0)}Ne||(I.fillStyle="#9ca3af",I.font="bold 14px Inter, sans-serif",I.textAlign="center",I.fillText("AD SPACE",xe/2,Re/2-5),I.fillStyle="#d1d5db",I.font="10px Inter, sans-serif",I.fillText("Waiting for content...",xe/2,Re/2+10),I.textAlign="left")}else if(ee.type==="image"){if(!te.includes(ee.id)){const xe=i.current.get(ee.id);if(xe){const Re=ee.width>512||ee.height>512;let qe=xe.thumbnail;if(Re){const Ne=xe;Ne.original?(qe=Ne.original,Ne.lastUsed=Date.now()):v(ee)}(qe instanceof ImageBitmap||qe instanceof HTMLImageElement&&qe.complete)&&I.drawImage(qe,0,0,ee.width,ee.height)}else I.fillStyle="#333",I.fillRect(0,0,ee.width,ee.height),I.fillStyle="#666",I.fillText("Loading...",10,20)}}else ee.type==="text"||ee.type==="prompt_node"&&o.current[ee.id]&&(I.fillStyle="#1e1e1e",I.strokeStyle="#444",I.lineWidth=1,I.fillRect(0,0,ee.width,ee.height),I.strokeRect(0,0,ee.width,ee.height),I.fillStyle="#333",I.fillRect(0,0,ee.width,40),I.fillStyle="#fff",I.font="14px Inter, sans-serif",I.fillText("Prompt",10,25));te.includes(ee.id)&&ee.type!=="text"&&(I.strokeStyle="#3b82f6",I.lineWidth=3/d.current,I.strokeRect(0,0,ee.width,ee.height)),I.restore()}),I.restore(),A&&A()},S=x.useRef({scale:1,x:0,y:0,itemCount:0,selectedCount:0,ghostSignature:"",hiddenSignature:"",forceDraw:!1}),U=()=>{const N=Object.keys(o.current);return N.length===0?"":N.length+N.join(",")+(N.length>0?o.current[N[0]].x:"")},b=()=>l.current.size+Array.from(l.current).join(","),L=()=>{S.current.forceDraw=!0};return x.useEffect(()=>{const N=Date.now()+Math.random();h.current=N;const I=()=>{if(h.current!==N)return;const q=d.current,O=u.current,H=p.current,G=g.current,Z=U(),V=b(),W=S.current;(W.forceDraw||q!==W.scale||O.x!==W.x||O.y!==W.y||H.length!==W.itemCount||G.length!==W.selectedCount||Z!==W.ghostSignature||V!==W.hiddenSignature)&&(S.current={scale:q,x:O.x,y:O.y,itemCount:H.length,selectedCount:G.length,ghostSignature:Z,hiddenSignature:V,forceDraw:!1},E()),requestAnimationFrame(I)};return requestAnimationFrame(I),()=>{h.current===N&&(h.current=null)}},[]),x.useImperativeHandle(r,()=>({updateTracker:(N,I,q,O=!1)=>{o.current[N]={x:I,y:q,isActive:O},requestAnimationFrame(E)},clearTracker:N=>{delete o.current[N],requestAnimationFrame(E)},setHiddenItems:N=>{l.current=new Set(N),requestAnimationFrame(E)},getItemAt:(N,I)=>{for(let q=t.length-1;q>=0;q--){const O=f(t[q]);if(N>=O.x&&N<=O.x+O.width&&I>=O.y&&I<=O.y+O.height)return O.id}return null},forceRedraw:L,setLODMode:N=>{C.current!==N&&(C.current=N,L())}})),c.jsx("canvas",{ref:s,className:"absolute inset-0 pointer-events-none",style:{width:"100%",height:"100%",zIndex:0}})}),lE=x.createContext({scaleRef:{current:1},positionRef:{current:{x:0,y:0}},containerRef:{current:null}}),sU=({items:t,viewport:e,onNavigate:A,visualRef:n})=>{const[o,l]=x.useState(!1),[u,d]=x.useState({x:window.innerWidth-270,y:window.innerHeight-320}),[f,B]=x.useState(!1),[h,y]=x.useState({x:0,y:0}),C=x.useRef(!1),p=x.useRef({x:0,y:0}),[g,v]=x.useState({width:window.innerWidth,height:window.innerHeight}),E=x.useRef(null),S=cA.useMemo(()=>{if(!t||t.length===0)return{minX:-500,minY:-500,maxX:500,maxY:500,width:1e3,height:1e3};let j=1/0,te=1/0,re=-1/0,ee=-1/0;if(t.forEach(Re=>{typeof Re.x=="number"&&typeof Re.y=="number"&&typeof Re.width=="number"&&typeof Re.height=="number"&&(j=Math.min(j,Re.x),te=Math.min(te,Re.y),re=Math.max(re,Re.x+Re.width),ee=Math.max(ee,Re.y+Re.height))}),j===1/0)return{minX:-500,minY:-500,maxX:500,maxY:500,width:1e3,height:1e3};const ue=200;j-=ue,te-=ue,re+=ue,ee+=ue;const ge=re-j,we=ee-te,xe=Math.max(ge,we);if(ge<xe){const Re=(xe-ge)/2;j-=Re,re+=Re}if(we<xe){const Re=(xe-we)/2;te-=Re,ee+=Re}return{minX:j,minY:te,maxX:re,maxY:ee,width:re-j,height:ee-te}},[t]),U=250/S.width,b=(j,te)=>({x:(j-S.minX)*U,y:(te-S.minY)*U}),L=(j,te)=>({x:j/U+S.minX,y:te/U+S.minY});x.useEffect(()=>{if(!n||!E.current)return;let j;const te=()=>{const re=n.current;if(!re||!E.current)return;const ee=-re.x/re.scale,ue=-re.y/re.scale,ge=e.width/re.scale,we=e.height/re.scale,xe=b(ee,ue),Re=ge*U,qe=we*U;E.current.style.left=`${xe.x}px`,E.current.style.top=`${xe.y}px`,E.current.style.width=`${Re}px`,E.current.style.height=`${qe}px`,j=requestAnimationFrame(te)};return j=requestAnimationFrame(te),()=>cancelAnimationFrame(j)},[n,S,U,e.width,e.height]),x.useEffect(()=>{const j=()=>{const te=window.innerWidth,re=window.innerHeight;v({width:te,height:re}),d(o?ee=>({x:te-44-20,y:Math.max(20,Math.min(re-44-20,ee.y))}):ee=>({x:te-250-20,y:Math.max(20,Math.min(re-250-40-20,ee.y))}))};return window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[o,250]);const N=u.x>=0&&u.y>=0&&u.x+250<=g.width&&u.y+250+40<=g.height,I={x:Math.min(g.width-44-12,u.x+250-44),y:Math.min(g.height-44-12,u.y)},q=o||!N,O=-e.x/e.scale,H=-e.y/e.scale,G=e.width/e.scale,Z=e.height/e.scale,V=b(O,H),W={width:G*U,height:Z*U},z=j=>{j.button===0&&(B(!0),C.current=!1,p.current={x:j.clientX,y:j.clientY},y({x:j.clientX-u.x,y:j.clientY-u.y}))},Ae=j=>{if(C.current){j.preventDefault(),j.stopPropagation();return}j.stopPropagation();const te=j.currentTarget.getBoundingClientRect(),re=j.clientX-te.left,ee=j.clientY-te.top,ue=L(re,ee);A(ue.x,ue.y)};return cA.useEffect(()=>{if(!f)return;const j=re=>{const ee=Math.abs(re.clientX-p.current.x),ue=Math.abs(re.clientY-p.current.y);(ee>5||ue>5)&&(C.current=!0);const ge=re.clientY-h.y;if(o){const we=g.width-44-20,xe=Math.max(20,Math.min(g.height-44-20,ge));d({x:we,y:xe})}else{const we=g.width-250-20,xe=Math.max(20,Math.min(g.height-250-40-20,ge));d({x:we,y:xe})}},te=()=>{setTimeout(()=>{B(!1),C.current=!1},0)};return window.addEventListener("mousemove",j),window.addEventListener("mouseup",te),()=>{window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",te)}},[f,h,o,g]),c.jsxs(c.Fragment,{children:[q&&c.jsxs("button",{onMouseDown:z,onClick:()=>{C.current||(l(!1),d(j=>{let te=j.x,re=j.y;return te+250>g.width&&(te=Math.max(12,g.width-250-12)),te<0&&(te=12),re+250+40>g.height&&(re=Math.max(12,g.height-250-40-12)),re<0&&(re=12),{x:te,y:re}}))},className:"drag-handle fixed z-[10005] flex items-center justify-center bg-black/40 backdrop-blur-xl border border-white/10 ring-1 ring-white/5 rounded-xl shadow-2xl hover:shadow-lg hover:bg-white/10 text-gray-300 hover:text-white transition-all duration-300 -rotate-90 hover:rotate-0 active:scale-95 group cursor-grab active:cursor-grabbing",style:{left:I.x,top:I.y,width:44,height:44},children:[c.jsx("svg",{className:"w-6 h-6 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),c.jsx("span",{className:"absolute right-full mr-4 px-2 py-1 bg-gray-900 border border-gray-700 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Navigation"})]}),!o&&N&&c.jsx("div",{className:"fixed z-[10005] transition-opacity duration-300 flex flex-col",style:{left:u.x,top:u.y,width:250},children:c.jsxs("div",{className:"bg-gradient-to-br from-gray-900/70 to-gray-800/70 backdrop-blur-xl border-2 border-white/20 rounded-xl overflow-hidden shadow-2xl flex flex-col",children:[c.jsxs("div",{className:"drag-handle px-3 py-2 bg-white/10 border-b border-white/10 flex items-center justify-between cursor-grab active:cursor-grabbing",onMouseDown:z,children:[c.jsxs("div",{className:"flex items-center gap-2 text-white font-medium text-sm",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),c.jsx("span",{children:"Navigation"})]}),c.jsx("button",{onClick:j=>{j.stopPropagation(),l(!0)},className:"text-gray-400 hover:text-white transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})]}),c.jsxs("div",{className:"relative",style:{width:250,height:250},onClick:Ae,children:[t.filter(j=>typeof j.x=="number"&&typeof j.y=="number"&&typeof j.width=="number"&&typeof j.height=="number").map((j,te)=>{const re=b(j.x,j.y),ee={width:Math.max(2,j.width*U),height:Math.max(2,j.height*U)};return c.jsx("div",{className:`absolute rounded-sm ${j.type==="text"?"bg-blue-400":j.type==="group"?"border-2 border-green-400/60 bg-green-400/10":"bg-gray-400"}`,style:{left:re.x,top:re.y,width:ee.width,height:ee.height,opacity:j.type==="group"?.6:.5,zIndex:j.type==="group"?0:1}},j.id||`item-${te}`)}),c.jsx("div",{ref:E,className:"absolute border-2 border-dashed border-yellow-400 pointer-events-none",style:{left:V.x,top:V.y,width:W.width,height:W.height,boxShadow:"0 0 10px rgba(250, 204, 21, 0.5)"}})]})]})})]})},iU=()=>c.jsx("div",{className:"absolute inset-0 pointer-events-none z-20 assence-layer"}),oU=({children:t,getItemPosition:e,onSelectionBox:A,onCanvasClick:n,onCanvasDrop:r,onCanvasMouseDown:s,onCanvasMouseMove:i,onCanvasMouseUp:a,onContextMenu:o,panSettings:l={keys:["Alt"],button:"Middle"},zoomSettings:u={keys:["Alt"],button:"Right"},windowDragSettings:d={keys:[],button:"Right"},zoomWheelModifier:f="None",pressedKeys:B=new Set,activeTool:h="select",brushSize:y=5,isEraser:C=!1,zoomToFit:p=null,opacity:g=1,onOpacityChange:v,opacityDragSettings:E={keys:["CTRL","ALT"],button:"Right"},items:S=[],onViewportChange:U,onVisualUpdate:b,navigateTo:L,onNavigated:N,uiSettings:I={canvasBackgroundColor:"#1f1f1f",canvasBackgroundGradientColor:"#192024",dotPatternColor:"#999999",dotPatternSpacing:120,dotPatternSize:1,enableGradient:!0,enablePattern:!0},fixedLayer:q,onLODChange:O,isUiVisible:H=!0})=>{const[G,Z]=x.useState(1),[V,W]=x.useState({x:0,y:0}),[z,Ae]=x.useState(!1),[j,te]=x.useState(!1),[re,ee]=x.useState(!1),[ue,ge]=x.useState(!1),[we,xe]=x.useState(0),[Re,qe]=x.useState(0),[Ne,ct]=x.useState(0),[gn,pn]=x.useState(0),[ke,Xe]=x.useState(null),[Kt,vt]=x.useState({x:0,y:0}),Ce=x.useRef(null),ze=x.useRef(null),nA=x.useRef(0),LA=x.useRef(B),hA=x.useRef(f);LA.current=B,hA.current=f;const He=x.useRef(1),Le=x.useRef({x:0,y:0}),oe=x.useRef({x:0,y:0,scale:1});x.useEffect(()=>{He.current=G},[G]),x.useEffect(()=>{Le.current=V},[V]);const qA=x.useMemo(()=>({scaleRef:He,positionRef:Le,visualTransformRef:oe,containerRef:Ce}),[]),[yr,ZA]=x.useState(!1),[EA,pf]=x.useState({x:0,y:0}),[mn,Gl]=x.useState({x:0,y:0}),[zo,Ct]=x.useState({x:0,y:0}),rA=x.useRef({x:0,y:0}),[en,mf]=x.useState({width:1e3,height:1e3}),gA=x.useRef(null),HA=x.useRef(null),Br=x.useRef(null),zr=x.useRef(null),he=x.useRef(null);x.useEffect(()=>{const M=()=>{if(Ce.current){const Qe=Ce.current.getBoundingClientRect();mf({width:Qe.width,height:Qe.height})}};return M(),window.addEventListener("resize",M),()=>{window.removeEventListener("resize",M)}},[]),x.useEffect(()=>{if(L){const M=en.width||window.innerWidth,Qe=en.height||window.innerHeight,Fe=M/2-L.x*G,Ee=Qe/2-L.y*G;if(isFinite(Fe)&&isFinite(Ee)){W({x:Fe,y:Ee});const _e=He.current;Le.current={x:Fe,y:Ee},oe.current={x:Fe,y:Ee,scale:_e};const le=`translate3d(${Fe}px, ${Ee}px, 0) scale(${_e})`;he.current&&(he.current.style.transform=le),ze.current&&(ze.current.style.transform=le),b==null||b(),N&&N()}}},[L,G,en.width,en.height,N]),x.useEffect(()=>{U&&U({x:V.x,y:V.y,scale:G,width:en.width,height:en.height})},[V.x,V.y,G,en.width,en.height,U]),x.useEffect(()=>{if(!Ce.current)return;const M=Ce.current.querySelectorAll(".media-item-wrapper").length,Qe=Ce.current.querySelectorAll(".low-zoom .media-item-wrapper:not(.selected)").length,Fe=M-Qe;console.log(`[DOM Render] Zoom: ${Math.round(G*100)}% | Total: ${M} | Visible: ${Fe} | Hidden: ${Qe}`)},[G]),x.useEffect(()=>{const M=Ce.current;if(!M)return;let Qe=null;const Fe=M.querySelector(".canvas-content");if(!Fe)return;he.current=Fe;let Ee=He.current,_e={...Le.current};const le=Ge=>{HA.current||(oe.current?(Ee=oe.current.scale,_e={x:oe.current.x,y:oe.current.y}):(Ee=He.current,_e={...Le.current}));const Te=hA.current,ye=LA.current;if(Te!=="None"){const PA=Te.toUpperCase();if(!(ye.has(PA)||PA==="CTRL"&&(Ge.ctrlKey||Ge.metaKey)||PA==="ALT"&&Ge.altKey||PA==="SHIFT"&&Ge.shiftKey))return}Ge.preventDefault(),Qe&&clearTimeout(Qe);const Ue=Ge.deltaY*-.001,tt=Ee+Ue,Ve=Math.min(Math.max(.01,tt),5),Ye=M.getBoundingClientRect(),Oe=Ge.clientX-Ye.left,De=Ge.clientY-Ye.top,Ke=Ve/Ee,Je=Oe-(Oe-_e.x)*Ke,wn=De-(De-_e.y)*Ke;Ee=Ve,_e={x:Je,y:wn};const Tt=`translate3d(${Je}px, ${wn}px, 0) scale(${Ve})`;oe.current={x:Je,y:wn,scale:Ve},he.current&&(he.current.style.transform=Tt,Ve<.3?(he.current.classList.add("low-zoom"),O==null||O(!0)):(he.current.classList.remove("low-zoom"),O==null||O(!1))),ze.current&&(ze.current.style.transform=Tt),b==null||b(oe.current),Qe=setTimeout(()=>{Z(Ee),W({x:_e.x,y:_e.y}),He.current=Ee,Le.current={x:_e.x,y:_e.y},HA.current=null,zr.current=null,ze.current&&(ze.current.style.transform=""),b==null||b()},100),HA.current=Qe,zr.current={scale:Ee,x:_e.x,y:_e.y}};return M.addEventListener("wheel",le,{passive:!1}),()=>{M.removeEventListener("wheel",le),Qe&&clearTimeout(Qe)}},[]),x.useEffect(()=>{if(!p||!e||!Ce.current)return;const{itemId:M,padding:Qe=40}=p,Fe=e(M);if(Fe){const Ee=Ce.current,_e=Ee.clientWidth,le=Ee.clientHeight,Ge=(_e-Qe*2)/Fe.width,Te=(le-Qe*2)/Fe.height,ye=Math.min(Math.max(.01,Math.min(Ge,Te)),5),Ue=Fe.x+Fe.width/2,tt=Fe.y+Fe.height/2,Ve=_e/2-Ue*ye,Ye=le/2-tt*ye;Z(ye),W({x:Ve,y:Ye}),He.current=ye,Le.current={x:Ve,y:Ye},oe.current={scale:ye,x:Ve,y:Ye},U&&U({x:Ve,y:Ye,scale:ye,width:_e,height:le})}},[p,e,U]);const Ks=M=>{var Oe,De;const Qe=M.target,Fe=Qe===M.currentTarget||Qe.classList.contains("canvas-content")||Qe.tagName.toLowerCase()==="svg";Ct({x:M.clientX,y:M.clientY});let Ee=!1;(l.button==="Left"&&M.button===0||l.button==="Middle"&&M.button===1||l.button==="Right"&&M.button===2)&&(Ee=!0);let _e=!1;if(l.keys.length===0||l.keys[0]==="None"?_e=!0:_e=l.keys.every(Ke=>{const Je=Ke.toUpperCase();return B.has(Je)||Je==="ALT"&&M.altKey||Je==="CTRL"&&(M.ctrlKey||M.metaKey)||Je==="SHIFT"&&M.shiftKey}),Ee&&_e){M.preventDefault(),M.stopPropagation(),Ae(!0),rA.current={x:M.clientX,y:M.clientY};return}let le=!1;(E.button==="Left"&&M.button===0||E.button==="Middle"&&M.button===1||E.button==="Right"&&M.button===2)&&(le=!0);let Ge=!1;if(E.keys.length===0||E.keys[0]==="None"?Ge=!M.altKey&&!M.ctrlKey&&!M.shiftKey&&!M.metaKey:Ge=E.keys.every(Ke=>{const Je=Ke.toUpperCase();return B.has(Je)||Je==="ALT"&&M.altKey||Je==="CTRL"&&(M.ctrlKey||M.metaKey)||Je==="SHIFT"&&M.shiftKey}),le&&Ge&&v){M.preventDefault(),ge(!0),rA.current={x:M.clientX,y:M.clientY};return}let Te=!1;(u.button==="Left"&&M.button===0||u.button==="Middle"&&M.button===1||u.button==="Right"&&M.button===2)&&(Te=!0);let ye=!1;u.keys.length===0||u.keys[0]==="None"?ye=!0:ye=u.keys.every(Ke=>{const Je=Ke.toUpperCase();return B.has(Je)||Je==="ALT"&&M.altKey||Je==="CTRL"&&(M.ctrlKey||M.metaKey)||Je==="SHIFT"&&M.shiftKey});let Ue=!1;(d.button==="Left"&&M.button===0||d.button==="Middle"&&M.button===1||d.button==="Right"&&M.button===2)&&(Ue=!0);let tt=!1;if(d.keys.length===0||d.keys[0]==="None"?tt=!M.altKey&&!M.ctrlKey&&!M.shiftKey&&!M.metaKey:tt=d.keys.every(Ke=>{const Je=Ke.toUpperCase();return B.has(Je)||Je==="ALT"&&M.altKey||Je==="CTRL"&&(M.ctrlKey||M.metaKey)||Je==="SHIFT"&&M.shiftKey}),Te&&ye){M.preventDefault(),te(!0),vt({x:M.clientX,y:M.clientY}),rA.current={x:M.clientX,y:M.clientY},oe.current={scale:G,x:V.x,y:V.y};return}if(Ue&&tt){Xe({x:M.screenX,y:M.screenY}),rA.current={x:M.screenX,y:M.screenY},M.preventDefault();return}if(Ee&&_e){if(M.preventDefault(),HA.current&&zr.current){clearTimeout(HA.current);const Ke=zr.current;Z(Ke.scale),W({x:Ke.x,y:Ke.y}),He.current=Ke.scale,Le.current={x:Ke.x,y:Ke.y},oe.current={scale:Ke.scale,x:Ke.x,y:Ke.y},HA.current=null,zr.current=null}else HA.current||(oe.current={scale:He.current,x:Le.current.x,y:Le.current.y});Ae(!0),rA.current={x:M.clientX,y:M.clientY};return}if(s&&!z&&!j&&!re){const Ke=(Oe=Ce.current)==null?void 0:Oe.getBoundingClientRect();if(Ke){const Je=oe.current.scale,wn=oe.current.x,Tt=oe.current.y,PA=(M.clientX-Ke.left-wn)/Je,tn=(M.clientY-Ke.top-Tt)/Je,Nn=Object.assign(M,{canvasX:PA,canvasY:tn});if(s(Nn),h==="pen"||h==="eraser")return}}const Ve=M.target,Ye=Ve.closest("[data-item-id]")||Ve.closest(".group");if(M.button===0&&!z&&!j&&!re&&h!=="pen"&&h!=="eraser"&&Fe&&!Ye&&!M.defaultPrevented){ZA(!0);const Ke=(De=Ce.current)==null?void 0:De.getBoundingClientRect();if(Ke){const Je=oe.current.scale,wn=oe.current.x,Tt=oe.current.y,PA=(M.clientX-Ke.left-wn)/Je,tn=(M.clientY-Ke.top-Tt)/Je;pf({x:PA,y:tn}),Gl({x:PA,y:tn})}}},RA=M=>{var Qe,Fe,Ee,_e,le,Ge,Te;if(yr){const ye=(Qe=Ce.current)==null?void 0:Qe.getBoundingClientRect();if(ye){const Ue=oe.current.scale,tt=oe.current.x,Ve=oe.current.y,Ye=(M.clientX-ye.left-tt)/Ue,Oe=(M.clientY-ye.top-Ve)/Ue;Gl({x:Ye,y:Oe})}}else if(z){const ye=M.clientX-rA.current.x,Ue=M.clientY-rA.current.y,tt=oe.current.x,Ve=oe.current.y,Ye=tt+ye,Oe=Ve+Ue;oe.current.x=Ye,oe.current.y=Oe;const De=`translate3d(${Ye}px, ${Oe}px, 0) scale(${oe.current.scale})`;he.current&&(he.current.style.transform=De),ze.current&&(ze.current.style.transform=De),b==null||b(oe.current);const Ke=Date.now();U&&Ke-(nA.current||0)>16&&(U({x:Ye,y:Oe,scale:oe.current.scale,width:((Fe=Ce.current)==null?void 0:Fe.clientWidth)||0,height:((Ee=Ce.current)==null?void 0:Ee.clientHeight)||0}),nA.current=Ke),Br.current&&clearTimeout(Br.current),Br.current=setTimeout(()=>{W({x:Ye,y:Oe}),Le.current={x:Ye,y:Oe},He.current=oe.current.scale,Br.current=null,ze.current&&(ze.current.style.transform=""),b==null||b()},100),rA.current={x:M.clientX,y:M.clientY}}else if(j){const tt=(M.clientX-rA.current.x)*.005,Ve=oe.current.scale,Ye=Math.min(Math.max(.01,Ve+tt),30),Oe=Ye/Ve,De=Kt,Ke=(_e=Ce.current)==null?void 0:_e.getBoundingClientRect();if(Ke){const Je=De.x-Ke.left,wn=De.y-Ke.top,Tt=oe.current.x,PA=oe.current.y,tn=Je-(Je-Tt)*Oe,Nn=wn-(wn-PA)*Oe;oe.current={scale:Ye,x:tn,y:Nn},gA.current!==null&&cancelAnimationFrame(gA.current),gA.current=requestAnimationFrame(()=>{var vr;const gt=(vr=Ce.current)==null?void 0:vr.querySelector(".canvas-content");gt&&(gt.style.transform=`translate3d(${tn}px, ${Nn}px, 0) scale(${Ye})`),ze.current&&(ze.current.style.transform=`translate3d(${tn}px, ${Nn}px, 0) scale(${Ye})`),b==null||b(oe.current)}),gA.current=null}rA.current={x:M.clientX,y:M.clientY}}else if(ke){const ye=M.screenX-ke.x,Ue=M.screenY-ke.y;Math.sqrt(ye*ye+Ue*Ue)>5&&!re&&(ee(!0),(le=window.electronAPI)!=null&&le.startWindowMove&&window.electronAPI.startWindowMove(ke.x,ke.y)),re&&(Ge=window.electronAPI)!=null&&Ge.moveWindow&&window.electronAPI.moveWindow(M.screenX,M.screenY),rA.current={x:M.screenX,y:M.screenY}}else if(ue&&v){const Ue=(M.clientX-rA.current.x)*.005,tt=Math.max(.01,Math.min(1,g+Ue));v(tt),rA.current={x:M.clientX,y:M.clientY}}else if(i&&!z&&!j&&!re&&!ue){const ye=(Te=Ce.current)==null?void 0:Te.getBoundingClientRect();if(ye){const Ue=oe.current.scale,tt=oe.current.x,Ve=oe.current.y,Ye=(M.clientX-ye.left-tt)/Ue,Oe=(M.clientY-ye.top-Ve)/Ue,De=Object.assign(M,{canvasX:Ye,canvasY:Oe});i(De)}}(h==="pen"||h==="eraser")&&Ct({x:M.clientX,y:M.clientY})},_i=M=>{var Ee,_e,le,Ge;const Qe=yr,Fe=Math.sqrt(Math.pow(mn.x-EA.x,2)+Math.pow(mn.y-EA.y,2));if(a){const Te=(Ee=Ce.current)==null?void 0:Ee.getBoundingClientRect();if(Te){const ye=oe.current.scale,Ue=oe.current.x,tt=oe.current.y,Ve=(M.clientX-Te.left-Ue)/ye,Ye=(M.clientY-Te.top-tt)/ye,Oe=Object.assign(M,{canvasX:Ve,canvasY:Ye});a(Oe)}}if(Qe&&A){const Te={x:Math.min(EA.x,mn.x),y:Math.min(EA.y,mn.y),width:Math.abs(mn.x-EA.x),height:Math.abs(mn.y-EA.y)};if(Te.width<5&&Te.height<5){if(n){const ye=(_e=Ce.current)==null?void 0:_e.getBoundingClientRect();if(ye){const Ue=oe.current.scale,tt=oe.current.x,Ve=oe.current.y,Ye=(M.clientX-ye.left-tt)/Ue,Oe=(M.clientY-ye.top-Ve)/Ue,De=Object.assign(M,{canvasX:Ye,canvasY:Oe});n(De)}else n(M)}}else A(Te)}else if(!Qe&&!z&&!j&&!re&&Fe<5&&n){const Te=(le=Ce.current)==null?void 0:le.getBoundingClientRect();if(Te){const ye=oe.current.scale,Ue=oe.current.x,tt=oe.current.y,Ve=(M.clientX-Te.left-Ue)/ye,Ye=(M.clientY-Te.top-tt)/ye,Oe=Object.assign(M,{canvasX:Ve,canvasY:Ye});n(Oe)}else n(M)}if(ZA(!1),HA.current&&(clearTimeout(HA.current),Z(He.current),W({x:Le.current.x,y:Le.current.y}),HA.current=null),Br.current&&(clearTimeout(Br.current),Br.current=null),z){const Te=oe.current.x,ye=oe.current.y;Le.current={x:Te,y:ye},He.current=oe.current.scale,W({x:Te,y:ye}),pn(Date.now())}if(Ae(!1),j&&(qe(Date.now()),gA.current&&(cancelAnimationFrame(gA.current),gA.current=null),Z(oe.current.scale),W({x:oe.current.x,y:oe.current.y}),He.current=oe.current.scale,Le.current={x:oe.current.x,y:oe.current.y},ze.current&&(ze.current.style.transform="")),ue&&(ct(Date.now()),ge(!1)),j&&(qe(Date.now()),Z(oe.current.scale),W({x:oe.current.x,y:oe.current.y}),te(!1)),ke){const Te=M.screenX-ke.x,ye=M.screenY-ke.y,Ue=Math.sqrt(Te*Te+ye*ye);(re||Ue>5)&&(re&&((Ge=window.electronAPI)!=null&&Ge.endWindowMove)&&window.electronAPI.endWindowMove(),xe(Date.now()))}ee(!1),Xe(null)},Go=M=>{var Te;if(z||re||j||ue){M.preventDefault(),M.stopPropagation();return}const Qe=Date.now()-gn,Fe=Date.now()-Re,Ee=Date.now()-Ne;if(Qe<300&&gn>0||Fe<300&&Re>0||Ee<300&&Ne>0){M.preventDefault(),M.stopPropagation();return}if(Date.now()-we<200&&we>0){M.preventDefault(),M.stopPropagation();return}const le=M.target;if(le.closest("[data-item-id]")||le.closest(".group")||le.closest("img")||le.closest("video")||le.closest('[class*="MediaItem"]')||le.closest('[class*="TextItem"]'))return;if(ke){const ye=M.screenX-ke.x,Ue=M.screenY-ke.y;if(!(Math.sqrt(ye*ye+Ue*Ue)<5)){M.preventDefault();return}}if(M.preventDefault(),(le===M.currentTarget||le.classList.contains("canvas-content")||le.tagName.toLowerCase()==="svg")&&o){const ye=(Te=Ce.current)==null?void 0:Te.getBoundingClientRect();if(ye){const Ue=(M.clientX-ye.left-V.x)/G,tt=(M.clientY-ye.top-V.y)/G,Ve=Object.assign(M,{canvasX:Ue,canvasY:tt});o(Ve)}else o(M)}},Sn=M=>{var Qe;if(M.preventDefault(),M.stopPropagation(),r){const Fe=(Qe=Ce.current)==null?void 0:Qe.getBoundingClientRect();if(Fe){const Ee=(M.clientX-Fe.left-V.x)/G,_e=(M.clientY-Fe.top-V.y)/G,le=Object.assign(M,{canvasX:Ee,canvasY:_e});r(le)}else r(M)}},Tn=M=>{M.preventDefault(),M.stopPropagation(),M.dataTransfer.dropEffect="copy"},Lt={left:Math.min(EA.x,mn.x)*G+V.x,top:Math.min(EA.y,mn.y)*G+V.y,width:Math.abs(mn.x-EA.x)*G,height:Math.abs(mn.y-EA.y)*G},Vo=y*G,Gr=x.useCallback((M,Qe)=>{if(!Ce.current)return;const{width:Fe,height:Ee}=Ce.current.getBoundingClientRect(),_e=Fe/2-M*G,le=Ee/2-Qe*G;Le.current={x:_e,y:le},oe.current={x:_e,y:le,scale:G};const Ge=`translate3d(${_e}px, ${le}px, 0) scale(${G})`;he.current&&(he.current.style.transform=Ge),ze.current&&(ze.current.style.transform=Ge),b==null||b(),W({x:_e,y:le})},[G,b]);return c.jsx("div",{ref:Ce,className:`canvas-container w-full h-full overflow-hidden bg-[#1e1e1e] relative touch-none select-none ${z?"cursor-grabbing":re?"cursor-move":ue?"cursor-ns-resize":B.has("ALT")||B.has(" ")?"cursor-grab":"cursor-default"}`,style:{"--canvas-scale":G},onMouseDown:Ks,onMouseMove:RA,onMouseUp:_i,onMouseLeave:_i,onPointerMove:M=>{var Qe;if((h==="pen"||h==="eraser")&&M.buttons&1&&i){const Fe=(Qe=Ce.current)==null?void 0:Qe.getBoundingClientRect();if(Fe){const Ee=(Ue,tt,Ve)=>({x:(Ue-Fe.left-V.x)/G,y:(tt-Fe.top-V.y)/G,pressure:Ve||.5}),_e=M.nativeEvent,le=_e.getCoalescedEvents?_e.getCoalescedEvents():[];let Ge=[];le.length>0?Ge=le.map(Ue=>Ee(Ue.clientX,Ue.clientY,Ue.pressure)):Ge.push(Ee(M.clientX,M.clientY,M.pressure));const Te=Ge[Ge.length-1],ye=Object.assign(M,{canvasX:Te.x,canvasY:Te.y,pressure:Te.pressure,coalescedPoints:Ge});i(ye)}}},onPointerUp:M=>{var Qe;if((h==="pen"||h==="eraser")&&a){const Fe=(Qe=Ce.current)==null?void 0:Qe.getBoundingClientRect();if(Fe){const Ee=(M.clientX-Fe.left-V.x)/G,_e=(M.clientY-Fe.top-V.y)/G,le=M.pressure||.5,Ge=Object.assign(M,{canvasX:Ee,canvasY:_e,pressure:le});a(Ge)}}},onContextMenuCapture:Go,onDrop:Sn,onDragOver:Tn,children:c.jsx(Fm.Provider,{value:{scale:G,position:V,isSelecting:yr,scaleRef:He,positionRef:Le},children:c.jsxs(lE.Provider,{value:qA,children:[(h==="pen"||h==="eraser")&&c.jsx("div",{className:"absolute pointer-events-none z-[10001]",style:{left:`${zo.x}px`,top:`${zo.y}px`,width:`${Vo}px`,height:`${Vo}px`,borderRadius:"50%",border:`2px solid ${C?"#ef4444":"#ffffff"}`,backgroundColor:C?"rgba(239, 68, 68, 0.2)":"rgba(255, 255, 255, 0.1)",transform:"translate(-50%, -50%)",transition:"none"}}),c.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{zIndex:0,backgroundColor:I.canvasBackgroundColor,opacity:1}}),c.jsxs("div",{className:"absolute origin-top-left canvas-content",style:{transform:`translate3d(${V.x}px, ${V.y}px, 0) scale(${G})`,transformOrigin:"0 0",width:"100%",height:"100%",zIndex:1},children:[c.jsx(iU,{}),t]}),yr&&c.jsx("div",{className:"absolute pointer-events-none z-[10000]",style:{...Lt,border:"2px solid rgba(96, 165, 250, 0.9)",backgroundColor:"rgba(96, 165, 250, 0.2)"}}),c.jsxs("div",{className:"absolute bottom-4 left-4 bg-black/50 text-white px-3 py-1 rounded-full backdrop-blur-md text-[10px] font-medium tracking-wide pointer-events-none z-[50] border border-white/10 flex items-center gap-2",children:[c.jsx("span",{className:"opacity-60",children:"ZOOM"}),c.jsxs("span",{className:"text-blue-400",children:[Math.round(G*100),"%"]}),c.jsx("span",{className:"w-px h-2 bg-white/20 mx-1"}),c.jsx("span",{className:"opacity-60",children:"PAN"}),c.jsxs("span",{className:"text-gray-300",children:["X:",Math.round(V.x),", Y:",Math.round(V.y)]}),c.jsx("span",{className:"w-px h-2 bg-white/20 mx-1"}),c.jsx("span",{className:"opacity-60",children:"ITEMS"}),c.jsx("span",{children:S.length})]}),H&&c.jsx(sU,{items:S,viewport:{x:V.x,y:V.y,scale:G,width:en.width,height:en.height},onNavigate:Gr,visualRef:oe}),c.jsx("div",{ref:ze,className:"absolute inset-0 pointer-events-none origin-top-left",children:q})]})})})},aU=({src:t,driveFileId:e,currentDriveFileId:A,onClick:n})=>{const[r,s]=x.useState(t||null);x.useEffect(()=>{e&&!t?Wn(e).then(s).catch(console.error):t&&s(t)},[e,t]);const i=r||t,a=e&&A&&e===A;return c.jsxs("button",{onClick:o=>{o.stopPropagation(),n()},className:`aspect-square rounded-lg overflow-hidden border-4 transition-all relative group ${a?"border-[rgb(255,255,255)] ring-2 ring-white/0":"border-[rgba(255,255,255,0.2)] hover:border-[rgb(255,255,255)]"}`,children:[i?c.jsx("img",{src:i,alt:"thumbnail",className:"w-full h-full object-cover",draggable:!1}):c.jsx("div",{className:"w-full h-full bg-gray-700 animate-pulse"}),c.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"})]})},lU=({item:t,onGenerate:e,onUpdate:A,isGenerating:n=!1,driveImageUrl:r,activeTool:s="select",onSocketMouseDown:i,onSocketMouseUp:a,onSocketMouseEnter:o,onSocketMouseLeave:l})=>{var S,U;const[u,d]=x.useState(!1),[f,B]=x.useState(localStorage.getItem("gemini_api_key")||""),h=t.generationParams||{aspectRatio:"2:3",resolution:"1k",model:"gemini-2.5",batchSize:1},y=(b,L)=>{const I={generationParams:{...h,[b]:L}};if(b==="aspectRatio"){const[q,O]=L.split(":").map(Number),H=q/O,G=400;let Z=Math.max(t.width,G),V=Math.round(Z/H);V<G&&(V=G,Z=Math.round(V*H)),I.width=Z,I.height=V}A(t.id,I)};x.useEffect(()=>{var N,I;const b=((N=t.generationParams)==null?void 0:N.model)||"gemini-2.5",L=((I=t.generationParams)==null?void 0:I.resolution)||"1k";b==="gemini-2.5"&&L!=="1k"&&A(t.id,{generationParams:{...t.generationParams||{aspectRatio:"2:3",resolution:"1k",model:"gemini-2.5",style:"structure"},resolution:"1k"}})},[(S=t.generationParams)==null?void 0:S.model,(U=t.generationParams)==null?void 0:U.resolution,t.id,A]);const[C,p]=x.useState(0);x.useEffect(()=>{if(n){p(0);const b=setInterval(()=>p(L=>L+1),1e3);return()=>clearInterval(b)}else p(0)},[n]);const g=b=>`${b}s`,v=()=>{f.trim()?localStorage.setItem("gemini_api_key",f.trim()):localStorage.removeItem("gemini_api_key"),d(!1)},E=async()=>{try{const b=t.driveFileId&&r?r:t.src;if(!b)return;const L=document.createElement("a");L.href=b,L.download=t.fileName||`generated_${t.id}.png`,L.click()}catch(b){console.error("Failed to download image:",b)}};return c.jsxs("div",{className:"absolute inset-0 flex flex-col overflow-visible pointer-events-none",children:[c.jsxs("div",{className:"absolute inset-0 pointer-events-auto",children:[c.jsx("div",{className:"absolute -left-12 bottom-4 w-12 h-12 flex items-center justify-center transform hover:scale-110 transition-transform cursor-crosshair z-50",title:"Text Input","data-handle-id":"text-input","data-node-id":t.id,onMouseDown:b=>i(t.id,"text-input",b),onMouseUp:()=>a(t.id,"text-input"),onMouseEnter:()=>o&&o(t.id,"text-input"),onMouseLeave:()=>l&&l(),children:c.jsxs("div",{className:"w-8 h-8 bg-[#1f2937] rounded-full border border-[#4b5563] flex items-center justify-center shadow-lg relative",children:[c.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-emerald-800 opacity-60"}),c.jsx("div",{className:"border-[1.5px] border-gray-300 rounded-[4px] w-4 h-4 flex items-center justify-center scale-90",children:c.jsx("span",{className:"text-gray-200 text-[10px] font-bold font-serif leading-none mt-[1px]",children:"T"})})]})}),c.jsx("div",{className:"absolute -left-12 bottom-16 w-12 h-12 flex items-center justify-center transform hover:scale-110 transition-transform cursor-crosshair z-50",title:"Image Input","data-handle-id":"image-input","data-node-id":t.id,onMouseDown:b=>i(t.id,"image-input",b),onMouseUp:()=>a(t.id,"image-input"),onMouseEnter:()=>o&&o(t.id,"image-input"),onMouseLeave:()=>l&&l(),children:c.jsxs("div",{className:"w-8 h-8 bg-[#1f2937] rounded-full border border-[#4b5563] flex items-center justify-center shadow-lg relative",children:[c.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-indigo-900 opacity-60"}),c.jsx("svg",{className:"w-4 h-4 text-gray-300 transform scale-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})}),c.jsx("div",{className:"absolute -right-12 top-4 w-12 h-12 flex items-center justify-center transform hover:scale-110 transition-transform cursor-crosshair z-50",title:"Image Output","data-handle-id":"image-output","data-node-id":t.id,onMouseDown:b=>i(t.id,"image-output",b),onMouseUp:()=>a(t.id,"image-output"),onMouseEnter:()=>o&&o(t.id,"image-output"),onMouseLeave:()=>l&&l(),children:c.jsxs("div",{className:"w-8 h-8 bg-[#1f2937] rounded-full border border-[#4b5563] flex items-center justify-center shadow-lg relative",children:[c.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-indigo-900 opacity-60"}),c.jsx("svg",{className:"w-4 h-4 text-gray-300 transform scale-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})})]}),c.jsx("div",{className:`absolute inset-0 z-0 ${s==="pen"||s==="eraser"?"pointer-events-none":"pointer-events-auto"} flex items-center justify-center bg-[#111] rounded-3xl overflow-hidden`,children:r?c.jsx("img",{src:r,alt:"Generated",className:"w-full h-full object-contain",draggable:!1}):t.src?c.jsx("img",{src:t.src,alt:"Generated",className:"w-full h-full object-contain",draggable:!1,onError:b=>{console.error("Failed to load base64 image"),b.currentTarget.style.display="none"}}):null}),n&&c.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none rounded-3xl overflow-visible",children:c.jsxs("svg",{className:"absolute inset-0 w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:`ledGradient-${t.id}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"#10b981"})," ",c.jsx("stop",{offset:"50%",stopColor:"#06b6d4"})," ",c.jsx("stop",{offset:"100%",stopColor:"#6366f1"})," "]})}),c.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",rx:"24",ry:"24",fill:"none",stroke:`url(#ledGradient-${t.id})`,strokeWidth:"6",strokeDasharray:"30 70",strokeLinecap:"round",pathLength:"100",style:{filter:"blur(4px)",opacity:.8},children:c.jsx("animate",{attributeName:"stroke-dashoffset",from:"100",to:"0",dur:"2s",repeatCount:"indefinite"})}),c.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",rx:"24",ry:"24",fill:"none",stroke:"#ffffff",strokeWidth:"2",strokeDasharray:"30 70",strokeLinecap:"round",pathLength:"100",style:{opacity:.9},children:c.jsx("animate",{attributeName:"stroke-dashoffset",from:"100",to:"0",dur:"2s",repeatCount:"indefinite"})})]})}),!n&&c.jsx("div",{className:`absolute top-2 left-2 right-2 h-10 flex items-center justify-between gap-2 z-[100] ${s==="pen"||s==="eraser"?"pointer-events-none":"pointer-events-auto"}`,onMouseDown:b=>b.stopPropagation(),children:c.jsxs("div",{className:"bg-black/60 backdrop-blur-md rounded-lg shadow-lg px-3 py-1.5 flex items-center gap-1.5 border border-white/20 flex-1 pointer-events-auto min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[c.jsxs("select",{value:h.model,onChange:b=>y("model",b.target.value),onPointerDown:b=>b.stopPropagation(),onMouseDown:b=>b.stopPropagation(),className:"bg-transparent text-white text-[11px] font-medium border-none outline-none cursor-pointer hover:text-gray-200 pr-2",style:{minWidth:"100px",maxWidth:"140px"},children:[c.jsx("option",{value:"gemini-2.5",className:"bg-gray-800",children:"NanoBanana"}),c.jsx("option",{value:"gemini-3-pro-image-preview",className:"bg-gray-800",children:"NanoBanana Pro"})]}),c.jsx("svg",{className:"w-3 h-3 text-white/60 pointer-events-none flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-1 border-l border-white/20 pl-1.5",children:[c.jsx("svg",{className:"w-3 h-3 text-white/60 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("select",{value:h.resolution,onChange:b=>y("resolution",b.target.value),onPointerDown:b=>b.stopPropagation(),onMouseDown:b=>b.stopPropagation(),className:"bg-transparent text-white text-[11px] font-medium border-none outline-none cursor-pointer hover:text-gray-200",style:{width:"42px"},children:h.model==="gemini-2.5"?c.jsx("option",{value:"1k",className:"bg-gray-800",children:"1K"}):c.jsxs(c.Fragment,{children:[c.jsx("option",{value:"1k",className:"bg-gray-800",children:"1K"}),c.jsx("option",{value:"2k",className:"bg-gray-800",children:"2K"}),c.jsx("option",{value:"4k",className:"bg-gray-800",children:"4K"})]})})]}),c.jsxs("div",{className:"flex items-center gap-1 border-l border-white/20 pl-1.5",children:[c.jsx("svg",{className:"w-3 h-3 text-white/60 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),c.jsxs("select",{value:h.aspectRatio,onChange:b=>y("aspectRatio",b.target.value),onPointerDown:b=>b.stopPropagation(),onMouseDown:b=>b.stopPropagation(),className:"bg-transparent text-white text-[11px] font-medium border-none outline-none cursor-pointer hover:text-gray-200",style:{width:"52px"},children:[c.jsx("option",{value:"1:1",className:"bg-gray-800",children:"1:1"}),c.jsx("option",{value:"2:3",className:"bg-gray-800",children:"2:3"}),c.jsx("option",{value:"3:2",className:"bg-gray-800",children:"3:2"}),c.jsx("option",{value:"3:4",className:"bg-gray-800",children:"3:4"}),c.jsx("option",{value:"4:3",className:"bg-gray-800",children:"4:3"}),c.jsx("option",{value:"4:5",className:"bg-gray-800",children:"4:5"}),c.jsx("option",{value:"5:4",className:"bg-gray-800",children:"5:4"}),c.jsx("option",{value:"9:16",className:"bg-gray-800",children:"9:16"}),c.jsx("option",{value:"16:9",className:"bg-gray-800",children:"16:9"}),c.jsx("option",{value:"21:9",className:"bg-gray-800",children:"21:9"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-1 border-l border-white/20 pl-1.5 flex-shrink-0",children:[c.jsx("span",{className:"text-[10px] text-white/50 font-medium flex-shrink-0",children:"Batch"}),c.jsxs("select",{value:h.batchSize||1,onChange:b=>y("batchSize",b.target.value),onPointerDown:b=>b.stopPropagation(),onMouseDown:b=>b.stopPropagation(),className:"bg-transparent text-white text-[11px] font-medium border-none outline-none cursor-pointer hover:text-gray-200",style:{width:"36px"},children:[c.jsx("option",{value:"1",className:"bg-gray-800",children:"1"}),c.jsx("option",{value:"2",className:"bg-gray-800",children:"2"}),c.jsx("option",{value:"4",className:"bg-gray-800",children:"4"}),c.jsx("option",{value:"8",className:"bg-gray-800",children:"8"})]})]}),c.jsx("div",{className:"flex-1 min-w-[8px]"}),c.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[c.jsx("button",{className:"text-white/80 hover:text-white p-1 transition-colors",onPointerDown:b=>b.stopPropagation(),onClick:b=>{b.stopPropagation(),d(!u)},title:"Settings (API Key)",children:c.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),!n&&(r||t.generatedHistory&&t.generatedHistory.length>0)&&c.jsx("button",{onClick:b=>{var N;b.stopPropagation();const L=((N=t.fileName)==null?void 0:N.split("?")[0])||`generated_${t.id}.png`;A(t.id,{fileName:`${L}?t=${Date.now()}`})},className:"w-7 h-7 rounded-lg flex items-center justify-center bg-white/20 hover:bg-white/30 text-white transition-all",title:"Refresh Image",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),!n&&(r||t.src)&&c.jsx("button",{onClick:b=>{b.stopPropagation(),E()},className:"w-7 h-7 rounded-lg flex items-center justify-center bg-white/20 hover:bg-white/30 text-white transition-all",title:"Download Current Image",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),c.jsx("button",{onClick:b=>{b.stopPropagation(),e()},disabled:n,className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${n?"bg-white/30 cursor-not-allowed text-white/50":"bg-white hover:bg-white/90 text-black shadow-lg"}`,title:"Generate",children:n?c.jsx("div",{className:"w-3 h-3 border-2 border-white/50 border-t-white rounded-full animate-spin"}):c.jsx("svg",{className:"w-4 h-4 ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M8 5v14l11-7z"})})})]})]})}),t.generatedHistory&&t.generatedHistory.length>0&&!n&&c.jsx("div",{className:"absolute top-[calc(100%+8px)] left-0 right-0 z-50 pointer-events-auto bg-[#1a1a1a]/90 backdrop-blur-md rounded-xl p-2 border border-white/10 shadow-xl transition-opacity duration-300",children:c.jsx("div",{className:"grid grid-cols-4 gap-2",children:t.generatedHistory.map(b=>c.jsx(aU,{src:b.src,driveFileId:b.driveFileId,currentDriveFileId:t.driveFileId,onClick:()=>{b.driveFileId?A(t.id,{driveFileId:b.driveFileId,src:""}):A(t.id,{src:b.src||"",driveFileId:void 0})}},b.id))})}),!r&&!n&&c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[c.jsxs("div",{className:"text-white/60 flex flex-col items-center gap-2 select-none bg-black/40 backdrop-blur-sm rounded-lg px-6 py-4 border border-white/10",children:[c.jsx("svg",{className:"w-12 h-12 text-white/80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),c.jsx("span",{className:"text-xs font-medium tracking-wide",children:"Connect inputs & generate"})]}),c.jsx("div",{className:`absolute top-2 right-2 ${s==="pen"||s==="eraser"?"pointer-events-none":"pointer-events-auto"}`,children:c.jsx("button",{onClick:b=>{b.stopPropagation(),e()},className:"w-8 h-8 rounded-full flex items-center justify-center transition-all bg-white hover:bg-white/90 text-black shadow-lg",title:"Generate",children:c.jsx("svg",{className:"w-4 h-4 ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),n&&c.jsxs("div",{className:"absolute inset-0 bg-[#1a1a1a] flex flex-col justify-end p-6 z-20 pointer-events-none overflow-hidden rounded-xl",children:[c.jsx("style",{children:`
                        @keyframes border-flow {
                            0% { transform: rotate(0deg); }
                            100% { transform: rotate(360deg); }
                        }
                        `}),c.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[c.jsx("div",{className:"absolute -inset-[150%] opacity-100",style:{background:"conic-gradient(from 0deg, transparent 0deg, transparent 80deg, #10b981 120deg, transparent 180deg)",animation:"border-flow 3s linear infinite"}}),c.jsx("div",{className:"absolute inset-[2px] bg-[#1a1a1a] rounded-lg"})]}),c.jsxs("div",{className:"relative z-10 w-full flex justify-between items-end",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-gray-300 text-sm font-light tracking-wide opacity-90",children:"Generating image..."}),c.jsx("span",{className:"text-gray-500 text-xs font-mono",children:g(C)})]}),c.jsx("div",{className:"w-8 h-8 rounded-full bg-[#2a2a2a] flex items-center justify-center border border-gray-700 opacity-80",children:c.jsx("div",{className:"w-2.5 h-2.5 bg-gray-400 rounded-sm"})})]})]}),u&&c.jsx("div",{className:`absolute inset-0 bg-black/80 backdrop-blur-sm flex flex-col justify-center items-center z-30 p-4 ${s==="pen"||s==="eraser"?"pointer-events-none":"pointer-events-auto"}`,children:c.jsxs("div",{className:"bg-[#252525] border border-gray-600 rounded-lg p-4 w-full max-w-md",children:[c.jsxs("h3",{className:"text-white text-sm font-bold mb-2 flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"Gemini API Key"]}),c.jsxs("p",{className:"text-gray-400 text-xs mb-3",children:["Get free key: ",c.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 underline",children:"aistudio.google.com"})]}),c.jsx("input",{type:"password",value:f,onChange:b=>B(b.target.value),placeholder:"AIza...",className:"w-full bg-[#1e1e1e] text-white text-xs px-3 py-2 rounded border border-gray-700 focus:border-purple-500 outline-none mb-3",onPointerDown:b=>b.stopPropagation()}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:v,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white text-xs py-2 rounded font-medium",children:"Save"}),c.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white text-xs py-2 rounded font-medium",children:"Cancel"})]})]})})]})},cU=({item:t,onUpdate:e,onSocketMouseDown:A,onSocketMouseUp:n,onSocketMouseEnter:r,onSocketMouseLeave:s})=>{const[i,a]=x.useState(!1),o=x.useRef(null),[l,u]=x.useState(t.promptText||"");x.useEffect(()=>{i||u(t.promptText||"")},[t.promptText,i]),x.useEffect(()=>{i&&o.current&&(o.current.focus(),o.current.select())},[i]);const d=B=>{B.stopPropagation(),a(!0)},f=()=>{a(!1)};return c.jsxs("div",{className:"w-full h-full bg-[#1a1a1a] border border-gray-700 rounded-3xl flex flex-col overflow-visible shadow-xl relative",onDoubleClick:d,children:[c.jsx("div",{className:"absolute top-4 -right-12 w-12 h-12 flex items-center justify-center pointer-events-auto z-50",onMouseEnter:()=>r&&r(t.id,"text-output"),onMouseLeave:()=>s&&s(),children:c.jsxs("div",{className:"w-8 h-8 bg-[#1f2937] rounded-full border border-[#4b5563] flex items-center justify-center transform hover:scale-110 transition-transform cursor-crosshair shadow-lg relative group",title:"Text Output","data-handle-id":"text-output","data-node-id":t.id,onMouseDown:B=>A(t.id,"text-output",B),onMouseUp:()=>n(t.id,"text-output"),children:[c.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-emerald-500 opacity-80 animate-pulse"}),c.jsx("div",{className:"border-[1.5px] border-white rounded-[4px] w-4 h-4 flex items-center justify-center scale-90",children:c.jsx("span",{className:"text-white text-[10px] font-bold font-serif leading-none mt-[1px]",children:"T"})})]})}),c.jsx("div",{className:"h-8 bg-[#252525] border-b border-gray-700 flex items-center px-3 cursor-move rounded-t-3xl",children:c.jsxs("span",{className:"text-[10px] text-gray-400 font-medium",children:[" Text #",t.id.slice(-2)]})}),c.jsx("div",{className:"flex-grow p-3 flex flex-col",children:c.jsx("textarea",{ref:o,className:`w-full h-full bg-transparent text-gray-300 text-sm p-0 rounded resize-none focus:outline-none placeholder-gray-600 ${i?"cursor-text":"cursor-move pointer-events-none"}`,placeholder:"Double-click to edit...",value:l,onChange:B=>u(B.target.value),onMouseDown:B=>{i&&B.stopPropagation()},onKeyDown:B=>{i&&B.stopPropagation()},onKeyUp:B=>{i&&B.stopPropagation()},onBlur:()=>{f(),l!==t.promptText&&e(t.id,{promptText:l})},readOnly:!i})})]})},uU=({item:t,scale:e})=>{const A=Math.max(.5,1/e),n=10*A,r=32*A,s=16*A,i=6*A,a=3*A,o=4*A,l=8*A,[u,d]=x.useState(!1),[f,B]=x.useState(!1),[h,y]=x.useState(!1),[C,p]=x.useState(null),[g,v]=x.useState(0),E=3,S=x.useRef(!1),U=C||t.url,b=!!C&&!f;x.useEffect(()=>{B(!1),p(null),y(!1),d(!1)},[t.url,t.driveFileId]);const L=async(O=!1)=>{if(!(!t.driveFileId||h||S.current||C)){y(!0),console.log(`Loading video blob (AutoPlay: ${O}): ${t.id}`);try{const H=await Wn(t.driveFileId,!0,!0);H&&(console.log(`Video blob loaded for ${t.id}`),p(H),B(!1),O&&d(!0))}catch(H){console.error("Failed to load video blob:",H),B(!0)}finally{y(!1)}}},N=()=>{g>=E||(v(O=>O+1),p(null),B(!1),L(!0))},I=O=>{console.warn("Video playback error:",t.id,O.currentTarget.error),C&&(B(!0),d(!1))},q=O=>{O.stopPropagation(),b?d(!0):L(!0)};return c.jsxs("div",{className:"w-full h-full relative rounded-3xl overflow-hidden group",style:{backgroundColor:"#000"},children:[b?c.jsx("video",{className:"w-full h-full object-contain",src:U,loop:!0,muted:!1,playsInline:!0,controls:!0,controlsList:"nofullscreen",draggable:!1,onPlay:()=>d(!0),onPause:()=>d(!1),onError:I,ref:O=>{O&&(u&&O.paused?O.play().catch(()=>{d(!1)}):!u&&!O.paused&&O.pause())}},U):c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 text-white/50",children:[!h&&t.driveFileId&&c.jsx("img",{src:`https://drive.google.com/thumbnail?id=${t.driveFileId}&sz=w800`,alt:"Video Thumbnail",className:"absolute inset-0 w-full h-full object-contain opacity-75 transition-opacity duration-300",draggable:!1,referrerPolicy:"no-referrer",onError:O=>{console.warn(`Thumbnail failed for ${t.id}, falling back to blob...`),O.currentTarget.style.display="none",L(!1)}}),h?c.jsxs("div",{className:"flex flex-col items-center gap-2 z-10",children:[c.jsxs("svg",{className:"animate-spin h-5 w-5 text-current",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("span",{className:"text-xs font-medium drop-shadow-md text-white",children:"Loading video..."})]}):f?c.jsxs("div",{className:"flex flex-col items-center gap-2 text-center px-4 z-10",children:[c.jsx("span",{className:"text-xs text-red-400 font-medium drop-shadow-md",children:"Load Failed"}),c.jsx("button",{onClick:O=>{O.stopPropagation(),N()},className:"mt-1 px-2 py-1 bg-white/10 hover:bg-white/20 rounded text-[10px] backdrop-blur-sm",children:"Retry"})]}):c.jsx("div",{className:"flex items-center justify-center z-10"})]}),!u&&!h&&!f&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute bg-black/60 text-white font-bold z-10 backdrop-blur-md pointer-events-none transition-opacity duration-200 shadow-md flex items-center justify-center",style:{top:`${l}px`,left:`${l}px`,fontSize:`${n}px`,padding:`${a}px ${i}px`,borderRadius:`${o}px`},children:"VIDEO"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 pointer-events-none",children:c.jsx("div",{className:"bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center text-white backdrop-blur-sm cursor-pointer transition-transform transform hover:scale-105 pointer-events-auto shadow-2xl border-2 border-white/20",style:{width:`${r}px`,height:`${r}px`},onClick:q,children:c.jsx("svg",{style:{width:`${s}px`,height:`${s}px`,marginLeft:`${s*.1}px`},fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),u&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:c.jsx("div",{className:"bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center text-white backdrop-blur-sm cursor-pointer transition-transform transform hover:scale-105 pointer-events-auto shadow-2xl border-2 border-white/20",style:{width:`${r}px`,height:`${r}px`},onClick:O=>{O.stopPropagation(),d(!1)},children:c.jsx("svg",{style:{width:`${s}px`,height:`${s}px`},fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})})})})]})},dU=({item:t,isSelected:e,onSelect:A,onUpdate:n,onInteractionStart:r,onInteractionEnd:s,scale:i,activeTool:a,onSocketMouseDown:o,onSocketMouseUp:l,onSocketMouseEnter:u,onSocketMouseLeave:d,onGenerateNode:f,isGenerating:B,onContextMenu:h,onImageDoubleClick:y})=>{var Z,V;const[C,p]=x.useState(!1),[g,v]=x.useState(0),E=x.useRef(null),[S,U]=x.useState(null),[b,L]=x.useState(null),N=(V=(Z=t.generatedHistory)==null?void 0:Z[0])==null?void 0:V.timestamp;cA.useEffect(()=>{if(L(null),t.driveFileId){const W=t.type==="generation_node",z=t.type==="image"&&(!t.url||t.url.startsWith("blob:"));W||z?Wn(t.driveFileId,!0).then(Ae=>{U(Ae)}).catch(console.error):U(null)}else U(null)},[t.driveFileId,t.fileName,t.url,N,t.type]);const I=async()=>{if(t.driveFileId&&g<3){console.log(`Attempting to heal broken image: ${t.id}`),v(W=>W+1);try{const W=await Wn(t.driveFileId);L(W)}catch(W){console.error("Failed to heal image:",W)}}},q=b||S||t.url,O=()=>t.type==="image"?c.jsxs("div",{className:"relative w-full h-full pointer-events-auto",onDoubleClick:W=>{W.stopPropagation(),y&&y(t.id)},children:[c.jsx("img",{src:q,alt:"",className:"w-full h-full object-fill select-none pointer-events-none rounded-3xl shadow-sm",draggable:!1,onLoad:()=>p(!0),onError:I}),c.jsxs("div",{className:"absolute -left-12 top-4 w-8 h-8 bg-[#1f2937] rounded-full border border-[#4b5563] flex items-center justify-center transform hover:scale-110 transition-transform cursor-crosshair shadow-lg z-50 pointer-events-auto",title:"Image Input","data-handle-type":"target","data-handle-id":"image-input","data-node-id":t.id,onMouseDown:W=>o(t.id,"image-input",W),onMouseUp:W=>{W.stopPropagation(),l(t.id,"image-input")},onMouseEnter:()=>u&&u(t.id,"image-input"),onMouseLeave:()=>d&&d(),children:[c.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-indigo-900 opacity-60"}),c.jsx("svg",{className:"w-4 h-4 text-gray-300 transform scale-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})]}),c.jsxs("div",{className:"absolute -right-12 top-4 w-8 h-8 bg-[#1f2937] rounded-full border border-[#4b5563] flex items-center justify-center transform hover:scale-110 transition-transform cursor-crosshair shadow-lg z-50 pointer-events-auto",title:"Image Output","data-handle-type":"source","data-handle-id":"image-output","data-node-id":t.id,onMouseDown:W=>o(t.id,"image-output",W),onMouseUp:W=>{W.stopPropagation(),l(t.id,"image-output")},onMouseEnter:()=>u&&u(t.id,"image-output"),onMouseLeave:()=>d&&d(),children:[c.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-indigo-900 opacity-60"}),c.jsx("svg",{className:"w-4 h-4 text-gray-300 transform scale-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})]}):t.type==="generation_node"?c.jsx(lU,{item:t,onGenerate:()=>{console.log("Generate requested for:",t.id),f&&f(t.id),r&&r(t.id)},onUpdate:n,activeTool:a,driveImageUrl:S,isGenerating:B,onSocketMouseDown:o,onSocketMouseUp:l,onSocketMouseEnter:u,onSocketMouseLeave:d}):t.type==="video"?c.jsx(uU,{item:t,scale:i}):t.type==="prompt_node"?c.jsx(cU,{item:t,onUpdate:n,onSocketMouseDown:o,onSocketMouseUp:l,onSocketMouseEnter:u,onSocketMouseLeave:d}):null,H=()=>t.type==="image"||t.type==="generation_node"||t.type==="video"||t.type==="ad"||t.type==="prompt_node"||C?1:0,G=Math.min(5,Math.max(.4,1/i));return c.jsxs("div",{ref:E,className:`media-item-wrapper absolute type-${t.type} ${e?"selected":""}`,"data-item-id":t.id,style:{left:t.x,top:t.y,width:t.width,height:t.height,zIndex:t.type==="ad"?99999:e?1e4:t.zIndex,pointerEvents:"auto",opacity:H(),transition:"none",transform:t.type==="ad"?`scale(${1/i})`:`rotate(${t.rotation||0}deg) scaleX(${t.flipHorizontal?-1:1}) scaleY(${t.flipVertical?-1:1})`,transformOrigin:t.type==="ad"?"0 0":"center center",overflow:"visible"},onMouseDown:W=>{if(W.button===0){if(t.type==="video"&&W.target.tagName==="VIDEO"){r==null||r(t.id),A(t.id,W.shiftKey||!1);return}a==="select"&&A(t.id,W.shiftKey)}},onContextMenu:h,children:[O(),e&&c.jsxs("div",{className:"rotation-handle-container",style:{position:"absolute",bottom:-40*G,left:"50%",transform:"translateX(-50%)",display:"flex",flexDirection:"column",alignItems:"center",zIndex:10001,pointerEvents:"auto"},children:[c.jsx("div",{style:{width:2*G,height:20*G,background:"#3b82f6",opacity:.6}}),c.jsx("div",{className:"rotation-handle",style:{width:28*G,height:28*G,background:"#3b82f6",borderRadius:"50%",cursor:"grab",display:"flex",alignItems:"center",justifyContent:"center",border:`${2*G}px solid white`,boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},onMouseDown:W=>{W.stopPropagation(),r==null||r(t.id);const z=W.clientX,Ae=t.rotation||0,j=re=>{const ee=re.clientX-z,ue=(Ae-ee*.5+360)%360,ge=re.shiftKey?Math.round(ue/25)*25:ue;n(t.id,{rotation:ge})},te=()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",te),s==null||s(t.id)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",te)},children:c.jsx("svg",{width:16*G,height:16*G,viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"})})})]}),e&&t.type!=="ad"&&c.jsx(c.Fragment,{children:["tl","tr","bl","br"].map(W=>{const z=W.startsWith("t"),Ae=W.endsWith("l"),j={tl:180,tr:270,bl:90,br:0};return c.jsx("div",{className:`resize-handle handle-${W}`,style:{position:"absolute",top:z?-12*G:"auto",bottom:z?"auto":-12*G,left:Ae?-12*G:"auto",right:Ae?"auto":-12*G,width:40*G,height:40*G,cursor:z===Ae?"nwse-resize":"nesw-resize",zIndex:10002,pointerEvents:"auto",display:"flex",alignItems:z?"flex-start":"flex-end",justifyContent:Ae?"flex-start":"flex-end",padding:2*G,opacity:0,transition:"opacity 0.2s ease"},onMouseEnter:te=>te.currentTarget.style.opacity="1",onMouseLeave:te=>te.currentTarget.style.opacity="0",onMouseDown:te=>{te.stopPropagation(),te.preventDefault(),r==null||r(t.id);const re=te.clientX,ee=te.clientY,ue=t.width,ge=t.height,we=t.x,xe=t.y,qe=(t.rotation||0)*Math.PI/180,Ne=ue/ge,ct=pn=>{const ke=(pn.clientX-re)/i,Xe=(pn.clientY-ee)/i,Kt=ke*Math.cos(qe)+Xe*Math.sin(qe),vt=-ke*Math.sin(qe)+Xe*Math.cos(qe);let Ce=0,ze=0;W==="br"?(Ce=Kt,ze=vt):W==="bl"?(Ce=-Kt,ze=vt):W==="tr"?(Ce=Kt,ze=-vt):W==="tl"&&(Ce=-Kt,ze=-vt);const nA=t.type==="generation_node"?550:t.type==="prompt_node"?400:20,LA=t.type==="generation_node"?750:t.type==="prompt_node"?250:20;let hA=Math.max(nA,ue+Ce),He=Math.max(LA,ge+ze);Math.abs(Ce)>Math.abs(ze)?(He=hA/Ne,W==="tl"||W==="bl"?Ce=ue-hA:Ce=hA-ue,W==="tl"||W==="tr"?ze=ge-He:ze=He-ge):(hA=He*Ne,W==="tl"||W==="bl"?Ce=ue-hA:Ce=hA-ue,W==="tl"||W==="tr"?ze=ge-He:ze=He-ge);let Le=0,oe=0;W==="br"?(Le=Ce/2,oe=ze/2):W==="bl"?(Le=-Ce/2,oe=ze/2):W==="tr"?(Le=Ce/2,oe=-ze/2):W==="tl"&&(Le=-Ce/2,oe=-ze/2);const qA=Le*Math.cos(qe)-oe*Math.sin(qe),yr=Le*Math.sin(qe)+oe*Math.cos(qe),ZA=we+ue/2+qA-hA/2,EA=xe+ge/2+yr-He/2;n(t.id,{width:hA,height:He,x:ZA,y:EA})},gn=()=>{document.removeEventListener("mousemove",ct),document.removeEventListener("mouseup",gn),s==null||s(t.id)};document.addEventListener("mousemove",ct),document.addEventListener("mouseup",gn)},children:c.jsx("svg",{width:28*G,height:28*G,viewBox:"0 0 32 32",fill:"none",stroke:"white",strokeWidth:"3.5",strokeLinecap:"round",style:{filter:"drop-shadow(0 0 2px rgba(0,0,0,0.4))",opacity:.9,transform:`rotate(${j[W]}deg)`},children:c.jsx("path",{d:"M28 12 A 16 16 0 0 1 12 28"})})},W)})})]})},fU=(t,e)=>!(t.item.type==="video"&&e.item.type==="video"&&t.item.url!==e.item.url||t.item.id!==e.item.id||t.item.x!==e.item.x||t.item.y!==e.item.y||t.item.width!==e.item.width||t.item.height!==e.item.height||t.item.rotation!==e.item.rotation||t.item.flipHorizontal!==e.item.flipHorizontal||t.item.flipVertical!==e.item.flipVertical||t.item.zIndex!==e.item.zIndex||t.isSelected!==e.isSelected||t.scale!==e.scale||t.activeTool!==e.activeTool||t.item.type==="image"&&e.item.type==="image"&&t.item.url!==e.item.url||t.item.type==="generation_node"&&e.item.type==="generation_node"&&t.item.driveFileId!==e.item.driveFileId),cE=x.memo(dU,fU);cE.displayName="MediaItem";var Rd={exports:{}},uE={},dE={exports:{}},hU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gU=hU,pU=gU;function fE(){}function hE(){}hE.resetWarningCache=fE;var mU=function(){function t(n,r,s,i,a,o){if(o!==pU){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var A={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:hE,resetWarningCache:fE};return A.PropTypes=A,A};dE.exports=mU();var gE=dE.exports;function pE(t){var e,A,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(A=pE(t[e]))&&(n&&(n+=" "),n+=A);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function wy(){for(var t,e,A=0,n="";A<arguments.length;)(t=arguments[A++])&&(e=pE(t))&&(n&&(n+=" "),n+=e);return n}const wU=Object.freeze(Object.defineProperty({__proto__:null,clsx:wy,default:wy},Symbol.toStringTag,{value:"Module"})),yU=Cb(wU);var St={},hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.dontSetMe=EU;hr.findInArray=BU;hr.int=xU;hr.isFunction=vU;hr.isNum=CU;function BU(t,e){for(let A=0,n=t.length;A<n;A++)if(e.apply(e,[t[A],A,t]))return t[A]}function vU(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function CU(t){return typeof t=="number"&&!isNaN(t)}function xU(t){return parseInt(t,10)}function EU(t,e,A){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(A," - do not set this, set it on the child."))}var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.browserPrefixToKey=wE;Ci.browserPrefixToStyle=FU;Ci.default=void 0;Ci.getPrefix=mE;const Yf=["Moz","Webkit","O","ms"];function mE(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const A=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!A||e in A)return"";for(let n=0;n<Yf.length;n++)if(wE(e,Yf[n])in A)return Yf[n];return""}function wE(t,e){return e?"".concat(e).concat(_U(t)):t}function FU(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function _U(t){let e="",A=!0;for(let n=0;n<t.length;n++)A?(e+=t[n].toUpperCase(),A=!1):t[n]==="-"?A=!0:e+=t[n];return e}Ci.default=mE();Object.defineProperty(St,"__esModule",{value:!0});St.addClassName=vE;St.addEvent=QU;St.addUserSelectStyles=MU;St.createCSSTransform=LU;St.createSVGTransform=HU;St.getTouch=RU;St.getTouchIdentifier=PU;St.getTranslation=Qm;St.innerHeight=NU;St.innerWidth=kU;St.matchesSelector=BE;St.matchesSelectorAndParentsTo=IU;St.offsetXYFromParent=DU;St.outerHeight=SU;St.outerWidth=TU;St.removeClassName=CE;St.removeEvent=UU;St.removeUserSelectStyles=OU;var un=hr,yy=bU(Ci);function yE(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,A=new WeakMap;return(yE=function(n){return n?A:e})(t)}function bU(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var A=yE(e);if(A&&A.has(t))return A.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var i=r?Object.getOwnPropertyDescriptor(t,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=t[s]}return n.default=t,A&&A.set(t,n),n}let gc="";function BE(t,e){return gc||(gc=(0,un.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(A){return(0,un.isFunction)(t[A])})),(0,un.isFunction)(t[gc])?t[gc](e):!1}function IU(t,e,A){let n=t;do{if(BE(n,e))return!0;if(n===A)return!1;n=n.parentNode}while(n);return!1}function QU(t,e,A,n){if(!t)return;const r={capture:!0,...n};t.addEventListener?t.addEventListener(e,A,r):t.attachEvent?t.attachEvent("on"+e,A):t["on"+e]=A}function UU(t,e,A,n){if(!t)return;const r={capture:!0,...n};t.removeEventListener?t.removeEventListener(e,A,r):t.detachEvent?t.detachEvent("on"+e,A):t["on"+e]=null}function SU(t){let e=t.clientHeight;const A=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,un.int)(A.borderTopWidth),e+=(0,un.int)(A.borderBottomWidth),e}function TU(t){let e=t.clientWidth;const A=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,un.int)(A.borderLeftWidth),e+=(0,un.int)(A.borderRightWidth),e}function NU(t){let e=t.clientHeight;const A=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,un.int)(A.paddingTop),e-=(0,un.int)(A.paddingBottom),e}function kU(t){let e=t.clientWidth;const A=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,un.int)(A.paddingLeft),e-=(0,un.int)(A.paddingRight),e}function DU(t,e,A){const r=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),s=(t.clientX+e.scrollLeft-r.left)/A,i=(t.clientY+e.scrollTop-r.top)/A;return{x:s,y:i}}function LU(t,e){const A=Qm(t,e,"px");return{[(0,yy.browserPrefixToKey)("transform",yy.default)]:A}}function HU(t,e){return Qm(t,e,"")}function Qm(t,e,A){let{x:n,y:r}=t,s="translate(".concat(n).concat(A,",").concat(r).concat(A,")");if(e){const i="".concat(typeof e.x=="string"?e.x:e.x+A),a="".concat(typeof e.y=="string"?e.y:e.y+A);s="translate(".concat(i,", ").concat(a,")")+s}return s}function RU(t,e){return t.targetTouches&&(0,un.findInArray)(t.targetTouches,A=>e===A.identifier)||t.changedTouches&&(0,un.findInArray)(t.changedTouches,A=>e===A.identifier)}function PU(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function MU(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&vE(t.body,"react-draggable-transparent-selection")}function OU(t){if(t)try{if(t.body&&CE(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function vE(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function CE(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var gr={};Object.defineProperty(gr,"__esModule",{value:!0});gr.canDragX=WU;gr.canDragY=zU;gr.createCoreData=VU;gr.createDraggableData=$U;gr.getBoundPosition=KU;gr.getControlPosition=GU;gr.snapToGrid=jU;var sn=hr,eo=St;function KU(t,e,A){if(!t.props.bounds)return[e,A];let{bounds:n}=t.props;n=typeof n=="string"?n:XU(n);const r=Um(t);if(typeof n=="string"){const{ownerDocument:s}=r,i=s.defaultView;let a;if(n==="parent"?a=r.parentNode:a=s.querySelector(n),!(a instanceof i.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const o=a,l=i.getComputedStyle(r),u=i.getComputedStyle(o);n={left:-r.offsetLeft+(0,sn.int)(u.paddingLeft)+(0,sn.int)(l.marginLeft),top:-r.offsetTop+(0,sn.int)(u.paddingTop)+(0,sn.int)(l.marginTop),right:(0,eo.innerWidth)(o)-(0,eo.outerWidth)(r)-r.offsetLeft+(0,sn.int)(u.paddingRight)-(0,sn.int)(l.marginRight),bottom:(0,eo.innerHeight)(o)-(0,eo.outerHeight)(r)-r.offsetTop+(0,sn.int)(u.paddingBottom)-(0,sn.int)(l.marginBottom)}}return(0,sn.isNum)(n.right)&&(e=Math.min(e,n.right)),(0,sn.isNum)(n.bottom)&&(A=Math.min(A,n.bottom)),(0,sn.isNum)(n.left)&&(e=Math.max(e,n.left)),(0,sn.isNum)(n.top)&&(A=Math.max(A,n.top)),[e,A]}function jU(t,e,A){const n=Math.round(e/t[0])*t[0],r=Math.round(A/t[1])*t[1];return[n,r]}function WU(t){return t.props.axis==="both"||t.props.axis==="x"}function zU(t){return t.props.axis==="both"||t.props.axis==="y"}function GU(t,e,A){const n=typeof e=="number"?(0,eo.getTouch)(t,e):null;if(typeof e=="number"&&!n)return null;const r=Um(A),s=A.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,eo.offsetXYFromParent)(n||t,s,A.props.scale)}function VU(t,e,A){const n=!(0,sn.isNum)(t.lastX),r=Um(t);return n?{node:r,deltaX:0,deltaY:0,lastX:e,lastY:A,x:e,y:A}:{node:r,deltaX:e-t.lastX,deltaY:A-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:A}}function $U(t,e){const A=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/A,y:t.state.y+e.deltaY/A,deltaX:e.deltaX/A,deltaY:e.deltaY/A,lastX:t.state.x,lastY:t.state.y}}function XU(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function Um(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var Pd={},Md={};Object.defineProperty(Md,"__esModule",{value:!0});Md.default=YU;function YU(){}Object.defineProperty(Pd,"__esModule",{value:!0});Pd.default=void 0;var Jf=qU(x),KA=Sm(gE),JU=Sm(Ps),yA=St,Yr=gr,qf=hr,la=Sm(Md);function Sm(t){return t&&t.__esModule?t:{default:t}}function xE(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,A=new WeakMap;return(xE=function(n){return n?A:e})(t)}function qU(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var A=xE(e);if(A&&A.has(t))return A.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var i=r?Object.getOwnPropertyDescriptor(t,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=t[s]}return n.default=t,A&&A.set(t,n),n}function _A(t,e,A){return e=ZU(e),e in t?Object.defineProperty(t,e,{value:A,enumerable:!0,configurable:!0,writable:!0}):t[e]=A,t}function ZU(t){var e=eS(t,"string");return typeof e=="symbol"?e:String(e)}function eS(t,e){if(typeof t!="object"||t===null)return t;var A=t[Symbol.toPrimitive];if(A!==void 0){var n=A.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Rn={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Jr=Rn.mouse,Od=class extends Jf.Component{constructor(){super(...arguments),_A(this,"dragging",!1),_A(this,"lastX",NaN),_A(this,"lastY",NaN),_A(this,"touchIdentifier",null),_A(this,"mounted",!1),_A(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const A=this.findDOMNode();if(!A||!A.ownerDocument||!A.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=A;if(this.props.disabled||!(e.target instanceof n.defaultView.Node)||this.props.handle&&!(0,yA.matchesSelectorAndParentsTo)(e.target,this.props.handle,A)||this.props.cancel&&(0,yA.matchesSelectorAndParentsTo)(e.target,this.props.cancel,A))return;e.type==="touchstart"&&e.preventDefault();const r=(0,yA.getTouchIdentifier)(e);this.touchIdentifier=r;const s=(0,Yr.getControlPosition)(e,r,this);if(s==null)return;const{x:i,y:a}=s,o=(0,Yr.createCoreData)(this,i,a);(0,la.default)("DraggableCore: handleDragStart: %j",o),(0,la.default)("calling",this.props.onStart),!(this.props.onStart(e,o)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,yA.addUserSelectStyles)(n),this.dragging=!0,this.lastX=i,this.lastY=a,(0,yA.addEvent)(n,Jr.move,this.handleDrag),(0,yA.addEvent)(n,Jr.stop,this.handleDragStop))}),_A(this,"handleDrag",e=>{const A=(0,Yr.getControlPosition)(e,this.touchIdentifier,this);if(A==null)return;let{x:n,y:r}=A;if(Array.isArray(this.props.grid)){let a=n-this.lastX,o=r-this.lastY;if([a,o]=(0,Yr.snapToGrid)(this.props.grid,a,o),!a&&!o)return;n=this.lastX+a,r=this.lastY+o}const s=(0,Yr.createCoreData)(this,n,r);if((0,la.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(e,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const o=document.createEvent("MouseEvents");o.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(o)}return}this.lastX=n,this.lastY=r}),_A(this,"handleDragStop",e=>{if(!this.dragging)return;const A=(0,Yr.getControlPosition)(e,this.touchIdentifier,this);if(A==null)return;let{x:n,y:r}=A;if(Array.isArray(this.props.grid)){let o=n-this.lastX||0,l=r-this.lastY||0;[o,l]=(0,Yr.snapToGrid)(this.props.grid,o,l),n=this.lastX+o,r=this.lastY+l}const s=(0,Yr.createCoreData)(this,n,r);if(this.props.onStop(e,s)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,yA.removeUserSelectStyles)(a.ownerDocument),(0,la.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,la.default)("DraggableCore: Removing handlers"),(0,yA.removeEvent)(a.ownerDocument,Jr.move,this.handleDrag),(0,yA.removeEvent)(a.ownerDocument,Jr.stop,this.handleDragStop))}),_A(this,"onMouseDown",e=>(Jr=Rn.mouse,this.handleDragStart(e))),_A(this,"onMouseUp",e=>(Jr=Rn.mouse,this.handleDragStop(e))),_A(this,"onTouchStart",e=>(Jr=Rn.touch,this.handleDragStart(e))),_A(this,"onTouchEnd",e=>(Jr=Rn.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,yA.addEvent)(e,Rn.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:A}=e;(0,yA.removeEvent)(A,Rn.mouse.move,this.handleDrag),(0,yA.removeEvent)(A,Rn.touch.move,this.handleDrag),(0,yA.removeEvent)(A,Rn.mouse.stop,this.handleDragStop),(0,yA.removeEvent)(A,Rn.touch.stop,this.handleDragStop),(0,yA.removeEvent)(e,Rn.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,yA.removeUserSelectStyles)(A)}}findDOMNode(){var e,A;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(A=this.props)===null||A===void 0||(A=A.nodeRef)===null||A===void 0?void 0:A.current:JU.default.findDOMNode(this)}render(){return Jf.cloneElement(Jf.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Pd.default=Od;_A(Od,"displayName","DraggableCore");_A(Od,"propTypes",{allowAnyClick:KA.default.bool,children:KA.default.node.isRequired,disabled:KA.default.bool,enableUserSelectHack:KA.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:KA.default.arrayOf(KA.default.number),handle:KA.default.string,cancel:KA.default.string,nodeRef:KA.default.object,onStart:KA.default.func,onDrag:KA.default.func,onStop:KA.default.func,onMouseDown:KA.default.func,scale:KA.default.number,className:qf.dontSetMe,style:qf.dontSetMe,transform:qf.dontSetMe});_A(Od,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return o.default}}),t.default=void 0;var e=f(x),A=u(gE),n=u(Ps),r=u(yU),s=St,i=gr,a=hr,o=u(Pd),l=u(Md);function u(g){return g&&g.__esModule?g:{default:g}}function d(g){if(typeof WeakMap!="function")return null;var v=new WeakMap,E=new WeakMap;return(d=function(S){return S?E:v})(g)}function f(g,v){if(g&&g.__esModule)return g;if(g===null||typeof g!="object"&&typeof g!="function")return{default:g};var E=d(v);if(E&&E.has(g))return E.get(g);var S={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in g)if(b!=="default"&&Object.prototype.hasOwnProperty.call(g,b)){var L=U?Object.getOwnPropertyDescriptor(g,b):null;L&&(L.get||L.set)?Object.defineProperty(S,b,L):S[b]=g[b]}return S.default=g,E&&E.set(g,S),S}function B(){return B=Object.assign?Object.assign.bind():function(g){for(var v=1;v<arguments.length;v++){var E=arguments[v];for(var S in E)Object.prototype.hasOwnProperty.call(E,S)&&(g[S]=E[S])}return g},B.apply(this,arguments)}function h(g,v,E){return v=y(v),v in g?Object.defineProperty(g,v,{value:E,enumerable:!0,configurable:!0,writable:!0}):g[v]=E,g}function y(g){var v=C(g,"string");return typeof v=="symbol"?v:String(v)}function C(g,v){if(typeof g!="object"||g===null)return g;var E=g[Symbol.toPrimitive];if(E!==void 0){var S=E.call(g,v);if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(g)}class p extends e.Component{static getDerivedStateFromProps(v,E){let{position:S}=v,{prevPropsPosition:U}=E;return S&&(!U||S.x!==U.x||S.y!==U.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:S,prevPropsPosition:U}),{x:S.x,y:S.y,prevPropsPosition:{...S}}):null}constructor(v){super(v),h(this,"onDragStart",(E,S)=>{if((0,l.default)("Draggable: onDragStart: %j",S),this.props.onStart(E,(0,i.createDraggableData)(this,S))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),h(this,"onDrag",(E,S)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",S);const U=(0,i.createDraggableData)(this,S),b={x:U.x,y:U.y,slackX:0,slackY:0};if(this.props.bounds){const{x:N,y:I}=b;b.x+=this.state.slackX,b.y+=this.state.slackY;const[q,O]=(0,i.getBoundPosition)(this,b.x,b.y);b.x=q,b.y=O,b.slackX=this.state.slackX+(N-b.x),b.slackY=this.state.slackY+(I-b.y),U.x=b.x,U.y=b.y,U.deltaX=b.x-this.state.x,U.deltaY=b.y-this.state.y}if(this.props.onDrag(E,U)===!1)return!1;this.setState(b)}),h(this,"onDragStop",(E,S)=>{if(!this.state.dragging||this.props.onStop(E,(0,i.createDraggableData)(this,S))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",S);const b={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:N,y:I}=this.props.position;b.x=N,b.y=I}this.setState(b)}),this.state={dragging:!1,dragged:!1,x:v.position?v.position.x:v.defaultPosition.x,y:v.position?v.position.y:v.defaultPosition.y,prevPropsPosition:{...v.position},slackX:0,slackY:0,isElementSVG:!1},v.position&&!(v.onDrag||v.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var v,E;return(v=(E=this.props)===null||E===void 0||(E=E.nodeRef)===null||E===void 0?void 0:E.current)!==null&&v!==void 0?v:n.default.findDOMNode(this)}render(){const{axis:v,bounds:E,children:S,defaultPosition:U,defaultClassName:b,defaultClassNameDragging:L,defaultClassNameDragged:N,position:I,positionOffset:q,scale:O,...H}=this.props;let G={},Z=null;const W=!!!I||this.state.dragging,z=I||U,Ae={x:(0,i.canDragX)(this)&&W?this.state.x:z.x,y:(0,i.canDragY)(this)&&W?this.state.y:z.y};this.state.isElementSVG?Z=(0,s.createSVGTransform)(Ae,q):G=(0,s.createCSSTransform)(Ae,q);const j=(0,r.default)(S.props.className||"",b,{[L]:this.state.dragging,[N]:this.state.dragged});return e.createElement(o.default,B({},H,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(S),{className:j,style:{...S.props.style,...G},transform:Z}))}}t.default=p,h(p,"displayName","Draggable"),h(p,"propTypes",{...o.default.propTypes,axis:A.default.oneOf(["both","x","y","none"]),bounds:A.default.oneOfType([A.default.shape({left:A.default.number,right:A.default.number,top:A.default.number,bottom:A.default.number}),A.default.string,A.default.oneOf([!1])]),defaultClassName:A.default.string,defaultClassNameDragging:A.default.string,defaultClassNameDragged:A.default.string,defaultPosition:A.default.shape({x:A.default.number,y:A.default.number}),positionOffset:A.default.shape({x:A.default.oneOfType([A.default.number,A.default.string]),y:A.default.oneOfType([A.default.number,A.default.string])}),position:A.default.shape({x:A.default.number,y:A.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),h(p,"defaultProps",{...o.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(uE);const{default:EE,DraggableCore:tS}=uE;Rd.exports=EE;Rd.exports.default=EE;Rd.exports.DraggableCore=tS;var AS=Rd.exports;const nS=Rv(AS);var Rt=function(){return Rt=Object.assign||function(t){for(var e,A=1,n=arguments.length;A<n;A++){e=arguments[A];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Rt.apply(this,arguments)},By={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},vy={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},pc={width:"20px",height:"20px",position:"absolute",zIndex:1},rS={top:Rt(Rt({},By),{top:"-5px"}),right:Rt(Rt({},vy),{left:void 0,right:"-5px"}),bottom:Rt(Rt({},By),{top:void 0,bottom:"-5px"}),left:Rt(Rt({},vy),{left:"-5px"}),topRight:Rt(Rt({},pc),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Rt(Rt({},pc),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Rt(Rt({},pc),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Rt(Rt({},pc),{left:"-10px",top:"-10px",cursor:"nw-resize"})},sS=x.memo(function(t){var e=t.onResizeStart,A=t.direction,n=t.children,r=t.replaceStyles,s=t.className,i=x.useCallback(function(l){e(l,A)},[e,A]),a=x.useCallback(function(l){e(l,A)},[e,A]),o=x.useMemo(function(){return Rt(Rt({position:"absolute",userSelect:"none"},rS[A]),r??{})},[r,A]);return c.jsx("div",{className:s||void 0,style:o,onMouseDown:i,onTouchStart:a,children:n})}),iS=function(){var t=function(e,A){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},t(e,A)};return function(e,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");t(e,A);function n(){this.constructor=e}e.prototype=A===null?Object.create(A):(n.prototype=A.prototype,new n)}}(),ir=function(){return ir=Object.assign||function(t){for(var e,A=1,n=arguments.length;A<n;A++){e=arguments[A];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ir.apply(this,arguments)},oS={width:"auto",height:"auto"},mc=function(t,e,A){return Math.max(Math.min(t,A),e)},Cy=function(t,e,A){var n=Math.round(t/e);return n*e+A*(n-1)},Si=function(t,e){return new RegExp(t,"i").test(e)},wc=function(t){return!!(t.touches&&t.touches.length)},aS=function(t){return!!((t.clientX||t.clientX===0)&&(t.clientY||t.clientY===0))},xy=function(t,e,A){A===void 0&&(A=0);var n=e.reduce(function(s,i,a){return Math.abs(i-t)<Math.abs(e[s]-t)?a:s},0),r=Math.abs(e[n]-t);return A===0||r<A?e[n]:t},Zf=function(t){return t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:"".concat(t,"px")},yc=function(t,e,A,n){if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var r=Number(t.replace("%",""))/100;return e*r}if(t.endsWith("vw")){var r=Number(t.replace("vw",""))/100;return A*r}if(t.endsWith("vh")){var r=Number(t.replace("vh",""))/100;return n*r}}return t},lS=function(t,e,A,n,r,s,i){return n=yc(n,t.width,e,A),r=yc(r,t.height,e,A),s=yc(s,t.width,e,A),i=yc(i,t.height,e,A),{maxWidth:typeof n>"u"?void 0:Number(n),maxHeight:typeof r>"u"?void 0:Number(r),minWidth:typeof s>"u"?void 0:Number(s),minHeight:typeof i>"u"?void 0:Number(i)}},cS=function(t){return Array.isArray(t)?t:[t,t]},uS=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Ey="__resizable_base__",dS=function(t){iS(e,t);function e(A){var n,r,s,i,a=t.call(this,A)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.delta={width:0,height:0},a.appendBase=function(){if(!a.resizable||!a.window)return null;var o=a.parentNode;if(!o)return null;var l=a.window.document.createElement("div");return l.style.width="100%",l.style.height="100%",l.style.position="absolute",l.style.transform="scale(0, 0)",l.style.left="0",l.style.flex="0 0 100%",l.classList?l.classList.add(Ey):l.className+=Ey,o.appendChild(l),l},a.removeBase=function(o){var l=a.parentNode;l&&l.removeChild(o)},a.state={isResizing:!1,width:(r=(n=a.propsSize)===null||n===void 0?void 0:n.width)!==null&&r!==void 0?r:"auto",height:(i=(s=a.propsSize)===null||s===void 0?void 0:s.height)!==null&&i!==void 0?i:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||oS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var A=0,n=0;if(this.resizable&&this.window){var r=this.resizable.offsetWidth,s=this.resizable.offsetHeight,i=this.resizable.style.position;i!=="relative"&&(this.resizable.style.position="relative"),A=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:r,n=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:s,this.resizable.style.position=i}return{width:A,height:n}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var A=this,n=this.props.size,r=function(a){var o;if(typeof A.state[a]>"u"||A.state[a]==="auto")return"auto";if(A.propsSize&&A.propsSize[a]&&(!((o=A.propsSize[a])===null||o===void 0)&&o.toString().endsWith("%"))){if(A.state[a].toString().endsWith("%"))return A.state[a].toString();var l=A.getParentSize(),u=Number(A.state[a].toString().replace("px","")),d=u/l[a]*100;return"".concat(d,"%")}return Zf(A.state[a])},s=n&&typeof n.width<"u"&&!this.state.isResizing?Zf(n.width):r("width"),i=n&&typeof n.height<"u"&&!this.state.isResizing?Zf(n.height):r("height");return{width:s,height:i}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var A=this.appendBase();if(!A)return{width:0,height:0};var n=!1,r=this.parentNode.style.flexWrap;r!=="wrap"&&(n=!0,this.parentNode.style.flexWrap="wrap"),A.style.position="relative",A.style.minWidth="100%",A.style.minHeight="100%";var s={width:A.offsetWidth,height:A.offsetHeight};return n&&(this.parentNode.style.flexWrap=r),this.removeBase(A),s},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var A=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:A.flexBasis!=="auto"?A.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(A,n){var r=this.propsSize&&this.propsSize[n];return this.state[n]==="auto"&&this.state.original[n]===A&&(typeof r>"u"||r==="auto")?"auto":A},e.prototype.calculateNewMaxFromBoundary=function(A,n){var r=this.props.boundsByDirection,s=this.state.direction,i=r&&Si("left",s),a=r&&Si("top",s),o,l;if(this.props.bounds==="parent"){var u=this.parentNode;u&&(o=i?this.resizableRight-this.parentLeft:u.offsetWidth+(this.parentLeft-this.resizableLeft),l=a?this.resizableBottom-this.parentTop:u.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(o=i?this.resizableRight:this.window.innerWidth-this.resizableLeft,l=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(o=i?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),l=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return o&&Number.isFinite(o)&&(A=A&&A<o?A:o),l&&Number.isFinite(l)&&(n=n&&n<l?n:l),{maxWidth:A,maxHeight:n}},e.prototype.calculateNewSizeFromDirection=function(A,n){var r=this.props.scale||1,s=cS(this.props.resizeRatio||1),i=s[0],a=s[1],o=this.state,l=o.direction,u=o.original,d=this.props,f=d.lockAspectRatio,B=d.lockAspectRatioExtraHeight,h=d.lockAspectRatioExtraWidth,y=u.width,C=u.height,p=B||0,g=h||0;return Si("right",l)&&(y=u.width+(A-u.x)*i/r,f&&(C=(y-g)/this.ratio+p)),Si("left",l)&&(y=u.width-(A-u.x)*i/r,f&&(C=(y-g)/this.ratio+p)),Si("bottom",l)&&(C=u.height+(n-u.y)*a/r,f&&(y=(C-p)*this.ratio+g)),Si("top",l)&&(C=u.height-(n-u.y)*a/r,f&&(y=(C-p)*this.ratio+g)),{newWidth:y,newHeight:C}},e.prototype.calculateNewSizeFromAspectRatio=function(A,n,r,s){var i=this.props,a=i.lockAspectRatio,o=i.lockAspectRatioExtraHeight,l=i.lockAspectRatioExtraWidth,u=typeof s.width>"u"?10:s.width,d=typeof r.width>"u"||r.width<0?A:r.width,f=typeof s.height>"u"?10:s.height,B=typeof r.height>"u"||r.height<0?n:r.height,h=o||0,y=l||0;if(a){var C=(f-h)*this.ratio+y,p=(B-h)*this.ratio+y,g=(u-y)/this.ratio+h,v=(d-y)/this.ratio+h,E=Math.max(u,C),S=Math.min(d,p),U=Math.max(f,g),b=Math.min(B,v);A=mc(A,E,S),n=mc(n,U,b)}else A=mc(A,u,d),n=mc(n,f,B);return{newWidth:A,newHeight:n}},e.prototype.setBoundingClientRect=function(){var A=1/(this.props.scale||1);if(this.props.bounds==="parent"){var n=this.parentNode;if(n){var r=n.getBoundingClientRect();this.parentLeft=r.left*A,this.parentTop=r.top*A}}if(this.props.bounds&&typeof this.props.bounds!="string"){var s=this.props.bounds.getBoundingClientRect();this.targetLeft=s.left*A,this.targetTop=s.top*A}if(this.resizable){var i=this.resizable.getBoundingClientRect(),a=i.left,o=i.top,l=i.right,u=i.bottom;this.resizableLeft=a*A,this.resizableRight=l*A,this.resizableTop=o*A,this.resizableBottom=u*A}},e.prototype.onResizeStart=function(A,n){if(!(!this.resizable||!this.window)){var r=0,s=0;if(A.nativeEvent&&aS(A.nativeEvent)?(r=A.nativeEvent.clientX,s=A.nativeEvent.clientY):A.nativeEvent&&wc(A.nativeEvent)&&(r=A.nativeEvent.touches[0].clientX,s=A.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var i=this.props.onResizeStart(A,n,this.resizable);if(i===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var a,o=this.window.getComputedStyle(this.resizable);if(o.flexBasis!=="auto"){var l=this.parentNode;if(l){var u=this.window.getComputedStyle(l).flexDirection;this.flexDir=u.startsWith("row")?"row":"column",a=o.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var d={original:{x:r,y:s,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:ir(ir({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(A.target).cursor||"auto"}),direction:n,flexBasis:a};this.setState(d)}},e.prototype.onMouseMove=function(A){var n=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&wc(A))try{A.preventDefault(),A.stopPropagation()}catch{}var r=this.props,s=r.maxWidth,i=r.maxHeight,a=r.minWidth,o=r.minHeight,l=wc(A)?A.touches[0].clientX:A.clientX,u=wc(A)?A.touches[0].clientY:A.clientY,d=this.state,f=d.direction,B=d.original,h=d.width,y=d.height,C=this.getParentSize(),p=lS(C,this.window.innerWidth,this.window.innerHeight,s,i,a,o);s=p.maxWidth,i=p.maxHeight,a=p.minWidth,o=p.minHeight;var g=this.calculateNewSizeFromDirection(l,u),v=g.newHeight,E=g.newWidth,S=this.calculateNewMaxFromBoundary(s,i);this.props.snap&&this.props.snap.x&&(E=xy(E,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(v=xy(v,this.props.snap.y,this.props.snapGap));var U=this.calculateNewSizeFromAspectRatio(E,v,{width:S.maxWidth,height:S.maxHeight},{width:a,height:o});if(E=U.newWidth,v=U.newHeight,this.props.grid){var b=Cy(E,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),L=Cy(v,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),N=this.props.snapGap||0,I=N===0||Math.abs(b-E)<=N?b:E,q=N===0||Math.abs(L-v)<=N?L:v;E=I,v=q}var O={width:E-B.width,height:v-B.height};if(this.delta=O,h&&typeof h=="string"){if(h.endsWith("%")){var H=E/C.width*100;E="".concat(H,"%")}else if(h.endsWith("vw")){var G=E/this.window.innerWidth*100;E="".concat(G,"vw")}else if(h.endsWith("vh")){var Z=E/this.window.innerHeight*100;E="".concat(Z,"vh")}}if(y&&typeof y=="string"){if(y.endsWith("%")){var H=v/C.height*100;v="".concat(H,"%")}else if(y.endsWith("vw")){var G=v/this.window.innerWidth*100;v="".concat(G,"vw")}else if(y.endsWith("vh")){var Z=v/this.window.innerHeight*100;v="".concat(Z,"vh")}}var V={width:this.createSizeForCssProperty(E,"width"),height:this.createSizeForCssProperty(v,"height")};this.flexDir==="row"?V.flexBasis=V.width:this.flexDir==="column"&&(V.flexBasis=V.height);var W=this.state.width!==V.width,z=this.state.height!==V.height,Ae=this.state.flexBasis!==V.flexBasis,j=W||z||Ae;j&&Ps.flushSync(function(){n.setState(V)}),this.props.onResize&&j&&this.props.onResize(A,f,this.resizable,O)}},e.prototype.onMouseUp=function(A){var n,r,s=this.state,i=s.isResizing,a=s.direction;s.original,!(!i||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(A,a,this.resizable,this.delta),this.props.size&&this.setState({width:(n=this.props.size.width)!==null&&n!==void 0?n:"auto",height:(r=this.props.size.height)!==null&&r!==void 0?r:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:ir(ir({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(A){var n,r;this.setState({width:(n=A.width)!==null&&n!==void 0?n:"auto",height:(r=A.height)!==null&&r!==void 0?r:"auto"})},e.prototype.renderResizer=function(){var A=this,n=this.props,r=n.enable,s=n.handleStyles,i=n.handleClasses,a=n.handleWrapperStyle,o=n.handleWrapperClass,l=n.handleComponent;if(!r)return null;var u=Object.keys(r).map(function(d){return r[d]!==!1?c.jsx(sS,{direction:d,onResizeStart:A.onResizeStart,replaceStyles:s&&s[d],className:i&&i[d],children:l&&l[d]?l[d]:null},d):null});return c.jsx("div",{className:o,style:a,children:u})},e.prototype.render=function(){var A=this,n=Object.keys(this.props).reduce(function(i,a){return uS.indexOf(a)!==-1||(i[a]=A.props[a]),i},{}),r=ir(ir(ir({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(r.flexBasis=this.state.flexBasis);var s=this.props.as||"div";return c.jsxs(s,ir({style:r,className:this.props.className},n,{ref:function(i){i&&(A.resizable=i)},children:[this.state.isResizing&&c.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(x.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Dg=function(t,e){return Dg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,n){A.__proto__=n}||function(A,n){for(var r in n)n.hasOwnProperty(r)&&(A[r]=n[r])},Dg(t,e)};function fS(t,e){Dg(t,e);function A(){this.constructor=t}t.prototype=e===null?Object.create(e):(A.prototype=e.prototype,new A)}var Wt=function(){return Wt=Object.assign||function(e){for(var A,n=1,r=arguments.length;n<r;n++){A=arguments[n];for(var s in A)Object.prototype.hasOwnProperty.call(A,s)&&(e[s]=A[s])}return e},Wt.apply(this,arguments)};function hS(t,e){var A={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(A[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(A[n[r]]=t[n[r]]);return A}var gS={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},pS=function(t){return{bottom:t,bottomLeft:t,bottomRight:t,left:t,right:t,top:t,topLeft:t,topRight:t}},mS=function(t){fS(e,t);function e(A){var n=t.call(this,A)||this;return n.resizingPosition={x:0,y:0},n.offsetFromParent={left:0,top:0},n.resizableElement={current:null},n.originalPosition={x:0,y:0},n.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:A.maxWidth,maxHeight:A.maxHeight},n.onResizeStart=n.onResizeStart.bind(n),n.onResize=n.onResize.bind(n),n.onResizeStop=n.onResizeStop.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDrag=n.onDrag.bind(n),n.onDragStop=n.onDragStop.bind(n),n.getMaxSizesFromProps=n.getMaxSizesFromProps.bind(n),n}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var A=this.offsetFromParent,n=A.left,r=A.top,s=this.getDraggablePosition(),i=s.x,a=s.y;this.draggable.setState({x:i-n,y:a-r}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var A=this.draggable.state,n=A.x,r=A.y;return{x:n,y:r}},e.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var A=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,n=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:A,maxHeight:n}},e.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},e.prototype.getOffsetHeight=function(A){var n=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/n;case"body":return document.body.offsetHeight/n;default:return A.offsetHeight}},e.prototype.getOffsetWidth=function(A){var n=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/n;case"body":return document.body.offsetWidth/n;default:return A.offsetWidth}},e.prototype.onDragStart=function(A,n){this.props.onDragStart&&this.props.onDragStart(A,n);var r=this.getDraggablePosition();if(this.originalPosition=r,!!this.props.bounds){var s=this.getParent(),i=this.props.scale,a;if(this.props.bounds==="parent")a=s;else if(this.props.bounds==="body"){var o=s.getBoundingClientRect(),l=o.left,u=o.top,d=document.body.getBoundingClientRect(),f=-(l-s.offsetLeft*i-d.left)/i,B=-(u-s.offsetTop*i-d.top)/i,h=(document.body.offsetWidth-this.resizable.size.width*i)/i+f,y=(document.body.offsetHeight-this.resizable.size.height*i)/i+B;return this.setState({bounds:{top:B,right:h,bottom:y,left:f}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var C=s.getBoundingClientRect(),p=C.left,g=C.top,v=-(p-s.offsetLeft*i)/i,E=-(g-s.offsetTop*i)/i,h=(window.innerWidth-this.resizable.size.width*i)/i+v,y=(window.innerHeight-this.resizable.size.height*i)/i+E;return this.setState({bounds:{top:E,right:h,bottom:y,left:v}})}else typeof this.props.bounds=="string"?a=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(a=this.props.bounds);if(!(!(a instanceof HTMLElement)||!(s instanceof HTMLElement))){var S=a.getBoundingClientRect(),U=S.left,b=S.top,L=s.getBoundingClientRect(),N=L.left,I=L.top,q=(U-N)/i,O=b-I;if(this.resizable){this.updateOffsetFromParent();var H=this.offsetFromParent;this.setState({bounds:{top:O-H.top,right:q+(a.offsetWidth-this.resizable.size.width)-H.left/i,bottom:O+(a.offsetHeight-this.resizable.size.height)-H.top,left:q-H.left/i}})}}}},e.prototype.onDrag=function(A,n){if(this.props.onDrag){var r=this.offsetFromParent,s=r.left,i=r.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(A,Wt(Wt({},n),{x:n.x+s,y:n.y+i}));if(this.props.dragAxis==="x")return this.props.onDrag(A,Wt(Wt({},n),{x:n.x+s,y:this.originalPosition.y+i,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(A,Wt(Wt({},n),{x:this.originalPosition.x+s,y:n.y+i,deltaX:0}))}},e.prototype.onDragStop=function(A,n){if(this.props.onDragStop){var r=this.offsetFromParent,s=r.left,i=r.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(A,Wt(Wt({},n),{x:n.x+s,y:n.y+i}));if(this.props.dragAxis==="x")return this.props.onDragStop(A,Wt(Wt({},n),{x:n.x+s,y:this.originalPosition.y+i,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(A,Wt(Wt({},n),{x:this.originalPosition.x+s,y:n.y+i,deltaX:0}))}},e.prototype.onResizeStart=function(A,n,r){A.stopPropagation(),this.setState({resizing:!0});var s=this.props.scale,i=this.offsetFromParent,a=this.getDraggablePosition();if(this.resizingPosition={x:a.x+i.left,y:a.y+i.top},this.originalPosition=a,this.props.bounds){var o=this.getParent(),l=void 0;this.props.bounds==="parent"?l=o:this.props.bounds==="body"?l=document.body:this.props.bounds==="window"?l=window:typeof this.props.bounds=="string"?l=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(l=this.props.bounds);var u=this.getSelfElement();if(u instanceof Element&&(l instanceof HTMLElement||l===window)&&o instanceof HTMLElement){var d=this.getMaxSizesFromProps(),f=d.maxWidth,B=d.maxHeight,h=this.getParentSize();if(f&&typeof f=="string")if(f.endsWith("%")){var y=Number(f.replace("%",""))/100;f=h.width*y}else f.endsWith("px")&&(f=Number(f.replace("px","")));if(B&&typeof B=="string")if(B.endsWith("%")){var y=Number(B.replace("%",""))/100;B=h.height*y}else B.endsWith("px")&&(B=Number(B.replace("px","")));var C=u.getBoundingClientRect(),p=C.left,g=C.top,v=this.props.bounds==="window"?{left:0,top:0}:l.getBoundingClientRect(),E=v.left,S=v.top,U=this.getOffsetWidth(l),b=this.getOffsetHeight(l),L=n.toLowerCase().endsWith("left"),N=n.toLowerCase().endsWith("right"),I=n.startsWith("top"),q=n.startsWith("bottom");if((L||I)&&this.resizable){var O=(p-E)/s+this.resizable.size.width;this.setState({maxWidth:O>Number(f)?f:O})}if(N||this.props.lockAspectRatio&&!L&&!I){var O=U+(E-p)/s;this.setState({maxWidth:O>Number(f)?f:O})}if((I||L)&&this.resizable){var O=(g-S)/s+this.resizable.size.height;this.setState({maxHeight:O>Number(B)?B:O})}if(q||this.props.lockAspectRatio&&!I&&!L){var O=b+(S-g)/s;this.setState({maxHeight:O>Number(B)?B:O})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(A,n,r)},e.prototype.onResize=function(A,n,r,s){var i=this,a={x:this.originalPosition.x,y:this.originalPosition.y},o=-s.width,l=-s.height,u=["top","left","topLeft","bottomLeft","topRight"];u.includes(n)&&(n==="bottomLeft"?a.x+=o:(n==="topRight"||(a.x+=o),a.y+=l));var d=this.draggable.state;(a.x!==d.x||a.y!==d.y)&&Ps.flushSync(function(){i.draggable.setState(a)}),this.updateOffsetFromParent();var f=this.offsetFromParent,B=this.getDraggablePosition().x+f.left,h=this.getDraggablePosition().y+f.top;this.resizingPosition={x:B,y:h},this.props.onResize&&this.props.onResize(A,n,r,s,{x:B,y:h})},e.prototype.onResizeStop=function(A,n,r,s){this.setState({resizing:!1});var i=this.getMaxSizesFromProps(),a=i.maxWidth,o=i.maxHeight;this.setState({maxWidth:a,maxHeight:o}),this.props.onResizeStop&&this.props.onResizeStop(A,n,r,s,this.resizingPosition)},e.prototype.updateSize=function(A){this.resizable&&this.resizable.updateSize({width:A.width,height:A.height})},e.prototype.updatePosition=function(A){this.draggable.setState(A)},e.prototype.updateOffsetFromParent=function(){var A=this.props.scale,n=this.getParent(),r=this.getSelfElement();if(!n||r===null)return{top:0,left:0};var s=n.getBoundingClientRect(),i=s.left,a=s.top,o=r.getBoundingClientRect(),l=this.getDraggablePosition(),u=n.scrollLeft,d=n.scrollTop;this.offsetFromParent={left:o.left-i+u-l.x*A,top:o.top-a+d-l.y*A}},e.prototype.render=function(){var A=this,n=this.props,r=n.disableDragging,s=n.style,i=n.dragHandleClassName,a=n.position,o=n.onMouseDown,l=n.onMouseUp,u=n.dragAxis,d=n.dragGrid,f=n.bounds,B=n.enableUserSelectHack,h=n.cancel,y=n.children;n.onResizeStart,n.onResize,n.onResizeStop,n.onDragStart,n.onDrag,n.onDragStop;var C=n.resizeHandleStyles,p=n.resizeHandleClasses,g=n.resizeHandleComponent,v=n.enableResizing,E=n.resizeGrid,S=n.resizeHandleWrapperClass,U=n.resizeHandleWrapperStyle,b=n.scale,L=n.allowAnyClick,N=n.dragPositionOffset,I=hS(n,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),q=this.props.default?Wt({},this.props.default):void 0;delete I.default;var O=r||i?{cursor:"auto"}:{cursor:"move"},H=Wt(Wt(Wt({},gS),O),s),G=this.offsetFromParent,Z=G.left,V=G.top,W;a&&(W={x:a.x-Z,y:a.y-V});var z=this.state.resizing?void 0:W,Ae=this.state.resizing?"both":u;return x.createElement(nS,{ref:function(j){j&&(A.draggable=j)},handle:i?".".concat(i):void 0,defaultPosition:q,onMouseDown:o,onMouseUp:l,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:Ae,disabled:r,grid:d,bounds:f?this.state.bounds:void 0,position:z,enableUserSelectHack:B,cancel:h,scale:b,allowAnyClick:L,nodeRef:this.resizableElement,positionOffset:N},x.createElement(dS,Wt({},I,{ref:function(j){j&&(A.resizable=j,A.resizableElement.current=j.resizable)},defaultSize:q,size:this.props.size,enable:typeof v=="boolean"?pS(v):v,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:H,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:E,handleWrapperClass:S,handleWrapperStyle:U,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:C,handleClasses:p,handleComponent:g,scale:this.props.scale}),y))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e}(x.PureComponent);const wS=({group:t,isSelected:e,onUpdate:A,onDrag:n,onDragStart:r,onSelect:s,onNameChange:i,onFormatMenuOpen:a,onUngroup:o,activeTool:l="select",onSaveCoordinate:u})=>{const[d,f]=x.useState(!1),[B,h]=x.useState(t.name),[y,C]=x.useState({visible:!1,x:0,y:0}),p=cA.useRef(null),g=cA.useRef(null),{scale:v}=eU(),E=I=>{I.stopPropagation(),f(!0),a&&a(t.id)},S=I=>{I.stopPropagation(),s(t.id)},U=I=>{l==="pen"||l==="eraser"||(I.preventDefault(),I.stopPropagation(),C({visible:!0,x:I.clientX,y:I.clientY}))},b=()=>{C({visible:!1,x:0,y:0})},[L,N]=x.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsxs(mS,{size:{width:t.width,height:t.height},position:L?void 0:{x:t.x,y:t.y},scale:v,enableResizing:e&&l!=="pen"&&l!=="eraser",onDragStart:I=>{if(I.button!==0||l==="pen"||l==="eraser")return!1;N(!0),r&&r(t.id)},onDrag:(I,q)=>{if(l==="pen"||l==="eraser")return!1;n&&n(t.id,{x:q.x,y:q.y})},onDragStop:(I,q)=>{if(N(!1),l==="pen"||l==="eraser")return!1;A(t.id,{x:q.x,y:q.y})},onResizeStop:(I,q,O,H,G)=>{A(t.id,{width:parseInt(O.style.width),height:parseInt(O.style.height),...G})},onMouseDown:I=>{var H;const q=I.button===1||I.button===2,O=I.button===2&&I.altKey;if(!(q||O)){if(l==="pen"||l==="eraser"){I.stopPropagation(),I.preventDefault();return}(H=g.current)!=null&&H.contains(I.target)||(I.stopPropagation(),s(t.id))}},onContextMenu:U,className:`absolute ${e?"ring-4 ring-yellow-400/50":"ring-2 ring-gray-500/30"} ${l==="pen"||l==="eraser"?"pointer-events-none":""}`,style:{zIndex:0},"data-item-id":t.id,children:[c.jsx("div",{ref:g,className:"absolute left-0 w-full bg-gray-800 pointer-events-none flex items-center px-2",style:{height:`${Math.max(32,(t.fontSize||12)+20)}px`,top:`-${Math.max(32,(t.fontSize||12)+20)}px`,opacity:1,borderTopWidth:"2px",borderRightWidth:"2px",borderLeftWidth:"2px",borderBottomWidth:"0",borderStyle:"solid",borderColor:"rgb(75, 85, 99)",borderTopLeftRadius:"0.5rem",borderTopRightRadius:"0.5rem",zIndex:1e3},children:c.jsx("div",{ref:p,className:`flex-1 text-white text-xs font-medium cursor-pointer ${l==="pen"||l==="eraser"?"pointer-events-none":"pointer-events-auto"}`,onClick:I=>{I.stopPropagation(),S(I)},onMouseDown:I=>{I.stopPropagation()},onDoubleClick:E,style:{fontSize:`${t.fontSize||12}px`,color:t.color||"#ffffff",fontFamily:t.fontFamily||"Inter, sans-serif"},children:d?c.jsx("input",{type:"text",value:B,onChange:I=>h(I.target.value),onBlur:()=>{f(!1),i(t.id,B)},onKeyDown:I=>{I.stopPropagation(),I.key==="Enter"?(f(!1),i(t.id,B)):I.key==="Escape"&&(f(!1),h(t.name))},onClick:I=>{I.stopPropagation()},autoFocus:!0,className:"bg-gray-700 px-1 outline-none w-full",style:{fontSize:`${t.fontSize||12}px`,color:t.color||"#ffffff",fontFamily:t.fontFamily||"Inter, sans-serif"}}):t.name})}),c.jsx("div",{className:"w-full h-full pointer-events-none",style:{borderTopWidth:"0",borderRightWidth:`${Math.max(2,1.5/v)}px`,borderBottomWidth:`${Math.max(2,1.5/v)}px`,borderLeftWidth:`${Math.max(2,1.5/v)}px`,borderRightStyle:v<.3?"solid":"dashed",borderBottomStyle:v<.3?"solid":"dashed",borderLeftStyle:v<.3?"solid":"dashed",borderRightColor:"rgba(107, 114, 128, 0.5)",borderBottomColor:"rgba(107, 114, 128, 0.5)",borderLeftColor:"rgba(107, 114, 128, 0.5)",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem",backgroundColor:(()=>{const I=t.backgroundColor||"#000000",q=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(I);return q?`rgba(${parseInt(q[1],16)}, ${parseInt(q[2],16)}, ${parseInt(q[3],16)}, 0.3)`:"rgba(0, 0, 0, 0.3)"})()}}),e&&c.jsxs("div",{className:"absolute -top-52 left-1/2 flex items-center gap-2 bg-gray-800 rounded-full shadow-xl border border-gray-600 px-3 py-1.5 z-[10002]",style:{transform:`translateX(-50%) scale(${1/v})`,transformOrigin:"bottom center",pointerEvents:l==="pen"||l==="eraser"?"none":"auto"},onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),children:[c.jsxs("div",{className:"relative group/color w-5 h-5 cursor-pointer hover:scale-110 transition-transform",title:" ",children:[c.jsx("div",{className:"w-full h-full rounded-full border border-gray-400 shadow-sm",style:{backgroundColor:t.backgroundColor||"#374151"}}),c.jsx("input",{type:"color",value:t.backgroundColor||"#000000",onChange:I=>A(t.id,{backgroundColor:I.target.value}),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),c.jsx("div",{className:"w-px h-4 bg-gray-600"}),c.jsx("button",{onClick:I=>{I.stopPropagation(),o&&o(t.id)},className:"text-gray-300 hover:text-red-400 transition-colors flex items-center justify-center p-0.5",title:" ",children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"3 6 5 6 21 6"}),c.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]}),y.visible&&Ps.createPortal(c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:b,onContextMenu:I=>I.preventDefault()}),c.jsxs("div",{className:"fixed bg-gray-800 border border-gray-700 rounded shadow-lg py-1 z-[9999] min-w-[160px]",style:{left:y.x,top:y.y},children:[c.jsxs("button",{onClick:()=>{o&&o(t.id),b()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-2 border-b border-gray-700",children:[c.jsx("span",{children:"Ungroup"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Ctrl+Shift+G"})]}),c.jsx("button",{onClick:()=>{u&&u(t.id),b()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-2",children:c.jsx("span",{children:" Save Coordinate"})})]})]}),document.body)]})},yS=cA.memo(wS,(t,e)=>{if(t.group!==e.group){const A=t.group,n=e.group;if(A.id!==n.id||A.name!==n.name||A.x!==n.x||A.y!==n.y||A.width!==n.width||A.height!==n.height||A.color!==n.color||A.backgroundColor!==n.backgroundColor||A.fontSize!==n.fontSize||A.fontFamily!==n.fontFamily||A.childIds.length!==n.childIds.length)return!1}return!(t.isSelected!==e.isSelected||t.activeTool!==e.activeTool)}),BS=cA.memo(({item:t,isSelected:e,onUpdate:A,onSelect:n,onGroup:r,activeTool:s="select",canGroup:i,isCtrlPressed:a,isNewlyCreated:o=!1,onEditStart:l,onFormatMenuOpen:u,onSaveCoordinate:d,onInteractionStart:f,onInteractionEnd:B,scale:h})=>{const[y,C]=x.useState(!1),[p,g]=x.useState(t.content),[v,E]=x.useState({visible:!1,x:0,y:0}),[S,U]=x.useState(!1),b=x.useRef(null);x.useEffect(()=>{y&&b.current&&(b.current.textContent!==t.content&&(b.current.textContent=t.content),setTimeout(()=>{var H,G;if(b.current){b.current.focus();const Z=document.createRange(),V=window.getSelection();let W=b.current,z=((H=b.current.textContent)==null?void 0:H.length)||0;if(b.current.childNodes.length>0){const Ae=b.current.childNodes[b.current.childNodes.length-1];Ae.nodeType===Node.TEXT_NODE&&(W=Ae,z=((G=Ae.textContent)==null?void 0:G.length)||0)}Z.setStart(W,z),Z.setEnd(W,z),V==null||V.removeAllRanges(),V==null||V.addRange(Z)}},0))},[y]),x.useEffect(()=>{o&&b.current&&(C(!0),l&&l(t.id))},[o,t.id,l]);const L=H=>{H.stopPropagation(),H.preventDefault(),C(!0),g(t.content),u&&u(t.id)},N=()=>{C(!1);const H=p.trim()===""?"Text":p;A(t.id,{content:H})};x.useEffect(()=>{y||g(t.content)},[t.content,y]),x.useEffect(()=>{if(b.current&&!S){const H=b.current.style.width,G=b.current.style.height,Z=b.current.style.whiteSpace,V=b.current.style.display;b.current.style.width="auto",b.current.style.height="auto",b.current.style.display="inline-block",b.current.style.whiteSpace="pre";const W=b.current.scrollWidth+24,z=b.current.scrollHeight+12;b.current.style.width=H,b.current.style.height=G,b.current.style.display=V,b.current.style.whiteSpace=Z,(Math.abs(W-t.width)>2||Math.abs(z-t.height)>2)&&A(t.id,{width:W,height:z})}},[t.content,t.fontFamily,p,S]);const I=H=>{H.preventDefault(),H.stopPropagation(),y&&E({visible:!0,x:H.clientX,y:H.clientY})},q=()=>{E({visible:!1,x:0,y:0})},O=Math.min(5,Math.max(.4,1/h));return c.jsxs("div",{className:`media-item-wrapper absolute type-text ${e?"selected":""} ${s==="pen"||s==="eraser"?"pointer-events-none":""}`,"data-item-id":t.id,style:{left:t.x,top:t.y,width:t.width,height:t.height,zIndex:Math.max(5e3,t.zIndex+1e3),pointerEvents:"auto",opacity:1,overflow:"visible",transform:`rotate(${t.rotation||0}deg) scaleX(${t.flipHorizontal?-1:1}) scaleY(${t.flipVertical?-1:1}) translateZ(0)`,transformOrigin:"center center",willChange:"transform"},onMouseDown:H=>{const G=H.button===1,Z=H.button===2&&H.altKey;G||Z||s==="pen"||s==="eraser"||y||(f==null||f(t.id),n(t.id,a,H.shiftKey))},children:[c.jsx("div",{ref:b,contentEditable:y,suppressContentEditableWarning:!0,onDoubleClick:L,onClick:H=>{y&&H.stopPropagation()},onContextMenu:H=>{H.stopPropagation(),I(H)},onBlur:N,onInput:H=>g(H.currentTarget.textContent||""),onKeyDown:H=>{var G;(H.ctrlKey||H.metaKey)&&["c","v","a","x"].includes(H.key.toLowerCase())||((H.key==="Delete"||H.key==="Backspace")&&H.stopPropagation(),H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),(G=b.current)==null||G.blur()))},className:`w-full h-full p-2 outline-none ${y?"bg-white/10 border-2 border-[#3b82f6]":""} ${e&&!y?"border-2 border-[#3b82f6]":""}`,style:{fontSize:`${t.fontSize}px`,color:t.color,WebkitTextFillColor:t.color,fontFamily:t.fontFamily,letterSpacing:t.letterSpacing?`${t.letterSpacing}px`:"normal",cursor:y?"text":"move",whiteSpace:"pre",overflow:"visible",userSelect:y?"text":"none",wordBreak:"normal"},children:y?null:p}),e&&!y&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"rotation-handle-container",style:{position:"absolute",bottom:-40*O,left:"50%",transform:"translateX(-50%)",display:"flex",flexDirection:"column",alignItems:"center",zIndex:10001,pointerEvents:"auto"},children:[c.jsx("div",{style:{width:2*O,height:20*O,background:"#3b82f6",opacity:.6}}),c.jsx("div",{className:"rotation-handle",style:{width:28*O,height:28*O,background:"#3b82f6",borderRadius:"50%",cursor:"grab",display:"flex",alignItems:"center",justifyContent:"center",border:`${2*O}px solid white`,boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},onMouseDown:H=>{H.stopPropagation(),f==null||f(t.id);const G=H.clientX,Z=t.rotation||0,V=z=>{const Ae=z.clientX-G,j=(Z-Ae*.5+360)%360,te=z.shiftKey?Math.round(j/25)*25:j;A(t.id,{rotation:te})},W=()=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",W),B==null||B(t.id,t.x,t.y)};document.addEventListener("mousemove",V),document.addEventListener("mouseup",W)},children:c.jsx("svg",{width:16*O,height:16*O,viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"})})})]}),["tl","tr","bl","br"].map(H=>{const G=H.startsWith("t"),Z=H.endsWith("l"),V={tl:180,tr:270,bl:90,br:0};return c.jsx("div",{className:`resize-handle handle-${H}`,style:{position:"absolute",top:G?-12*O:"auto",bottom:G?"auto":-12*O,left:Z?-12*O:"auto",right:Z?"auto":-12*O,width:40*O,height:40*O,cursor:G===Z?"nwse-resize":"nesw-resize",zIndex:10002,pointerEvents:"auto",display:"flex",alignItems:G?"flex-start":"flex-end",justifyContent:Z?"flex-start":"flex-end",padding:2*O,opacity:0,transition:"opacity 0.2s ease"},onMouseEnter:W=>W.currentTarget.style.opacity="1",onMouseLeave:W=>W.currentTarget.style.opacity="0",onMouseDown:W=>{W.stopPropagation(),W.preventDefault(),U(!0),f==null||f(t.id);const z=W.clientX,Ae=W.clientY,j=t.width,te=t.height,re=t.x,ee=t.y,ge=(t.rotation||0)*Math.PI/180,we=j/te,xe=qe=>{const Ne=(qe.clientX-z)/h,ct=(qe.clientY-Ae)/h,gn=Ne*Math.cos(ge)+ct*Math.sin(ge),pn=-Ne*Math.sin(ge)+ct*Math.cos(ge);let ke=0,Xe=0;H==="br"?(ke=gn,Xe=pn):H==="bl"?(ke=-gn,Xe=pn):H==="tr"?(ke=gn,Xe=-pn):H==="tl"&&(ke=-gn,Xe=-pn);let Kt=Math.max(200,j+ke),vt=Math.max(50,te+Xe);const Ce=Kt/j,ze=Math.round(t.fontSize*Ce);Math.abs(ke)>Math.abs(Xe)?(vt=Kt/we,H==="tl"||H==="bl"?ke=j-Kt:ke=Kt-j,H==="tl"||H==="tr"?Xe=te-vt:Xe=vt-te):(Kt=vt*we,H==="tl"||H==="bl"?ke=j-Kt:ke=Kt-j,H==="tl"||H==="tr"?Xe=te-vt:Xe=vt-te);let nA=0,LA=0;H==="br"?(nA=ke/2,LA=Xe/2):H==="bl"?(nA=-ke/2,LA=Xe/2):H==="tr"?(nA=ke/2,LA=-Xe/2):H==="tl"&&(nA=-ke/2,LA=-Xe/2);const hA=nA*Math.cos(ge)-LA*Math.sin(ge),He=nA*Math.sin(ge)+LA*Math.cos(ge),Le=re+j/2+hA-Kt/2,oe=ee+te/2+He-vt/2;A(t.id,{width:Kt,height:vt,x:Le,y:oe,fontSize:ze})},Re=()=>{document.removeEventListener("mousemove",xe),document.removeEventListener("mouseup",Re),U(!1),B==null||B(t.id,t.x,t.y)};document.addEventListener("mousemove",xe),document.addEventListener("mouseup",Re)},children:c.jsx("svg",{width:28*O,height:28*O,viewBox:"0 0 32 32",fill:"none",stroke:"white",strokeWidth:"3.5",strokeLinecap:"round",style:{filter:"drop-shadow(0 0 2px rgba(0,0,0,0.4))",opacity:.9,transform:`rotate(${V[H]}deg)`},children:c.jsx("path",{d:"M28 12 A 16 16 0 0 1 12 28"})})},H)})]}),v.visible&&Ps.createPortal(c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:q,onContextMenu:H=>H.preventDefault()}),c.jsxs("div",{className:"fixed bg-gray-800 border border-gray-700 rounded shadow-lg py-1 z-[9999] min-w-[160px]",style:{left:v.x,top:v.y},children:[i&&c.jsxs("button",{onClick:()=>{r&&r(),q()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-2 border-b border-gray-700",children:[c.jsx("span",{children:"Group"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Ctrl+G"})]}),c.jsx("button",{onClick:()=>{d&&d(t.id),q()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-2",children:c.jsx("span",{children:" Save Coordinate"})})]})]}),document.body)]})}),vS=({onBackToList:t,onShare:e,onSave:A,opacity:n,onOpacityChange:r,isAlwaysOnTop:s,onToggleAlwaysOnTop:i,onUndo:a,onRedo:o,canUndo:l=!1,canRedo:u=!1})=>c.jsxs("div",{className:"absolute top-6 left-6 z-50 flex gap-4 items-center select-none",children:[c.jsxs("div",{className:"flex items-center gap-1 bg-black/40 backdrop-blur-xl rounded-2xl p-2 shadow-2xl border border-white/10 ring-1 ring-white/5",children:[t&&c.jsxs("button",{onClick:t,className:"px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 text-gray-300 hover:text-white hover:bg-white/10 hover:shadow-lg hover:-translate-y-0.5 flex items-center gap-2",title:"Back to List",children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M19 12H5"}),c.jsx("path",{d:"M12 19l-7-7 7-7"})]}),c.jsx("span",{className:"hidden sm:inline",children:"List"})]}),c.jsx("button",{onClick:a,disabled:!l,className:`p-2 rounded-xl transition-all duration-200 flex items-center justify-center ${l?"text-gray-300 hover:text-white hover:bg-white/10 hover:shadow-lg hover:-translate-y-0.5":"text-gray-600 cursor-not-allowed opacity-50"}`,title:"Undo (Ctrl+Z)",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M3 7v6h6"}),c.jsx("path",{d:"M21 17a9 9 0 0 0-9-15 9 9 0 0 0-6 2.3L3 13"})]})}),c.jsx("button",{onClick:o,disabled:!u,className:`p-2 rounded-xl transition-all duration-200 flex items-center justify-center ${u?"text-gray-300 hover:text-white hover:bg-white/10 hover:shadow-lg hover:-translate-y-0.5":"text-gray-600 cursor-not-allowed opacity-50"}`,title:"Redo (Ctrl+Y)",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M21 7v6h-6"}),c.jsx("path",{d:"M3 17a9 9 0 0 1 9-15 9 9 0 0 1 6 2.3L21 13"})]})}),c.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"}),e&&c.jsxs("button",{onClick:e,className:"px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 text-gray-300 hover:text-white hover:bg-blue-600/20 hover:text-blue-200 hover:shadow-lg hover:-translate-y-0.5 flex items-center gap-2",title:"Share Board",children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"9",cy:"7",r:"4"}),c.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),c.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),c.jsx("span",{className:"hidden sm:inline",children:"Share"})]}),c.jsxs("button",{onClick:i,className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 flex items-center gap-2 ${s?"bg-blue-600/90 text-white shadow-[0_0_15px_rgba(37,99,235,0.4)] ring-1 ring-blue-400/50":"text-gray-300 hover:text-white hover:bg-white/10 hover:shadow-lg hover:-translate-y-0.5"}`,title:"Toggle Always on Top",children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s?"fill-white/20":"",children:[c.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"22"}),c.jsx("path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"})]}),c.jsx("span",{className:"hidden sm:inline",children:s?"On Top":"Pin"})]})]}),c.jsxs("div",{className:"flex items-center gap-3 bg-black/40 backdrop-blur-xl rounded-2xl px-4 py-3 shadow-2xl border border-white/10 ring-1 ring-white/5 h-full group transition-all duration-300 hover:bg-black/60",children:[c.jsx("span",{className:"text-xs font-medium text-gray-400 group-hover:text-gray-200 transition-colors uppercase tracking-wider",children:"Opacity"}),c.jsx("input",{type:"range",min:"0.01",max:"1",step:"0.01",value:n,onChange:d=>r(parseFloat(d.target.value)),className:"w-24 h-1.5 bg-gray-700/50 rounded-lg appearance-none cursor-pointer slider hover:h-2 transition-all duration-200",style:{background:`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${n*100}%, #374151 ${n*100}%, #374151 100%)`}}),c.jsxs("span",{className:"text-xs font-mono text-gray-400 w-9 text-right group-hover:text-white transition-colors",children:[Math.round(n*100),"%"]})]})]}),CS=({activeTool:t,onToolChange:e,onSettingsClick:A,onAlignClick:n,onCleanupClick:r,selectedCount:s})=>{const i=[{id:"select",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"})}),label:"Select (V)"},{id:"text",icon:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"4 7 4 4 20 4 20 7"}),c.jsx("line",{x1:"9",y1:"20",x2:"15",y2:"20"}),c.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"20"})]}),label:"Text (T)"},{id:"pen",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),label:"Pen (P)"},{id:"eraser",icon:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M2.5 12.5l7-7 12 12-7 7-12-12z"}),c.jsx("line",{x1:"12",y1:"19",x2:"22",y2:"19"})]}),label:"Eraser (E)"}];return c.jsxs("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 z-50 flex flex-col gap-6 select-none pointer-events-none",children:[c.jsxs("div",{className:"flex flex-col gap-3 bg-black/40 backdrop-blur-xl rounded-2xl p-3 shadow-2xl border border-white/10 ring-1 ring-white/5 pointer-events-auto",children:[i.map(a=>c.jsxs("button",{onClick:()=>e(a.id),className:`w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-300 group relative ${t===a.id?"bg-blue-600 text-white shadow-[0_0_20px_rgba(37,99,235,0.6)] scale-105 ring-1 ring-blue-400/50":"text-gray-400 hover:text-white hover:bg-white/10 hover:scale-110"}`,title:a.label,children:[a.icon,c.jsx("span",{className:"absolute left-full ml-4 px-2 py-1 bg-gray-900 border border-gray-700 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50",children:a.label})]},a.id)),c.jsx("div",{className:"w-full h-px bg-white/10 my-1"}),c.jsxs("button",{onClick:n,disabled:s<2,className:`w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-300 group relative ${s>=2?"text-gray-400 hover:text-white hover:bg-white/10 hover:scale-110":"text-gray-600 opacity-50 cursor-not-allowed"}`,title:"Align Selected (Ctrl+L)",children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),c.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),c.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),c.jsx("rect",{x:"14",y:"14",width:"7",height:"7"})]}),c.jsx("span",{className:"absolute left-full ml-4 px-2 py-1 bg-gray-900 border border-gray-700 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50",children:"Align Selected (Ctrl+L)"})]})]}),c.jsxs("div",{className:"flex flex-col gap-1 bg-black/40 backdrop-blur-xl rounded-2xl p-3 shadow-2xl border border-white/10 ring-1 ring-white/5 pointer-events-auto",children:[c.jsxs("button",{onClick:A,className:"w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-300 text-gray-400 hover:text-white hover:bg-white/10 hover:scale-110 rotate-90 hover:rotate-0 group relative",title:"Settings",children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"3"}),c.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),c.jsx("span",{className:"absolute left-full ml-4 px-2 py-1 bg-gray-900 border border-gray-700 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50",children:"Settings"})]}),c.jsxs("button",{onClick:r,className:"w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-300 text-gray-400 hover:text-red-400 hover:bg-red-400/10 hover:scale-110 group relative",title:"Cleanup Drive",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M3 6h18m-2 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M10 11v6m4-6v6"})}),c.jsx("span",{className:"absolute left-full ml-4 px-2 py-1 bg-gray-900 border border-gray-700 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50",children:"Cleanup Drive"})]})]})]})},Hn=({label:t,value:e,onRecord:A,mode:n})=>{const[r,s]=x.useState(!1),i=x.useRef(null),a=x.useRef(new Set);x.useEffect(()=>{r&&i.current&&i.current.focus()},[r]);const o=d=>{d.preventDefault(),d.stopPropagation();let f=d.key;if(f==="Control"&&(f="Ctrl"),f==="Alt"&&(f="Alt"),f==="Shift"&&(f="Shift"),f===" "&&(f="Space"),f==="Escape"){s(!1),a.current.clear();return}if(a.current.add(f.toUpperCase()),n==="modifier"){let B=f;f==="Control"&&(B="Ctrl"),f==="Alt"&&(B="Alt"),f==="Shift"&&(B="Shift"),A({keys:[B],combo:B}),s(!1),a.current.clear()}else if(n==="shortcut"&&!["CTRL","ALT","SHIFT","META"].includes(f.toUpperCase())){const y=Array.from(a.current).join("+");A({keys:[],combo:y}),s(!1),a.current.clear()}},l=d=>{if(n==="shortcut")return;let f=d.key;f==="Control"&&(f="Ctrl"),f==="Alt"&&(f="Alt"),f==="Shift"&&(f="Shift"),f===" "&&(f="Space"),a.current.delete(f.toUpperCase())},u=d=>{if(n!=="pan"||!r)return;d.preventDefault(),d.stopPropagation();let f="Left";d.button===0?f="Left":d.button===1?f="Middle":d.button===2&&(f="Right");const B=Array.from(a.current).map(h=>h==="CTRL"?"Ctrl":h==="ALT"?"Alt":h==="SHIFT"?"Shift":h);A({keys:B,button:f}),s(!1),a.current.clear()};return c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm text-gray-400 font-medium",children:t}),c.jsx("div",{className:"relative",children:c.jsx("input",{ref:i,type:"text",readOnly:!0,value:r?"":e||"None",placeholder:r?"Press keys...":"",onClick:()=>s(!0),onKeyDown:o,onKeyUp:l,onMouseDown:u,onBlur:()=>{s(!1),a.current.clear()},className:`
                        w-full bg-gray-900 p-3 rounded-lg border cursor-pointer transition-all
                        text-sm font-mono text-white outline-none
                        ${r?"border-blue-500 ring-2 ring-blue-500/20 placeholder-blue-400":"border-gray-700 hover:border-gray-600"}
                    `})})]})},xS=({isOpen:t,onClose:e,settings:A,uiSettings:n,onSave:r})=>{const[s,i]=x.useState("shortcuts"),[a,o]=x.useState(A),[l,u]=x.useState(n);if(x.useEffect(()=>{t&&(o(A),u(n||{canvasBackgroundColor:"#1f1f1f"}))},[t,A,n]),!t)return null;const d=async()=>{var C;if(a.photoshopPath&&((C=window.electronAPI)!=null&&C.setPhotoshopPath))try{await window.electronAPI.setPhotoshopPath(a.photoshopPath)}catch(p){console.error("Failed to save Photoshop path:",p)}r(a,l),e()},f=()=>{const C=a.pan.keys.join(" + "),p=a.pan.button+" Click";return C?`${C} + ${p} Drag`:p+" Drag"},B=()=>{const C=a.zoom.keys.join(" + "),p=a.zoom.button+" Click";return C?`${C} + ${p} Drag`:p+" Drag"},h=()=>{var g,v;const C=((g=a.windowDrag)==null?void 0:g.keys.join(" + "))||"",p=(((v=a.windowDrag)==null?void 0:v.button)||"Right")+" Click";return C?`${C} + ${p} Drag`:p+" Drag"},y=()=>{var g,v;const C=((g=a.opacityDrag)==null?void 0:g.keys.join(" + "))||"",p=(((v=a.opacityDrag)==null?void 0:v.button)||"Right")+" Click";return C?`${C} + ${p} Drag`:p+" Drag"};return c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] flex items-center justify-center",onMouseDown:C=>{C.target===C.currentTarget&&e()},children:c.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl w-[500px] shadow-2xl flex flex-col max-h-[85vh]",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 pb-2 border-b border-gray-700",children:[c.jsx("h2",{className:"text-xl font-bold text-white",children:"Settings"}),c.jsxs("div",{className:"flex bg-gray-900 rounded-lg p-1",children:[c.jsx("button",{onClick:()=>i("shortcuts"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${s==="shortcuts"?"bg-gray-700 text-white shadow":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:"Shortcuts"}),c.jsx("button",{onClick:()=>i("ui"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${s==="ui"?"bg-gray-700 text-white shadow":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:"UI"})]})]}),c.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar flex-1",children:[s==="shortcuts"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx(Hn,{label:"Pan Board",value:f(),mode:"pan",onRecord:C=>o(p=>({...p,pan:{keys:C.keys,button:C.button||"Left"}}))}),c.jsx(Hn,{label:"Zoom Board (Drag)",value:B(),mode:"pan",onRecord:C=>o(p=>({...p,zoom:{keys:C.keys,button:C.button||"Right"}}))}),c.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-300 mb-3",children:"Additional Zoom Controls"}),c.jsx(Hn,{label:"Wheel Modifier",value:a.zoomWheelModifier+" + Mouse Wheel",mode:"modifier",onRecord:C=>o(p=>({...p,zoomWheelModifier:C.combo||"None"}))})]}),c.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-300 mb-3",children:"Window Management"}),c.jsx(Hn,{label:"Move Window",value:h(),mode:"pan",onRecord:C=>o(p=>({...p,windowDrag:{keys:C.keys,button:C.button||"Right"}}))}),c.jsx("div",{className:"h-4"}),c.jsx(Hn,{label:"Toggle Always On Top",value:a.alwaysOnTop||"",mode:"shortcut",onRecord:C=>o(p=>({...p,alwaysOnTop:C.combo}))}),c.jsx("div",{className:"h-4"}),c.jsx(Hn,{label:"Toggle Window Opacity (Ghost Mode)",value:a.opacity||"",mode:"shortcut",onRecord:C=>o(p=>({...p,opacity:C.combo}))}),c.jsx("div",{className:"h-4"}),c.jsx(Hn,{label:"Adjust Opacity (Drag)",value:y(),mode:"pan",onRecord:C=>o(p=>({...p,opacityDrag:{keys:C.keys,button:C.button||"Right"}}))})]}),c.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-300 mb-3",children:"Drawing Tools"}),c.jsx(Hn,{label:"Decrease Brush Size",value:a.brushSizeDecrease||"",mode:"shortcut",onRecord:C=>o(p=>({...p,brushSizeDecrease:C.combo}))}),c.jsx("div",{className:"h-4"}),c.jsx(Hn,{label:"Increase Brush Size",value:a.brushSizeIncrease||"",mode:"shortcut",onRecord:C=>o(p=>({...p,brushSizeIncrease:C.combo}))})]}),c.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-300 mb-3",children:"View"}),c.jsx(Hn,{label:"Toggle UI Visibility",value:a.toggleUi||"U",mode:"shortcut",onRecord:()=>{}})]}),c.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-300 mb-3",children:"Item Management"}),c.jsx(Hn,{label:"Align Selected Items",value:a.alignItems||"CTRL+A",mode:"shortcut",onRecord:C=>o(p=>({...p,alignItems:C.combo}))})]}),c.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-300 mb-3",children:"External Applications"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm text-gray-400 font-medium",children:"Photoshop Executable Path"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:a.photoshopPath||"",onChange:C=>o(p=>({...p,photoshopPath:C.target.value})),placeholder:"C:\\\\Program Files\\\\Adobe\\\\Adobe Photoshop 2024\\\\Photoshop.exe",className:"flex-1 bg-gray-900 p-3 rounded-lg border border-gray-700 hover:border-gray-600 text-sm text-white outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20"}),c.jsx("button",{type:"button",onClick:async C=>{var p;C.preventDefault(),C.stopPropagation(),console.log("Browse button clicked");try{if((p=window.electronAPI)!=null&&p.selectPhotoshopPath){const g=await window.electronAPI.selectPhotoshopPath();g.success&&g.path?o(v=>({...v,photoshopPath:g.path})):g.error&&alert(`Error: ${g.error}`)}else alert("File picker is only available in desktop app")}catch(g){console.error("Error selecting Photoshop path:",g),alert(`Error: ${g instanceof Error?g.message:"Unknown error"}`)}},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white transition-colors whitespace-nowrap cursor-pointer",children:"Browse"})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to auto-detect Photoshop installation"})]})]})]}),s==="ui"&&c.jsx("div",{className:"space-y-6",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-300 border-b border-gray-700 pb-2",children:"Canvas Appearance"}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("label",{className:"text-sm text-gray-400 font-medium",children:"Background Color"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"relative group/color w-8 h-8 cursor-pointer rounded-full overflow-hidden border border-gray-600 shadow-md hover:scale-110 transition-transform",children:[c.jsx("input",{type:"color",value:l.canvasBackgroundColor||"#1f1f1f",onChange:C=>u(p=>({...p,canvasBackgroundColor:C.target.value})),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.jsx("div",{className:"w-full h-full",style:{backgroundColor:l.canvasBackgroundColor||"#1f1f1f"}})]}),c.jsx("span",{className:"text-xs font-mono text-gray-500 w-16 text-right uppercase",children:l.canvasBackgroundColor||"#1f1f1f"})]})]}),c.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:c.jsx("p",{className:"text-xs text-blue-200",children:" Solid background color for the canvas."})})]})})]}),c.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-700 bg-gray-800 rounded-b-xl",children:[c.jsx("button",{onClick:e,className:"px-4 py-2 rounded text-gray-300 hover:bg-gray-700 transition-colors text-sm",children:"Cancel"}),c.jsx("button",{onClick:d,className:"px-4 py-2 rounded bg-blue-500 text-white hover:bg-blue-600 transition-colors font-medium text-sm shadow-lg shadow-blue-500/20",children:"Save Changes"})]})]})})},ES=({color:t,size:e,isEraser:A=!1,onColorChange:n,onSizeChange:r})=>{const s=["#ffffff","#ef4444","#f59e0b","#eab308","#22c55e","#3b82f6","#a855f7","#ec4899"];return c.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-gray-900/90 border border-gray-700 rounded-lg p-2 flex items-center gap-4 shadow-xl z-50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-gray-400",children:A?"Eraser Size":"Size"}),c.jsx("input",{type:"range",min:"1",max:"50",value:e,onChange:i=>r(parseInt(i.target.value)),className:"w-24 h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),c.jsx("span",{className:"text-xs text-gray-400 w-4",children:e})]}),!A&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-px h-6 bg-gray-700"}),c.jsxs("div",{className:"flex items-center gap-2",children:[s.map(i=>c.jsx("button",{onClick:()=>n(i),className:`w-6 h-6 rounded-full border-2 transition-all ${t===i?"border-white scale-110":"border-transparent hover:scale-105"}`,style:{backgroundColor:i}},i)),c.jsx("div",{className:"relative w-6 h-6 rounded-full overflow-hidden border-2 border-gray-600 ml-1",children:c.jsx("input",{type:"color",value:t,onChange:i=>n(i.target.value),className:"absolute inset-[-50%] w-[200%] h-[200%] cursor-pointer"})})]})]})]})},FE=cA.memo(cA.forwardRef(({paths:t,currentPath:e},A)=>{const n=x.useRef(null),r=x.useRef(null),s=x.useRef(null),i=x.useRef(""),a=x.useRef({x:0,y:0,scale:1}),o=x.useContext(lE),[l,u]=x.useState(null);x.useEffect(()=>{var p;const C=((p=o==null?void 0:o.containerRef)==null?void 0:p.current)||document.querySelector(".ref-board-canvas");if(C)u(C);else{const g=setTimeout(()=>{var E;const v=((E=o==null?void 0:o.containerRef)==null?void 0:E.current)||document.querySelector(".ref-board-canvas");v&&u(v)},100);return()=>clearTimeout(g)}},[o]);const d=(C,p)=>{if(!(p.length<2)){if(C.beginPath(),C.moveTo(p[0].x,p[0].y),p.length===2)C.lineTo(p[1].x,p[1].y);else{for(let E=1;E<p.length-1;E++){const S=p[E],U=p[E+1],b=(S.x+U.x)/2,L=(S.y+U.y)/2;C.quadraticCurveTo(S.x,S.y,b,L)}const g=p[p.length-1],v=p[p.length-2];C.quadraticCurveTo(v.x,v.y,g.x,g.y)}C.stroke()}},f=(C,p)=>{if(p.points.length<2)return;if(C.save(),C.strokeStyle=p.isEraser?"rgba(255, 0, 0, 0.3)":p.color,C.lineWidth=p.size,C.lineCap="round",C.lineJoin="round",p.points.some(v=>Math.abs((v.pressure||.5)-.5)>.01))for(let v=0;v<p.points.length-1;v++){const E=p.points[v],S=p.points[v+1],U=E.pressure??.5,b=S.pressure??.5,L=p.size*(.3+U*.7),N=p.size*(.3+b*.7);C.lineWidth=(L+N)/2,C.beginPath(),C.moveTo(E.x,E.y),C.lineTo(S.x,S.y),C.stroke()}else d(C,p.points);C.restore()},B=x.useRef(t);B.current=t;const h=()=>{var S,U;const C=n.current;if(!C)return;const p=C.getContext("2d");if(!p)return;C.style.transform="",i.current="",p.setTransform(1,0,0,1,0,0),p.clearRect(0,0,C.width,C.height);const g=((S=o==null?void 0:o.scaleRef)==null?void 0:S.current)??1,v=((U=o==null?void 0:o.positionRef)==null?void 0:U.current)??{x:0,y:0};p.setTransform(g,0,0,g,v.x,v.y),a.current={x:v.x,y:v.y,scale:g},B.current.forEach(b=>f(p,b));const E=e||r.current;E&&E.points.length>0&&f(p,E)},y=()=>{s.current||(s.current=requestAnimationFrame(()=>{s.current=null,h()}))};return x.useImperativeHandle(A,()=>({startPath:C=>{r.current={...C,points:[]}},addPoints:C=>{r.current&&(r.current.points.push(...C),y())},endPath:()=>{r.current=null,y()},syncView:()=>{y()},updateTransform:C=>{if(n.current){if(typeof C=="string"){n.current.style.transform=C,i.current=C;return}const p=C,g=a.current,v=p.scale/g.scale,E=p.x-g.x*v,S=p.y-g.y*v,U=`translate3d(${E.toFixed(4)}px, ${S.toFixed(4)}px, 0) scale(${v.toFixed(6)})`;n.current.style.transformOrigin="0 0",n.current.style.transform=U,i.current=U}}})),cA.useLayoutEffect(()=>{n.current&&i.current&&(n.current.style.transform=i.current)}),x.useEffect(()=>{const C=n.current;if(!C||!l)return;const p=()=>{const g=l.getBoundingClientRect();C.width=g.width,C.height=g.height,C.style.width=`${g.width}px`,C.style.height=`${g.height}px`,y()};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[l,t]),x.useEffect(()=>{y()},[t]),l?Ps.createPortal(c.jsx("canvas",{ref:n,className:"absolute inset-0 pointer-events-none",style:{zIndex:2e4}}),l):null}));FE.displayName="DrawingLayer";const FS=({onLogin:t})=>{const[e,A]=x.useState(!1),[n,r]=x.useState(null),[s,i]=x.useState(!1),a=async()=>{A(!0),r(null);try{const{signInWithGoogle:l}=await or(async()=>{const{signInWithGoogle:d}=await Promise.resolve().then(()=>D1);return{signInWithGoogle:d}},void 0),u=await l();if(u.success&&u.user){console.log("Logged in as:",u.user.displayName,u.user.email);try{const{initGoogleIdentityServices:d,requestDriveAccess:f}=await or(async()=>{const{initGoogleIdentityServices:h,requestDriveAccess:y}=await Promise.resolve().then(()=>Ru);return{initGoogleIdentityServices:h,requestDriveAccess:y}},void 0);d();const B="145147670860-l0bu8h9lvmf1gjqd09q66g4jbb4i69q2.apps.googleusercontent.com";console.log("Requesting Drive access..."),await f(B),console.log(" Drive access granted!"),t()}catch(d){console.error("Drive access error:",d),i(!0),r("Google Drive   .     .")}}else r(u.error||"Login failed")}catch(l){r(l instanceof Error?l.message:"Unknown error occurred")}finally{A(!1)}},o=async()=>{try{const{requestDriveAccess:l}=await or(async()=>{const{requestDriveAccess:d}=await Promise.resolve().then(()=>Ru);return{requestDriveAccess:d}},void 0);await l("145147670860-l0bu8h9lvmf1gjqd09q66g4jbb4i69q2.apps.googleusercontent.com"),t()}catch{r("  .  .")}};return c.jsx("div",{className:"w-screen h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 to-blue-800",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"RefBoard"}),c.jsx("p",{className:"text-gray-600",children:"  "})]}),c.jsx("div",{className:"mb-8",children:c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[c.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"RefBoard :"}),c.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[c.jsx("li",{children:" Google Drive  "}),c.jsx("li",{children:"   "}),c.jsx("li",{children:"   "})]})]})}),s?c.jsx("button",{onClick:o,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-3",children:"Google Drive  "}):c.jsx("button",{onClick:a,disabled:e,className:"w-full bg-white border-2 border-gray-300 hover:border-blue-500 text-gray-700 font-semibold py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})," ..."]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google "]})}),n&&c.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:n}),c.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[""," ",c.jsx("a",{href:"https://refboard.github.io/terms.html",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:""})," ",""," ",c.jsx("a",{href:"https://refboard.github.io/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:""}),"  ."]})]})})},_S=()=>{};var Fy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie=function(t,e){if(!t)throw Lo(e)},Lo=function(t){return new Error("Firebase Database ("+_E.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=function(t){const e=[];let A=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e[A++]=r:r<2048?(e[A++]=r>>6|192,e[A++]=r&63|128):(r&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++n)&1023),e[A++]=r>>18|240,e[A++]=r>>12&63|128,e[A++]=r>>6&63|128,e[A++]=r&63|128):(e[A++]=r>>12|224,e[A++]=r>>6&63|128,e[A++]=r&63|128)}return e},bS=function(t){const e=[];let A=0,n=0;for(;A<t.length;){const r=t[A++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[A++];e[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[A++],i=t[A++],a=t[A++],o=((r&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(o>>10)),e[n++]=String.fromCharCode(56320+(o&1023))}else{const s=t[A++],i=t[A++];e[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|i&63)}}return e.join("")},Tm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<t.length;r+=3){const s=t[r],i=r+1<t.length,a=i?t[r+1]:0,o=r+2<t.length,l=o?t[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|l>>6,B=l&63;o||(B=64,i||(f=64)),n.push(A[u],A[d],A[f],A[B])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const A=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<t.length;){const s=A[t.charAt(r++)],a=r<t.length?A[t.charAt(r)]:0;++r;const l=r<t.length?A[t.charAt(r)]:64;++r;const d=r<t.length?A[t.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new IS;const f=s<<2|a>>4;if(n.push(f),l!==64){const B=a<<4&240|l>>2;if(n.push(B),d!==64){const h=l<<6&192|d;n.push(h)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IE=function(t){const e=bE(t);return Tm.encodeByteArray(e,!0)},Ou=function(t){return IE(t).replace(/\./g,"")},Ku=function(t){try{return Tm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t){return QE(void 0,t)}function QE(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const A=e;return new Date(A.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const A in e)!e.hasOwnProperty(A)||!US(A)||(t[A]=QE(t[A],e[A]));return t}function US(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=()=>SS().__FIREBASE_DEFAULTS__,NS=()=>{if(typeof process>"u"||typeof Fy>"u")return;const t=Fy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ku(t[1]);return e&&JSON.parse(e)},Nm=()=>{try{return _S()||TS()||NS()||kS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},UE=t=>{var e,A;return(A=(e=Nm())==null?void 0:e.emulatorHosts)==null?void 0:A[t]},DS=t=>{const e=UE(t);if(!e)return;const A=e.lastIndexOf(":");if(A<=0||A+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(A+1),10);return e[0]==="["?[e.substring(1,A-1),n]:[e.substring(0,A),n]},SE=()=>{var t;return(t=Nm())==null?void 0:t.config},TE=t=>{var e;return(e=Nm())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,A)=>{this.resolve=e,this.reject=A})}wrapCallback(e){return(A,n)=>{A?this.reject(A):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(A):e(A,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function NE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const A={alg:"none",type:"JWT"},n=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ou(JSON.stringify(A)),Ou(JSON.stringify(i)),""].join(".")}const Ma={};function HS(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ma))Ma[e]?t.emulator.push(e):t.prod.push(e);return t}function RS(t){let e=document.getElementById(t),A=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),A=!0),{created:A,element:e}}let _y=!1;function kE(t,e){if(typeof window>"u"||typeof document>"u"||!Ho(window.location.host)||Ma[t]===e||Ma[t]||_y)return;Ma[t]=e;function A(f){return`__firebase__banner__${f}`}const n="__firebase__banner",s=HS().prod.length>0;function i(){const f=document.getElementById(n);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function o(f,B){f.setAttribute("width","24"),f.setAttribute("id",B),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{_y=!0,i()},f}function u(f,B){f.setAttribute("id",B),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=RS(n),B=A("text"),h=document.getElementById(B)||document.createElement("span"),y=A("learnmore"),C=document.getElementById(y)||document.createElement("a"),p=A("preprendIcon"),g=document.getElementById(p)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const v=f.element;a(v),u(C,y);const E=l();o(g,p),v.append(g,h,C,E),document.body.appendChild(v)}s?(h.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,h.innerText="Preview backend running in this workspace."),h.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function km(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(SA())}function PS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OS(){const t=SA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KS(){return _E.NODE_ADMIN===!0}function jS(){try{return typeof indexedDB=="object"}catch{return!1}}function WS(){return new Promise((t,e)=>{try{let A=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),A||self.indexedDB.deleteDatabase(n),t(!0)},r.onupgradeneeded=()=>{A=!1},r.onerror=()=>{var s;e(((s=r.error)==null?void 0:s.message)||"")}}catch(A){e(A)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="FirebaseError";class Ms extends Error{constructor(e,A,n){super(A),this.code=e,this.customData=n,this.name=zS,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dl.prototype.create)}}class Dl{constructor(e,A,n){this.service=e,this.serviceName=A,this.errors=n}create(e,...A){const n=A[0]||{},r=`${this.service}/${e}`,s=this.errors[e],i=s?GS(s,n):"Error",a=`${this.serviceName}: ${i} (${r}).`;return new Ms(r,a,n)}}function GS(t,e){return t.replace(VS,(A,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const VS=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t){return JSON.parse(t)}function tA(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=function(t){let e={},A={},n={},r="";try{const s=t.split(".");e=pl(Ku(s[0])||""),A=pl(Ku(s[1])||""),r=s[2],n=A.d||{},delete A.d}catch{}return{header:e,claims:A,data:n,signature:r}},$S=function(t){const e=LE(t),A=e.claims;return!!A&&typeof A=="object"&&A.hasOwnProperty("iat")},XS=function(t){const e=LE(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Eo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Lg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ju(t,e,A){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=e.call(A,t[r],r,t));return n}function di(t,e){if(t===e)return!0;const A=Object.keys(t),n=Object.keys(e);for(const r of A){if(!n.includes(r))return!1;const s=t[r],i=e[r];if(by(s)&&by(i)){if(!di(s,i))return!1}else if(s!==i)return!1}for(const r of n)if(!A.includes(r))return!1;return!0}function by(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){const e=[];for(const[A,n]of Object.entries(t))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(A)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(A)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,A){A||(A=0);const n=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)n[d]=e.charCodeAt(A)<<24|e.charCodeAt(A+1)<<16|e.charCodeAt(A+2)<<8|e.charCodeAt(A+3),A+=4;else for(let d=0;d<16;d++)n[d]=e[A]<<24|e[A+1]<<16|e[A+2]<<8|e[A+3],A+=4;for(let d=16;d<80;d++){const f=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=(f<<1|f>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],i=this.chain_[2],a=this.chain_[3],o=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(i^a),u=1518500249):(l=s^i^a,u=1859775393):d<60?(l=s&i|a&(s|i),u=2400959708):(l=s^i^a,u=3395469782);const f=(r<<5|r>>>27)+l+o+u+n[d]&4294967295;o=a,a=i,i=(s<<30|s>>>2)&4294967295,s=r,r=f}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+i&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+o&4294967295}update(e,A){if(e==null)return;A===void 0&&(A=e.length);const n=A-this.blockSize;let r=0;const s=this.buf_;let i=this.inbuf_;for(;r<A;){if(i===0)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<A;)if(s[i]=e.charCodeAt(r),++i,++r,i===this.blockSize){this.compress_(s),i=0;break}}else for(;r<A;)if(s[i]=e[r],++i,++r,i===this.blockSize){this.compress_(s),i=0;break}}this.inbuf_=i,this.total_+=A}digest(){const e=[];let A=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=A&255,A/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[n]=this.chain_[r]>>s&255,++n;return e}}function JS(t,e){const A=new qS(t,e);return A.subscribe.bind(A)}class qS{constructor(e,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(A=>{A.next(e)})}error(e){this.forEachObserver(A=>{A.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,A,n){let r;if(e===void 0&&A===void 0&&n===void 0)throw new Error("Missing Observer.");ZS(e,["next","error","complete"])?r=e:r={next:e,error:A,complete:n},r.next===void 0&&(r.next=eh),r.error===void 0&&(r.error=eh),r.complete===void 0&&(r.complete=eh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,e)}sendOne(e,A){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{A(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZS(t,e){if(typeof t!="object"||t===null)return!1;for(const A of e)if(A in t&&typeof t[A]=="function")return!0;return!1}function eh(){}function Kd(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=function(t){const e=[];let A=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r>=55296&&r<=56319){const s=r-55296;n++,ie(n<t.length,"Surrogate pair missing trail surrogate.");const i=t.charCodeAt(n)-56320;r=65536+(s<<10)+i}r<128?e[A++]=r:r<2048?(e[A++]=r>>6|192,e[A++]=r&63|128):r<65536?(e[A++]=r>>12|224,e[A++]=r>>6&63|128,e[A++]=r&63|128):(e[A++]=r>>18|240,e[A++]=r>>12&63|128,e[A++]=r>>6&63|128,e[A++]=r&63|128)}return e},jd=function(t){let e=0;for(let A=0;A<t.length;A++){const n=t.charCodeAt(A);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,A++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){return t&&t._delegate?t._delegate:t}class fi{constructor(e,A,n){this.name=e,this.instanceFactory=A,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,A){this.name=e,this.container=A,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const A=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(A)){const n=new kl;if(this.instancesDeferred.set(A,n),this.isInitialized(A)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:A});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(A).promise}getImmediate(e){const A=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(A)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:A})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n2(e))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[A,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(A);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(e=Vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(A=>"INTERNAL"in A).map(A=>A.INTERNAL.delete()),...e.filter(A=>"_delete"in A).map(A=>A._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vs){return this.instances.has(e)}getOptions(e=Vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:A={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:A});for(const[s,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);n===a&&i.resolve(r)}return r}onInit(e,A){const n=this.normalizeInstanceIdentifier(A),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const s=this.instances.get(n);return s&&e(s,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,A){const n=this.onInitCallbacks.get(A);if(n)for(const r of n)try{r(e,A)}catch{}}getOrInitializeService({instanceIdentifier:e,options:A={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:A2(e),options:A}),this.instances.set(e,n),this.instancesOptions.set(e,A),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Vs){return this.component?this.component.multipleInstances?e:Vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function A2(t){return t===Vs?void 0:t}function n2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const A=this.getProvider(e.name);if(A.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);A.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const A=new t2(e,this);return this.providers.set(e,A),A}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ot||(ot={}));const s2={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},i2=ot.INFO,o2={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},a2=(t,e,...A)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),r=o2[e];if(r)console[r](`[${n}]  ${t.name}:`,...A);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Dm=class{constructor(e){this.name=e,this._logLevel=i2,this._logHandler=a2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}};const l2=(t,e)=>e.some(A=>t instanceof A);let Iy,Qy;function c2(){return Iy||(Iy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u2(){return Qy||(Qy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HE=new WeakMap,Hg=new WeakMap,RE=new WeakMap,th=new WeakMap,Lm=new WeakMap;function d2(t){const e=new Promise((A,n)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{A(Es(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(A=>{A instanceof IDBCursor&&HE.set(A,t)}).catch(()=>{}),Lm.set(e,t),e}function f2(t){if(Hg.has(t))return;const e=new Promise((A,n)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{A(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});Hg.set(t,e)}let Rg={get(t,e,A){if(t instanceof IDBTransaction){if(e==="done")return Hg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||RE.get(t);if(e==="store")return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Es(t[e])},set(t,e,A){return t[e]=A,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function h2(t){Rg=t(Rg)}function g2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...A){const n=t.call(Ah(this),e,...A);return RE.set(n,e.sort?e.sort():[e]),Es(n)}:u2().includes(t)?function(...e){return t.apply(Ah(this),e),Es(HE.get(this))}:function(...e){return Es(t.apply(Ah(this),e))}}function p2(t){return typeof t=="function"?g2(t):(t instanceof IDBTransaction&&f2(t),l2(t,c2())?new Proxy(t,Rg):t)}function Es(t){if(t instanceof IDBRequest)return d2(t);if(th.has(t))return th.get(t);const e=p2(t);return e!==t&&(th.set(t,e),Lm.set(e,t)),e}const Ah=t=>Lm.get(t);function m2(t,e,{blocked:A,upgrade:n,blocking:r,terminated:s}={}){const i=indexedDB.open(t,e),a=Es(i);return n&&i.addEventListener("upgradeneeded",o=>{n(Es(i.result),o.oldVersion,o.newVersion,Es(i.transaction),o)}),A&&i.addEventListener("blocked",o=>A(o.oldVersion,o.newVersion,o)),a.then(o=>{s&&o.addEventListener("close",()=>s()),r&&o.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const w2=["get","getKey","getAll","getAllKeys","count"],y2=["put","add","delete","clear"],nh=new Map;function Uy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nh.get(e))return nh.get(e);const A=e.replace(/FromIndex$/,""),n=e!==A,r=y2.includes(A);if(!(A in(n?IDBIndex:IDBObjectStore).prototype)||!(r||w2.includes(A)))return;const s=async function(i,...a){const o=this.transaction(i,r?"readwrite":"readonly");let l=o.store;return n&&(l=l.index(a.shift())),(await Promise.all([l[A](...a),r&&o.done]))[0]};return nh.set(e,s),s}h2(t=>({...t,get:(e,A,n)=>Uy(e,A)||t.get(e,A,n),has:(e,A)=>!!Uy(e,A)||t.has(e,A)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(A=>{if(v2(A)){const n=A.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(A=>A).join(" ")}}function v2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pg="@firebase/app",Sy="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new Dm("@firebase/app"),C2="@firebase/app-compat",x2="@firebase/analytics-compat",E2="@firebase/analytics",F2="@firebase/app-check-compat",_2="@firebase/app-check",b2="@firebase/auth",I2="@firebase/auth-compat",Q2="@firebase/database",U2="@firebase/data-connect",S2="@firebase/database-compat",T2="@firebase/functions",N2="@firebase/functions-compat",k2="@firebase/installations",D2="@firebase/installations-compat",L2="@firebase/messaging",H2="@firebase/messaging-compat",R2="@firebase/performance",P2="@firebase/performance-compat",M2="@firebase/remote-config",O2="@firebase/remote-config-compat",K2="@firebase/storage",j2="@firebase/storage-compat",W2="@firebase/firestore",z2="@firebase/ai",G2="@firebase/firestore-compat",V2="firebase",$2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="[DEFAULT]",X2={[Pg]:"fire-core",[C2]:"fire-core-compat",[E2]:"fire-analytics",[x2]:"fire-analytics-compat",[_2]:"fire-app-check",[F2]:"fire-app-check-compat",[b2]:"fire-auth",[I2]:"fire-auth-compat",[Q2]:"fire-rtdb",[U2]:"fire-data-connect",[S2]:"fire-rtdb-compat",[T2]:"fire-fn",[N2]:"fire-fn-compat",[k2]:"fire-iid",[D2]:"fire-iid-compat",[L2]:"fire-fcm",[H2]:"fire-fcm-compat",[R2]:"fire-perf",[P2]:"fire-perf-compat",[M2]:"fire-rc",[O2]:"fire-rc-compat",[K2]:"fire-gcs",[j2]:"fire-gcs-compat",[W2]:"fire-fst",[G2]:"fire-fst-compat",[z2]:"fire-vertex","fire-js":"fire-js",[V2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=new Map,Y2=new Map,Og=new Map;function Ty(t,e){try{t.container.addComponent(e)}catch(A){Mr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,A)}}function Fo(t){const e=t.name;if(Og.has(e))return Mr.debug(`There were multiple attempts to register component ${e}.`),!1;Og.set(e,t);for(const A of Wu.values())Ty(A,t);for(const A of Y2.values())Ty(A,t);return!0}function Hm(t,e){const A=t.container.getProvider("heartbeat").getImmediate({optional:!0});return A&&A.triggerHeartbeat(),t.container.getProvider(e)}function zn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fs=new Dl("app","Firebase",J2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,A,n){this._isDeleted=!1,this._options={...e},this._config={...A},this._name=A.name,this._automaticDataCollectionEnabled=A.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=$2;function PE(t,e={}){let A=t;typeof e!="object"&&(e={name:e});const n={name:Mg,automaticDataCollectionEnabled:!0,...e},r=n.name;if(typeof r!="string"||!r)throw Fs.create("bad-app-name",{appName:String(r)});if(A||(A=SE()),!A)throw Fs.create("no-options");const s=Wu.get(r);if(s){if(di(A,s.options)&&di(n,s.config))return s;throw Fs.create("duplicate-app",{appName:r})}const i=new r2(r);for(const o of Og.values())i.addComponent(o);const a=new q2(A,n,i);return Wu.set(r,a),a}function ME(t=Mg){const e=Wu.get(t);if(!e&&t===Mg&&SE())return PE();if(!e)throw Fs.create("no-app",{appName:t});return e}function _s(t,e,A){let n=X2[t]??t;A&&(n+=`-${A}`);const r=n.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const i=[`Unable to register library "${n}" with version "${e}":`];r&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&s&&i.push("and"),s&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mr.warn(i.join(" "));return}Fo(new fi(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="firebase-heartbeat-database",eT=1,ml="firebase-heartbeat-store";let rh=null;function OE(){return rh||(rh=m2(Z2,eT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ml)}catch(A){console.warn(A)}}}}).catch(t=>{throw Fs.create("idb-open",{originalErrorMessage:t.message})})),rh}async function tT(t){try{const A=(await OE()).transaction(ml),n=await A.objectStore(ml).get(KE(t));return await A.done,n}catch(e){if(e instanceof Ms)Mr.warn(e.message);else{const A=Fs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mr.warn(A.message)}}}async function Ny(t,e){try{const n=(await OE()).transaction(ml,"readwrite");await n.objectStore(ml).put(e,KE(t)),await n.done}catch(A){if(A instanceof Ms)Mr.warn(A.message);else{const n=Fs.create("idb-set",{originalErrorMessage:A==null?void 0:A.message});Mr.warn(n.message)}}}function KE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=1024,nT=30;class rT{constructor(e){this.container=e,this._heartbeatsCache=null;const A=this.container.getProvider("app").getImmediate();this._storage=new iT(A),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,A;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ky();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((A=this._heartbeatsCache)==null?void 0:A.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>nT){const i=oT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Mr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const A=ky(),{heartbeatsToSend:n,unsentEntries:r}=sT(this._heartbeatsCache.heartbeats),s=Ou(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=A,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(A){return Mr.warn(A),""}}}function ky(){return new Date().toISOString().substring(0,10)}function sT(t,e=AT){const A=[];let n=t.slice();for(const r of t){const s=A.find(i=>i.agent===r.agent);if(s){if(s.dates.push(r.date),Dy(A)>e){s.dates.pop();break}}else if(A.push({agent:r.agent,dates:[r.date]}),Dy(A)>e){A.pop();break}n=n.slice(1)}return{heartbeatsToSend:A,unsentEntries:n}}class iT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jS()?WS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const A=await tT(this.app);return A!=null&&A.heartbeats?A:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Ny(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Ny(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Dy(t){return Ou(JSON.stringify({version:2,heartbeats:t})).length}function oT(t){if(t.length===0)return-1;let e=0,A=t[0].date;for(let n=1;n<t.length;n++)t[n].date<A&&(A=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t){Fo(new fi("platform-logger",e=>new B2(e),"PRIVATE")),Fo(new fi("heartbeat",e=>new rT(e),"PRIVATE")),_s(Pg,Sy,t),_s(Pg,Sy,"esm2020"),_s("fire-js","")}aT("");var lT="firebase",cT="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_s(lT,cT,"app");function jE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uT=jE,WE=new Dl("auth","Firebase",jE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=new Dm("@firebase/auth");function dT(t,...e){zu.logLevel<=ot.WARN&&zu.warn(`Auth (${Po}): ${t}`,...e)}function su(t,...e){zu.logLevel<=ot.ERROR&&zu.error(`Auth (${Po}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,...e){throw Pm(t,...e)}function Jn(t,...e){return Pm(t,...e)}function Rm(t,e,A){const n={...uT(),[e]:A};return new Dl("auth","Firebase",n).create(e,{appName:t.name})}function ri(t){return Rm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fT(t,e,A){const n=A;if(!(e instanceof n))throw n.name!==e.constructor.name&&fr(t,"argument-error"),Rm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pm(t,...e){if(typeof t!="string"){const A=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(A,...n)}return WE.create(t,...e)}function Ie(t,e,...A){if(!t)throw Pm(e,...A)}function Qr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw su(e),new Error(e)}function Or(t,e){t||Qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function hT(){return Ly()==="http:"||Ly()==="https:"}function Ly(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hT()||MS()||"connection"in navigator)?navigator.onLine:!0}function pT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,A){this.shortDelay=e,this.longDelay=A,Or(A>e,"Short delay should be less than long delay!"),this.isMobile=km()||DE()}get(){return gT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t,e){Or(t.emulator,"Emulator should always be set here");const{url:A}=t.emulator;return e?`${A}${e.startsWith("/")?e.slice(1):e}`:A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{static initialize(e,A,n){this.fetchImpl=e,A&&(this.headersImpl=A),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yT=new Ll(3e4,6e4);function Om(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Mo(t,e,A,n,r={}){return GE(t,r,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const a=Ro({key:t.config.apiKey,...i}).slice(1),o=await t._getAdditionalHeaders();o["Content-Type"]="application/json",t.languageCode&&(o["X-Firebase-Locale"]=t.languageCode);const l={method:e,headers:o,...s};return PS()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Ho(t.emulatorConfig.host)&&(l.credentials="include"),zE.fetch()(await VE(t,t.config.apiHost,A,a),l)})}async function GE(t,e,A){t._canInitEmulator=!1;const n={...mT,...e};try{const r=new vT(t),s=await Promise.race([A(),r.promise]);r.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Bc(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const a=s.ok?i.errorMessage:i.error.message,[o,l]=a.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bc(t,"credential-already-in-use",i);if(o==="EMAIL_EXISTS")throw Bc(t,"email-already-in-use",i);if(o==="USER_DISABLED")throw Bc(t,"user-disabled",i);const u=n[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Rm(t,u,l);fr(t,u)}}catch(r){if(r instanceof Ms)throw r;fr(t,"network-request-failed",{message:String(r)})}}async function BT(t,e,A,n,r={}){const s=await Mo(t,e,A,n,r);return"mfaPendingCredential"in s&&fr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function VE(t,e,A,n){const r=`${e}${A}?${n}`,s=t,i=s.config.emulator?Mm(t.config,r):`${t.config.apiScheme}://${r}`;return wT.includes(A)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}class vT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((A,n)=>{this.timer=setTimeout(()=>n(Jn(this.auth,"network-request-failed")),yT.get())})}}function Bc(t,e,A){const n={appName:t.name};A.email&&(n.email=A.email),A.phoneNumber&&(n.phoneNumber=A.phoneNumber);const r=Jn(t,e,n);return r.customData._tokenResponse=A,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CT(t,e){return Mo(t,"POST","/v1/accounts:delete",e)}async function Gu(t,e){return Mo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xT(t,e=!1){const A=JA(t),n=await A.getIdToken(e),r=Km(n);Ie(r&&r.exp&&r.auth_time&&r.iat,A.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:r,token:n,authTime:Oa(sh(r.auth_time)),issuedAtTime:Oa(sh(r.iat)),expirationTime:Oa(sh(r.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function sh(t){return Number(t)*1e3}function Km(t){const[e,A,n]=t.split(".");if(e===void 0||A===void 0||n===void 0)return su("JWT malformed, contained fewer than 3 sections"),null;try{const r=Ku(A);return r?JSON.parse(r):(su("Failed to decode base64 JWT payload"),null)}catch(r){return su("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Hy(t){const e=Km(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t,e,A=!1){if(A)return e;try{return await e}catch(n){throw n instanceof Ms&&ET(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function ET({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const A=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),A}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const A=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},A)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,A){this.createdAt=e,this.lastLoginAt=A,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oa(this.lastLoginAt),this.creationTime=Oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(t){var d;const e=t.auth,A=await t.getIdToken(),n=await wl(t,Gu(e,{idToken:A}));Ie(n==null?void 0:n.users.length,e,"internal-error");const r=n.users[0];t._notifyReloadListener(r);const s=(d=r.providerUserInfo)!=null&&d.length?$E(r.providerUserInfo):[],i=bT(t.providerData,s),a=t.isAnonymous,o=!(t.email&&r.passwordHash)&&!(i!=null&&i.length),l=a?o:!1,u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new jg(r.createdAt,r.lastLoginAt),isAnonymous:l};Object.assign(t,u)}async function _T(t){const e=JA(t);await Vu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bT(t,e){return[...t.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function $E(t){return t.map(({providerId:e,...A})=>({providerId:e,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IT(t,e){const A=await GE(t,{},async()=>{const n=Ro({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,i=await VE(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return t.emulatorConfig&&Ho(t.emulatorConfig.host)&&(o.credentials="include"),zE.fetch()(i,o)});return{accessToken:A.access_token,expiresIn:A.expires_in,refreshToken:A.refresh_token}}async function QT(t,e){return Mo(t,"POST","/v2/accounts:revokeToken",Om(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const A="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,A)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const A=Hy(e);this.updateTokensAndExpiration(e,null,A)}async getToken(e,A=!1){return!A&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,A){const{accessToken:n,refreshToken:r,expiresIn:s}=await IT(e,A);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,A,n){this.refreshToken=A||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,A){const{refreshToken:n,accessToken:r,expirationTime:s}=A,i=new lo;return n&&(Ie(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),r&&(Ie(typeof r=="string","internal-error",{appName:e}),i.accessToken=r),s&&(Ie(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vn{constructor({uid:e,auth:A,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new FT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=A,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new jg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const A=await wl(this,this.stsTokenManager.getToken(this.auth,e));return Ie(A,this.auth,"internal-error"),this.accessToken!==A&&(this.accessToken=A,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),A}getIdTokenResult(e){return xT(this,e)}reload(){return _T(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(A=>({...A})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const A=new Vn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return A.metadata._copy(this.metadata),A}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,A=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),A&&await Vu(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(ri(this.auth));const e=await this.getIdToken();return await wl(this,CT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,A){const n=A.displayName??void 0,r=A.email??void 0,s=A.phoneNumber??void 0,i=A.photoURL??void 0,a=A.tenantId??void 0,o=A._redirectEventId??void 0,l=A.createdAt??void 0,u=A.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:B,providerData:h,stsTokenManager:y}=A;Ie(d&&y,e,"internal-error");const C=lo.fromJSON(this.name,y);Ie(typeof d=="string",e,"internal-error"),qr(n,e.name),qr(r,e.name),Ie(typeof f=="boolean",e,"internal-error"),Ie(typeof B=="boolean",e,"internal-error"),qr(s,e.name),qr(i,e.name),qr(a,e.name),qr(o,e.name),qr(l,e.name),qr(u,e.name);const p=new Vn({uid:d,auth:e,email:r,emailVerified:f,displayName:n,isAnonymous:B,photoURL:i,phoneNumber:s,tenantId:a,stsTokenManager:C,createdAt:l,lastLoginAt:u});return h&&Array.isArray(h)&&(p.providerData=h.map(g=>({...g}))),o&&(p._redirectEventId=o),p}static async _fromIdTokenResponse(e,A,n=!1){const r=new lo;r.updateFromServerResponse(A);const s=new Vn({uid:A.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Vu(s),s}static async _fromGetAccountInfoResponse(e,A,n){const r=A.users[0];Ie(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?$E(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new lo;a.updateFromIdToken(n);const o=new Vn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new jg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=new Map;function Ur(t){Or(t instanceof Function,"Expected a class definition");let e=Ry.get(t);return e?(Or(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ry.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,A){this.storage[e]=A}async _get(e){const A=this.storage[e];return A===void 0?null:A}async _remove(e){delete this.storage[e]}_addListener(e,A){}_removeListener(e,A){}}XE.type="NONE";const Py=XE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t,e,A){return`firebase:${t}:${e}:${A}`}class co{constructor(e,A,n){this.persistence=e,this.auth=A,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=iu(this.userKey,r.apiKey,s),this.fullPersistenceKey=iu("persistence",r.apiKey,s),this.boundEventHandler=A._onStorageEvent.bind(A),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const A=await Gu(this.auth,{idToken:e}).catch(()=>{});return A?Vn._fromGetAccountInfoResponse(this.auth,A,e):null}return Vn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const A=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,A)return this.setCurrentUser(A)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,A,n="authUser"){if(!A.length)return new co(Ur(Py),e,n);const r=(await Promise.all(A.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=r[0]||Ur(Py);const i=iu(n,e.config.apiKey,e.name);let a=null;for(const l of A)try{const u=await l._get(i);if(u){let d;if(typeof u=="string"){const f=await Gu(e,{idToken:u}).catch(()=>{});if(!f)break;d=await Vn._fromGetAccountInfoResponse(e,f,u)}else d=Vn._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}const o=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!o.length?new co(s,e,n):(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(A.map(async l=>{if(l!==s)try{await l._remove(i)}catch{}})),new co(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tF(e))return"Blackberry";if(AF(e))return"Webos";if(JE(e))return"Safari";if((e.includes("chrome/")||qE(e))&&!e.includes("edge/"))return"Chrome";if(eF(e))return"Android";{const A=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(A);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function YE(t=SA()){return/firefox\//i.test(t)}function JE(t=SA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qE(t=SA()){return/crios\//i.test(t)}function ZE(t=SA()){return/iemobile/i.test(t)}function eF(t=SA()){return/android/i.test(t)}function tF(t=SA()){return/blackberry/i.test(t)}function AF(t=SA()){return/webos/i.test(t)}function jm(t=SA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UT(t=SA()){var e;return jm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function ST(){return OS()&&document.documentMode===10}function nF(t=SA()){return jm(t)||eF(t)||AF(t)||tF(t)||/windows phone/i.test(t)||ZE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t,e=[]){let A;switch(t){case"Browser":A=My(SA());break;case"Worker":A=`${My(SA())}-${t}`;break;default:A=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${A}/JsCore/${Po}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,A){const n=s=>new Promise((i,a)=>{try{const o=e(s);i(o)}catch(o){a(o)}});n.onAbort=A,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const A=[];try{for(const n of this.queue)await n(e),n.onAbort&&A.push(n.onAbort)}catch(n){A.reverse();for(const r of A)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(t,e={}){return Mo(t,"GET","/v2/passwordPolicy",Om(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=6;class DT{constructor(e){var n;const A=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=A.minPasswordLength??kT,A.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=A.maxPasswordLength),A.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=A.containsLowercaseCharacter),A.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=A.containsUppercaseCharacter),A.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=A.containsNumericCharacter),A.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=A.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const A={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,A),this.validatePasswordCharacterOptions(e,A),A.isValid&&(A.isValid=A.meetsMinPasswordLength??!0),A.isValid&&(A.isValid=A.meetsMaxPasswordLength??!0),A.isValid&&(A.isValid=A.containsLowercaseLetter??!0),A.isValid&&(A.isValid=A.containsUppercaseLetter??!0),A.isValid&&(A.isValid=A.containsNumericCharacter??!0),A.isValid&&(A.isValid=A.containsNonAlphanumericCharacter??!0),A}validatePasswordLengthOptions(e,A){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(A.meetsMinPasswordLength=e.length>=n),r&&(A.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,A){this.updatePasswordCharacterOptionsStatuses(A,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(A,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,A,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=A)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,A,n,r){this.app=e,this.heartbeatServiceProvider=A,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oy(this),this.idTokenSubscription=new Oy(this),this.beforeStateQueue=new TT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,A){return A&&(this._popupRedirectResolver=Ur(A)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await co.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(A),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const A=await Gu(this,{idToken:e}),n=await Vn._fromGetAccountInfoResponse(this,A,e);await this.directlySetCurrentUser(n)}catch(A){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",A),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(zn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const A=await this.assertedPersistence.getCurrentUser();let n=A,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=n==null?void 0:n._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===a)&&(o!=null&&o.user)&&(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=A,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let A=null;try{A=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return A}async reloadAndSetCurrentUserOrClear(e){try{await Vu(e)}catch(A){if((A==null?void 0:A.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(ri(this));const A=e?JA(e):null;return A&&Ie(A.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(A&&A._clone(this))}async _updateCurrentUser(e,A=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),A||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const A=this._getPasswordPolicyInternal();return A.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):A.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NT(this),A=new DT(e);this.tenantId===null?this._projectPasswordPolicy=A:this._tenantPasswordPolicies[this.tenantId]=A}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dl("auth","Firebase",e())}onAuthStateChanged(e,A,n){return this.registerStateListener(this.authStateSubscription,e,A,n)}beforeAuthStateChanged(e,A){return this.beforeStateQueue.pushCallback(e,A)}onIdTokenChanged(e,A,n){return this.registerStateListener(this.idTokenSubscription,e,A,n)}authStateReady(){return new Promise((e,A)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},A)}})}async revokeAccessToken(e){if(this.currentUser){const A=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:A};this.tenantId!=null&&(n.tenantId=this.tenantId),await QT(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,A){const n=await this.getOrInitRedirectPersistenceManager(A);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const A=e&&Ur(e)||this._popupRedirectResolver;Ie(A,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[Ur(A._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var A,n;return this._isInitialized&&await this.queue(async()=>{}),((A=this._currentUser)==null?void 0:A._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var A;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((A=this.currentUser)==null?void 0:A.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,A,n,r){if(this._deleted)return()=>{};const s=typeof A=="function"?A:A.next.bind(A);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),typeof A=="function"){const o=e.addObserver(A,n,r);return()=>{i=!0,o()}}else{const o=e.addObserver(A);return()=>{i=!0,o()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const A=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());A&&(e["X-Firebase-Client"]=A);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var A;if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((A=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:A.getToken());return e!=null&&e.error&&dT(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Wd(t){return JA(t)}class Oy{constructor(e){this.auth=e,this.observer=null,this.addObserver=JS(A=>this.observer=A)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HT(t){Wm=t}function RT(t){return Wm.loadJS(t)}function PT(){return Wm.gapiScript}function MT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t,e){const A=Hm(t,"auth");if(A.isInitialized()){const r=A.getImmediate(),s=A.getOptions();if(di(s,e??{}))return r;fr(r,"already-initialized")}return A.initialize({options:e})}function KT(t,e){const A=(e==null?void 0:e.persistence)||[],n=(Array.isArray(A)?A:[A]).map(Ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function jT(t,e,A){const n=Wd(t);Ie(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,s=sF(e),{host:i,port:a}=WT(e),o=a===null?"":`:${a}`,l={url:`${s}//${i}${o}/`},u=Object.freeze({host:i,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){Ie(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ie(di(l,n.config.emulator)&&di(u,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=l,n.emulatorConfig=u,n.settings.appVerificationDisabledForTesting=!0,Ho(i)?(NE(`${s}//${i}${o}`),kE("Auth",!0)):zT()}function sF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WT(t){const e=sF(t),A=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!A)return{host:"",port:null};const n=A[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const s=r[1];return{host:s,port:Ky(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:Ky(i)}}}function Ky(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zT(){function t(){const e=document.createElement("p"),A=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",A.position="fixed",A.width="100%",A.backgroundColor="#ffffff",A.border=".1em solid #000000",A.color="#b50000",A.bottom="0px",A.left="0px",A.margin="0px",A.zIndex="10000",A.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,A){this.providerId=e,this.signInMethod=A}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,A){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e){return BT(t,"POST","/v1/accounts:signInWithIdp",Om(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="http://localhost";class hi extends iF{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const A=new hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(A.idToken=e.idToken),e.accessToken&&(A.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(A.nonce=e.nonce),e.pendingToken&&(A.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(A.accessToken=e.oauthToken,A.secret=e.oauthTokenSecret):fr("argument-error"),A}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const A=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r,...s}=A;if(!n||!r)return null;const i=new hi(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const A=this.buildRequest();return uo(e,A)}_linkToIdToken(e,A){const n=this.buildRequest();return n.idToken=A,uo(e,n)}_getReauthenticationResolver(e){const A=this.buildRequest();return A.autoCreate=!1,uo(e,A)}buildRequest(){const e={requestUri:GT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const A={};this.idToken&&(A.id_token=this.idToken),this.accessToken&&(A.access_token=this.accessToken),this.secret&&(A.oauth_token_secret=this.secret),A.providerId=this.providerId,this.nonce&&!this.pendingToken&&(A.nonce=this.nonce),e.postBody=Ro(A)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends zm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends Hl{constructor(){super("facebook.com")}static credential(e){return hi._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.FACEBOOK_SIGN_IN_METHOD="facebook.com";os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,A){return hi._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:A})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:A,oauthAccessToken:n}=e;if(!A&&!n)return null;try{return lr.credential(A,n)}catch{return null}}}lr.GOOGLE_SIGN_IN_METHOD="google.com";lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends Hl{constructor(){super("github.com")}static credential(e){return hi._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Hl{constructor(){super("twitter.com")}static credential(e,A){return hi._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:A})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:A,oauthTokenSecret:n}=e;if(!A||!n)return null;try{return ls.credential(A,n)}catch{return null}}}ls.TWITTER_SIGN_IN_METHOD="twitter.com";ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,A,n,r=!1){const s=await Vn._fromIdTokenResponse(e,n,r),i=jy(n);return new _o({user:s,providerId:i,_tokenResponse:n,operationType:A})}static async _forOperation(e,A,n){await e._updateTokensIfNecessary(n,!0);const r=jy(n);return new _o({user:e,providerId:r,_tokenResponse:n,operationType:A})}}function jy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends Ms{constructor(e,A,n,r){super(A.code,A.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,$u.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:A.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,A,n,r){return new $u(e,A,n,r)}}function oF(t,e,A,n){return(e==="reauthenticate"?A._getReauthenticationResolver(t):A._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$u._fromErrorAndOperation(t,s,e,n):s})}async function VT(t,e,A=!1){const n=await wl(t,e._linkToIdToken(t.auth,await t.getIdToken()),A);return _o._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $T(t,e,A=!1){const{auth:n}=t;if(zn(n.app))return Promise.reject(ri(n));const r="reauthenticate";try{const s=await wl(t,oF(n,r,e,t),A);Ie(s.idToken,n,"internal-error");const i=Km(s.idToken);Ie(i,n,"internal-error");const{sub:a}=i;return Ie(t.uid===a,n,"user-mismatch"),_o._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fr(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XT(t,e,A=!1){if(zn(t.app))return Promise.reject(ri(t));const n="signIn",r=await oF(t,n,e),s=await _o._fromIdTokenResponse(t,n,r);return A||await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t,e){return JA(t).setPersistence(e)}function aF(t,e,A,n){return JA(t).onIdTokenChanged(e,A,n)}function JT(t,e,A){return JA(t).beforeAuthStateChanged(e,A)}function qT(t,e,A,n){return JA(t).onAuthStateChanged(e,A,n)}function ZT(t){return JA(t).signOut()}const Xu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e,A){this.storageRetriever=e,this.type=A}_isAvailable(){try{return this.storage?(this.storage.setItem(Xu,"1"),this.storage.removeItem(Xu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,A){return this.storage.setItem(e,JSON.stringify(A)),Promise.resolve()}_get(e){const A=this.storage.getItem(e);return Promise.resolve(A?JSON.parse(A):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=1e3,tN=10;class cF extends lF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,A)=>this.onStorageEvent(e,A),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const A of Object.keys(this.listeners)){const n=this.storage.getItem(A),r=this.localCache[A];n!==r&&e(A,r,n)}}onStorageEvent(e,A=!1){if(!e.key){this.forAllChangedKeys((i,a,o)=>{this.notifyListeners(i,o)});return}const n=e.key;A?this.detachListener():this.stopPolling();const r=()=>{const i=this.storage.getItem(n);!A&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);ST()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,tN):r()}notifyListeners(e,A){this.localCache[e]=A;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,A,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:A,newValue:n}),!0)})},eN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,A){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(A)}_removeListener(e,A){this.listeners[e]&&(this.listeners[e].delete(A),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,A){await super._set(e,A),this.localCache[e]=JSON.stringify(A)}async _get(e){const A=await super._get(e);return this.localCache[e]=JSON.stringify(A),A}async _remove(e){await super._remove(e),delete this.localCache[e]}}cF.type="LOCAL";const AN=cF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF extends lF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,A){}_removeListener(e,A){}}uF.type="SESSION";const Gm=uF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(A){return{fulfilled:!1,reason:A}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const A=this.receivers.find(r=>r.isListeningto(e));if(A)return A;const n=new zd(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const A=e,{eventId:n,eventType:r,data:s}=A.data,i=this.handlersMap[r];if(!(i!=null&&i.size))return;A.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async l=>l(A.origin,s)),o=await nN(a);A.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,A){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(A)}_unsubscribe(e,A){this.handlersMap[e]&&A&&this.handlersMap[e].delete(A),(!A||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t="",e=10){let A="";for(let n=0;n<e;n++)A+=Math.floor(Math.random()*10);return t+A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,A,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=Vm("",20);r.port1.start();const u=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),o(new Error("invalid_response"));break}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:A},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(){return window}function sN(t){dr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(){return typeof dr().WorkerGlobalScope<"u"&&typeof dr().importScripts=="function"}async function iN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function aN(){return dF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF="firebaseLocalStorageDb",lN=1,Yu="firebaseLocalStorage",hF="fbase_key";class Rl{constructor(e){this.request=e}toPromise(){return new Promise((e,A)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{A(this.request.error)})})}}function Gd(t,e){return t.transaction([Yu],e?"readwrite":"readonly").objectStore(Yu)}function cN(){const t=indexedDB.deleteDatabase(fF);return new Rl(t).toPromise()}function Wg(){const t=indexedDB.open(fF,lN);return new Promise((e,A)=>{t.addEventListener("error",()=>{A(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Yu,{keyPath:hF})}catch(r){A(r)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Yu)?e(n):(n.close(),await cN(),e(await Wg()))})})}async function Wy(t,e,A){const n=Gd(t,!0).put({[hF]:e,value:A});return new Rl(n).toPromise()}async function uN(t,e){const A=Gd(t,!1).get(e),n=await new Rl(A).toPromise();return n===void 0?null:n.value}function zy(t,e){const A=Gd(t,!0).delete(e);return new Rl(A).toPromise()}const dN=800,fN=3;class gF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wg(),this.db)}async _withRetries(e){let A=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(A++>fN)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zd._getInstance(aN()),this.receiver._subscribe("keyChanged",async(e,A)=>({keyProcessed:(await this._poll()).includes(A.key)})),this.receiver._subscribe("ping",async(e,A)=>["keyChanged"])}async initializeSender(){var A,n;if(this.activeServiceWorker=await iN(),!this.activeServiceWorker)return;this.sender=new rN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(A=e[0])!=null&&A.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wg();return await Wy(e,Xu,"1"),await zy(e,Xu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,A){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wy(n,e,A)),this.localCache[e]=A,this.notifyServiceWorker(e)))}async _get(e){const A=await this._withRetries(n=>uN(n,e));return this.localCache[e]=A,A}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(A=>zy(A,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Gd(r,!1).getAll();return new Rl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const A=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),A.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),A.push(r));return A}notifyListeners(e,A){this.localCache[e]=A;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(A)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,A){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(A)}_removeListener(e,A){this.listeners[e]&&(this.listeners[e].delete(A),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gF.type="LOCAL";const hN=gF;new Ll(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t,e){return e?Ur(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends iF{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,A){return uo(e,this._buildIdpRequest(A))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const A={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(A.idToken=e),A}}function gN(t){return XT(t.auth,new $m(t),t.bypassAuthState)}function pN(t){const{auth:e,user:A}=t;return Ie(A,e,"internal-error"),$T(A,new $m(t),t.bypassAuthState)}async function mN(t){const{auth:e,user:A}=t;return Ie(A,e,"internal-error"),VT(A,new $m(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,A,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(A)?A:[A]}execute(){return new Promise(async(e,A)=>{this.pendingPromise={resolve:e,reject:A};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:A,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i){this.reject(i);return}const o={auth:this.auth,requestUri:A,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gN;case"linkViaPopup":case"linkViaRedirect":return mN;case"reauthViaPopup":case"reauthViaRedirect":return pN;default:fr(this.auth,"internal-error")}}resolve(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=new Ll(2e3,1e4);async function yN(t,e,A){if(zn(t.app))return Promise.reject(Jn(t,"operation-not-supported-in-this-environment"));const n=Wd(t);fT(t,e,zm);const r=pF(n,A);return new Zs(n,"signInViaPopup",e,r).executeNotNull()}class Zs extends mF{constructor(e,A,n,r,s){super(e,A,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Zs.currentPopupAction&&Zs.currentPopupAction.cancel(),Zs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Or(this.filter.length===1,"Popup operations only handle one event");const e=Vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(A=>{this.reject(A)}),this.resolver._isIframeWebStorageSupported(this.auth,A=>{A||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var A,n;if((n=(A=this.authWindow)==null?void 0:A.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wN.get())};e()}}Zs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="pendingRedirect",ou=new Map;class vN extends mF{constructor(e,A,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],A,void 0,n),this.eventId=null}async execute(){let e=ou.get(this.auth._key());if(!e){try{const n=await CN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(A){e=()=>Promise.reject(A)}ou.set(this.auth._key(),e)}return this.bypassAuthState||ou.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const A=await this.auth._redirectUserForId(e.eventId);if(A)return this.user=A,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CN(t,e){const A=FN(e),n=EN(t);if(!await n._isAvailable())return!1;const r=await n._get(A)==="true";return await n._remove(A),r}function xN(t,e){ou.set(t._key(),e)}function EN(t){return Ur(t._redirectPersistence)}function FN(t){return iu(BN,t.config.apiKey,t.name)}async function _N(t,e,A=!1){if(zn(t.app))return Promise.reject(ri(t));const n=Wd(t),r=pF(n,e),i=await new vN(n,r,A).execute();return i&&!A&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=10*60*1e3;class IN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let A=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(A=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QN(e)||(this.hasHandledPotentialRedirect=!0,A||(this.queuedRedirectEvent=e,A=!0)),A}sendToConsumer(e,A){var n;if(e.error&&!wF(e)){const r=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";A.onError(Jn(this.auth,r))}else A.onAuthEvent(e)}isEventForConsumer(e,A){const n=A.eventId===null||!!e.eventId&&e.eventId===A.eventId;return A.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gy(e))}saveEventToCache(e){this.cachedEventUids.add(Gy(e)),this.lastProcessedEventTime=Date.now()}}function Gy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,e={}){return Mo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TN=/^https?/;async function NN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await UN(t);for(const A of e)try{if(kN(A))return}catch{}fr(t,"unauthorized-domain")}function kN(t){const e=Kg(),{protocol:A,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?A==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):A==="chrome-extension:"&&i.hostname===n}if(!TN.test(A))return!1;if(SN.test(t))return n===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new Ll(3e4,6e4);function Vy(){const t=dr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let A=0;A<t.CP.length;A++)t.CP[A]=null}}function LN(t){return new Promise((e,A)=>{var r,s,i;function n(){Vy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vy(),A(Jn(t,"network-request-failed"))},timeout:DN.get()})}if((s=(r=dr().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((i=dr().gapi)!=null&&i.load)n();else{const a=MT("iframefcb");return dr()[a]=()=>{gapi.load?n():A(Jn(t,"network-request-failed"))},RT(`${PT()}?onload=${a}`).catch(o=>A(o))}}).catch(e=>{throw au=null,e})}let au=null;function HN(t){return au=au||LN(t),au}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=new Ll(5e3,15e3),PN="__/auth/iframe",MN="emulator/auth/iframe",ON={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jN(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const A=e.emulator?Mm(e,MN):`https://${t.config.authDomain}/${PN}`,n={apiKey:e.apiKey,appName:t.name,v:Po},r=KN.get(t.config.apiHost);r&&(n.eid=r);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${A}?${Ro(n).slice(1)}`}async function WN(t){const e=await HN(t),A=dr().gapi;return Ie(A,t,"internal-error"),e.open({where:document.body,url:jN(t),messageHandlersFilter:A.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ON,dontclear:!0},n=>new Promise(async(r,s)=>{await n.restyle({setHideOnLeave:!1});const i=Jn(t,"network-request-failed"),a=dr().setTimeout(()=>{s(i)},RN.get());function o(){dr().clearTimeout(a),r(n)}n.ping(o).then(o,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GN=500,VN=600,$N="_blank",XN="http://localhost";class $y{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YN(t,e,A,n=GN,r=VN){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const o={...zN,width:n.toString(),height:r.toString(),top:s,left:i},l=SA().toLowerCase();A&&(a=qE(l)?$N:A),YE(l)&&(e=e||XN,o.scrollbars="yes");const u=Object.entries(o).reduce((f,[B,h])=>`${f}${B}=${h},`,"");if(UT(l)&&a!=="_self")return JN(e||"",a),new $y(null);const d=window.open(e||"",a,u);Ie(d,t,"popup-blocked");try{d.focus()}catch{}return new $y(d)}function JN(t,e){const A=document.createElement("a");A.href=t,A.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),A.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="__/auth/handler",ZN="emulator/auth/handler",ek=encodeURIComponent("fac");async function Xy(t,e,A,n,r,s){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:A,redirectUrl:n,v:Po,eventId:r};if(e instanceof zm){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",Lg(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))i[u]=d}if(e instanceof Hl){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(i.scopes=u.join(","))}t.tenantId&&(i.tid=t.tenantId);const a=i;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const o=await t._getAppCheckToken(),l=o?`#${ek}=${encodeURIComponent(o)}`:"";return`${tk(t)}?${Ro(a).slice(1)}${l}`}function tk({config:t}){return t.emulator?Mm(t,ZN):`https://${t.authDomain}/${qN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih="webStorageSupport";class Ak{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gm,this._completeRedirectFn=_N,this._overrideRedirectResult=xN}async _openPopup(e,A,n,r){var i;Or((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await Xy(e,A,n,Kg(),r);return YN(e,s,Vm())}async _openRedirect(e,A,n,r){await this._originValidation(e);const s=await Xy(e,A,n,Kg(),r);return sN(s),new Promise(()=>{})}_initialize(e){const A=e._key();if(this.eventManagers[A]){const{manager:r,promise:s}=this.eventManagers[A];return r?Promise.resolve(r):(Or(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[A]={promise:n},n.catch(()=>{delete this.eventManagers[A]}),n}async initAndGetManager(e){const A=await WN(e),n=new IN(e);return A.register("authEvent",r=>(Ie(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=A,n}_isIframeWebStorageSupported(e,A){this.iframes[e._key()].send(ih,{type:ih},r=>{var i;const s=(i=r==null?void 0:r[0])==null?void 0:i[ih];s!==void 0&&A(!!s),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const A=e._key();return this.originValidationPromises[A]||(this.originValidationPromises[A]=NN(e)),this.originValidationPromises[A]}get _shouldInitProactively(){return nF()||JE()||jm()}}const nk=Ak;var Yy="@firebase/auth",Jy="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const A=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,A),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const A=this.internalListeners.get(e);A&&(this.internalListeners.delete(e),A(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ik(t){Fo(new fi("auth",(e,{options:A})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=n.options;Ie(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rF(t)},l=new LT(n,r,s,o);return KT(l,A),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,A,n)=>{e.getProvider("auth-internal").initialize()})),Fo(new fi("auth-internal",e=>{const A=Wd(e.getProvider("auth").getImmediate());return(n=>new rk(n))(A)},"PRIVATE").setInstantiationMode("EXPLICIT")),_s(Yy,Jy,sk(t)),_s(Yy,Jy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=5*60,ak=TE("authIdTokenMaxAge")||ok;let qy=null;const lk=t=>async e=>{const A=e&&await e.getIdTokenResult(),n=A&&(new Date().getTime()-Date.parse(A.issuedAtTime))/1e3;if(n&&n>ak)return;const r=A==null?void 0:A.token;qy!==r&&(qy=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function ck(t=ME()){const e=Hm(t,"auth");if(e.isInitialized())return e.getImmediate();const A=OT(t,{popupRedirectResolver:nk,persistence:[hN,AN,Gm]}),n=TE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=lk(s.toString());JT(A,i,()=>i(A.currentUser)),aF(A,a=>i(a))}}const r=UE("auth");return r&&jT(A,`http://${r}`),A}function uk(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}HT({loadJS(t){return new Promise((e,A)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=r=>{const s=Jn("internal-error");s.customData=r,A(s)},n.type="text/javascript",n.charset="UTF-8",uk().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ik("Browser");var Zy={};const eB="@firebase/database",tB="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yF="";function dk(t){yF=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,A){A==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),tA(A))}get(e){const A=this.domStorage_.getItem(this.prefixedName_(e));return A==null?null:pl(A)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,A){A==null?delete this.cache_[e]:this.cache_[e]=A}get(e){return pr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fk(e)}}catch{}return new hk},ei=BF("localStorage"),gk=BF("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new Dm("@firebase/database"),pk=function(){let t=1;return function(){return t++}}(),vF=function(t){const e=e2(t),A=new YS;A.update(e);const n=A.digest();return Tm.encodeByteArray(n)},Pl=function(...t){let e="";for(let A=0;A<t.length;A++){const n=t[A];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=Pl.apply(null,n):typeof n=="object"?e+=tA(n):e+=n,e+=" "}return e};let Ka=null,AB=!0;const mk=function(t,e){ie(!0,"Can't turn on custom loggers persistently."),fo.logLevel=ot.VERBOSE,Ka=fo.log.bind(fo)},aA=function(...t){if(AB===!0&&(AB=!1,Ka===null&&gk.get("logging_enabled")===!0&&mk()),Ka){const e=Pl.apply(null,t);Ka(e)}},Ml=function(t){return function(...e){aA(t,...e)}},zg=function(...t){const e="FIREBASE INTERNAL ERROR: "+Pl(...t);fo.error(e)},Kr=function(...t){const e=`FIREBASE FATAL ERROR: ${Pl(...t)}`;throw fo.error(e),new Error(e)},UA=function(...t){const e="FIREBASE WARNING: "+Pl(...t);fo.warn(e)},wk=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&UA("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Xm=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},yk=function(t){if(document.readyState==="complete")t();else{let e=!1;const A=function(){if(!document.body){setTimeout(A,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",A,!1),window.addEventListener("load",A,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&A()}),window.attachEvent("onload",A))}},bo="[MIN_NAME]",gi="[MAX_NAME]",xi=function(t,e){if(t===e)return 0;if(t===bo||e===gi)return-1;if(e===bo||t===gi)return 1;{const A=nB(t),n=nB(e);return A!==null?n!==null?A-n===0?t.length-e.length:A-n:-1:n!==null?1:t<e?-1:1}},Bk=function(t,e){return t===e?0:t<e?-1:1},ca=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+tA(e))},Ym=function(t){if(typeof t!="object"||t===null)return tA(t);const e=[];for(const n in t)e.push(n);e.sort();let A="{";for(let n=0;n<e.length;n++)n!==0&&(A+=","),A+=tA(e[n]),A+=":",A+=Ym(t[e[n]]);return A+="}",A},CF=function(t,e){const A=t.length;if(A<=e)return[t];const n=[];for(let r=0;r<A;r+=e)r+e>A?n.push(t.substring(r,A)):n.push(t.substring(r,r+e));return n};function fA(t,e){for(const A in t)t.hasOwnProperty(A)&&e(A,t[A])}const xF=function(t){ie(!Xm(t),"Invalid JSON number");const e=11,A=52,n=(1<<e-1)-1;let r,s,i,a,o;t===0?(s=0,i=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),n),s=a+n,i=Math.round(t*Math.pow(2,A-a)-Math.pow(2,A))):(s=0,i=Math.round(t/Math.pow(2,1-n-A))));const l=[];for(o=A;o;o-=1)l.push(i%2?1:0),i=Math.floor(i/2);for(o=e;o;o-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(r?1:0),l.reverse();const u=l.join("");let d="";for(o=0;o<64;o+=8){let f=parseInt(u.substr(o,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},vk=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Ck=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function xk(t,e){let A="Unknown Error";t==="too_big"?A="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?A="Client doesn't have permission to access the desired data.":t==="unavailable"&&(A="The service is unavailable");const n=new Error(t+" at "+e._path.toString()+": "+A);return n.code=t.toUpperCase(),n}const Ek=new RegExp("^-?(0*)\\d{1,10}$"),Fk=-2147483648,_k=2147483647,nB=function(t){if(Ek.test(t)){const e=Number(t);if(e>=Fk&&e<=_k)return e}return null},Oo=function(t){try{t()}catch(e){setTimeout(()=>{const A=e.stack||"";throw UA("Exception was thrown by user callback.",A),e},Math.floor(0))}},bk=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ja=function(t,e){const A=setTimeout(t,e);return typeof A=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(A):typeof A=="object"&&A.unref&&A.unref(),A};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,A){this.appCheckProvider=A,this.appName=e.name,zn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=A==null?void 0:A.getImmediate({optional:!0}),this.appCheck||A==null||A.get().then(n=>this.appCheck=n)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((A,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(A,n):A(null)},0)})}addTokenChangeListener(e){var A;(A=this.appCheckProvider)==null||A.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){UA(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,A,n){this.appName_=e,this.firebaseOptions_=A,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(A=>A&&A.code==="auth/token-not-initialized"?(aA("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(A)):new Promise((A,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(A,n):A(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(A=>A.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(A=>A.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',UA(e)}}class lu{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}lu.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="5",EF="v",FF="s",_F="r",bF="f",IF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,QF="ls",UF="p",Gg="ac",SF="websocket",TF="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e,A,n,r,s=!1,i="",a=!1,o=!1,l=null){this.secure=A,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=i,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ei.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ei.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",A=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${A}`}}function Uk(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function kF(t,e,A){ie(typeof e=="string","typeof type must == string"),ie(typeof A=="object","typeof params must == object");let n;if(e===SF)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===TF)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Uk(t)&&(A.ns=t.namespace);const r=[];return fA(A,(s,i)=>{r.push(s+"="+i)}),n+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.counters_={}}incrementCounter(e,A=1){pr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=A}get(){return QS(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh={},ah={};function qm(t){const e=t.toString();return oh[e]||(oh[e]=new Sk),oh[e]}function Tk(t,e){const A=t.toString();return ah[A]||(ah[A]=e()),ah[A]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,A){this.closeAfterResponse=e,this.onClose=A,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,A){for(this.pendingResponses[e]=A;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<n.length;++r)n[r]&&Oo(()=>{this.onMessage_(n[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB="start",kk="close",Dk="pLPCommand",Lk="pRTLPCB",DF="id",LF="pw",HF="ser",Hk="cb",Rk="seg",Pk="ts",Mk="d",Ok="dframe",RF=1870,PF=30,Kk=RF-PF,jk=25e3,Wk=3e4;class to{constructor(e,A,n,r,s,i,a){this.connId=e,this.repoInfo=A,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.transportSessionId=i,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ml(e),this.stats_=qm(A),this.urlFn=o=>(this.appCheckToken&&(o[Gg]=this.appCheckToken),kF(A,TF,o))}open(e,A){this.curSegmentNum=0,this.onDisconnect_=A,this.myPacketOrderer=new Nk(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Wk)),yk(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zm((...s)=>{const[i,a,o,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,i===rB)this.id=a,this.password=o;else if(i===kk)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+i)},(...s)=>{const[i,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(i,a)},()=>{this.onClosed_()},this.urlFn);const n={};n[rB]="t",n[HF]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[Hk]=this.scriptTagHolder.uniqueCallbackIdentifier),n[EF]=Jm,this.transportSessionId&&(n[FF]=this.transportSessionId),this.lastSessionId&&(n[QF]=this.lastSessionId),this.applicationId&&(n[UF]=this.applicationId),this.appCheckToken&&(n[Gg]=this.appCheckToken),typeof location<"u"&&location.hostname&&IF.test(location.hostname)&&(n[_F]=bF);const r=this.urlFn(n);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){to.forceAllow_=!0}static forceDisallow(){to.forceDisallow_=!0}static isAvailable(){return to.forceAllow_?!0:!to.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!vk()&&!Ck()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const A=tA(e);this.bytesSent+=A.length,this.stats_.incrementCounter("bytes_sent",A.length);const n=IE(A),r=CF(n,Kk);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,A){this.myDisconnFrame=document.createElement("iframe");const n={};n[Ok]="t",n[DF]=e,n[LF]=A,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const A=tA(e).length;this.bytesReceived+=A,this.stats_.incrementCounter("bytes_received",A)}}class Zm{constructor(e,A,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=pk(),window[Dk+this.uniqueCallbackIdentifier]=e,window[Lk+this.uniqueCallbackIdentifier]=A,this.myIFrame=Zm.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const i="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(a){aA("frame writing exception"),a.stack&&aA(a.stack),aA(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||aA("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,A){for(this.myID=e,this.myPW=A,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[DF]=this.myID,e[LF]=this.myPW,e[HF]=this.currentSerial;let A=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+PF+n.length<=RF;){const i=this.pendingSegs.shift();n=n+"&"+Rk+r+"="+i.seg+"&"+Pk+r+"="+i.ts+"&"+Mk+r+"="+i.d,r++}return A=A+n,this.addLongPollTag_(A,this.currentSerial),!0}else return!1}enqueueSegment(e,A,n){this.pendingSegs.push({seg:e,ts:A,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,A){this.outstandingRequests.add(A);const n=()=>{this.outstandingRequests.delete(A),this.newRequest_()},r=setTimeout(n,Math.floor(jk)),s=()=>{clearTimeout(r),n()};this.addTag(e,s)}addTag(e,A){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const r=n.readyState;(!r||r==="loaded"||r==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),A())},n.onerror=()=>{aA("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=16384,Gk=45e3;let Ju=null;typeof MozWebSocket<"u"?Ju=MozWebSocket:typeof WebSocket<"u"&&(Ju=WebSocket);class Gn{constructor(e,A,n,r,s,i,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ml(this.connId),this.stats_=qm(A),this.connURL=Gn.connectionURL_(A,i,a,r,n),this.nodeAdmin=A.nodeAdmin}static connectionURL_(e,A,n,r,s){const i={};return i[EF]=Jm,typeof location<"u"&&location.hostname&&IF.test(location.hostname)&&(i[_F]=bF),A&&(i[FF]=A),n&&(i[QF]=n),r&&(i[Gg]=r),s&&(i[UF]=s),kF(e,SF,i)}open(e,A){this.onDisconnect=A,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ei.set("previous_websocket_failure",!0);try{let n;KS(),this.mySock=new Ju(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const r=n.message||n.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const r=n.message||n.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Gn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const A=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(A);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&Ju!==null&&!Gn.forceDisallow_}static previouslyFailed(){return ei.isInMemoryStorage||ei.get("previous_websocket_failure")===!0}markConnectionHealthy(){ei.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const A=this.frames.join("");this.frames=null;const n=pl(A);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ie(this.frames===null,"We already have a frame buffer"),e.length<=6){const A=Number(e);if(!isNaN(A))return this.handleNewFrameCount_(A),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const A=e.data;if(this.bytesReceived+=A.length,this.stats_.incrementCounter("bytes_received",A.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(A);else{const n=this.extractFrameCount_(A);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const A=tA(e);this.bytesSent+=A.length,this.stats_.incrementCounter("bytes_sent",A.length);const n=CF(A,zk);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Gk))}sendString_(e){try{this.mySock.send(e)}catch(A){this.log_("Exception thrown from WebSocket.send():",A.message||A.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Gn.responsesRequiredToBeHealthy=2;Gn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{static get ALL_TRANSPORTS(){return[to,Gn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const A=Gn&&Gn.isAvailable();let n=A&&!Gn.previouslyFailed();if(e.webSocketOnly&&(A||UA("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Gn];else{const r=this.transports_=[];for(const s of yl.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);yl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}yl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=6e4,$k=5e3,Xk=10*1024,Yk=100*1024,lh="t",sB="d",Jk="s",iB="r",qk="e",oB="o",aB="a",lB="n",cB="p",Zk="h";class e4{constructor(e,A,n,r,s,i,a,o,l,u){this.id=e,this.repoInfo_=A,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=i,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ml("c:"+this.id+":"),this.transportManager_=new yl(A),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const A=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(A,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=ja(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Yk?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Xk?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return A=>{e===this.conn_?this.onConnectionLost_(A):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return A=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(A):e===this.secondaryConn_?this.onSecondaryMessageReceived_(A):this.log_("message on old connection"))}}sendRequest(e){const A={t:"d",d:e};this.sendData_(A)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(lh in e){const A=e[lh];A===aB?this.upgradeIfSecondaryHealthy_():A===iB?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):A===oB&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const A=ca("t",e),n=ca("d",e);if(A==="c")this.onSecondaryControl_(n);else if(A==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+A)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:cB,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:aB,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:lB,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const A=ca("t",e),n=ca("d",e);A==="c"?this.onControl_(n):A==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const A=ca(lh,e);if(sB in e){const n=e[sB];if(A===Zk){const r={...n};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(A===lB){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else A===Jk?this.onConnectionShutdown_(n):A===iB?this.onReset_(n):A===qk?zg("Server Error: "+n):A===oB?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zg("Unknown control packet command: "+A)}}onHandshake_(e){const A=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,A),Jm!==n&&UA("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const A=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(A,n),ja(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Vk))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,A){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(A,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ja(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor($k))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:cB,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ei.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{put(e,A,n,r){}merge(e,A,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,A,n){}onDisconnectMerge(e,A,n){}onDisconnectCancel(e,A){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e){this.allowedEvents_=e,this.listeners_={},ie(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...A){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let r=0;r<n.length;r++)n[r].callback.apply(n[r].context,A)}}on(e,A,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:A,context:n});const r=this.getInitialEvent(e);r&&A.apply(n,r)}off(e,A,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===A&&(!n||n===r[s].context)){r.splice(s,1);return}}validateEventType_(e){ie(this.allowedEvents_.find(A=>A===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu extends OF{static getInstance(){return new qu}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!km()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ie(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=32,dB=768;class lt{constructor(e,A){if(A===void 0){this.pieces_=e.split("/");let n=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=A}toString(){let e="";for(let A=this.pieceNum_;A<this.pieces_.length;A++)this.pieces_[A]!==""&&(e+="/"+this.pieces_[A]);return e||"/"}}function nt(){return new lt("")}function Pe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ns(t){return t.pieces_.length-t.pieceNum_}function dt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new lt(t.pieces_,e)}function ew(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function t4(t){let e="";for(let A=t.pieceNum_;A<t.pieces_.length;A++)t.pieces_[A]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[A])));return e||"/"}function Bl(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function KF(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let A=t.pieceNum_;A<t.pieces_.length-1;A++)e.push(t.pieces_[A]);return new lt(e,0)}function Qt(t,e){const A=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)A.push(t.pieces_[n]);if(e instanceof lt)for(let n=e.pieceNum_;n<e.pieces_.length;n++)A.push(e.pieces_[n]);else{const n=e.split("/");for(let r=0;r<n.length;r++)n[r].length>0&&A.push(n[r])}return new lt(A,0)}function je(t){return t.pieceNum_>=t.pieces_.length}function GA(t,e){const A=Pe(t),n=Pe(e);if(A===null)return e;if(A===n)return GA(dt(t),dt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function A4(t,e){const A=Bl(t,0),n=Bl(e,0);for(let r=0;r<A.length&&r<n.length;r++){const s=xi(A[r],n[r]);if(s!==0)return s}return A.length===n.length?0:A.length<n.length?-1:1}function tw(t,e){if(Ns(t)!==Ns(e))return!1;for(let A=t.pieceNum_,n=e.pieceNum_;A<=t.pieces_.length;A++,n++)if(t.pieces_[A]!==e.pieces_[n])return!1;return!0}function En(t,e){let A=t.pieceNum_,n=e.pieceNum_;if(Ns(t)>Ns(e))return!1;for(;A<t.pieces_.length;){if(t.pieces_[A]!==e.pieces_[n])return!1;++A,++n}return!0}class n4{constructor(e,A){this.errorPrefix_=A,this.parts_=Bl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=jd(this.parts_[n]);jF(this)}}function r4(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=jd(e),jF(t)}function s4(t){const e=t.parts_.pop();t.byteLength_-=jd(e),t.parts_.length>0&&(t.byteLength_-=1)}function jF(t){if(t.byteLength_>dB)throw new Error(t.errorPrefix_+"has a key path longer than "+dB+" bytes ("+t.byteLength_+").");if(t.parts_.length>uB)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+uB+") or object contains a cycle "+$s(t))}function $s(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw extends OF{static getInstance(){return new Aw}constructor(){super(["visible"]);let e,A;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(A="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(A="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(A="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(A="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,A&&document.addEventListener(A,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}getInitialEvent(e){return ie(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=1e3,i4=60*5*1e3,fB=30*1e3,o4=1.3,a4=3e4,l4="server_kill",hB=3;class kr extends MF{constructor(e,A,n,r,s,i,a,o){if(super(),this.repoInfo_=e,this.applicationId_=A,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=kr.nextPersistentConnectionId_++,this.log_=Ml("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ua,this.maxReconnectDelay_=i4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Aw.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&qu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,A,n){const r=++this.requestNumber_,s={r,a:e,b:A};this.log_(tA(s)),ie(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const A=new kl,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:i=>{const a=i.d;i.s==="ok"?A.resolve(a):A.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),A.promise}listen(e,A,n,r){this.initConnection_();const s=e._queryIdentifier,i=e._path.toString();this.log_("Listen called for "+i+" "+s),this.listens.has(i)||this.listens.set(i,new Map),ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ie(!this.listens.get(i).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:A,query:e,tag:n};this.listens.get(i).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const A=this.outstandingGets_[e];this.sendRequest("g",A.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),A.onComplete&&A.onComplete(n)})}sendListen_(e){const A=e.query,n=A._path.toString(),r=A._queryIdentifier;this.log_("Listen on "+n+" for "+r);const s={p:n},i="q";e.tag&&(s.q=A._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(i,s,a=>{const o=a.d,l=a.s;kr.warnOnListenWarnings_(o,A),(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(n,r),e.onComplete&&e.onComplete(l,o))})}static warnOnListenWarnings_(e,A){if(e&&typeof e=="object"&&pr(e,"w")){const n=Eo(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const r='".indexOn": "'+A._queryParams.getIndex().toString()+'"',s=A._path.toString();UA(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||XS(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fB)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,A=$S(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(A,n,r=>{const s=r.s,i=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const A=e.s,n=e.d||"error";A==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(A,n)})}unlisten(e,A){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,A)}sendUnlisten_(e,A,n,r){this.log_("Unlisten on "+e+" for "+A);const s={p:e},i="n";r&&(s.q=n,s.t=r),this.sendRequest(i,s)}onDisconnectPut(e,A,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,A,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:A,onComplete:n})}onDisconnectMerge(e,A,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,A,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:A,onComplete:n})}onDisconnectCancel(e,A){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,A):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:A})}sendOnDisconnect_(e,A,n,r){const s={p:A,d:n};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,i=>{r&&setTimeout(()=>{r(i.s,i.d)},Math.floor(0))})}put(e,A,n,r){this.putInternal("p",e,A,n,r)}merge(e,A,n,r){this.putInternal("m",e,A,n,r)}putInternal(e,A,n,r,s){this.initConnection_();const i={p:A,d:n};s!==void 0&&(i.h=s),this.outstandingPuts_.push({action:e,request:i,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+A)}sendPut_(e){const A=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(A,n,s=>{this.log_(A+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const A={c:e};this.log_("reportStats",A),this.sendRequest("s",A,n=>{if(n.s!=="ok"){const s=n.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+tA(e));const A=e.r,n=this.requestCBHash_[A];n&&(delete this.requestCBHash_[A],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,A){this.log_("handleServerMessage",e,A),e==="d"?this.onDataUpdate_(A.p,A.d,!1,A.t):e==="m"?this.onDataUpdate_(A.p,A.d,!0,A.t):e==="c"?this.onListenRevoked_(A.p,A.q):e==="ac"?this.onAuthRevoked_(A.s,A.d):e==="apc"?this.onAppCheckRevoked_(A.s,A.d):e==="sd"?this.onSecurityDebugPacket_(A):zg("Unrecognized action received from server: "+tA(e)+`
Are you using the latest client?`)}onReady_(e,A){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=A,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ie(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ua,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ua,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>a4&&(this.reconnectDelay_=ua),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let A=Math.max(0,this.reconnectDelay_-e);A=Math.random()*A,this.log_("Trying to reconnect in "+A+"ms"),this.scheduleConnect_(A),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*o4)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),A=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+kr.nextConnectionId_++,s=this.lastSessionId;let i=!1,a=null;const o=function(){a?a.close():(i=!0,n())},l=function(d){ie(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:o,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);i?aA("getToken() completed but was canceled"):(aA("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new e4(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,A,n,B=>{UA(B+" ("+this.repoInfo_.toString()+")"),this.interrupt(l4)},s))}catch(d){this.log_("Failed to get token: "+d),i||(this.repoInfo_.nodeAdmin&&UA(d),o())}}}interrupt(e){aA("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){aA("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Lg(this.interruptReasons_)&&(this.reconnectDelay_=ua,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const A=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:A})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const A=this.outstandingPuts_[e];A&&"h"in A.request&&A.queued&&(A.onComplete&&A.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,A){let n;A?n=A.map(s=>Ym(s)).join("$"):n="default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,A){const n=new lt(e).toString();let r;if(this.listens.has(n)){const s=this.listens.get(n);r=s.get(A),s.delete(A),s.size===0&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,A){aA("Auth token revoked: "+e+"/"+A),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=hB&&(this.reconnectDelay_=fB,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,A){aA("App check token revoked: "+e+"/"+A),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=hB&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const A of e.values())this.sendListen_(A);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let A="js";e["sdk."+A+"."+yF.replace(/\./g,"-")]=1,km()?e["framework.cordova"]=1:DE()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=qu.getInstance().currentlyOnline();return Lg(this.interruptReasons_)&&e}}kr.nextPersistentConnectionId_=0;kr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,A){this.name=e,this.node=A}static Wrap(e,A){return new Me(e,A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,A){const n=new Me(bo,e),r=new Me(bo,A);return this.compare(n,r)!==0}minPost(){return Me.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc;class WF extends Vd{static get __EMPTY_NODE(){return vc}static set __EMPTY_NODE(e){vc=e}compare(e,A){return xi(e.name,A.name)}isDefinedOn(e){throw Lo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,A){return!1}minPost(){return Me.MIN}maxPost(){return new Me(gi,vc)}makePost(e,A){return ie(typeof e=="string","KeyIndex indexValue must always be a string."),new Me(e,vc)}toString(){return".key"}}const ho=new WF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,A,n,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let i=1;for(;!e.isEmpty();)if(e=e,i=A?n(e.key,A):1,r&&(i*=-1),i<0)this.isReverse_?e=e.left:e=e.right;else if(i===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),A;if(this.resultGenerator_?A=this.resultGenerator_(e.key,e.value):A={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return A}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Zt{constructor(e,A,n,r,s){this.key=e,this.value=A,this.color=n??Zt.RED,this.left=r??VA.EMPTY_NODE,this.right=s??VA.EMPTY_NODE}copy(e,A,n,r,s){return new Zt(e??this.key,A??this.value,n??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,A,n){let r=this;const s=n(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,A,n),null):s===0?r=r.copy(null,A,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,A,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return VA.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,A){let n,r;if(n=this,A(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,A),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),A(e,n.key)===0){if(n.right.isEmpty())return VA.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,A))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),A=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,A)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Zt.RED=!0;Zt.BLACK=!1;class c4{copy(e,A,n,r,s){return this}insert(e,A,n){return new Zt(e,A,null)}remove(e,A){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class VA{constructor(e,A=VA.EMPTY_NODE){this.comparator_=e,this.root_=A}insert(e,A){return new VA(this.comparator_,this.root_.insert(e,A,this.comparator_).copy(null,null,Zt.BLACK,null,null))}remove(e){return new VA(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Zt.BLACK,null,null))}get(e){let A,n=this.root_;for(;!n.isEmpty();){if(A=this.comparator_(e,n.key),A===0)return n.value;A<0?n=n.left:A>0&&(n=n.right)}return null}getPredecessorKey(e){let A,n=this.root_,r=null;for(;!n.isEmpty();)if(A=this.comparator_(e,n.key),A===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else A<0?n=n.left:A>0&&(r=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Cc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,A){return new Cc(this.root_,e,this.comparator_,!1,A)}getReverseIteratorFrom(e,A){return new Cc(this.root_,e,this.comparator_,!0,A)}getReverseIterator(e){return new Cc(this.root_,null,this.comparator_,!0,e)}}VA.EMPTY_NODE=new c4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(t,e){return xi(t.name,e.name)}function nw(t,e){return xi(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vg;function d4(t){Vg=t}const zF=function(t){return typeof t=="number"?"number:"+xF(t):"string:"+t},GF=function(t){if(t.isLeafNode()){const e=t.val();ie(typeof e=="string"||typeof e=="number"||typeof e=="object"&&pr(e,".sv"),"Priority must be a string or number.")}else ie(t===Vg||t.isEmpty(),"priority of unexpected type.");ie(t===Vg||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gB;class Jt{static set __childrenNodeConstructor(e){gB=e}static get __childrenNodeConstructor(){return gB}constructor(e,A=Jt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=A,this.lazyHash_=null,ie(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),GF(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Jt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Jt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return je(e)?this:Pe(e)===".priority"?this.priorityNode_:Jt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,A){return null}updateImmediateChild(e,A){return e===".priority"?this.updatePriority(A):A.isEmpty()&&e!==".priority"?this:Jt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,A).updatePriority(this.priorityNode_)}updateChild(e,A){const n=Pe(e);return n===null?A:A.isEmpty()&&n!==".priority"?this:(ie(n!==".priority"||Ns(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,Jt.__childrenNodeConstructor.EMPTY_NODE.updateChild(dt(e),A)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,A){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+zF(this.priorityNode_.val())+":");const A=typeof this.value_;e+=A+":",A==="number"?e+=xF(this.value_):e+=this.value_,this.lazyHash_=vF(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Jt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Jt.__childrenNodeConstructor?-1:(ie(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const A=typeof e.value_,n=typeof this.value_,r=Jt.VALUE_TYPE_ORDER.indexOf(A),s=Jt.VALUE_TYPE_ORDER.indexOf(n);return ie(r>=0,"Unknown leaf type: "+A),ie(s>=0,"Unknown leaf type: "+n),r===s?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const A=e;return this.value_===A.value_&&this.priorityNode_.equals(A.priorityNode_)}else return!1}}Jt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VF,$F;function f4(t){VF=t}function h4(t){$F=t}class g4 extends Vd{compare(e,A){const n=e.node.getPriority(),r=A.node.getPriority(),s=n.compareTo(r);return s===0?xi(e.name,A.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,A){return!e.getPriority().equals(A.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me(gi,new Jt("[PRIORITY-POST]",$F))}makePost(e,A){const n=VF(e);return new Me(A,new Jt("[PRIORITY-POST]",n))}toString(){return".priority"}}const Ut=new g4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=Math.log(2);class m4{constructor(e){const A=s=>parseInt(Math.log(s)/p4,10),n=s=>parseInt(Array(s+1).join("1"),2);this.count=A(e+1),this.current_=this.count-1;const r=n(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Zu=function(t,e,A,n){t.sort(e);const r=function(o,l){const u=l-o;let d,f;if(u===0)return null;if(u===1)return d=t[o],f=A?A(d):d,new Zt(f,d.node,Zt.BLACK,null,null);{const B=parseInt(u/2,10)+o,h=r(o,B),y=r(B+1,l);return d=t[B],f=A?A(d):d,new Zt(f,d.node,Zt.BLACK,h,y)}},s=function(o){let l=null,u=null,d=t.length;const f=function(h,y){const C=d-h,p=d;d-=h;const g=r(C+1,p),v=t[C],E=A?A(v):v;B(new Zt(E,v.node,y,null,g))},B=function(h){l?(l.left=h,l=h):(u=h,l=h)};for(let h=0;h<o.count;++h){const y=o.nextBitIsOne(),C=Math.pow(2,o.count-(h+1));y?f(C,Zt.BLACK):(f(C,Zt.BLACK),f(C,Zt.RED))}return u},i=new m4(t.length),a=s(i);return new VA(n||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch;const Ti={};class Sr{static get Default(){return ie(Ti&&Ut,"ChildrenNode.ts has not been loaded"),ch=ch||new Sr({".priority":Ti},{".priority":Ut}),ch}constructor(e,A){this.indexes_=e,this.indexSet_=A}get(e){const A=Eo(this.indexes_,e);if(!A)throw new Error("No index defined for "+e);return A instanceof VA?A:null}hasIndex(e){return pr(this.indexSet_,e.toString())}addIndex(e,A){ie(e!==ho,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const s=A.getIterator(Me.Wrap);let i=s.getNext();for(;i;)r=r||e.isDefinedOn(i.node),n.push(i),i=s.getNext();let a;r?a=Zu(n,e.getCompare()):a=Ti;const o=e.toString(),l={...this.indexSet_};l[o]=e;const u={...this.indexes_};return u[o]=a,new Sr(u,l)}addToIndexes(e,A){const n=ju(this.indexes_,(r,s)=>{const i=Eo(this.indexSet_,s);if(ie(i,"Missing index implementation for "+s),r===Ti)if(i.isDefinedOn(e.node)){const a=[],o=A.getIterator(Me.Wrap);let l=o.getNext();for(;l;)l.name!==e.name&&a.push(l),l=o.getNext();return a.push(e),Zu(a,i.getCompare())}else return Ti;else{const a=A.get(e.name);let o=r;return a&&(o=o.remove(new Me(e.name,a))),o.insert(e,e.node)}});return new Sr(n,this.indexSet_)}removeFromIndexes(e,A){const n=ju(this.indexes_,r=>{if(r===Ti)return r;{const s=A.get(e.name);return s?r.remove(new Me(e.name,s)):r}});return new Sr(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da;class be{static get EMPTY_NODE(){return da||(da=new be(new VA(nw),null,Sr.Default))}constructor(e,A,n){this.children_=e,this.priorityNode_=A,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&GF(this.priorityNode_),this.children_.isEmpty()&&ie(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||da}updatePriority(e){return this.children_.isEmpty()?this:new be(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const A=this.children_.get(e);return A===null?da:A}}getChild(e){const A=Pe(e);return A===null?this:this.getImmediateChild(A).getChild(dt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,A){if(ie(A,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(A);{const n=new Me(e,A);let r,s;A.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,A),s=this.indexMap_.addToIndexes(n,this.children_));const i=r.isEmpty()?da:this.priorityNode_;return new be(r,i,s)}}updateChild(e,A){const n=Pe(e);if(n===null)return A;{ie(Pe(e)!==".priority"||Ns(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(dt(e),A);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const A={};let n=0,r=0,s=!0;if(this.forEachChild(Ut,(i,a)=>{A[i]=a.val(e),n++,s&&be.INTEGER_REGEXP_.test(i)?r=Math.max(r,Number(i)):s=!1}),!e&&s&&r<2*n){const i=[];for(const a in A)i[a]=A[a];return i}else return e&&!this.getPriority().isEmpty()&&(A[".priority"]=this.getPriority().val()),A}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+zF(this.getPriority().val())+":"),this.forEachChild(Ut,(A,n)=>{const r=n.hash();r!==""&&(e+=":"+A+":"+r)}),this.lazyHash_=e===""?"":vF(e)}return this.lazyHash_}getPredecessorChildName(e,A,n){const r=this.resolveIndex_(n);if(r){const s=r.getPredecessorKey(new Me(e,A));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const A=this.resolveIndex_(e);if(A){const n=A.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const A=this.getFirstChildName(e);return A?new Me(A,this.children_.get(A)):null}getLastChildName(e){const A=this.resolveIndex_(e);if(A){const n=A.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const A=this.getLastChildName(e);return A?new Me(A,this.children_.get(A)):null}forEachChild(e,A){const n=this.resolveIndex_(e);return n?n.inorderTraversal(r=>A(r.name,r.node)):this.children_.inorderTraversal(A)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,A){const n=this.resolveIndex_(A);if(n)return n.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Me.Wrap);let s=r.peek();for(;s!=null&&A.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,A){const n=this.resolveIndex_(A);if(n)return n.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Me.Wrap);let s=r.peek();for(;s!=null&&A.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ol?-1:0}withIndex(e){if(e===ho||this.indexMap_.hasIndex(e))return this;{const A=this.indexMap_.addIndex(e,this.children_);return new be(this.children_,this.priorityNode_,A)}}isIndexed(e){return e===ho||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const A=e;if(this.getPriority().equals(A.getPriority()))if(this.children_.count()===A.children_.count()){const n=this.getIterator(Ut),r=A.getIterator(Ut);let s=n.getNext(),i=r.getNext();for(;s&&i;){if(s.name!==i.name||!s.node.equals(i.node))return!1;s=n.getNext(),i=r.getNext()}return s===null&&i===null}else return!1;else return!1}}resolveIndex_(e){return e===ho?null:this.indexMap_.get(e.toString())}}be.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class w4 extends be{constructor(){super(new VA(nw),be.EMPTY_NODE,Sr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return be.EMPTY_NODE}isEmpty(){return!1}}const Ol=new w4;Object.defineProperties(Me,{MIN:{value:new Me(bo,be.EMPTY_NODE)},MAX:{value:new Me(gi,Ol)}});WF.__EMPTY_NODE=be.EMPTY_NODE;Jt.__childrenNodeConstructor=be;d4(Ol);h4(Ol);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=!0;function eA(t,e=null){if(t===null)return be.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ie(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const A=t;return new Jt(A,eA(e))}if(!(t instanceof Array)&&y4){const A=[];let n=!1;if(fA(t,(i,a)=>{if(i.substring(0,1)!=="."){const o=eA(a);o.isEmpty()||(n=n||!o.getPriority().isEmpty(),A.push(new Me(i,o)))}}),A.length===0)return be.EMPTY_NODE;const s=Zu(A,u4,i=>i.name,nw);if(n){const i=Zu(A,Ut.getCompare());return new be(s,eA(e),new Sr({".priority":i},{".priority":Ut}))}else return new be(s,eA(e),Sr.Default)}else{let A=be.EMPTY_NODE;return fA(t,(n,r)=>{if(pr(t,n)&&n.substring(0,1)!=="."){const s=eA(r);(s.isLeafNode()||!s.isEmpty())&&(A=A.updateImmediateChild(n,s))}}),A.updatePriority(eA(e))}}f4(eA);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4 extends Vd{constructor(e){super(),this.indexPath_=e,ie(!je(e)&&Pe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,A){const n=this.extractChild(e.node),r=this.extractChild(A.node),s=n.compareTo(r);return s===0?xi(e.name,A.name):s}makePost(e,A){const n=eA(e),r=be.EMPTY_NODE.updateChild(this.indexPath_,n);return new Me(A,r)}maxPost(){const e=be.EMPTY_NODE.updateChild(this.indexPath_,Ol);return new Me(gi,e)}toString(){return Bl(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4 extends Vd{compare(e,A){const n=e.node.compareTo(A.node);return n===0?xi(e.name,A.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,A){return!e.equals(A)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(e,A){const n=eA(e);return new Me(A,n)}toString(){return".value"}}const C4=new v4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){return{type:"value",snapshotNode:t}}function Io(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function vl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Cl(t,e,A){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:A}}function x4(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.index_=e}updateChild(e,A,n,r,s,i){ie(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(A);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()||(i!=null&&(n.isEmpty()?e.hasChild(A)?i.trackChildChange(vl(A,a)):ie(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?i.trackChildChange(Io(A,n)):i.trackChildChange(Cl(A,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(A,n).withIndex(this.index_)}updateFullNode(e,A,n){return n!=null&&(e.isLeafNode()||e.forEachChild(Ut,(r,s)=>{A.hasChild(r)||n.trackChildChange(vl(r,s))}),A.isLeafNode()||A.forEachChild(Ut,(r,s)=>{if(e.hasChild(r)){const i=e.getImmediateChild(r);i.equals(s)||n.trackChildChange(Cl(r,s,i))}else n.trackChildChange(Io(r,s))})),A.withIndex(this.index_)}updatePriority(e,A){return e.isEmpty()?be.EMPTY_NODE:e.updatePriority(A)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this.indexedFilter_=new rw(e.getIndex()),this.index_=e.getIndex(),this.startPost_=xl.getStartPost_(e),this.endPost_=xl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const A=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return A&&n}updateChild(e,A,n,r,s,i){return this.matches(new Me(A,n))||(n=be.EMPTY_NODE),this.indexedFilter_.updateChild(e,A,n,r,s,i)}updateFullNode(e,A,n){A.isLeafNode()&&(A=be.EMPTY_NODE);let r=A.withIndex(this.index_);r=r.updatePriority(be.EMPTY_NODE);const s=this;return A.forEachChild(Ut,(i,a)=>{s.matches(new Me(i,a))||(r=r.updateImmediateChild(i,be.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,A){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const A=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),A)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const A=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),A)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e){this.withinDirectionalStart=A=>this.reverse_?this.withinEndPost(A):this.withinStartPost(A),this.withinDirectionalEnd=A=>this.reverse_?this.withinStartPost(A):this.withinEndPost(A),this.withinStartPost=A=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),A);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=A=>{const n=this.index_.compare(A,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new xl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,A,n,r,s,i){return this.rangedFilter_.matches(new Me(A,n))||(n=be.EMPTY_NODE),e.getImmediateChild(A).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,A,n,r,s,i):this.fullLimitUpdateChild_(e,A,n,s,i)}updateFullNode(e,A,n){let r;if(A.isLeafNode()||A.isEmpty())r=be.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<A.numChildren()&&A.isIndexed(this.index_)){r=be.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=A.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=A.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let i=0;for(;s.hasNext()&&i<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),i++;else break;else continue}}else{r=A.withIndex(this.index_),r=r.updatePriority(be.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let i=0;for(;s.hasNext();){const a=s.getNext();i<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?i++:r=r.updateImmediateChild(a.name,be.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,A){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,A,n,r,s){let i;if(this.reverse_){const d=this.index_.getCompare();i=(f,B)=>d(B,f)}else i=this.index_.getCompare();const a=e;ie(a.numChildren()===this.limit_,"");const o=new Me(A,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(o);if(a.hasChild(A)){const d=a.getImmediateChild(A);let f=r.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===A||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);const B=f==null?1:i(f,o);if(u&&!n.isEmpty()&&B>=0)return s!=null&&s.trackChildChange(Cl(A,n,d)),a.updateImmediateChild(A,n);{s!=null&&s.trackChildChange(vl(A,d));const y=a.updateImmediateChild(A,be.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(Io(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return n.isEmpty()?e:u&&i(l,o)>=0?(s!=null&&(s.trackChildChange(vl(l.name,l.node)),s.trackChildChange(Io(A,n))),a.updateImmediateChild(A,n).updateImmediateChild(l.name,be.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ut}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ie(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ie(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bo}hasEnd(){return this.endSet_}getIndexEndValue(){return ie(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ie(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:gi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ie(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ut}copy(){const e=new sw;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function F4(t){return t.loadsAllData()?new rw(t.getIndex()):t.hasLimit()?new E4(t):new xl(t)}function pB(t){const e={};if(t.isDefault())return e;let A;if(t.index_===Ut?A="$priority":t.index_===C4?A="$value":t.index_===ho?A="$key":(ie(t.index_ instanceof B4,"Unrecognized index type!"),A=t.index_.toString()),e.orderBy=tA(A),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=tA(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+tA(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=tA(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+tA(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function mB(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let A=t.viewFrom_;A===""&&(t.isViewFromLeft()?A="l":A="r"),e.vf=A}return t.index_!==Ut&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed extends MF{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,A){return A!==void 0?"tag$"+A:(ie(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,A,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=A,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Ml("p:rest:"),this.listens_={}}listen(e,A,n,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const i=ed.getListenId_(e,n),a={};this.listens_[i]=a;const o=pB(e._queryParams);this.restRequest_(s+".json",o,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,n),Eo(this.listens_,i)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",r(f,null)}})}unlisten(e,A){const n=ed.getListenId_(e,A);delete this.listens_[n]}get(e){const A=pB(e._queryParams),n=e._path.toString(),r=new kl;return this.restRequest_(n+".json",A,(s,i)=>{let a=i;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(n,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,A={},n){return A.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(A.auth=r.accessToken),s&&s.token&&(A.ac=s.token);const i=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ro(A);this.log_("Sending REST request for "+i);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+i+" received. status:",a.status,"response:",a.responseText);let o=null;if(a.status>=200&&a.status<300){try{o=pl(a.responseText)}catch{UA("Failed to parse JSON response for "+i+": "+a.responseText)}n(null,o)}else a.status!==401&&a.status!==404&&UA("Got unsuccessful REST response for "+i+" Status: "+a.status),n(a.status);n=null}},a.open("GET",i,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(){this.rootNode_=be.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,A){this.rootNode_=this.rootNode_.updateChild(e,A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(){return{value:null,children:new Map}}function YF(t,e,A){if(je(e))t.value=A,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,A);else{const n=Pe(e);t.children.has(n)||t.children.set(n,td());const r=t.children.get(n);e=dt(e),YF(r,e,A)}}function $g(t,e,A){t.value!==null?A(e,t.value):b4(t,(n,r)=>{const s=new lt(e.toString()+"/"+n);$g(r,s,A)})}function b4(t,e){t.children.forEach((A,n)=>{e(n,A)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),A={...e};return this.last_&&fA(this.last_,(n,r)=>{A[n]=A[n]-r}),this.last_=e,A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB=10*1e3,Q4=30*1e3,U4=5*60*1e3;class S4{constructor(e,A){this.server_=A,this.statsToReport_={},this.statsListener_=new I4(e);const n=wB+(Q4-wB)*Math.random();ja(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),A={};let n=!1;fA(e,(r,s)=>{s>0&&pr(this.statsToReport_,r)&&(A[r]=s,n=!0)}),n&&this.server_.reportStats(A),ja(this.reportStats_.bind(this),Math.floor(Math.random()*2*U4))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $n;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})($n||($n={}));function iw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ow(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function aw(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,A,n){this.path=e,this.affectedTree=A,this.revert=n,this.type=$n.ACK_USER_WRITE,this.source=iw()}operationForChild(e){if(je(this.path)){if(this.affectedTree.value!=null)return ie(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const A=this.affectedTree.subtree(new lt(e));return new Ad(nt(),A,this.revert)}}else return ie(Pe(this.path)===e,"operationForChild called for unrelated child."),new Ad(dt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,A){this.source=e,this.path=A,this.type=$n.LISTEN_COMPLETE}operationForChild(e){return je(this.path)?new El(this.source,nt()):new El(this.source,dt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,A,n){this.source=e,this.path=A,this.snap=n,this.type=$n.OVERWRITE}operationForChild(e){return je(this.path)?new pi(this.source,nt(),this.snap.getImmediateChild(e)):new pi(this.source,dt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,A,n){this.source=e,this.path=A,this.children=n,this.type=$n.MERGE}operationForChild(e){if(je(this.path)){const A=this.children.subtree(new lt(e));return A.isEmpty()?null:A.value?new pi(this.source,nt(),A.value):new Qo(this.source,nt(),A)}else return ie(Pe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qo(this.source,dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,A,n){this.node_=e,this.fullyInitialized_=A,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(je(e))return this.isFullyInitialized()&&!this.filtered_;const A=Pe(e);return this.isCompleteForChild(A)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function N4(t,e,A,n){const r=[],s=[];return e.forEach(i=>{i.type==="child_changed"&&t.index_.indexedValueChanged(i.oldSnap,i.snapshotNode)&&s.push(x4(i.childName,i.snapshotNode))}),fa(t,r,"child_removed",e,n,A),fa(t,r,"child_added",e,n,A),fa(t,r,"child_moved",s,n,A),fa(t,r,"child_changed",e,n,A),fa(t,r,"value",e,n,A),r}function fa(t,e,A,n,r,s){const i=n.filter(a=>a.type===A);i.sort((a,o)=>D4(t,a,o)),i.forEach(a=>{const o=k4(t,a,s);r.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(o,t.query_))})})}function k4(t,e,A){return e.type==="value"||e.type==="child_removed"||(e.prevName=A.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function D4(t,e,A){if(e.childName==null||A.childName==null)throw Lo("Should only compare child_ events.");const n=new Me(e.childName,e.snapshotNode),r=new Me(A.childName,A.snapshotNode);return t.index_.compare(n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t,e){return{eventCache:t,serverCache:e}}function Wa(t,e,A,n){return $d(new mi(e,A,n),t.serverCache)}function JF(t,e,A,n){return $d(t.eventCache,new mi(e,A,n))}function Xg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function wi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh;const L4=()=>(uh||(uh=new VA(Bk)),uh);class ut{static fromObject(e){let A=new ut(null);return fA(e,(n,r)=>{A=A.set(new lt(n),r)}),A}constructor(e,A=L4()){this.value=e,this.children=A}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,A){if(this.value!=null&&A(this.value))return{path:nt(),value:this.value};if(je(e))return null;{const n=Pe(e),r=this.children.get(n);if(r!==null){const s=r.findRootMostMatchingPathAndValue(dt(e),A);return s!=null?{path:Qt(new lt(n),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(je(e))return this;{const A=Pe(e),n=this.children.get(A);return n!==null?n.subtree(dt(e)):new ut(null)}}set(e,A){if(je(e))return new ut(A,this.children);{const n=Pe(e),s=(this.children.get(n)||new ut(null)).set(dt(e),A),i=this.children.insert(n,s);return new ut(this.value,i)}}remove(e){if(je(e))return this.children.isEmpty()?new ut(null):new ut(null,this.children);{const A=Pe(e),n=this.children.get(A);if(n){const r=n.remove(dt(e));let s;return r.isEmpty()?s=this.children.remove(A):s=this.children.insert(A,r),this.value===null&&s.isEmpty()?new ut(null):new ut(this.value,s)}else return this}}get(e){if(je(e))return this.value;{const A=Pe(e),n=this.children.get(A);return n?n.get(dt(e)):null}}setTree(e,A){if(je(e))return A;{const n=Pe(e),s=(this.children.get(n)||new ut(null)).setTree(dt(e),A);let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),new ut(this.value,i)}}fold(e){return this.fold_(nt(),e)}fold_(e,A){const n={};return this.children.inorderTraversal((r,s)=>{n[r]=s.fold_(Qt(e,r),A)}),A(e,this.value,n)}findOnPath(e,A){return this.findOnPath_(e,nt(),A)}findOnPath_(e,A,n){const r=this.value?n(A,this.value):!1;if(r)return r;if(je(e))return null;{const s=Pe(e),i=this.children.get(s);return i?i.findOnPath_(dt(e),Qt(A,s),n):null}}foreachOnPath(e,A){return this.foreachOnPath_(e,nt(),A)}foreachOnPath_(e,A,n){if(je(e))return this;{this.value&&n(A,this.value);const r=Pe(e),s=this.children.get(r);return s?s.foreachOnPath_(dt(e),Qt(A,r),n):new ut(null)}}foreach(e){this.foreach_(nt(),e)}foreach_(e,A){this.children.inorderTraversal((n,r)=>{r.foreach_(Qt(e,n),A)}),this.value&&A(e,this.value)}foreachChild(e){this.children.inorderTraversal((A,n)=>{n.value&&e(A,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.writeTree_=e}static empty(){return new qn(new ut(null))}}function za(t,e,A){if(je(e))return new qn(new ut(A));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const r=n.path;let s=n.value;const i=GA(r,e);return s=s.updateChild(i,A),new qn(t.writeTree_.set(r,s))}else{const r=new ut(A),s=t.writeTree_.setTree(e,r);return new qn(s)}}}function Yg(t,e,A){let n=t;return fA(A,(r,s)=>{n=za(n,Qt(e,r),s)}),n}function yB(t,e){if(je(e))return qn.empty();{const A=t.writeTree_.setTree(e,new ut(null));return new qn(A)}}function Jg(t,e){return Ei(t,e)!=null}function Ei(t,e){const A=t.writeTree_.findRootMostValueAndPath(e);return A!=null?t.writeTree_.get(A.path).getChild(GA(A.path,e)):null}function BB(t){const e=[],A=t.writeTree_.value;return A!=null?A.isLeafNode()||A.forEachChild(Ut,(n,r)=>{e.push(new Me(n,r))}):t.writeTree_.children.inorderTraversal((n,r)=>{r.value!=null&&e.push(new Me(n,r.value))}),e}function bs(t,e){if(je(e))return t;{const A=Ei(t,e);return A!=null?new qn(new ut(A)):new qn(t.writeTree_.subtree(e))}}function qg(t){return t.writeTree_.isEmpty()}function Uo(t,e){return qF(nt(),t.writeTree_,e)}function qF(t,e,A){if(e.value!=null)return A.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(ie(s.value!==null,"Priority writes must always be leaf nodes"),n=s.value):A=qF(Qt(t,r),s,A)}),!A.getChild(t).isEmpty()&&n!==null&&(A=A.updateChild(Qt(t,".priority"),n)),A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t,e){return A1(e,t)}function H4(t,e,A,n,r){ie(n>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:A,writeId:n,visible:r}),r&&(t.visibleWrites=za(t.visibleWrites,e,A)),t.lastWriteId=n}function R4(t,e,A,n){ie(n>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:A,writeId:n,visible:!0}),t.visibleWrites=Yg(t.visibleWrites,e,A),t.lastWriteId=n}function P4(t,e){for(let A=0;A<t.allWrites.length;A++){const n=t.allWrites[A];if(n.writeId===e)return n}return null}function M4(t,e){const A=t.allWrites.findIndex(a=>a.writeId===e);ie(A>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[A];t.allWrites.splice(A,1);let r=n.visible,s=!1,i=t.allWrites.length-1;for(;r&&i>=0;){const a=t.allWrites[i];a.visible&&(i>=A&&O4(a,n.path)?r=!1:En(n.path,a.path)&&(s=!0)),i--}if(r){if(s)return K4(t),!0;if(n.snap)t.visibleWrites=yB(t.visibleWrites,n.path);else{const a=n.children;fA(a,o=>{t.visibleWrites=yB(t.visibleWrites,Qt(n.path,o))})}return!0}else return!1}function O4(t,e){if(t.snap)return En(t.path,e);for(const A in t.children)if(t.children.hasOwnProperty(A)&&En(Qt(t.path,A),e))return!0;return!1}function K4(t){t.visibleWrites=ZF(t.allWrites,j4,nt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function j4(t){return t.visible}function ZF(t,e,A){let n=qn.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const i=s.path;let a;if(s.snap)En(A,i)?(a=GA(A,i),n=za(n,a,s.snap)):En(i,A)&&(a=GA(i,A),n=za(n,nt(),s.snap.getChild(a)));else if(s.children){if(En(A,i))a=GA(A,i),n=Yg(n,a,s.children);else if(En(i,A))if(a=GA(i,A),je(a))n=Yg(n,nt(),s.children);else{const o=Eo(s.children,Pe(a));if(o){const l=o.getChild(dt(a));n=za(n,nt(),l)}}}else throw Lo("WriteRecord should have .snap or .children")}}return n}function e1(t,e,A,n,r){if(!n&&!r){const s=Ei(t.visibleWrites,e);if(s!=null)return s;{const i=bs(t.visibleWrites,e);if(qg(i))return A;if(A==null&&!Jg(i,nt()))return null;{const a=A||be.EMPTY_NODE;return Uo(i,a)}}}else{const s=bs(t.visibleWrites,e);if(!r&&qg(s))return A;if(!r&&A==null&&!Jg(s,nt()))return null;{const i=function(l){return(l.visible||r)&&(!n||!~n.indexOf(l.writeId))&&(En(l.path,e)||En(e,l.path))},a=ZF(t.allWrites,i,e),o=A||be.EMPTY_NODE;return Uo(a,o)}}}function W4(t,e,A){let n=be.EMPTY_NODE;const r=Ei(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ut,(s,i)=>{n=n.updateImmediateChild(s,i)}),n;if(A){const s=bs(t.visibleWrites,e);return A.forEachChild(Ut,(i,a)=>{const o=Uo(bs(s,new lt(i)),a);n=n.updateImmediateChild(i,o)}),BB(s).forEach(i=>{n=n.updateImmediateChild(i.name,i.node)}),n}else{const s=bs(t.visibleWrites,e);return BB(s).forEach(i=>{n=n.updateImmediateChild(i.name,i.node)}),n}}function z4(t,e,A,n,r){ie(n||r,"Either existingEventSnap or existingServerSnap must exist");const s=Qt(e,A);if(Jg(t.visibleWrites,s))return null;{const i=bs(t.visibleWrites,s);return qg(i)?r.getChild(A):Uo(i,r.getChild(A))}}function G4(t,e,A,n){const r=Qt(e,A),s=Ei(t.visibleWrites,r);if(s!=null)return s;if(n.isCompleteForChild(A)){const i=bs(t.visibleWrites,r);return Uo(i,n.getNode().getImmediateChild(A))}else return null}function V4(t,e){return Ei(t.visibleWrites,e)}function $4(t,e,A,n,r,s,i){let a;const o=bs(t.visibleWrites,e),l=Ei(o,nt());if(l!=null)a=l;else if(A!=null)a=Uo(o,A);else return[];if(a=a.withIndex(i),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=i.getCompare(),f=s?a.getReverseIteratorFrom(n,i):a.getIteratorFrom(n,i);let B=f.getNext();for(;B&&u.length<r;)d(B,n)!==0&&u.push(B),B=f.getNext();return u}else return[]}function X4(){return{visibleWrites:qn.empty(),allWrites:[],lastWriteId:-1}}function nd(t,e,A,n){return e1(t.writeTree,t.treePath,e,A,n)}function cw(t,e){return W4(t.writeTree,t.treePath,e)}function vB(t,e,A,n){return z4(t.writeTree,t.treePath,e,A,n)}function rd(t,e){return V4(t.writeTree,Qt(t.treePath,e))}function Y4(t,e,A,n,r,s){return $4(t.writeTree,t.treePath,e,A,n,r,s)}function uw(t,e,A){return G4(t.writeTree,t.treePath,e,A)}function t1(t,e){return A1(Qt(t.treePath,e),t.writeTree)}function A1(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(){this.changeMap=new Map}trackChildChange(e){const A=e.type,n=e.childName;ie(A==="child_added"||A==="child_changed"||A==="child_removed","Only child changes supported for tracking"),ie(n!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const s=r.type;if(A==="child_added"&&s==="child_removed")this.changeMap.set(n,Cl(n,e.snapshotNode,r.snapshotNode));else if(A==="child_removed"&&s==="child_added")this.changeMap.delete(n);else if(A==="child_removed"&&s==="child_changed")this.changeMap.set(n,vl(n,r.oldSnap));else if(A==="child_changed"&&s==="child_added")this.changeMap.set(n,Io(n,e.snapshotNode));else if(A==="child_changed"&&s==="child_changed")this.changeMap.set(n,Cl(n,e.snapshotNode,r.oldSnap));else throw Lo("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{getCompleteChild(e){return null}getChildAfterChild(e,A,n){return null}}const n1=new q4;class dw{constructor(e,A,n=null){this.writes_=e,this.viewCache_=A,this.optCompleteServerCache_=n}getCompleteChild(e){const A=this.viewCache_.eventCache;if(A.isCompleteForChild(e))return A.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new mi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uw(this.writes_,e,n)}}getChildAfterChild(e,A,n){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:wi(this.viewCache_),s=Y4(this.writes_,r,A,1,n,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t){return{filter:t}}function eD(t,e){ie(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ie(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function tD(t,e,A,n,r){const s=new J4;let i,a;if(A.type===$n.OVERWRITE){const l=A;l.source.fromUser?i=Zg(t,e,l.path,l.snap,n,r,s):(ie(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!je(l.path),i=sd(t,e,l.path,l.snap,n,r,a,s))}else if(A.type===$n.MERGE){const l=A;l.source.fromUser?i=nD(t,e,l.path,l.children,n,r,s):(ie(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),i=ep(t,e,l.path,l.children,n,r,a,s))}else if(A.type===$n.ACK_USER_WRITE){const l=A;l.revert?i=iD(t,e,l.path,n,r,s):i=rD(t,e,l.path,l.affectedTree,n,r,s)}else if(A.type===$n.LISTEN_COMPLETE)i=sD(t,e,A.path,n,s);else throw Lo("Unknown operation type: "+A.type);const o=s.getChanges();return AD(e,i,o),{viewCache:i,changes:o}}function AD(t,e,A){const n=e.eventCache;if(n.isFullyInitialized()){const r=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=Xg(t);(A.length>0||!t.eventCache.isFullyInitialized()||r&&!n.getNode().equals(s)||!n.getNode().getPriority().equals(s.getPriority()))&&A.push(XF(Xg(e)))}}function r1(t,e,A,n,r,s){const i=e.eventCache;if(rd(n,A)!=null)return e;{let a,o;if(je(A))if(ie(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=wi(e),u=l instanceof be?l:be.EMPTY_NODE,d=cw(n,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const l=nd(n,wi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=Pe(A);if(l===".priority"){ie(Ns(A)===1,"Can't have a priority with additional path components");const u=i.getNode();o=e.serverCache.getNode();const d=vB(n,A,u,o);d!=null?a=t.filter.updatePriority(u,d):a=i.getNode()}else{const u=dt(A);let d;if(i.isCompleteForChild(l)){o=e.serverCache.getNode();const f=vB(n,A,i.getNode(),o);f!=null?d=i.getNode().getImmediateChild(l).updateChild(u,f):d=i.getNode().getImmediateChild(l)}else d=uw(n,l,e.serverCache);d!=null?a=t.filter.updateChild(i.getNode(),l,d,u,r,s):a=i.getNode()}}return Wa(e,a,i.isFullyInitialized()||je(A),t.filter.filtersNodes())}}function sd(t,e,A,n,r,s,i,a){const o=e.serverCache;let l;const u=i?t.filter:t.filter.getIndexedFilter();if(je(A))l=u.updateFullNode(o.getNode(),n,null);else if(u.filtersNodes()&&!o.isFiltered()){const B=o.getNode().updateChild(A,n);l=u.updateFullNode(o.getNode(),B,null)}else{const B=Pe(A);if(!o.isCompleteForPath(A)&&Ns(A)>1)return e;const h=dt(A),C=o.getNode().getImmediateChild(B).updateChild(h,n);B===".priority"?l=u.updatePriority(o.getNode(),C):l=u.updateChild(o.getNode(),B,C,h,n1,null)}const d=JF(e,l,o.isFullyInitialized()||je(A),u.filtersNodes()),f=new dw(r,d,s);return r1(t,d,A,r,f,a)}function Zg(t,e,A,n,r,s,i){const a=e.eventCache;let o,l;const u=new dw(r,e,s);if(je(A))l=t.filter.updateFullNode(e.eventCache.getNode(),n,i),o=Wa(e,l,!0,t.filter.filtersNodes());else{const d=Pe(A);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),n),o=Wa(e,l,a.isFullyInitialized(),a.isFiltered());else{const f=dt(A),B=a.getNode().getImmediateChild(d);let h;if(je(f))h=n;else{const y=u.getCompleteChild(d);y!=null?ew(f)===".priority"&&y.getChild(KF(f)).isEmpty()?h=y:h=y.updateChild(f,n):h=be.EMPTY_NODE}if(B.equals(h))o=e;else{const y=t.filter.updateChild(a.getNode(),d,h,f,u,i);o=Wa(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return o}function CB(t,e){return t.eventCache.isCompleteForChild(e)}function nD(t,e,A,n,r,s,i){let a=e;return n.foreach((o,l)=>{const u=Qt(A,o);CB(e,Pe(u))&&(a=Zg(t,a,u,l,r,s,i))}),n.foreach((o,l)=>{const u=Qt(A,o);CB(e,Pe(u))||(a=Zg(t,a,u,l,r,s,i))}),a}function xB(t,e,A){return A.foreach((n,r)=>{e=e.updateChild(n,r)}),e}function ep(t,e,A,n,r,s,i,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let o=e,l;je(A)?l=n:l=new ut(null).setTree(A,n);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){const B=e.serverCache.getNode().getImmediateChild(d),h=xB(t,B,f);o=sd(t,o,new lt(d),h,r,s,i,a)}}),l.children.inorderTraversal((d,f)=>{const B=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!B){const h=e.serverCache.getNode().getImmediateChild(d),y=xB(t,h,f);o=sd(t,o,new lt(d),y,r,s,i,a)}}),o}function rD(t,e,A,n,r,s,i){if(rd(r,A)!=null)return e;const a=e.serverCache.isFiltered(),o=e.serverCache;if(n.value!=null){if(je(A)&&o.isFullyInitialized()||o.isCompleteForPath(A))return sd(t,e,A,o.getNode().getChild(A),r,s,a,i);if(je(A)){let l=new ut(null);return o.getNode().forEachChild(ho,(u,d)=>{l=l.set(new lt(u),d)}),ep(t,e,A,l,r,s,a,i)}else return e}else{let l=new ut(null);return n.foreach((u,d)=>{const f=Qt(A,u);o.isCompleteForPath(f)&&(l=l.set(u,o.getNode().getChild(f)))}),ep(t,e,A,l,r,s,a,i)}}function sD(t,e,A,n,r){const s=e.serverCache,i=JF(e,s.getNode(),s.isFullyInitialized()||je(A),s.isFiltered());return r1(t,i,A,n,n1,r)}function iD(t,e,A,n,r,s){let i;if(rd(n,A)!=null)return e;{const a=new dw(n,e,r),o=e.eventCache.getNode();let l;if(je(A)||Pe(A)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=nd(n,wi(e));else{const d=e.serverCache.getNode();ie(d instanceof be,"serverChildren would be complete if leaf node"),u=cw(n,d)}u=u,l=t.filter.updateFullNode(o,u,s)}else{const u=Pe(A);let d=uw(n,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=o.getImmediateChild(u)),d!=null?l=t.filter.updateChild(o,u,d,dt(A),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(o,u,be.EMPTY_NODE,dt(A),a,s):l=o,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(i=nd(n,wi(e)),i.isLeafNode()&&(l=t.filter.updateFullNode(l,i,s)))}return i=e.serverCache.isFullyInitialized()||rd(n,nt())!=null,Wa(e,l,i,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,A){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new rw(n.getIndex()),s=F4(n);this.processor_=Z4(s);const i=A.serverCache,a=A.eventCache,o=r.updateFullNode(be.EMPTY_NODE,i.getNode(),null),l=s.updateFullNode(be.EMPTY_NODE,a.getNode(),null),u=new mi(o,i.isFullyInitialized(),r.filtersNodes()),d=new mi(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=$d(d,u),this.eventGenerator_=new T4(this.query_)}get query(){return this.query_}}function aD(t){return t.viewCache_.serverCache.getNode()}function lD(t,e){const A=wi(t.viewCache_);return A&&(t.query._queryParams.loadsAllData()||!je(e)&&!A.getImmediateChild(Pe(e)).isEmpty())?A.getChild(e):null}function EB(t){return t.eventRegistrations_.length===0}function cD(t,e){t.eventRegistrations_.push(e)}function FB(t,e,A){const n=[];if(A){ie(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(s=>{const i=s.createCancelEvent(A,r);i&&n.push(i)})}if(e){let r=[];for(let s=0;s<t.eventRegistrations_.length;++s){const i=t.eventRegistrations_[s];if(!i.matches(e))r.push(i);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return n}function _B(t,e,A,n){e.type===$n.MERGE&&e.source.queryId!==null&&(ie(wi(t.viewCache_),"We should always have a full cache before handling merges"),ie(Xg(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=tD(t.processor_,r,e,A,n);return eD(t.processor_,s.viewCache),ie(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,s1(t,s.changes,s.viewCache.eventCache.getNode(),null)}function uD(t,e){const A=t.viewCache_.eventCache,n=[];return A.getNode().isLeafNode()||A.getNode().forEachChild(Ut,(s,i)=>{n.push(Io(s,i))}),A.isFullyInitialized()&&n.push(XF(A.getNode())),s1(t,n,A.getNode(),e)}function s1(t,e,A,n){const r=n?[n]:t.eventRegistrations_;return N4(t.eventGenerator_,e,A,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id;class dD{constructor(){this.views=new Map}}function fD(t){ie(!id,"__referenceConstructor has already been defined"),id=t}function hD(){return ie(id,"Reference.ts has not been loaded"),id}function gD(t){return t.views.size===0}function fw(t,e,A,n){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return ie(s!=null,"SyncTree gave us an op for an invalid query."),_B(s,e,A,n)}else{let s=[];for(const i of t.views.values())s=s.concat(_B(i,e,A,n));return s}}function pD(t,e,A,n,r){const s=e._queryIdentifier,i=t.views.get(s);if(!i){let a=nd(A,r?n:null),o=!1;a?o=!0:n instanceof be?(a=cw(A,n),o=!1):(a=be.EMPTY_NODE,o=!1);const l=$d(new mi(a,o,!1),new mi(n,r,!1));return new oD(e,l)}return i}function mD(t,e,A,n,r,s){const i=pD(t,e,n,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,i),cD(i,A),uD(i,A)}function wD(t,e,A,n){const r=e._queryIdentifier,s=[];let i=[];const a=ks(t);if(r==="default")for(const[o,l]of t.views.entries())i=i.concat(FB(l,A,n)),EB(l)&&(t.views.delete(o),l.query._queryParams.loadsAllData()||s.push(l.query));else{const o=t.views.get(r);o&&(i=i.concat(FB(o,A,n)),EB(o)&&(t.views.delete(r),o.query._queryParams.loadsAllData()||s.push(o.query)))}return a&&!ks(t)&&s.push(new(hD())(e._repo,e._path)),{removed:s,events:i}}function i1(t){const e=[];for(const A of t.views.values())A.query._queryParams.loadsAllData()||e.push(A);return e}function go(t,e){let A=null;for(const n of t.views.values())A=A||lD(n,e);return A}function o1(t,e){if(e._queryParams.loadsAllData())return Xd(t);{const n=e._queryIdentifier;return t.views.get(n)}}function a1(t,e){return o1(t,e)!=null}function ks(t){return Xd(t)!=null}function Xd(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od;function yD(t){ie(!od,"__referenceConstructor has already been defined"),od=t}function BD(){return ie(od,"Reference.ts has not been loaded"),od}let vD=1;class bB{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ut(null),this.pendingWriteTree_=X4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function l1(t,e,A,n,r){return H4(t.pendingWriteTree_,e,A,n,r),r?Ko(t,new pi(iw(),e,A)):[]}function CD(t,e,A,n){R4(t.pendingWriteTree_,e,A,n);const r=ut.fromObject(A);return Ko(t,new Qo(iw(),e,r))}function ds(t,e,A=!1){const n=P4(t.pendingWriteTree_,e);if(M4(t.pendingWriteTree_,e)){let s=new ut(null);return n.snap!=null?s=s.set(nt(),!0):fA(n.children,i=>{s=s.set(new lt(i),!0)}),Ko(t,new Ad(n.path,s,A))}else return[]}function Yd(t,e,A){return Ko(t,new pi(ow(),e,A))}function xD(t,e,A){const n=ut.fromObject(A);return Ko(t,new Qo(ow(),e,n))}function ED(t,e){return Ko(t,new El(ow(),e))}function FD(t,e,A){const n=gw(t,A);if(n){const r=pw(n),s=r.path,i=r.queryId,a=GA(s,e),o=new El(aw(i),a);return mw(t,s,o)}else return[]}function tp(t,e,A,n,r=!1){const s=e._path,i=t.syncPointTree_.get(s);let a=[];if(i&&(e._queryIdentifier==="default"||a1(i,e))){const o=wD(i,e,A,n);gD(i)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const l=o.removed;if(a=o.events,!r){const u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,B)=>ks(B));if(u&&!d){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const B=ID(f);for(let h=0;h<B.length;++h){const y=B[h],C=y.query,p=d1(t,y);t.listenProvider_.startListening(Ga(C),ad(t,C),p.hashFn,p.onComplete)}}}!d&&l.length>0&&!n&&(u?t.listenProvider_.stopListening(Ga(e),null):l.forEach(f=>{const B=t.queryToTagMap.get(Jd(f));t.listenProvider_.stopListening(Ga(f),B)}))}QD(t,l)}return a}function _D(t,e,A,n){const r=gw(t,n);if(r!=null){const s=pw(r),i=s.path,a=s.queryId,o=GA(i,e),l=new pi(aw(a),o,A);return mw(t,i,l)}else return[]}function bD(t,e,A,n){const r=gw(t,n);if(r){const s=pw(r),i=s.path,a=s.queryId,o=GA(i,e),l=ut.fromObject(A),u=new Qo(aw(a),o,l);return mw(t,i,u)}else return[]}function IB(t,e,A,n=!1){const r=e._path;let s=null,i=!1;t.syncPointTree_.foreachOnPath(r,(f,B)=>{const h=GA(f,r);s=s||go(B,h),i=i||ks(B)});let a=t.syncPointTree_.get(r);a?(i=i||ks(a),s=s||go(a,nt())):(a=new dD,t.syncPointTree_=t.syncPointTree_.set(r,a));let o;s!=null?o=!0:(o=!1,s=be.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((B,h)=>{const y=go(h,nt());y&&(s=s.updateImmediateChild(B,y))}));const l=a1(a,e);if(!l&&!e._queryParams.loadsAllData()){const f=Jd(e);ie(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const B=UD();t.queryToTagMap.set(f,B),t.tagToQueryMap.set(B,f)}const u=lw(t.pendingWriteTree_,r);let d=mD(a,e,A,u,s,o);if(!l&&!i&&!n){const f=o1(a,e);d=d.concat(SD(t,e,f))}return d}function hw(t,e,A){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(i,a)=>{const o=GA(i,e),l=go(a,o);if(l)return l});return e1(r,e,s,A,!0)}function Ko(t,e){return c1(e,t.syncPointTree_,null,lw(t.pendingWriteTree_,nt()))}function c1(t,e,A,n){if(je(t.path))return u1(t,e,A,n);{const r=e.get(nt());A==null&&r!=null&&(A=go(r,nt()));let s=[];const i=Pe(t.path),a=t.operationForChild(i),o=e.children.get(i);if(o&&a){const l=A?A.getImmediateChild(i):null,u=t1(n,i);s=s.concat(c1(a,o,l,u))}return r&&(s=s.concat(fw(r,t,n,A))),s}}function u1(t,e,A,n){const r=e.get(nt());A==null&&r!=null&&(A=go(r,nt()));let s=[];return e.children.inorderTraversal((i,a)=>{const o=A?A.getImmediateChild(i):null,l=t1(n,i),u=t.operationForChild(i);u&&(s=s.concat(u1(u,a,o,l)))}),r&&(s=s.concat(fw(r,t,n,A))),s}function d1(t,e){const A=e.query,n=ad(t,A);return{hashFn:()=>(aD(e)||be.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return n?FD(t,A._path,n):ED(t,A._path);{const s=xk(r,A);return tp(t,A,null,s)}}}}function ad(t,e){const A=Jd(e);return t.queryToTagMap.get(A)}function Jd(t){return t._path.toString()+"$"+t._queryIdentifier}function gw(t,e){return t.tagToQueryMap.get(e)}function pw(t){const e=t.indexOf("$");return ie(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lt(t.substr(0,e))}}function mw(t,e,A){const n=t.syncPointTree_.get(e);ie(n,"Missing sync point for query tag that we're tracking");const r=lw(t.pendingWriteTree_,e);return fw(n,A,r,null)}function ID(t){return t.fold((e,A,n)=>{if(A&&ks(A))return[Xd(A)];{let r=[];return A&&(r=i1(A)),fA(n,(s,i)=>{r=r.concat(i)}),r}})}function Ga(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(BD())(t._repo,t._path):t}function QD(t,e){for(let A=0;A<e.length;++A){const n=e[A];if(!n._queryParams.loadsAllData()){const r=Jd(n),s=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(s)}}}function UD(){return vD++}function SD(t,e,A){const n=e._path,r=ad(t,e),s=d1(t,A),i=t.listenProvider_.startListening(Ga(e),r,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(n);if(r)ie(!ks(a.value),"If we're adding a query, it shouldn't be shadowed");else{const o=a.fold((l,u,d)=>{if(!je(l)&&u&&ks(u))return[Xd(u).query];{let f=[];return u&&(f=f.concat(i1(u).map(B=>B.query))),fA(d,(B,h)=>{f=f.concat(h)}),f}});for(let l=0;l<o.length;++l){const u=o[l];t.listenProvider_.stopListening(Ga(u),ad(t,u))}}return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e){this.node_=e}getImmediateChild(e){const A=this.node_.getImmediateChild(e);return new ww(A)}node(){return this.node_}}class yw{constructor(e,A){this.syncTree_=e,this.path_=A}getImmediateChild(e){const A=Qt(this.path_,e);return new yw(this.syncTree_,A)}node(){return hw(this.syncTree_,this.path_)}}const TD=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},QB=function(t,e,A){if(!t||typeof t!="object")return t;if(ie(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return ND(t[".sv"],e,A);if(typeof t[".sv"]=="object")return kD(t[".sv"],e);ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},ND=function(t,e,A){switch(t){case"timestamp":return A.timestamp;default:ie(!1,"Unexpected server value: "+t)}},kD=function(t,e,A){t.hasOwnProperty("increment")||ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&ie(!1,"Unexpected increment value: "+n);const r=e.node();if(ie(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;const i=r.getValue();return typeof i!="number"?n:i+n},f1=function(t,e,A,n){return Bw(e,new yw(A,t),n)},h1=function(t,e,A){return Bw(t,new ww(e),A)};function Bw(t,e,A){const n=t.getPriority().val(),r=QB(n,e.getImmediateChild(".priority"),A);let s;if(t.isLeafNode()){const i=t,a=QB(i.getValue(),e,A);return a!==i.getValue()||r!==i.getPriority().val()?new Jt(a,eA(r)):t}else{const i=t;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new Jt(r))),i.forEachChild(Ut,(a,o)=>{const l=Bw(o,e.getImmediateChild(a),A);l!==o&&(s=s.updateImmediateChild(a,l))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e="",A=null,n={children:{},childCount:0}){this.name=e,this.parent=A,this.node=n}}function Cw(t,e){let A=e instanceof lt?e:new lt(e),n=t,r=Pe(A);for(;r!==null;){const s=Eo(n.node.children,r)||{children:{},childCount:0};n=new vw(r,n,s),A=dt(A),r=Pe(A)}return n}function jo(t){return t.node.value}function g1(t,e){t.node.value=e,Ap(t)}function p1(t){return t.node.childCount>0}function DD(t){return jo(t)===void 0&&!p1(t)}function qd(t,e){fA(t.node.children,(A,n)=>{e(new vw(A,t,n))})}function m1(t,e,A,n){A&&e(t),qd(t,r=>{m1(r,e,!0)})}function LD(t,e,A){let n=t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function Kl(t){return new lt(t.parent===null?t.name:Kl(t.parent)+"/"+t.name)}function Ap(t){t.parent!==null&&HD(t.parent,t.name,t)}function HD(t,e,A){const n=DD(A),r=pr(t.node.children,e);n&&r?(delete t.node.children[e],t.node.childCount--,Ap(t)):!n&&!r&&(t.node.children[e]=A.node,t.node.childCount++,Ap(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=/[\[\].#$\/\u0000-\u001F\u007F]/,PD=/[\[\].#$\u0000-\u001F\u007F]/,dh=10*1024*1024,xw=function(t){return typeof t=="string"&&t.length!==0&&!RD.test(t)},w1=function(t){return typeof t=="string"&&t.length!==0&&!PD.test(t)},MD=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),w1(t)},OD=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Xm(t)||t&&typeof t=="object"&&pr(t,".sv")},KD=function(t,e,A,n){Zd(Kd(t,"value"),e,A)},Zd=function(t,e,A){const n=A instanceof lt?new n4(A,t):A;if(e===void 0)throw new Error(t+"contains undefined "+$s(n));if(typeof e=="function")throw new Error(t+"contains a function "+$s(n)+" with contents = "+e.toString());if(Xm(e))throw new Error(t+"contains "+e.toString()+" "+$s(n));if(typeof e=="string"&&e.length>dh/3&&jd(e)>dh)throw new Error(t+"contains a string greater than "+dh+" utf8 bytes "+$s(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(fA(e,(i,a)=>{if(i===".value")r=!0;else if(i!==".priority"&&i!==".sv"&&(s=!0,!xw(i)))throw new Error(t+" contains an invalid key ("+i+") "+$s(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);r4(n,i),Zd(t,a,n),s4(n)}),r&&s)throw new Error(t+' contains ".value" child '+$s(n)+" in addition to actual children.")}},jD=function(t,e){let A,n;for(A=0;A<e.length;A++){n=e[A];const s=Bl(n);for(let i=0;i<s.length;i++)if(!(s[i]===".priority"&&i===s.length-1)){if(!xw(s[i]))throw new Error(t+"contains an invalid key ("+s[i]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(A4);let r=null;for(A=0;A<e.length;A++){if(n=e[A],r!==null&&En(r,n))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+n.toString());r=n}},WD=function(t,e,A,n){const r=Kd(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];fA(e,(i,a)=>{const o=new lt(i);if(Zd(r,a,Qt(A,o)),ew(o)===".priority"&&!OD(a))throw new Error(r+"contains an invalid value for '"+o.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(o)}),jD(r,s)},y1=function(t,e,A,n){if(!w1(A))throw new Error(Kd(t,e)+'was an invalid path = "'+A+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},zD=function(t,e,A,n){A&&(A=A.replace(/^\/*\.info(\/|$)/,"/")),y1(t,e,A)},B1=function(t,e){if(Pe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},GD=function(t,e){const A=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!xw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||A.length!==0&&!MD(A))throw new Error(Kd(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ef(t,e){let A=null;for(let n=0;n<e.length;n++){const r=e[n],s=r.getPath();A!==null&&!tw(s,A.path)&&(t.eventLists_.push(A),A=null),A===null&&(A={events:[],path:s}),A.events.push(r)}A&&t.eventLists_.push(A)}function v1(t,e,A){ef(t,A),C1(t,n=>tw(n,e))}function er(t,e,A){ef(t,A),C1(t,n=>En(n,e)||En(e,n))}function C1(t,e){t.recursionDepth_++;let A=!0;for(let n=0;n<t.eventLists_.length;n++){const r=t.eventLists_[n];if(r){const s=r.path;e(s)?($D(t.eventLists_[n]),t.eventLists_[n]=null):A=!1}}A&&(t.eventLists_=[]),t.recursionDepth_--}function $D(t){for(let e=0;e<t.events.length;e++){const A=t.events[e];if(A!==null){t.events[e]=null;const n=A.getEventRunner();Ka&&aA("event: "+A.toString()),Oo(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="repo_interrupt",YD=25;class JD{constructor(e,A,n,r){this.repoInfo_=e,this.forceRestClient_=A,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new VD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=td(),this.transactionQueueTree_=new vw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qD(t,e,A){if(t.stats_=qm(t.repoInfo_),t.forceRestClient_||bk())t.server_=new ed(t.repoInfo_,(n,r,s,i)=>{UB(t,n,r,s,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>SB(t,!0),0);else{if(typeof A<"u"&&A!==null){if(typeof A!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{tA(A)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new kr(t.repoInfo_,e,(n,r,s,i)=>{UB(t,n,r,s,i)},n=>{SB(t,n)},n=>{eL(t,n)},t.authTokenProvider_,t.appCheckProvider_,A),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=Tk(t.repoInfo_,()=>new S4(t.stats_,t.server_)),t.infoData_=new _4,t.infoSyncTree_=new bB({startListening:(n,r,s,i)=>{let a=[];const o=t.infoData_.getNode(n._path);return o.isEmpty()||(a=Yd(t.infoSyncTree_,n._path,o),setTimeout(()=>{i("ok")},0)),a},stopListening:()=>{}}),Ew(t,"connected",!1),t.serverSyncTree_=new bB({startListening:(n,r,s,i)=>(t.server_.listen(n,s,r,(a,o)=>{const l=i(a,o);er(t.eventQueue_,n._path,l)}),[]),stopListening:(n,r)=>{t.server_.unlisten(n,r)}})}function ZD(t){const A=t.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+A}function tf(t){return TD({timestamp:ZD(t)})}function UB(t,e,A,n,r){t.dataUpdateCount++;const s=new lt(e);A=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,A):A;let i=[];if(r)if(n){const o=ju(A,l=>eA(l));i=bD(t.serverSyncTree_,s,o,r)}else{const o=eA(A);i=_D(t.serverSyncTree_,s,o,r)}else if(n){const o=ju(A,l=>eA(l));i=xD(t.serverSyncTree_,s,o)}else{const o=eA(A);i=Yd(t.serverSyncTree_,s,o)}let a=s;i.length>0&&(a=So(t,s)),er(t.eventQueue_,a,i)}function SB(t,e){Ew(t,"connected",e),e===!1&&nL(t)}function eL(t,e){fA(e,(A,n)=>{Ew(t,A,n)})}function Ew(t,e,A){const n=new lt("/.info/"+e),r=eA(A);t.infoData_.updateSnapshot(n,r);const s=Yd(t.infoSyncTree_,n,r);er(t.eventQueue_,n,s)}function Fw(t){return t.nextWriteId_++}function tL(t,e,A,n,r){Af(t,"set",{path:e.toString(),value:A,priority:n});const s=tf(t),i=eA(A,n),a=hw(t.serverSyncTree_,e),o=h1(i,a,s),l=Fw(t),u=l1(t.serverSyncTree_,e,o,l,!0);ef(t.eventQueue_,u),t.server_.put(e.toString(),i.val(!0),(f,B)=>{const h=f==="ok";h||UA("set at "+e+" failed: "+f);const y=ds(t.serverSyncTree_,l,!h);er(t.eventQueue_,e,y),np(t,r,f,B)});const d=bw(t,e);So(t,d),er(t.eventQueue_,d,[])}function AL(t,e,A,n){Af(t,"update",{path:e.toString(),value:A});let r=!0;const s=tf(t),i={};if(fA(A,(a,o)=>{r=!1,i[a]=f1(Qt(e,a),eA(o),t.serverSyncTree_,s)}),r)aA("update() called with empty data.  Don't do anything."),np(t,n,"ok",void 0);else{const a=Fw(t),o=CD(t.serverSyncTree_,e,i,a);ef(t.eventQueue_,o),t.server_.merge(e.toString(),A,(l,u)=>{const d=l==="ok";d||UA("update at "+e+" failed: "+l);const f=ds(t.serverSyncTree_,a,!d),B=f.length>0?So(t,e):e;er(t.eventQueue_,B,f),np(t,n,l,u)}),fA(A,l=>{const u=bw(t,Qt(e,l));So(t,u)}),er(t.eventQueue_,e,[])}}function nL(t){Af(t,"onDisconnectEvents");const e=tf(t),A=td();$g(t.onDisconnect_,nt(),(r,s)=>{const i=f1(r,s,t.serverSyncTree_,e);YF(A,r,i)});let n=[];$g(A,nt(),(r,s)=>{n=n.concat(Yd(t.serverSyncTree_,r,s));const i=bw(t,r);So(t,i)}),t.onDisconnect_=td(),er(t.eventQueue_,nt(),n)}function rL(t,e,A){let n;Pe(e._path)===".info"?n=IB(t.infoSyncTree_,e,A):n=IB(t.serverSyncTree_,e,A),v1(t.eventQueue_,e._path,n)}function x1(t,e,A){let n;Pe(e._path)===".info"?n=tp(t.infoSyncTree_,e,A):n=tp(t.serverSyncTree_,e,A),v1(t.eventQueue_,e._path,n)}function sL(t){t.persistentConnection_&&t.persistentConnection_.interrupt(XD)}function Af(t,...e){let A="";t.persistentConnection_&&(A=t.persistentConnection_.id+":"),aA(A,...e)}function np(t,e,A,n){e&&Oo(()=>{if(A==="ok")e(null);else{const r=(A||"error").toUpperCase();let s=r;n&&(s+=": "+n);const i=new Error(s);i.code=r,e(i)}})}function E1(t,e,A){return hw(t.serverSyncTree_,e,A)||be.EMPTY_NODE}function _w(t,e=t.transactionQueueTree_){if(e||nf(t,e),jo(e)){const A=_1(t,e);ie(A.length>0,"Sending zero length transaction queue"),A.every(r=>r.status===0)&&iL(t,Kl(e),A)}else p1(e)&&qd(e,A=>{_w(t,A)})}function iL(t,e,A){const n=A.map(l=>l.currentWriteId),r=E1(t,e,n);let s=r;const i=r.hash();for(let l=0;l<A.length;l++){const u=A[l];ie(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=GA(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),o=e;t.server_.put(o.toString(),a,l=>{Af(t,"transaction put response",{path:o.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let f=0;f<A.length;f++)A[f].status=2,u=u.concat(ds(t.serverSyncTree_,A[f].currentWriteId)),A[f].onComplete&&d.push(()=>A[f].onComplete(null,!0,A[f].currentOutputSnapshotResolved)),A[f].unwatcher();nf(t,Cw(t.transactionQueueTree_,e)),_w(t,t.transactionQueueTree_),er(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Oo(d[f])}else{if(l==="datastale")for(let d=0;d<A.length;d++)A[d].status===3?A[d].status=4:A[d].status=0;else{UA("transaction at "+o.toString()+" failed: "+l);for(let d=0;d<A.length;d++)A[d].status=4,A[d].abortReason=l}So(t,e)}},i)}function So(t,e){const A=F1(t,e),n=Kl(A),r=_1(t,A);return oL(t,r,n),n}function oL(t,e,A){if(e.length===0)return;const n=[];let r=[];const i=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const o=e[a],l=GA(A,o.path);let u=!1,d;if(ie(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),o.status===4)u=!0,d=o.abortReason,r=r.concat(ds(t.serverSyncTree_,o.currentWriteId,!0));else if(o.status===0)if(o.retryCount>=YD)u=!0,d="maxretry",r=r.concat(ds(t.serverSyncTree_,o.currentWriteId,!0));else{const f=E1(t,o.path,i);o.currentInputSnapshot=f;const B=e[a].update(f.val());if(B!==void 0){Zd("transaction failed: Data returned ",B,o.path);let h=eA(B);typeof B=="object"&&B!=null&&pr(B,".priority")||(h=h.updatePriority(f.getPriority()));const C=o.currentWriteId,p=tf(t),g=h1(h,f,p);o.currentOutputSnapshotRaw=h,o.currentOutputSnapshotResolved=g,o.currentWriteId=Fw(t),i.splice(i.indexOf(C),1),r=r.concat(l1(t.serverSyncTree_,o.path,g,o.currentWriteId,o.applyLocally)),r=r.concat(ds(t.serverSyncTree_,C,!0))}else u=!0,d="nodata",r=r.concat(ds(t.serverSyncTree_,o.currentWriteId,!0))}er(t.eventQueue_,A,r),r=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?n.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):n.push(()=>e[a].onComplete(new Error(d),!1,null))))}nf(t,t.transactionQueueTree_);for(let a=0;a<n.length;a++)Oo(n[a]);_w(t,t.transactionQueueTree_)}function F1(t,e){let A,n=t.transactionQueueTree_;for(A=Pe(e);A!==null&&jo(n)===void 0;)n=Cw(n,A),e=dt(e),A=Pe(e);return n}function _1(t,e){const A=[];return b1(t,e,A),A.sort((n,r)=>n.order-r.order),A}function b1(t,e,A){const n=jo(e);if(n)for(let r=0;r<n.length;r++)A.push(n[r]);qd(e,r=>{b1(t,r,A)})}function nf(t,e){const A=jo(e);if(A){let n=0;for(let r=0;r<A.length;r++)A[r].status!==2&&(A[n]=A[r],n++);A.length=n,g1(e,A.length>0?A:void 0)}qd(e,n=>{nf(t,n)})}function bw(t,e){const A=Kl(F1(t,e)),n=Cw(t.transactionQueueTree_,e);return LD(n,r=>{fh(t,r)}),fh(t,n),m1(n,r=>{fh(t,r)}),A}function fh(t,e){const A=jo(e);if(A){const n=[];let r=[],s=-1;for(let i=0;i<A.length;i++)A[i].status===3||(A[i].status===1?(ie(s===i-1,"All SENT items should be at beginning of queue."),s=i,A[i].status=3,A[i].abortReason="set"):(ie(A[i].status===0,"Unexpected transaction status in abort"),A[i].unwatcher(),r=r.concat(ds(t.serverSyncTree_,A[i].currentWriteId,!0)),A[i].onComplete&&n.push(A[i].onComplete.bind(null,new Error("set"),!1,null))));s===-1?g1(e,void 0):A.length=s+1,er(t.eventQueue_,Kl(e),r);for(let i=0;i<n.length;i++)Oo(n[i])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(t){let e="";const A=t.split("/");for(let n=0;n<A.length;n++)if(A[n].length>0){let r=A[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function lL(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const A of t.split("&")){if(A.length===0)continue;const n=A.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):UA(`Invalid query segment '${A}' in query '${t}'`)}return e}const TB=function(t,e){const A=cL(t),n=A.namespace;A.domain==="firebase.com"&&Kr(A.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&A.domain!=="localhost"&&Kr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),A.secure||wk();const r=A.scheme==="ws"||A.scheme==="wss";return{repoInfo:new NF(A.host,A.secure,n,r,e,"",n!==A.subdomain),path:new lt(A.pathString)}},cL=function(t){let e="",A="",n="",r="",s="",i=!0,a="https",o=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(r=aL(t.substring(u,d)));const f=lL(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(i=a==="https"||a==="wss",o=parseInt(e.substring(l+1),10)):l=e.length;const B=e.slice(0,l);if(B.toLowerCase()==="localhost")A="localhost";else if(B.split(".").length<=2)A=B;else{const h=e.indexOf(".");n=e.substring(0,h).toLowerCase(),A=e.substring(h+1),s=n}"ns"in f&&(s=f.ns)}return{host:e,port:o,domain:A,subdomain:n,secure:i,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,A,n,r){this.eventType=e,this.eventRegistration=A,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+tA(this.snapshot.exportVal())}}class dL{constructor(e,A,n){this.eventRegistration=e,this.error=A,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,A){this.snapshotCallback=e,this.cancelCallback=A}onValue(e,A){this.snapshotCallback.call(null,e,A)}onCancel(e){return ie(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,A,n,r){this._repo=e,this._path=A,this._queryParams=n,this._orderByCalled=r}get key(){return je(this._path)?null:ew(this._path)}get ref(){return new Os(this._repo,this._path)}get _queryIdentifier(){const e=mB(this._queryParams),A=Ym(e);return A==="{}"?"default":A}get _queryObject(){return mB(this._queryParams)}isEqual(e){if(e=JA(e),!(e instanceof Iw))return!1;const A=this._repo===e._repo,n=tw(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return A&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+t4(this._path)}}class Os extends Iw{constructor(e,A){super(e,A,new sw,!1)}get parent(){const e=KF(this._path);return e===null?null:new Os(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ld{constructor(e,A,n){this._node=e,this.ref=A,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const A=new lt(e),n=rp(this.ref,e);return new ld(this._node.getChild(A),n,Ut)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,r)=>e(new ld(r,rp(this.ref,n),Ut)))}hasChild(e){const A=new lt(e);return!this._node.getChild(A).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function TA(t,e){return t=JA(t),t._checkNotDeleted("ref"),e!==void 0?rp(t._root,e):t._root}function rp(t,e){return t=JA(t),Pe(t._path)===null?zD("child","path",e):y1("child","path",e),new Os(t._repo,Qt(t._path,e))}function cd(t){return B1("remove",t._path),Fl(t,null)}function Fl(t,e){t=JA(t),B1("set",t._path),KD("set",e,t._path);const A=new kl;return tL(t._repo,t._path,e,null,A.wrapCallback(()=>{})),A.promise}function jl(t,e){WD("update",e,t._path);const A=new kl;return AL(t._repo,t._path,e,A.wrapCallback(()=>{})),A.promise}class rf{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,A){const n=A._queryParams.getIndex();return new uL("value",this,new ld(e.snapshotNode,new Os(A._repo,A._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,A){return this.callbackContext.hasCancelCallback?new dL(this,e,A):null}matches(e){return e instanceof rf?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function fL(t,e,A,n,r){const s=new I1(A,void 0),i=new rf(s);return rL(t._repo,t,i),()=>x1(t._repo,t,i)}function Q1(t,e,A,n){return fL(t,"value",e)}function U1(t,e,A){let n=null;const r=A?new I1(A):null;n=new rf(r),x1(t._repo,t,n)}fD(Os);yD(Os);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL="FIREBASE_DATABASE_EMULATOR_HOST",sp={};let gL=!1;function pL(t,e,A,n){const r=e.lastIndexOf(":"),s=e.substring(0,r),i=Ho(s);t.repoInfo_=new NF(e,i,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,A),n&&(t.authTokenProvider_=n)}function mL(t,e,A,n,r){let s=n||t.options.databaseURL;s===void 0&&(t.options.projectId||Kr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),aA("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let i=TB(s,r),a=i.repoInfo,o;typeof process<"u"&&Zy&&(o=Zy[hL]),o?(s=`http://${o}?ns=${a.namespace}`,i=TB(s,r),a=i.repoInfo):i.repoInfo.secure;const l=new Qk(t.name,t.options,e);GD("Invalid Firebase Database URL",i),je(i.path)||Kr("Database URL must point to the root of a Firebase Database (not including a child path).");const u=yL(a,t,l,new Ik(t,A));return new BL(u,t)}function wL(t,e){const A=sp[e];(!A||A[t.key]!==t)&&Kr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),sL(t),delete A[t.key]}function yL(t,e,A,n){let r=sp[e.name];r||(r={},sp[e.name]=r);let s=r[t.toURLString()];return s&&Kr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new JD(t,gL,A,n),r[t.toURLString()]=s,s}class BL{constructor(e,A){this._repoInternal=e,this.app=A,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(qD(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Os(this._repo,nt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(wL(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Kr("Cannot call "+e+" on a deleted database.")}}function vL(t=ME(),e){const A=Hm(t,"database").getImmediate({identifier:e});if(!A._instanceStarted){const n=DS("database");n&&CL(A,...n)}return A}function CL(t,e,A,n={}){t=JA(t),t._checkNotDeleted("useEmulator");const r=`${e}:${A}`,s=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&di(n,s.repoInfo_.emulatorOptions))return;Kr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let i;if(s.repoInfo_.nodeAdmin)n.mockUserToken&&Kr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new lu(lu.OWNER);else if(n.mockUserToken){const a=typeof n.mockUserToken=="string"?n.mockUserToken:LS(n.mockUserToken,t.app.options.projectId);i=new lu(a)}Ho(e)&&(NE(e),kE("Database",!0)),pL(s,r,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t){dk(Po),Fo(new fi("database",(e,{instanceIdentifier:A})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return mL(n,r,s,A)},"PUBLIC").setMultipleInstances(!0)),_s(eB,tB,t),_s(eB,tB,"esm2020")}kr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};kr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};xL();const S1="AIzaSyD-CUcGgOEmiKVqhsMGNi3nw0hPFKP5QSs",EL={apiKey:S1,authDomain:"refboard-21681.firebaseapp.com",projectId:"refboard-21681",storageBucket:"refboard-21681.firebasestorage.app",messagingSenderId:"1052217843844",appId:"1:1052217843844:web:d13c695547c279d832e2d1",measurementId:"G-LSVG7VY51R",databaseURL:"https://refboard-21681-default-rtdb.firebaseio.com"},T1=PE(EL),Fi=ck(T1);YT(Fi,Gm).then(()=>{console.log("Firebase persistence set to SESSION")}).catch(t=>{console.error("Failed to set persistence:",t)});const FL=vL(T1,"https://refboard-21681-default-rtdb.firebaseio.com"),Qw=new lr;Qw.setCustomParameters({prompt:"select_account consent",access_type:"offline"});Qw.addScope("https://www.googleapis.com/auth/drive");async function _L(){try{const t=await yN(Fi,Qw),e=t.user;return lr.credentialFromResult(t),{success:!0,user:{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}}}catch(t){return console.error("Sign in error:",t),{success:!1,error:t.message||"Failed to sign in"}}}async function bL(){try{await ZT(Fi),localStorage.removeItem("google_access_token")}catch(t){throw console.error("Sign out error:",t),t}}function Uw(){return Fi.currentUser}function Sw(t){return qT(Fi,e=>{t(e?{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}:null)})}function N1(){return FL}async function ip(){try{const t=Fi.currentUser;return t?(await t.getIdToken(!0),console.log("Firebase token refreshed successfully"),!0):!1}catch(t){return console.error("Token refresh error:",t),!1}}function k1(t){return aF(Fi,async e=>{if(e)try{const A=await e.getIdToken(!0);t(A)}catch(A){console.error("Error getting token:",A),t(null)}else t(null)})}const D1=Object.freeze(Object.defineProperty({__proto__:null,FIREBASE_API_KEY:S1,getCurrentUser:Uw,getFirebaseDatabase:N1,onAuthChange:Sw,onTokenChange:k1,refreshAuthToken:ip,signInWithGoogle:_L,signOut:bL},Symbol.toStringTag,{value:"Module"})),IL=({thumbnail:t,boardName:e,index:A})=>{const[n,r]=cA.useState(!1),[s,i]=cA.useState(!1);return c.jsxs(c.Fragment,{children:[n?c.jsx("span",{className:"text-4xl",children:""}):c.jsx("img",{src:t,alt:e,className:`w-full h-full object-cover rounded transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onLoad:()=>i(!0),onError:()=>{console.warn("Failed to load thumbnail for board:",e),r(!0),i(!1)},loading:"lazy",style:{animationDelay:`${A*50}ms`}}),!s&&!n&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-8 h-8 border-2 border-gray-500 border-t-transparent rounded-full animate-spin"})})]})},QL=({onBoardSelect:t})=>{const[e,A]=x.useState([]),[n,r]=x.useState([]),[s,i]=x.useState(!0),[a,o]=x.useState(!1),[l,u]=x.useState(""),[d,f]=x.useState(!1),[B,h]=x.useState(null),[y,C]=x.useState(""),p=Uw();x.useEffect(()=>{const N=async()=>{};return window.addEventListener("focus",N),()=>window.removeEventListener("focus",N)},[]),x.useEffect(()=>{const N=Sw(I=>{I?g():(A([]),r([]))});return()=>N()},[]);async function g(){try{i(!0);const[N,I]=await Promise.all([qx(),AE()]);A(N),r(I)}catch(N){console.error("Failed to load boards:",N)}finally{i(!1)}}const v=()=>{u(" "),o(!0)},E=()=>{l.trim()&&(t("new",l.trim()),o(!1))},S=(N,I,q)=>{N.stopPropagation(),h({id:I,name:q}),C(""),f(!0)},U=async()=>{if(B)try{await Zx(B.id),f(!1),h(null),C(""),await g()}catch(N){console.error("Failed to delete board:",N),alert("  .")}},b=(N,I)=>{t(N,I)},L=(N,I)=>c.jsxs("div",{onClick:()=>b(N.id,N.name),className:"group bg-gray-800 rounded-lg p-4 cursor-pointer hover:bg-gray-700 transition-colors border border-gray-700 hover:border-blue-500 relative",children:[c.jsxs("div",{className:"aspect-video bg-gray-700 rounded mb-3 flex items-center justify-center relative overflow-hidden",children:[N.thumbnail?c.jsx(IL,{thumbnail:N.thumbnail,boardName:N.name,index:I}):c.jsx("span",{className:"text-4xl",children:""}),N.owners&&N.owners.length>0&&c.jsxs("div",{className:"absolute top-2 left-2 bg-blue-600/90 text-white text-xs px-2 py-1 rounded-full shadow-sm backdrop-blur-sm z-10 flex items-center gap-1",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),c.jsx("span",{children:N.owners[0].displayName})]}),c.jsx("button",{onClick:q=>S(q,N.id,N.name),className:"absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:" ",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),c.jsx("h3",{className:"font-semibold truncate",children:N.name}),c.jsx("p",{className:"text-sm text-gray-400",children:new Date(N.modifiedTime).toLocaleDateString("ko-KR")})]},N.id);return c.jsxs("div",{className:"w-screen h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white flex flex-col relative",children:[c.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm border-b border-gray-700 p-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold",children:"RefBoard"}),c.jsx("p",{className:"text-sm text-gray-400",children:(p==null?void 0:p.displayName)||(p==null?void 0:p.email)})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:async()=>{const{signOut:N}=await or(async()=>{const{signOut:I}=await Promise.resolve().then(()=>D1);return{signOut:I}},void 0);await N(),window.location.reload()},className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg font-semibold transition-colors",children:""}),c.jsx("button",{onClick:v,className:"bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg font-semibold transition-colors",children:"+  "})]})]})}),c.jsx("div",{className:"flex-1 overflow-auto p-8",children:c.jsx("div",{className:"max-w-6xl mx-auto",children:s?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e.length===0&&n.length===0?c.jsxs("div",{className:"text-center py-20",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-semibold mb-2",children:" "}),c.jsx("p",{className:"text-gray-400 mb-6",children:"   !"}),c.jsx("button",{onClick:v,className:"bg-blue-600 hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-colors inline-block",children:"  "})]}):c.jsxs("div",{className:"space-y-8",children:[e.length>0&&c.jsxs("div",{children:[c.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-300",children:["  (",e.length,")"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map((N,I)=>L(N,I))})]}),n.length>0&&c.jsxs("div",{children:[c.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-300 flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"  (",n.length,")"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map((N,I)=>L(N,e.length+I))})]})]})})}),c.jsx("button",{onClick:()=>g(),className:"fixed bottom-24 left-1/2 -translate-x-1/2 bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all z-40 group",title:"  ",children:c.jsx("svg",{className:"w-6 h-6 group-hover:rotate-180 transition-transform duration-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),a&&c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-md border border-gray-700",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"  "}),c.jsx("input",{type:"text",value:l,onChange:N=>u(N.target.value),placeholder:"  ",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 mb-6 focus:outline-none focus:border-blue-500",autoFocus:!0,onKeyDown:N=>N.key==="Enter"&&E()}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:""}),c.jsx("button",{onClick:E,className:"bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg font-semibold transition-colors",children:""})]})]})}),d&&B&&c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-md border border-red-700",children:[c.jsx("h3",{className:"text-xl font-bold mb-2 text-red-500",children:"  "}),c.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"    .     ."}),c.jsxs("div",{className:"bg-gray-900 p-3 rounded-lg mb-4",children:[c.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"   :"}),c.jsx("p",{className:"font-bold text-white",children:B.name})]}),c.jsx("input",{type:"text",value:y,onChange:N=>C(N.target.value),placeholder:"  ",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 mb-6 focus:outline-none focus:border-red-500",autoFocus:!0}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>{f(!1),h(null),C("")},className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:""}),c.jsx("button",{onClick:U,disabled:y!==B.name,className:"bg-red-600 hover:bg-red-700 px-6 py-2 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})})]})},UL=({boardId:t,boardName:e,items:A=[],onClose:n})=>{const[r,s]=x.useState(""),[i,a]=x.useState("reader"),[o,l]=x.useState([]),[u,d]=x.useState(!1),[f,B]=x.useState(null),[h,y]=x.useState(null);x.useEffect(()=>{C()},[t]);async function C(){try{d(!0);const E=await eE(t);l(E.filter(S=>S.role!=="owner"))}catch(E){console.error("Failed to load permissions:",E)}finally{d(!1)}}const p=async()=>{try{if(!confirm('    "   "    ? (     )'))return;d(!0),B(null),y(null);const E=A.filter(U=>(U.type==="image"||U.type==="video")&&U.driveFileId).map(U=>U.driveFileId);if(E.length===0){y("   ."),d(!1);return}const S=await aE(E);y(`   : ${S.success} , ${S.failed} .`)}catch(E){console.error("Failed to fix permissions:",E),B("   .")}finally{d(!1)}},g=async()=>{if(!r.trim()){B(" .");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)){B("   .");return}try{d(!0),B(null),y(null),await Im(t,r.trim(),i);const S=A.filter(U=>(U.type==="image"||U.type==="video")&&U.driveFileId).map(U=>U.driveFileId);if(S.length>0)try{const U=await Promise.allSettled(S.map(N=>oE([N],r.trim(),i))),b=U.filter(N=>N.status==="fulfilled").length,L=U.filter(N=>N.status==="rejected").length;console.log(`Shared ${b}/${S.length} media files (images/videos) with ${r}`),L>0&&(console.warn(`Failed to share ${L} media files. Check console for details.`),U.forEach((N,I)=>{N.status==="rejected"&&console.error(`Failed to share media file ${S[I]}:`,N.reason)}))}catch(U){console.error("Failed to share media files:",U)}y(`${r} !`),s(""),await C()}catch(S){B(" .  ."),console.error("Share error:",S)}finally{d(!1)}},v=async(E,S)=>{if(window.confirm(`${S||" "}  ?`))try{d(!0),await tE(t,E),y(" ."),await C()}catch(U){B("  ."),console.error("Remove permission error:",U)}finally{d(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100]",children:c.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden border border-gray-700",children:[c.jsx("div",{className:"p-6 border-b border-gray-700",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold",children:" "}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:e})]}),c.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),c.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[60vh]",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:" "}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"email",value:r,onChange:E=>s(E.target.value),placeholder:" ",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-blue-500",onKeyDown:E=>E.key==="Enter"&&g()}),c.jsxs("select",{value:i,onChange:E=>a(E.target.value),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-blue-500",children:[c.jsx("option",{value:"reader",children:" "}),c.jsx("option",{value:"writer",children:" "})]}),c.jsx("button",{onClick:g,disabled:u,className:"bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg font-semibold transition-colors disabled:opacity-50",children:""})]})]}),f&&c.jsx("div",{className:"bg-red-900/30 border border-red-500/50 text-red-200 px-4 py-3 rounded-lg text-sm",children:f}),h&&c.jsx("div",{className:"bg-green-900/30 border border-green-500/50 text-green-200 px-4 py-3 rounded-lg text-sm",children:h}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium mb-3",children:[" (",o.length,")"]}),u&&o.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-400",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"})," ..."]}):o.length===0?c.jsx("div",{className:"text-center py-8 text-gray-400",children:"   ."}):c.jsx("div",{className:"space-y-2",children:o.map(E=>{var S;return c.jsxs("div",{className:"flex items-center justify-between bg-gray-700/50 rounded-lg px-4 py-3 border border-gray-600",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center font-bold",children:E.displayName?E.displayName[0].toUpperCase():(S=E.emailAddress)==null?void 0:S[0].toUpperCase()}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:E.displayName||E.emailAddress||"   "}),E.emailAddress&&E.displayName&&c.jsx("p",{className:"text-sm text-gray-400",children:E.emailAddress}),c.jsx("p",{className:"text-xs text-gray-400",children:E.role==="reader"?" ":" "})]})]}),c.jsx("button",{onClick:()=>v(E.id,E.emailAddress),className:"text-red-400 hover:text-red-300 transition-colors text-sm px-3 py-1 rounded hover:bg-red-900/20",children:""})]},E.id)})})]}),c.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[c.jsx("h4",{className:"text-sm font-medium mb-3 text-gray-300",children:" "}),c.jsxs("div",{className:"flex items-center justify-between bg-gray-700/30 rounded-lg p-4 border border-gray-600",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm",children:"  ?"}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"       ."})]}),c.jsx("button",{onClick:p,disabled:u,className:"bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-xs font-semibold transition-colors border border-gray-500 whitespace-nowrap ml-4",children:"  "})]})]}),c.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4 text-sm text-blue-200",children:[c.jsx("p",{className:"font-medium mb-1",children:"  "}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"    ."}),c.jsxs("li",{children:[c.jsx("strong",{children:" "}),":    ."]}),c.jsxs("li",{children:[c.jsx("strong",{children:" "}),":    ."]}),c.jsx("li",{children:"  Google Drive    ."})]})]})]})]})})},SL=({cursors:t})=>{const e=cA.useMemo(()=>{const A=new Set;return t.filter(n=>{const r=A.has(n.userId);return A.add(n.userId),!r})},[t]);return c.jsx(c.Fragment,{children:e.map(A=>c.jsxs("div",{className:"absolute pointer-events-none z-[9999] transition-all duration-75 ease-out",style:{left:`${A.x}px`,top:`${A.y}px`,transform:"translate(-2px, -2px)"},children:[c.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"},children:c.jsx("path",{d:"M5.65376 12.3673H5.46026L5.31717 12.4976L0.500002 16.8829L0.500002 1.19841L11.7841 12.3673H5.65376Z",fill:A.color,stroke:"white",strokeWidth:"1"})}),c.jsx("div",{className:"absolute top-12 left-2 px-2 py-1 rounded text-xs font-medium whitespace-nowrap",style:{backgroundColor:A.color,color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:A.userName||A.userEmail.split("@")[0]})]},A.userId))})},hh=({boardName:t="RefBoard"})=>{const[e,A]=x.useState(!1);x.useEffect(()=>{const i=a=>{a.clientY<50?A(!0):a.clientY>100&&A(!1)};return document.addEventListener("mousemove",i),()=>document.removeEventListener("mousemove",i)},[]);const n=()=>{var i;(i=window.electronAPI)!=null&&i.minimizeWindow&&window.electronAPI.minimizeWindow()},r=()=>{var i;(i=window.electronAPI)!=null&&i.maximizeWindow&&window.electronAPI.maximizeWindow()},s=()=>{var i;(i=window.electronAPI)!=null&&i.closeWindow&&window.electronAPI.closeWindow()};return c.jsxs("div",{className:`fixed top-0 left-0 right-0 h-8 bg-black/80 backdrop-blur-sm flex items-center justify-between px-4 z-[10002] transition-transform duration-200 ${e?"translate-y-0":"-translate-y-full"}`,style:{WebkitAppRegion:"drag"},children:[c.jsx("div",{className:"text-white text-sm font-medium select-none",children:t}),c.jsxs("div",{className:"flex items-center gap-2",style:{WebkitAppRegion:"no-drag",pointerEvents:"auto"},children:[c.jsx("button",{onClick:i=>{i.stopPropagation(),n()},onMouseDown:i=>i.stopPropagation(),className:"w-10 h-8 flex items-center justify-center text-white/70 hover:text-white hover:bg-white/10 transition-colors pointer-events-auto",title:"Minimize",children:c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:c.jsx("path",{d:"M2 7H12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}),c.jsx("button",{onClick:i=>{i.stopPropagation(),r()},onMouseDown:i=>i.stopPropagation(),className:"w-10 h-8 flex items-center justify-center text-white/70 hover:text-white hover:bg-white/10 transition-colors pointer-events-auto",title:"Maximize",children:c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:c.jsx("rect",{x:"3",y:"3",width:"8",height:"8",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})})}),c.jsx("button",{onClick:i=>{i.stopPropagation(),s()},onMouseDown:i=>i.stopPropagation(),className:"w-10 h-8 flex items-center justify-center text-white/70 hover:text-white hover:bg-red-600/80 transition-colors pointer-events-auto",title:"Close",children:c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:c.jsx("path",{d:"M3 3L11 11M3 11L11 3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]})]})},TL=({onGetStarted:t,onDownload:e})=>c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white font-sans overflow-y-auto",children:[c.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-black/50 backdrop-blur-md border-b border-white/10",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-16 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-tr from-blue-500 to-purple-500 rounded-lg flex items-center justify-center",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),c.jsx("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400",children:"RefBoard"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:t,className:"text-gray-300 hover:text-white transition-colors text-sm font-medium",children:"Log In"}),c.jsx("button",{onClick:e,className:"bg-white text-black px-4 py-2 rounded-full text-sm font-bold hover:bg-gray-100 transition-transform active:scale-95",children:"Download App"})]})]})}),c.jsxs("header",{className:"pt-32 pb-20 px-6 relative overflow-hidden",children:[c.jsxs("div",{className:"max-w-5xl mx-auto text-center relative z-10",children:[c.jsxs("div",{className:"inline-block px-4 py-1.5 mb-6 rounded-full bg-white/5 border border-white/10 backdrop-blur-sm",children:[c.jsx("span",{className:"text-blue-400 text-sm font-medium",children:" Since 2024"}),c.jsx("span",{className:"mx-2 text-gray-500",children:"|"}),c.jsx("span",{className:"text-gray-300 text-sm",children:"The Ultimate Reference Workspace"})]}),c.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold tracking-tight mb-8 leading-tight",children:["Organize Your ",c.jsx("br",{}),c.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400",children:"Creative Vision"})]}),c.jsx("p",{className:"text-xl text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed",children:"RefBoard is the endless digital canvas for creators, designers, and developers. Gather references, brainstorm ideas, and collaborate in real-time."}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[c.jsx("button",{onClick:t,className:"w-full sm:w-auto px-8 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold text-lg shadow-lg shadow-blue-500/20 transition-all hover:-translate-y-1",children:"Open Web App"}),c.jsx("button",{onClick:e,className:"w-full sm:w-auto px-8 py-4 bg-gray-800 hover:bg-gray-700 text-white rounded-xl font-bold text-lg border border-white/10 transition-all hover:-translate-y-1",children:"Download Client"})]})]}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-blue-500/10 rounded-full blur-[100px] pointer-events-none"})]}),c.jsx("section",{className:"py-20 bg-black/20",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[c.jsx("h2",{className:"text-3xl font-bold text-center mb-16",children:"Why RefBoard?"}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[c.jsx(Ni,{icon:"",title:"Infinite Canvas",description:"No boundaries. Place images, notes, and videos anywhere on an infinitely expandable workspace."}),c.jsx(Ni,{icon:"",title:"Real-time Sync",description:"Collaborate with your team instantly. Changes are synchronized across all devices in real-time."}),c.jsx(Ni,{icon:"",title:"Secure & Private",description:"Your boards are private by default. Share only what you want with granular permission controls."}),c.jsx(Ni,{icon:"",title:"Drag & Drop",description:"Simply drag images from your desktop or browser directly onto the board. It's that easy."}),c.jsx(Ni,{icon:"",title:"Smart Organization",description:"Group items, create frames, and use auto-layout tools to keep your creative chaos organized."}),c.jsx(Ni,{icon:"",title:"Cloud Native",description:"Built on Google Drive. Your references are safe, backed up, and accessible from any device."})]})]})}),c.jsx("section",{className:"py-20 px-6 border-t border-white/5 bg-gray-900/50",children:c.jsxs("div",{className:"max-w-4xl mx-auto prose prose-invert",children:[c.jsx("h3",{className:"text-2xl font-bold mb-6",children:"About RefBoard"}),c.jsx("p",{className:"text-gray-400 mb-4",children:"RefBoard is a cutting-edge productivity tool designed to help visual thinkers organize their workflow. Whether you are a concept artist collecting mood boards, a UI/UX designer mapping out user flows, or a developer planning architecture, RefBoard provides the flexible environment you need."}),c.jsx("p",{className:"text-gray-400 mb-4",children:"Our mission is to replace scattered folders and browser tabs with a single, unified visual workspace. RefBoard supports a wide range of media types, including images, GIFs, videos, and rich text notes."}),c.jsx("h3",{className:"text-2xl font-bold mt-12 mb-6",children:"Key Capabilities"}),c.jsxs("ul",{className:"list-disc pl-6 text-gray-400 space-y-2",children:[c.jsxs("li",{children:[c.jsx("strong",{children:"High Performance:"})," Optimized for handling thousands of images without lag."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Cross-Platform:"})," Available on Windows, macOS, and Web."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Google Drive Integration:"})," Seamlessly sync your boards with your personal cloud storage."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Export Options:"})," Export your boards to PNG, PDF, or shareable links."]})]}),c.jsx("h3",{className:"text-2xl font-bold mt-12 mb-6",children:"Getting Started"}),c.jsx("p",{className:"text-gray-400",children:'To start using RefBoard, simply click the "Open Web App" button above. You can sign in with your Google account to instantly access your Drive-stored boards.'})]})}),c.jsx("footer",{className:"py-12 border-t border-white/10 text-center text-gray-500 text-sm",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[c.jsx("div",{children:" 2024 RefBoard. All rights reserved."}),c.jsxs("div",{className:"flex gap-6",children:[c.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy Policy"}),c.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms of Service"}),c.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})]})]})})]}),Ni=({icon:t,title:e,description:A})=>c.jsxs("div",{className:"bg-white/5 border border-white/5 p-6 rounded-2xl hover:bg-white/10 transition-colors",children:[c.jsx("div",{className:"text-4xl mb-4",children:t}),c.jsx("h3",{className:"text-xl font-bold mb-2",children:e}),c.jsx("p",{className:"text-gray-400 leading-relaxed",children:A})]});function NL(){return sessionStorage.getItem("google_access_token")}function kL(t){switch(t){case"gemini-3-pro-image-preview":return"gemini-3-pro-image-preview";case"gemini-3.0":return"gemini-3-pro-image-preview";case"gemini-2.5":return"gemini-2.5-flash-image";default:return"gemini-2.5-flash-image"}}async function DL(t){const e=localStorage.getItem("gemini_api_key"),A=NL();if(!e&&!A)throw new Error("No Credential found. Please add a Gemini API Key in settings or Sign In.");const n=kL(t.config.model),r=`https://generativelanguage.googleapis.com/v1beta/models/${n}:generateContent`,s=[];if(t.prompt&&s.push({text:t.prompt}),t.images&&Object.keys(t.images).length>0)for(const f of Object.values(t.images)){const B=f;if(B.src)if(B.src.startsWith("data:")){const h=B.src.match(/data:([^;]+);base64,(.+)/);h&&s.push({inline_data:{mime_type:h[1],data:h[2]}})}else B.src.startsWith("http")&&console.warn("URL images not yet supported, skipping:",B.src)}const i=f=>{const B=f.toUpperCase();return B.endsWith("K")?B:B+"K"},a=n==="gemini-3-pro-image-preview",o={contents:[{parts:s}],generation_config:{response_modalities:a?["TEXT","IMAGE"]:["IMAGE"]}};a&&(o.generation_config.image_config={aspect_ratio:t.config.aspectRatio,image_size:i(t.config.resolution)},o.tools=[{google_search:{}}]);const l={"Content-Type":"application/json"};let u=r;e?u=`${r}?key=${e}`:A&&(l.Authorization=`Bearer ${A}`);const d=await fetch(u,{method:"POST",headers:l,body:JSON.stringify(o)});if(!d.ok){if(d.status===403)throw sessionStorage.removeItem("google_access_token"),new Error(` Generation Failed: No API Key found.

 Click the GEAR ICON () on the generator node to add your Gemini API Key.

Get a free key: https://aistudio.google.com/app/apikey`);if(d.status===503)throw new Error(` Gemini    .

    .`);const f=await d.text();throw new Error(`Gemini API Error (${d.status}): ${f}`)}return d.json()}const NA=N1(),Fn=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),Tw=500*1024,Nw={};function LL(t){const e=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"];let A=0;for(let n=0;n<t.length;n++)A=t.charCodeAt(n)+((A<<5)-A);return e[Math.abs(A)%e.length]}let NB=0;const HL=100;function kB(t,e,A,n,r,s){const i=Date.now();if(i-NB<HL)return;NB=i;const a=TA(NA,`boards/${t}/cursors/${Fn}`),o={sessionId:Fn,userId:e,userName:A,userEmail:n,x:r,y:s,color:LL(Fn),lastUpdate:i};Fl(a,o).catch(l=>{console.error("Failed to update cursor:",l)})}function RL(t,e){const A=TA(NA,`boards/${t}/cursors`),n=r=>{const s=[],i=Date.now();r.forEach(a=>{const o=a.val();o.sessionId!==Fn&&i-o.lastUpdate<3e4&&s.push(o)}),e(s)};return Q1(A,n),()=>{U1(A,"value",n)}}function PL(t,e,A,n){const r=TA(NA,`boards/${t}/presence/${Fn}`),s={sessionId:Fn,userId:e,userName:A,userEmail:n,joinedAt:Date.now(),lastSeen:Date.now()};Fl(r,s).catch(a=>{console.error("Failed to set presence:",a)});const i=setInterval(()=>{Fl(TA(NA,`boards/${t}/presence/${Fn}/lastSeen`),Date.now())},5e3);window[`presenceInterval_${t}_${Fn}`]=i}function ML(t){const e=window[`presenceInterval_${t}_${Fn}`];e&&(clearInterval(e),delete window[`presenceInterval_${t}_${Fn}`]);const A=TA(NA,`boards/${t}/presence/${Fn}`);cd(A).catch(console.error);const n=TA(NA,`boards/${t}/cursors/${Fn}`);cd(n).catch(console.error)}function OL(t,e){const A=Math.ceil(t.length/e),n=new Array(A);for(let r=0,s=0;r<A;++r,s+=e)n[r]=t.substr(s,e);return n}async function L1(t,e,A){const n=OL(A,Tw),r=15;for(let s=0;s<n.length;s+=r){const i={};n.slice(s,s+r).forEach((o,l)=>{const u=s+l;i[`boards/${t}/chunks/${e}/${u}`]=o});try{await jl(TA(NA),i)}catch(o){throw console.error(`Failed to save chunk batch ${s/r}:`,o),o}}}async function DB(t,e){const A=TA(NA,`boards/${t}/data`),n={...e,boardName:e.boardName||"Untitled Board"};await Fl(A,n)}const gh=new Map;async function sA(t,e,A){gh.has(e)||gh.set(e,{timer:null,latestArgs:[],isPending:!1});const n=gh.get(e);if(n.latestArgs=[t,e,A],n.timer){n.isPending=!0;return}LB(t,e,A),n.timer=setTimeout(()=>{if(n.timer=null,n.isPending){n.isPending=!1;const[r,s,i]=n.latestArgs;LB(r,s,i)}},50)}async function LB(t,e,A){const n=TA(NA,`boards/${t}/data/items/${e}`),r={...A};if(e==="ad-banner"||r.type==="ad")return;if(r.src&&typeof r.src=="string"&&(r.src.startsWith("blob:")||r.src.includes("access_token="))&&(r.src=null),r.url&&typeof r.url=="string"&&(r.url.startsWith("blob:")||r.url.includes("access_token="))&&(r.url=null),Object.keys(r).forEach(i=>{r[i]===void 0&&delete r[i]}),r.src){if(Object.keys(r).some(a=>a!=="src"&&a!=="hasChunks"))delete r.src;else if(r.src.length>Tw){console.log(`[RefBoard] Item ${e} is large (${(r.src.length/1024).toFixed(2)}KB). Splitting into chunks...`);try{await L1(t,e,r.src),Nw[e]=r.src,r.src=null,r.hasChunks=!0}catch(a){console.error("Failed to save chunks:",a);return}}}const s=JSON.stringify(r).length;if(s>5*1024*1024){console.warn(`[RefBoard] Update payload too large (${(s/1024/1024).toFixed(2)}MB). Skipping sync to prevent errors.`);return}jl(n,r).catch(i=>{console.error("Failed to update remote item:",i)})}async function js(t,e){const A={};let n=0,r=0;for(const s of e){const i=`boards/${t}/data/items/${s.id}`,a=JSON.parse(JSON.stringify(s));if(a.type==="ad")continue;a.src&&typeof a.src=="string"&&(a.src.startsWith("blob:")||a.src.includes("access_token="))&&(a.src=null),a.url&&typeof a.url=="string"&&(a.url.startsWith("blob:")||a.url.includes("access_token="))&&(a.url=null),a.src&&a.src.length>Tw&&(console.log(`[RefBoard] Item ${s.id} is large. Splitting into chunks...`),await L1(t,s.id,a.src),Nw[s.id]=a.src,a.src=null,a.hasChunks=!0);const o=JSON.stringify(a).length;if(o>9*1024*1024){console.error(`[RefBoard] Item ${s.id} is too large (${(o/1024/1024).toFixed(2)}MB) to sync.`),r++;continue}A[i]=a,n+=o}r>0&&alert(`${r} items were too large to sync in real-time. Try resizing them or using lower resolution.`),n>0&&jl(TA(NA),A).catch(console.error)}function HB(t,e){const A=TA(NA,`boards/${t}/data/items/${e}`);cd(A).catch(console.error);const n=TA(NA,`boards/${t}/chunks/${e}`);cd(n).catch(console.error)}function KL(t,e,A,n,r,s,i){const a=TA(NA,`boards/${t}/data`),o=async l=>{const u=l.val();if(u){if(u.items){const d=[],f=[];if(Object.entries(u.items).forEach(([h,y])=>{y&&y.id?y.type!=="ad"&&d.push(y):f.push(h)}),f.length>0){console.warn(`[Collaboration] Found ${f.length} invalid items in Firebase. Cleaning up...`);const h={};f.forEach(y=>{h[`boards/${t}/data/items/${y}`]=null}),jl(TA(NA),h).catch(y=>console.error("[Collaboration] Failed to clean up invalid items:",y))}const B=await Promise.all(d.map(async h=>{if(h.hasChunks&&!h.src){const y=Nw[h.id];y?h.src=y:h.src=null}return h}));e(B)}else e([]);u.groups?A(Object.values(u.groups)):A([]),u.arrows?n(Object.values(u.arrows)):n([]),u.paths?r(Object.values(u.paths)):r([]),u.connections&&s&&s(Object.values(u.connections)),u.boardName}};return Q1(a,o),()=>{U1(a,"value",o)}}function Mn(t,e,A){const n={},r={};A.forEach(s=>{r[s.id]=s}),n[`boards/${t}/data/${e}`]=JSON.parse(JSON.stringify(r)),jl(TA(NA),n).catch(console.error)}const jL=t=>{const[e,A]=x.useState([]),n=x.useRef(e);x.useEffect(()=>{n.current=e},[e]);const r=(B,h,y,C,p)=>{const g=p*Math.PI/180,v=Math.cos(g),E=Math.sin(g),S=B+y/2,U=h+C/2;return[{x:B-S,y:h-U},{x:B+y-S,y:h-U},{x:B+y-S,y:h+C-U},{x:B-S,y:h+C-U}].map(L=>({x:L.x*v-L.y*E+S,y:L.x*E+L.y*v+U}))},s=x.useCallback(B=>{t&&t!=="new"&&Mn(t,"groups",B)},[t]),i=x.useCallback((B,h)=>{const y=n.current,C=h.filter(H=>typeof H.x=="number"&&!isNaN(H.x)&&typeof H.y=="number"&&!isNaN(H.y)&&typeof H.width=="number"&&!isNaN(H.width)&&typeof H.height=="number"&&!isNaN(H.height));if(C.length<2)return;const p=C.map(H=>H.id);let g=1/0,v=1/0,E=-1/0,S=-1/0;C.forEach(H=>{let G;if(H.type==="image"||H.type==="video"){const Z=H.rotation||0;G=r(H.x,H.y,H.width,H.height,Z)}else G=[{x:H.x,y:H.y},{x:H.x+H.width,y:H.y},{x:H.x+H.width,y:H.y+H.height},{x:H.x,y:H.y+H.height}];G.forEach(Z=>{g=Math.min(g,Z.x),v=Math.min(v,Z.y),E=Math.max(E,Z.x),S=Math.max(S,Z.y)})});const U=10,b=g-U,L=v-U,N=E-g+U*2,I=S-v+U*2,q={id:`group-${Date.now()}`,name:`Group ${y.length+1}`,childIds:p,x:b,y:L,width:N,height:I,fontSize:100,color:"#ffffff"},O=[...y,q];A(O),s(O)},[s]),a=x.useCallback((B,h)=>{const y=n.current;console.log("[updateGroup] id:",B,"data:",h);const C=y.map(p=>{if(p.id===B){const g={...p,...h};return(!g.childIds||!Array.isArray(g.childIds))&&(g.childIds=p.childIds||[]),g}return p});A(C),s(C)},[s]),o=x.useCallback((B,h)=>{const C=n.current.map(p=>p.id===B?{...p,name:h}:p);A(C),s(C)},[s]),l=x.useCallback(B=>{const y=n.current.filter(C=>C.id!==B);A(y),s(y)},[s]),u=x.useCallback((B,h)=>{const C=n.current.map(p=>p.id===B?{...p,childIds:[...p.childIds||[],h]}:p);A(C),s(C)},[s]),d=x.useCallback(B=>{const y=n.current.map(C=>({...C,childIds:(C.childIds||[]).filter(p=>p!==B)}));A(y),s(y)},[s]),f=x.useCallback(B=>n.current.find(y=>y&&y.childIds&&Array.isArray(y.childIds)&&y.childIds.includes(B))||null,[]);return{groups:e,setGroups:A,createGroup:i,updateGroup:a,updateGroupName:o,deleteGroup:l,addItemToGroup:u,removeItemFromGroup:d,getItemGroup:f}},WL=t=>{const[e,A]=x.useState([]),n=x.useCallback(o=>{t&&t!=="new"&&Mn(t,"arrows",o)},[t]),r=x.useCallback((o,l)=>{const u={id:`arrow-${Date.now()}`,sourceId:o,targetId:l,color:"#3b82f6",strokeWidth:2};A(d=>{const f=[...d,u];return n(f),f})},[n]),s=x.useCallback((o,l)=>{A(u=>{const d=u.map(f=>f.id===o?{...f,...l}:f);return n(d),d})},[n]),i=x.useCallback(o=>{A(l=>{const u=l.filter(d=>d.id!==o);return n(u),u})},[n]),a=x.useCallback(o=>{A(l=>{const u=l.filter(d=>d.sourceId!==o&&d.targetId!==o);return n(u),u})},[n]);return{arrows:e,setArrows:A,createArrow:r,updateArrow:s,deleteArrow:i,deleteArrowsForItem:a}},zL=()=>{const[t,e]=x.useState(new Set);return x.useEffect(()=>{const A=s=>{let i=s.key;i==="Control"&&(i="Ctrl"),i==="Alt"&&(i="Alt"),i==="Shift"&&(i="Shift"),e(a=>{const o=i.toUpperCase();if(a.has(o))return a;const l=new Set(a);return l.add(o),l})},n=s=>{let i=s.key;i==="Control"&&(i="Ctrl"),i==="Alt"&&(i="Alt"),i==="Shift"&&(i="Shift"),e(a=>{const o=new Set(a);return o.delete(i.toUpperCase()),o})},r=()=>{e(new Set)};return window.addEventListener("keydown",A),window.addEventListener("keyup",n),window.addEventListener("blur",r),()=>{window.removeEventListener("keydown",A),window.removeEventListener("keyup",n),window.removeEventListener("blur",r)}},[]),t},GL=({bookmarks:t,onNavigate:e,onRename:A,onDelete:n,onCopyUrl:r})=>{const[o,l]=x.useState({x:window.innerWidth-270,y:250}),[u,d]=x.useState(!1),[f,B]=x.useState(!1),[h,y]=x.useState({x:0,y:0}),[C,p]=x.useState(null),[g,v]=x.useState(""),E=x.useRef(!1),S=x.useRef({x:0,y:0}),[U,b]=x.useState({width:window.innerWidth,height:window.innerHeight});x.useEffect(()=>{const Z=()=>{const V=window.innerWidth,W=window.innerHeight;b({width:V,height:W}),l(u?z=>({x:V-44-20,y:Math.max(20,Math.min(W-44-20,z.y))}):z=>({x:V-250-20,y:Math.max(20,Math.min(W-300-20,z.y))}))};return window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)},[u]);const L=Z=>{Z.button===0&&Z.target.closest(".drag-handle")&&(B(!0),E.current=!1,S.current={x:Z.clientX,y:Z.clientY},y({x:Z.clientX-o.x,y:Z.clientY-o.y}))};x.useEffect(()=>{if(!f)return;const Z=W=>{const z=Math.abs(W.clientX-S.current.x),Ae=Math.abs(W.clientY-S.current.y);(z>5||Ae>5)&&(E.current=!0);const j=W.clientY-h.y;if(u){const te=U.width-44-20,re=Math.max(20,Math.min(U.height-44-20,j));l({x:te,y:re})}else{const te=U.width-250-20,re=Math.max(20,Math.min(U.height-300-20,j));l({x:te,y:re})}},V=()=>{setTimeout(()=>{B(!1),E.current=!1},0)};return window.addEventListener("mousemove",Z),window.addEventListener("mouseup",V),()=>{window.removeEventListener("mousemove",Z),window.removeEventListener("mouseup",V)}},[f,h,u,U]);const N=(Z,V)=>{V.stopPropagation(),p(Z.id),v(Z.name)},I=()=>{C&&g.trim()&&A(C,g.trim()),p(null)},q=Z=>{Z.key==="Enter"&&I(),Z.key==="Escape"&&p(null)},O=o.x>=0&&o.y>=0&&o.x+250<=U.width&&o.y+300<=U.height,H=u||!O,G={x:Math.min(U.width-44-12,o.x+250-44),y:Math.min(U.height-44-12,o.y)};return H?c.jsxs("button",{onMouseDown:L,onClick:Z=>{E.current||(d(!1),l(V=>{let W=V.x,z=V.y;return W+250>U.width&&(W=Math.max(12,U.width-250-12)),W<0&&(W=12),z+300>U.height&&(z=Math.max(12,U.height-300-12)),z<0&&(z=12),{x:W,y:z}}))},className:"drag-handle fixed z-[50] flex items-center justify-center bg-black/40 backdrop-blur-xl border border-white/10 ring-1 ring-white/5 rounded-xl shadow-2xl hover:shadow-lg hover:bg-white/10 text-gray-300 hover:text-white transition-all duration-300 -rotate-90 hover:rotate-0 active:scale-95 group cursor-grab active:cursor-grabbing",style:{left:G.x,top:G.y,width:44,height:44},children:[c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),c.jsx("span",{className:"absolute right-full mr-4 px-2 py-1 bg-gray-900 border border-gray-700 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Bookmarks"})]}):c.jsx("div",{className:"fixed z-[50] transition-opacity duration-300 flex flex-col",style:{left:o.x,top:o.y,width:250,maxHeight:300},onMouseDown:L,children:c.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-xl border-2 border-white/20 rounded-xl overflow-hidden shadow-2xl flex flex-col h-full",children:[c.jsxs("div",{className:"drag-handle px-3 py-2 bg-white/10 border-b border-white/10 flex items-center justify-between cursor-grab active:cursor-grabbing",children:[c.jsxs("div",{className:"flex items-center gap-2 text-white font-medium text-sm",children:[c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("span",{children:"Coordinates"})]}),c.jsx("button",{onMouseDown:Z=>Z.stopPropagation(),onClick:()=>d(!0),className:"text-gray-400 hover:text-white transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:[t.length===0&&c.jsxs("div",{className:"text-gray-500 text-xs text-center py-4",children:["Right-click canvas or items",c.jsx("br",{}),"to save coordinates"]}),t.map(Z=>c.jsxs("div",{className:"group flex items-center gap-2 p-2 rounded-lg hover:bg-white/10 transition-colors cursor-pointer group",onClick:()=>e(Z),children:[c.jsx("div",{className:"shrink-0 text-blue-400",children:Z.targetId?c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}):c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),C===Z.id?c.jsx("input",{type:"text",value:g,onChange:V=>v(V.target.value),onBlur:I,onKeyDown:q,autoFocus:!0,className:"flex-1 bg-black/50 border border-blue-500 rounded px-1 text-sm text-white focus:outline-none",onClick:V=>V.stopPropagation()}):c.jsx("span",{className:"flex-1 text-sm text-gray-200 truncate select-none",children:Z.name}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:V=>N(Z,V),className:"p-1 hover:bg-blue-500/20 rounded text-gray-400 hover:text-blue-400",title:"Rename",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),c.jsx("button",{onClick:V=>{V.stopPropagation(),r&&r(Z)},className:"p-1 hover:bg-green-500/20 rounded text-gray-400 hover:text-green-400",title:"Copy Link",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),c.jsx("button",{onClick:V=>{V.stopPropagation(),n(Z.id)},className:"p-1 hover:bg-red-500/20 rounded text-gray-400 hover:text-red-400",title:"Delete",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},Z.id))]})]})})},VL=({bounds:t,scale:e,onScaleStart:A,onScale:n,onScaleEnd:r})=>{const[s,i]=x.useState(!1),[a,o]=x.useState(null),[l,u]=x.useState(null),d=x.useRef(null),f=12/e,B=[{id:"tl",x:t.x,y:t.y,cursor:"nwse-resize"},{id:"tr",x:t.x+t.width,y:t.y,cursor:"nesw-resize"},{id:"bl",x:t.x,y:t.y+t.height,cursor:"nesw-resize"},{id:"br",x:t.x+t.width,y:t.y+t.height,cursor:"nwse-resize"}],h=(y,C)=>{y.stopPropagation(),y.preventDefault(),i(!0),o(C),d.current={startX:y.clientX,startY:y.clientY,startWidth:t.width,startHeight:t.height},A()};return x.useEffect(()=>{if(!s)return;const y=p=>{if(s&&d.current&&a){const g=p.clientX-d.current.startX;let v=1+g/13e3;(a==="bl"||a==="tl")&&(v=1-g/13e3),v=Math.max(.1,v),n(v,a)}},C=()=>{s&&(i(!1),o(null),d.current=null,r())};return document.addEventListener("mousemove",y),document.addEventListener("mouseup",C),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",C)}},[s,a,t,n,r]),c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{position:"absolute",left:`${t.x}px`,top:`${t.y}px`,width:`${t.width}px`,height:`${t.height}px`,border:`${2/e}px dashed #3b82f6`,pointerEvents:"none",zIndex:9999}}),B.map(y=>c.jsx("div",{onMouseDown:C=>h(C,y.id),onMouseEnter:()=>u(y.id),onMouseLeave:()=>u(null),style:{position:"absolute",left:`${y.x-f/2}px`,top:`${y.y-f/2}px`,width:`${f}px`,height:`${f}px`,backgroundColor:l===y.id||a===y.id?"#3b82f6":"#ffffff",border:`${2/e}px solid #3b82f6`,cursor:y.cursor,zIndex:1e4}},y.id))]})};async function $L(t,e,A){const n=new Set;t.forEach(r=>{r.driveFileId&&n.add(r.driveFileId),r.generatedHistory&&Array.isArray(r.generatedHistory)&&r.generatedHistory.forEach(s=>{s.driveFileId&&n.add(s.driveFileId)})});try{const r=await vi(e,A),i=(await bm(r)).filter(o=>!n.has(o.id)).map(o=>({id:o.id,name:o.name,isAI:o.name.startsWith("generation_node_"),size:o.size})),a=i.filter(o=>o.isAI).length;return{orphans:i,totalCount:i.length,aiCount:a,regularCount:i.length-a}}catch(r){throw console.error("Failed to find orphan files:",r),r}}async function XL(t){let e=0,A=0;return(await Promise.allSettled(t.map(r=>Pu(r)))).forEach(r=>{r.status==="fulfilled"?e++:(A++,console.error("Failed to delete file:",r.reason))}),{success:e,failed:A}}const H1="customGoogleFonts";async function op(t){const e=t.match(/'([^']+)'/),A=e?e[1]:t;if(document.querySelector(`link[href*="${A.replace(/\s/g,"+")}"]`))return!0;const r=document.createElement("link");return r.rel="stylesheet",r.href=`https://fonts.googleapis.com/css2?family=${A.replace(/\s/g,"+")}:wght@300;400;500;600;700&display=swap`,new Promise((s,i)=>{const a=setTimeout(()=>{i(new Error(`Timeout loading font: ${A}`))},5e3);r.onload=async()=>{clearTimeout(a);try{await new Promise(l=>setTimeout(l,100));const o=await document.fonts.load(`16px "${A}"`);if(o&&o.length>0)console.log(`Successfully loaded Google Font: ${A}`),s(!0);else throw new Error("Font not found in Google Fonts")}catch{document.head.removeChild(r),i(new Error(`Font "${A}" not found in Google Fonts`))}},r.onerror=()=>{clearTimeout(a),i(new Error(`Failed to load font CSS: ${A}`))},document.head.appendChild(r)})}function YL(t){const e=new Set;return t.forEach(A=>{A.type==="text"&&A.fontFamily&&e.add(A.fontFamily)}),Array.from(e)}function R1(){try{const t=localStorage.getItem(H1);return t?JSON.parse(t).fonts||[]:[]}catch(t){return console.error("Failed to load custom fonts from localStorage:",t),[]}}function JL(t){const e=R1(),A=e.find(r=>r.name===t);if(A)return A;const n={name:t,value:`'${t}', sans-serif`};e.push(n);try{localStorage.setItem(H1,JSON.stringify({fonts:e})),console.log(`Added custom font: ${t}`)}catch(r){console.error("Failed to save custom font:",r)}return n}async function qL(t){const e=YL(t);await Promise.allSettled(e.map(async A=>{try{await op(A)}catch(n){console.warn(`Failed to load font ${A}:`,n)}}))}let xc=[],ph=null;async function ZL(){try{const e=await(await fetch("https://www.googleapis.com/webfonts/v1/webfonts?sort=popularity")).json();return e.items&&Array.isArray(e.items)?e.items.map(A=>A.family):RB()}catch(t){return console.error("Failed to fetch Google Fonts:",t),RB()}}async function eH(){return xc.length>0||(ph||(ph=ZL()),xc=await ph),xc}async function tH(t){if(!t.trim())return[];const e=await eH(),A=t.toLowerCase();return e.filter(n=>n.toLowerCase().includes(A)).slice(0,20)}function RB(){return["Roboto","Open Sans","Lato","Montserrat","Oswald","Source Sans Pro","Slabo 27px","Raleway","PT Sans","Merriweather","Ubuntu","Playfair Display","Poppins","Nunito","Mukta","Rubik","Work Sans","Fira Sans","Quicksand","Titillium Web","Noto Sans KR","Noto Serif KR","Black Han Sans","Jua","Do Hyeon","Gamja Flower","Nanum Gothic","Nanum Myeongjo","Sunflower","Gowun Dodum","Gowun Batang","BBH Bartle"]}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ap=function(t,e){return ap=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,n){A.__proto__=n}||function(A,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(A[r]=n[r])},ap(t,e)};function tr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ap(t,e);function A(){this.constructor=t}t.prototype=e===null?Object.create(e):(A.prototype=e.prototype,new A)}var lp=function(){return lp=Object.assign||function(e){for(var A,n=1,r=arguments.length;n<r;n++){A=arguments[n];for(var s in A)Object.prototype.hasOwnProperty.call(A,s)&&(e[s]=A[s])}return e},lp.apply(this,arguments)};function bA(t,e,A,n){function r(s){return s instanceof A?s:new A(function(i){i(s)})}return new(A||(A=Promise))(function(s,i){function a(u){try{l(n.next(u))}catch(d){i(d)}}function o(u){try{l(n.throw(u))}catch(d){i(d)}}function l(u){u.done?s(u.value):r(u.value).then(a,o)}l((n=n.apply(t,[])).next())})}function BA(t,e){var A={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,r,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(u){return o([l,u])}}function o(l){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(s=l[0]&2?r.return:l[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,l[1])).done)return s;switch(r=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return A.label++,{value:l[1],done:!1};case 5:A.label++,r=l[1],l=[0];continue;case 7:l=A.ops.pop(),A.trys.pop();continue;default:if(s=A.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){A=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){A.label=l[1];break}if(l[0]===6&&A.label<s[1]){A.label=s[1],s=l;break}if(s&&A.label<s[2]){A.label=s[2],A.ops.push(l);break}s[2]&&A.ops.pop(),A.trys.pop();continue}l=e.call(t,A)}catch(u){l=[6,u],r=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ec(t,e,A){if(arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var jr=function(){function t(e,A,n,r){this.left=e,this.top=A,this.width=n,this.height=r}return t.prototype.add=function(e,A,n,r){return new t(this.left+e,this.top+A,this.width+n,this.height+r)},t.fromClientRect=function(e,A){return new t(A.left+e.windowBounds.left,A.top+e.windowBounds.top,A.width,A.height)},t.fromDOMRectList=function(e,A){var n=Array.from(A).find(function(r){return r.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),sf=function(t,e){return jr.fromClientRect(t,e.getBoundingClientRect())},AH=function(t){var e=t.body,A=t.documentElement;if(!e||!A)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,A.scrollWidth),Math.max(e.offsetWidth,A.offsetWidth),Math.max(e.clientWidth,A.clientWidth)),r=Math.max(Math.max(e.scrollHeight,A.scrollHeight),Math.max(e.offsetHeight,A.offsetHeight),Math.max(e.clientHeight,A.clientHeight));return new jr(0,0,n,r)},of=function(t){for(var e=[],A=0,n=t.length;A<n;){var r=t.charCodeAt(A++);if(r>=55296&&r<=56319&&A<n){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),A--)}else e.push(r)}return e},kt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var n=[],r=-1,s="";++r<A;){var i=t[r];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(r+1===A||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},PB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Fc=0;Fc<PB.length;Fc++)nH[PB.charCodeAt(Fc)]=Fc;var MB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ea=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _c=0;_c<MB.length;_c++)Ea[MB.charCodeAt(_c)]=_c;var rH=function(t){var e=t.length*.75,A=t.length,n,r=0,s,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<A;n+=4)s=Ea[t.charCodeAt(n)],i=Ea[t.charCodeAt(n+1)],a=Ea[t.charCodeAt(n+2)],o=Ea[t.charCodeAt(n+3)],u[r++]=s<<2|i>>4,u[r++]=(i&15)<<4|a>>2,u[r++]=(a&3)<<6|o&63;return l},sH=function(t){for(var e=t.length,A=[],n=0;n<e;n+=2)A.push(t[n+1]<<8|t[n]);return A},iH=function(t){for(var e=t.length,A=[],n=0;n<e;n+=4)A.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return A},si=5,kw=11,mh=2,oH=kw-si,P1=65536>>si,aH=1<<si,wh=aH-1,lH=1024>>si,cH=P1+lH,uH=cH,dH=32,fH=uH+dH,hH=65536>>kw,gH=1<<oH,pH=gH-1,OB=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},mH=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},wH=function(t,e){var A=rH(t),n=Array.isArray(A)?iH(A):new Uint32Array(A),r=Array.isArray(A)?sH(A):new Uint16Array(A),s=24,i=OB(r,s/2,n[4]/2),a=n[5]===2?OB(r,(s+n[4])/2):mH(n,Math.ceil((s+n[4])/4));return new yH(n[0],n[1],n[2],n[3],i,a)},yH=function(){function t(e,A,n,r,s,i){this.initialValue=e,this.errorValue=A,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=i}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>si],A=(A<<mh)+(e&wh),this.data[A];if(e<=65535)return A=this.index[P1+(e-55296>>si)],A=(A<<mh)+(e&wh),this.data[A];if(e<this.highStart)return A=fH-hH+(e>>kw),A=this.index[A],A+=e>>si&pH,A=this.index[A],A=(A<<mh)+(e&wh),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),KB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var bc=0;bc<KB.length;bc++)BH[KB.charCodeAt(bc)]=bc;var vH="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",jB=50,CH=1,M1=2,O1=3,xH=4,EH=5,WB=7,K1=8,zB=9,fs=10,cp=11,GB=12,up=13,FH=14,Fa=15,dp=16,Ic=17,ha=18,_H=19,VB=20,fp=21,ga=22,yh=23,ki=24,on=25,_a=26,ba=27,Di=28,bH=29,Xs=30,IH=31,Qc=32,Uc=33,hp=34,gp=35,pp=36,_l=37,mp=38,cu=39,uu=40,Bh=41,j1=42,QH=43,UH=[9001,65288],W1="!",$e="",Sc="",wp=wH(vH),xr=[Xs,pp],yp=[CH,M1,O1,EH],z1=[fs,K1],$B=[ba,_a],SH=yp.concat(z1),XB=[mp,cu,uu,hp,gp],TH=[Fa,up],NH=function(t,e){e===void 0&&(e="strict");var A=[],n=[],r=[];return t.forEach(function(s,i){var a=wp.get(s);if(a>jB?(r.push(!0),a-=jB):r.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),A.push(dp);if(a===xH||a===cp){if(i===0)return n.push(i),A.push(Xs);var o=A[i-1];return SH.indexOf(o)===-1?(n.push(n[i-1]),A.push(o)):(n.push(i),A.push(Xs))}if(n.push(i),a===IH)return A.push(e==="strict"?fp:_l);if(a===j1||a===bH)return A.push(Xs);if(a===QH)return s>=131072&&s<=196605||s>=196608&&s<=262141?A.push(_l):A.push(Xs);A.push(a)}),[n,A,r]},vh=function(t,e,A,n){var r=n[A];if(Array.isArray(t)?t.indexOf(r)!==-1:t===r)for(var s=A;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==fs)break}if(r===fs)for(var s=A;s>0;){s--;var a=n[s];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var o=A;o<=n.length;){o++;var i=n[o];if(i===e)return!0;if(i!==fs)break}if(a!==fs)break}return!1},YB=function(t,e){for(var A=t;A>=0;){var n=e[A];if(n===fs)A--;else return n}return 0},kH=function(t,e,A,n,r){if(A[n]===0)return $e;var s=n-1;if(Array.isArray(r)&&r[s]===!0)return $e;var i=s-1,a=s+1,o=e[s],l=i>=0?e[i]:0,u=e[a];if(o===M1&&u===O1)return $e;if(yp.indexOf(o)!==-1)return W1;if(yp.indexOf(u)!==-1||z1.indexOf(u)!==-1)return $e;if(YB(s,e)===K1)return Sc;if(wp.get(t[s])===cp||(o===Qc||o===Uc)&&wp.get(t[a])===cp||o===WB||u===WB||o===zB||[fs,up,Fa].indexOf(o)===-1&&u===zB||[Ic,ha,_H,ki,Di].indexOf(u)!==-1||YB(s,e)===ga||vh(yh,ga,s,e)||vh([Ic,ha],fp,s,e)||vh(GB,GB,s,e))return $e;if(o===fs)return Sc;if(o===yh||u===yh)return $e;if(u===dp||o===dp)return Sc;if([up,Fa,fp].indexOf(u)!==-1||o===FH||l===pp&&TH.indexOf(o)!==-1||o===Di&&u===pp||u===VB||xr.indexOf(u)!==-1&&o===on||xr.indexOf(o)!==-1&&u===on||o===ba&&[_l,Qc,Uc].indexOf(u)!==-1||[_l,Qc,Uc].indexOf(o)!==-1&&u===_a||xr.indexOf(o)!==-1&&$B.indexOf(u)!==-1||$B.indexOf(o)!==-1&&xr.indexOf(u)!==-1||[ba,_a].indexOf(o)!==-1&&(u===on||[ga,Fa].indexOf(u)!==-1&&e[a+1]===on)||[ga,Fa].indexOf(o)!==-1&&u===on||o===on&&[on,Di,ki].indexOf(u)!==-1)return $e;if([on,Di,ki,Ic,ha].indexOf(u)!==-1)for(var d=s;d>=0;){var f=e[d];if(f===on)return $e;if([Di,ki].indexOf(f)!==-1)d--;else break}if([ba,_a].indexOf(u)!==-1)for(var d=[Ic,ha].indexOf(o)!==-1?i:s;d>=0;){var f=e[d];if(f===on)return $e;if([Di,ki].indexOf(f)!==-1)d--;else break}if(mp===o&&[mp,cu,hp,gp].indexOf(u)!==-1||[cu,hp].indexOf(o)!==-1&&[cu,uu].indexOf(u)!==-1||[uu,gp].indexOf(o)!==-1&&u===uu||XB.indexOf(o)!==-1&&[VB,_a].indexOf(u)!==-1||XB.indexOf(u)!==-1&&o===ba||xr.indexOf(o)!==-1&&xr.indexOf(u)!==-1||o===ki&&xr.indexOf(u)!==-1||xr.concat(on).indexOf(o)!==-1&&u===ga&&UH.indexOf(t[a])===-1||xr.concat(on).indexOf(u)!==-1&&o===ha)return $e;if(o===Bh&&u===Bh){for(var B=A[s],h=1;B>0&&(B--,e[B]===Bh);)h++;if(h%2!==0)return $e}return o===Qc&&u===Uc?$e:Sc},DH=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var A=NH(t,e.lineBreak),n=A[0],r=A[1],s=A[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(r=r.map(function(a){return[on,Xs,j1].indexOf(a)!==-1?_l:a}));var i=e.wordBreak==="keep-all"?s.map(function(a,o){return a&&t[o]>=19968&&t[o]<=40959}):void 0;return[n,r,i]},LH=function(){function t(e,A,n,r){this.codePoints=e,this.required=A===W1,this.start=n,this.end=r}return t.prototype.slice=function(){return kt.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),HH=function(t,e){var A=of(t),n=DH(A,e),r=n[0],s=n[1],i=n[2],a=A.length,o=0,l=0;return{next:function(){if(l>=a)return{done:!0,value:null};for(var u=$e;l<a&&(u=kH(A,s,r,++l,i))===$e;);if(u!==$e||l===a){var d=new LH(A,u,o,l);return o=l,{value:d,done:!1}}return{done:!0,value:null}}}},RH=1,PH=2,Wl=4,JB=8,ud=10,qB=47,Va=92,MH=9,OH=32,Tc=34,pa=61,KH=35,jH=36,WH=37,Nc=39,kc=40,ma=41,zH=95,jA=45,GH=33,VH=60,$H=62,XH=64,YH=91,JH=93,qH=61,ZH=123,Dc=63,eR=125,ZB=124,tR=126,AR=128,ev=65533,Ch=42,ti=43,nR=44,rR=58,sR=59,bl=46,iR=0,oR=8,aR=11,lR=14,cR=31,uR=127,rr=-1,G1=48,V1=97,$1=101,dR=102,fR=117,hR=122,X1=65,Y1=69,J1=70,gR=85,pR=90,vA=function(t){return t>=G1&&t<=57},mR=function(t){return t>=55296&&t<=57343},Li=function(t){return vA(t)||t>=X1&&t<=J1||t>=V1&&t<=dR},wR=function(t){return t>=V1&&t<=hR},yR=function(t){return t>=X1&&t<=pR},BR=function(t){return wR(t)||yR(t)},vR=function(t){return t>=AR},Lc=function(t){return t===ud||t===MH||t===OH},dd=function(t){return BR(t)||vR(t)||t===zH},tv=function(t){return dd(t)||vA(t)||t===jA},CR=function(t){return t>=iR&&t<=oR||t===aR||t>=lR&&t<=cR||t===uR},rs=function(t,e){return t!==Va?!1:e!==ud},Hc=function(t,e,A){return t===jA?dd(e)||rs(e,A):dd(t)?!0:!!(t===Va&&rs(t,e))},xh=function(t,e,A){return t===ti||t===jA?vA(e)?!0:e===bl&&vA(A):vA(t===bl?e:t)},xR=function(t){var e=0,A=1;(t[e]===ti||t[e]===jA)&&(t[e]===jA&&(A=-1),e++);for(var n=[];vA(t[e]);)n.push(t[e++]);var r=n.length?parseInt(kt.apply(void 0,n),10):0;t[e]===bl&&e++;for(var s=[];vA(t[e]);)s.push(t[e++]);var i=s.length,a=i?parseInt(kt.apply(void 0,s),10):0;(t[e]===Y1||t[e]===$1)&&e++;var o=1;(t[e]===ti||t[e]===jA)&&(t[e]===jA&&(o=-1),e++);for(var l=[];vA(t[e]);)l.push(t[e++]);var u=l.length?parseInt(kt.apply(void 0,l),10):0;return A*(r+a*Math.pow(10,-i))*Math.pow(10,o*u)},ER={type:2},FR={type:3},_R={type:4},bR={type:13},IR={type:8},QR={type:21},UR={type:9},SR={type:10},TR={type:11},NR={type:12},kR={type:14},Rc={type:23},DR={type:1},LR={type:25},HR={type:24},RR={type:26},PR={type:27},MR={type:28},OR={type:29},KR={type:31},Bp={type:32},q1=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(of(e))},t.prototype.read=function(){for(var e=[],A=this.consumeToken();A!==Bp;)e.push(A),A=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Tc:return this.consumeStringToken(Tc);case KH:var A=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(tv(A)||rs(n,r)){var s=Hc(A,n,r)?PH:RH,i=this.consumeName();return{type:5,value:i,flags:s}}break;case jH:if(this.peekCodePoint(0)===pa)return this.consumeCodePoint(),bR;break;case Nc:return this.consumeStringToken(Nc);case kc:return ER;case ma:return FR;case Ch:if(this.peekCodePoint(0)===pa)return this.consumeCodePoint(),kR;break;case ti:if(xh(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case nR:return _R;case jA:var a=e,o=this.peekCodePoint(0),l=this.peekCodePoint(1);if(xh(a,o,l))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Hc(a,o,l))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===jA&&l===$H)return this.consumeCodePoint(),this.consumeCodePoint(),HR;break;case bl:if(xh(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case qB:if(this.peekCodePoint(0)===Ch)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===Ch&&(u=this.consumeCodePoint(),u===qB))return this.consumeToken();if(u===rr)return this.consumeToken()}break;case rR:return RR;case sR:return PR;case VH:if(this.peekCodePoint(0)===GH&&this.peekCodePoint(1)===jA&&this.peekCodePoint(2)===jA)return this.consumeCodePoint(),this.consumeCodePoint(),LR;break;case XH:var d=this.peekCodePoint(0),f=this.peekCodePoint(1),B=this.peekCodePoint(2);if(Hc(d,f,B)){var i=this.consumeName();return{type:7,value:i}}break;case YH:return MR;case Va:if(rs(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case JH:return OR;case qH:if(this.peekCodePoint(0)===pa)return this.consumeCodePoint(),IR;break;case ZH:return TR;case eR:return NR;case fR:case gR:var h=this.peekCodePoint(0),y=this.peekCodePoint(1);return h===ti&&(Li(y)||y===Dc)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case ZB:if(this.peekCodePoint(0)===pa)return this.consumeCodePoint(),UR;if(this.peekCodePoint(0)===ZB)return this.consumeCodePoint(),QR;break;case tR:if(this.peekCodePoint(0)===pa)return this.consumeCodePoint(),SR;break;case rr:return Bp}return Lc(e)?(this.consumeWhiteSpace(),KR):vA(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):dd(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:kt(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],A=this.consumeCodePoint();Li(A)&&e.length<6;)e.push(A),A=this.consumeCodePoint();for(var n=!1;A===Dc&&e.length<6;)e.push(A),A=this.consumeCodePoint(),n=!0;if(n){var r=parseInt(kt.apply(void 0,e.map(function(o){return o===Dc?G1:o})),16),s=parseInt(kt.apply(void 0,e.map(function(o){return o===Dc?J1:o})),16);return{type:30,start:r,end:s}}var i=parseInt(kt.apply(void 0,e),16);if(this.peekCodePoint(0)===jA&&Li(this.peekCodePoint(1))){this.consumeCodePoint(),A=this.consumeCodePoint();for(var a=[];Li(A)&&a.length<6;)a.push(A),A=this.consumeCodePoint();var s=parseInt(kt.apply(void 0,a),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===kc?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===kc?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===rr)return{type:22,value:""};var A=this.peekCodePoint(0);if(A===Nc||A===Tc){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===rr||this.peekCodePoint(0)===ma)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Rc)}for(;;){var r=this.consumeCodePoint();if(r===rr||r===ma)return{type:22,value:kt.apply(void 0,e)};if(Lc(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===rr||this.peekCodePoint(0)===ma?(this.consumeCodePoint(),{type:22,value:kt.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Rc);if(r===Tc||r===Nc||r===kc||CR(r))return this.consumeBadUrlRemnants(),Rc;if(r===Va)if(rs(r,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Rc;else e.push(r)}},t.prototype.consumeWhiteSpace=function(){for(;Lc(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ma||e===rr)return;rs(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var A=5e4,n="";e>0;){var r=Math.min(A,e);n+=kt.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var A="",n=0;do{var r=this._value[n];if(r===rr||r===void 0||r===e)return A+=this.consumeStringSlice(n),{type:0,value:A};if(r===ud)return this._value.splice(0,n),DR;if(r===Va){var s=this._value[n+1];s!==rr&&s!==void 0&&(s===ud?(A+=this.consumeStringSlice(n),n=-1,this._value.shift()):rs(r,s)&&(A+=this.consumeStringSlice(n),A+=kt(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],A=Wl,n=this.peekCodePoint(0);for((n===ti||n===jA)&&e.push(this.consumeCodePoint());vA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===bl&&vA(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=JB;vA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Y1||n===$1)&&((r===ti||r===jA)&&vA(s)||vA(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=JB;vA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[xR(e),A]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),A=e[0],n=e[1],r=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Hc(r,s,i)){var a=this.consumeName();return{type:15,number:A,flags:n,unit:a}}return r===WH?(this.consumeCodePoint(),{type:16,number:A,flags:n}):{type:17,number:A,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Li(e)){for(var A=kt(e);Li(this.peekCodePoint(0))&&A.length<6;)A+=kt(this.consumeCodePoint());Lc(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(A,16);return n===0||mR(n)||n>1114111?ev:n}return e===rr?ev:e},t.prototype.consumeName=function(){for(var e="";;){var A=this.consumeCodePoint();if(tv(A))e+=kt(A);else if(rs(A,this.peekCodePoint(0)))e+=kt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(A),e}},t}(),Z1=function(){function t(e){this._tokens=e}return t.create=function(e){var A=new q1;return A.write(e),new t(A.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var A=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return A;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var A=this.consumeComponentValue();if(A.type===32)return e;e.push(A),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var A={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||WR(n,e))return A;this.reconsumeToken(n),A.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var A={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return A;this.reconsumeToken(n),A.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Bp:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),zl=function(t){return t.type===15},Wo=function(t){return t.type===17},at=function(t){return t.type===20},jR=function(t){return t.type===0},vp=function(t,e){return at(t)&&t.value===e},e_=function(t){return t.type!==31},To=function(t){return t.type!==31&&t.type!==4},mr=function(t){var e=[],A=[];return t.forEach(function(n){if(n.type===4){if(A.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(A),A=[];return}n.type!==31&&A.push(n)}),A.length&&e.push(A),e},WR=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Ds=function(t){return t.type===17||t.type===15},Pt=function(t){return t.type===16||Ds(t)},t_=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},lA={type:17,number:0,flags:Wl},Dw={type:16,number:50,flags:Wl},hs={type:16,number:100,flags:Wl},Ia=function(t,e,A){var n=t[0],r=t[1];return[ft(n,e),ft(typeof r<"u"?r:n,A)]},ft=function(t,e){if(t.type===16)return t.number/100*e;if(zl(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},A_="deg",n_="grad",r_="rad",s_="turn",af={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case A_:return Math.PI*e.number/180;case n_:return Math.PI/200*e.number;case r_:return e.number;case s_:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},i_=function(t){return t.type===15&&(t.unit===A_||t.unit===n_||t.unit===r_||t.unit===s_)},o_=function(t){var e=t.filter(at).map(function(A){return A.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[lA,lA];case"to top":case"bottom":return _n(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[lA,hs];case"to right":case"left":return _n(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[hs,hs];case"to bottom":case"top":return _n(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[hs,lA];case"to left":case"right":return _n(270)}return 0},_n=function(t){return Math.PI*t/180},Is={name:"color",parse:function(t,e){if(e.type===18){var A=zR[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return A(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),r=e.value.substring(1,2),s=e.value.substring(2,3);return gs(parseInt(n+n,16),parseInt(r+r,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),r=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return gs(parseInt(n+n,16),parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),r=e.value.substring(2,4),s=e.value.substring(4,6);return gs(parseInt(n,16),parseInt(r,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),r=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return gs(parseInt(n,16),parseInt(r,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var a=Dr[e.value.toUpperCase()];if(typeof a<"u")return a}return Dr.TRANSPARENT}},Qs=function(t){return(255&t)===0},Yt=function(t){var e=255&t,A=255&t>>8,n=255&t>>16,r=255&t>>24;return e<255?"rgba("+r+","+n+","+A+","+e/255+")":"rgb("+r+","+n+","+A+")"},gs=function(t,e,A,n){return(t<<24|e<<16|A<<8|Math.round(n*255)<<0)>>>0},Av=function(t,e){if(t.type===17)return t.number;if(t.type===16){var A=e===3?1:255;return e===3?t.number/100*A:Math.round(t.number/100*A)}return 0},nv=function(t,e){var A=e.filter(To);if(A.length===3){var n=A.map(Av),r=n[0],s=n[1],i=n[2];return gs(r,s,i,1)}if(A.length===4){var a=A.map(Av),r=a[0],s=a[1],i=a[2],o=a[3];return gs(r,s,i,o)}return 0};function Eh(t,e,A){return A<0&&(A+=1),A>=1&&(A-=1),A<1/6?(e-t)*A*6+t:A<1/2?e:A<2/3?(e-t)*6*(2/3-A)+t:t}var rv=function(t,e){var A=e.filter(To),n=A[0],r=A[1],s=A[2],i=A[3],a=(n.type===17?_n(n.number):af.parse(t,n))/(Math.PI*2),o=Pt(r)?r.number/100:0,l=Pt(s)?s.number/100:0,u=typeof i<"u"&&Pt(i)?ft(i,1):1;if(o===0)return gs(l*255,l*255,l*255,1);var d=l<=.5?l*(o+1):l+o-l*o,f=l*2-d,B=Eh(f,d,a+1/3),h=Eh(f,d,a),y=Eh(f,d,a-1/3);return gs(B*255,h*255,y*255,u)},zR={hsl:rv,hsla:rv,rgb:nv,rgba:nv},$a=function(t,e){return Is.parse(t,Z1.create(e).parseComponentValue())},Dr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},GR={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(at(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},VR={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},lf=function(t,e){var A=Is.parse(t,e[0]),n=e[1];return n&&Pt(n)?{color:A,stop:n}:{color:A,stop:null}},sv=function(t,e){var A=t[0],n=t[t.length-1];A.stop===null&&(A.stop=lA),n.stop===null&&(n.stop=hs);for(var r=[],s=0,i=0;i<t.length;i++){var a=t[i].stop;if(a!==null){var o=ft(a,e);o>s?r.push(o):r.push(s),s=o}else r.push(null)}for(var l=null,i=0;i<r.length;i++){var u=r[i];if(u===null)l===null&&(l=i);else if(l!==null){for(var d=i-l,f=r[l-1],B=(u-f)/(d+1),h=1;h<=d;h++)r[l+h-1]=B*h;l=null}}return t.map(function(y,C){var p=y.color;return{color:p,stop:Math.max(Math.min(1,r[C]/e),0)}})},$R=function(t,e,A){var n=e/2,r=A/2,s=ft(t[0],e)-n,i=r-ft(t[1],A);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},XR=function(t,e,A){var n=typeof t=="number"?t:$R(t,e,A),r=Math.abs(e*Math.sin(n))+Math.abs(A*Math.cos(n)),s=e/2,i=A/2,a=r/2,o=Math.sin(n-Math.PI/2)*a,l=Math.cos(n-Math.PI/2)*a;return[r,s-l,s+l,i-o,i+o]},Pn=function(t,e){return Math.sqrt(t*t+e*e)},iv=function(t,e,A,n,r){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,a){var o=a[0],l=a[1],u=Pn(A-o,n-l);return(r?u<i.optimumDistance:u>i.optimumDistance)?{optimumCorner:a,optimumDistance:u}:i},{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},YR=function(t,e,A,n,r){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(A),Math.abs(A-r)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(A),Math.abs(A-r)));break;case 2:if(t.shape===0)s=i=Math.min(Pn(e,A),Pn(e,A-r),Pn(e-n,A),Pn(e-n,A-r));else if(t.shape===1){var a=Math.min(Math.abs(A),Math.abs(A-r))/Math.min(Math.abs(e),Math.abs(e-n)),o=iv(n,r,e,A,!0),l=o[0],u=o[1];s=Pn(l-e,(u-A)/a),i=a*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(A),Math.abs(A-r)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(A),Math.abs(A-r)));break;case 3:if(t.shape===0)s=i=Math.max(Pn(e,A),Pn(e,A-r),Pn(e-n,A),Pn(e-n,A-r));else if(t.shape===1){var a=Math.max(Math.abs(A),Math.abs(A-r))/Math.max(Math.abs(e),Math.abs(e-n)),d=iv(n,r,e,A,!1),l=d[0],u=d[1];s=Pn(l-e,(u-A)/a),i=a*s}break}return Array.isArray(t.size)&&(s=ft(t.size[0],n),i=t.size.length===2?ft(t.size[1],r):s),[s,i]},JR=function(t,e){var A=_n(180),n=[];return mr(e).forEach(function(r,s){if(s===0){var i=r[0];if(i.type===20&&i.value==="to"){A=o_(r);return}else if(i_(i)){A=af.parse(t,i);return}}var a=lf(t,r);n.push(a)}),{angle:A,stops:n,type:1}},Pc=function(t,e){var A=_n(180),n=[];return mr(e).forEach(function(r,s){if(s===0){var i=r[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){A=o_(r);return}else if(i_(i)){A=(af.parse(t,i)+_n(270))%_n(360);return}}var a=lf(t,r);n.push(a)}),{angle:A,stops:n,type:1}},qR=function(t,e){var A=_n(180),n=[],r=1,s=0,i=3,a=[];return mr(e).forEach(function(o,l){var u=o[0];if(l===0){if(at(u)&&u.value==="linear"){r=1;return}else if(at(u)&&u.value==="radial"){r=2;return}}if(u.type===18){if(u.name==="from"){var d=Is.parse(t,u.values[0]);n.push({stop:lA,color:d})}else if(u.name==="to"){var d=Is.parse(t,u.values[0]);n.push({stop:hs,color:d})}else if(u.name==="color-stop"){var f=u.values.filter(To);if(f.length===2){var d=Is.parse(t,f[1]),B=f[0];Wo(B)&&n.push({stop:{type:16,number:B.number*100,flags:B.flags},color:d})}}}}),r===1?{angle:(A+_n(180))%_n(360),stops:n,type:r}:{size:i,shape:s,stops:n,position:a,type:r}},a_="closest-side",l_="farthest-side",c_="closest-corner",u_="farthest-corner",d_="circle",f_="ellipse",h_="cover",g_="contain",ZR=function(t,e){var A=0,n=3,r=[],s=[];return mr(e).forEach(function(i,a){var o=!0;if(a===0){var l=!1;o=i.reduce(function(d,f){if(l)if(at(f))switch(f.value){case"center":return s.push(Dw),d;case"top":case"left":return s.push(lA),d;case"right":case"bottom":return s.push(hs),d}else(Pt(f)||Ds(f))&&s.push(f);else if(at(f))switch(f.value){case d_:return A=0,!1;case f_:return A=1,!1;case"at":return l=!0,!1;case a_:return n=0,!1;case h_:case l_:return n=1,!1;case g_:case c_:return n=2,!1;case u_:return n=3,!1}else if(Ds(f)||Pt(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},o)}if(o){var u=lf(t,i);r.push(u)}}),{size:n,shape:A,stops:r,position:s,type:2}},Mc=function(t,e){var A=0,n=3,r=[],s=[];return mr(e).forEach(function(i,a){var o=!0;if(a===0?o=i.reduce(function(u,d){if(at(d))switch(d.value){case"center":return s.push(Dw),!1;case"top":case"left":return s.push(lA),!1;case"right":case"bottom":return s.push(hs),!1}else if(Pt(d)||Ds(d))return s.push(d),!1;return u},o):a===1&&(o=i.reduce(function(u,d){if(at(d))switch(d.value){case d_:return A=0,!1;case f_:return A=1,!1;case g_:case a_:return n=0,!1;case l_:return n=1,!1;case c_:return n=2,!1;case h_:case u_:return n=3,!1}else if(Ds(d)||Pt(d))return Array.isArray(n)||(n=[]),n.push(d),!1;return u},o)),o){var l=lf(t,i);r.push(l)}}),{size:n,shape:A,stops:r,position:s,type:2}},eP=function(t){return t.type===1},tP=function(t){return t.type===2},Lw={name:"image",parse:function(t,e){if(e.type===22){var A={url:e.value,type:0};return t.cache.addImage(e.value),A}if(e.type===18){var n=p_[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function AP(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!p_[t.name])}var p_={"linear-gradient":JR,"-moz-linear-gradient":Pc,"-ms-linear-gradient":Pc,"-o-linear-gradient":Pc,"-webkit-linear-gradient":Pc,"radial-gradient":ZR,"-moz-radial-gradient":Mc,"-ms-radial-gradient":Mc,"-o-radial-gradient":Mc,"-webkit-radial-gradient":Mc,"-webkit-gradient":qR},nP={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var A=e[0];return A.type===20&&A.value==="none"?[]:e.filter(function(n){return To(n)&&AP(n)}).map(function(n){return Lw.parse(t,n)})}},rP={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(at(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},sP={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return mr(e).map(function(A){return A.filter(Pt)}).map(t_)}},iP={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return mr(e).map(function(A){return A.filter(at).map(function(n){return n.value}).join(" ")}).map(oP)}},oP=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},po;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(po||(po={}));var aP={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return mr(e).map(function(A){return A.filter(lP)})}},lP=function(t){return at(t)||Pt(t)},cf=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},cP=cf("top"),uP=cf("right"),dP=cf("bottom"),fP=cf("left"),uf=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,A){return t_(A.filter(Pt))}}},hP=uf("top-left"),gP=uf("top-right"),pP=uf("bottom-right"),mP=uf("bottom-left"),df=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,A){switch(A){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},wP=df("top"),yP=df("right"),BP=df("bottom"),vP=df("left"),ff=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,A){return zl(A)?A.number:0}}},CP=ff("top"),xP=ff("right"),EP=ff("bottom"),FP=ff("left"),_P={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},bP={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},IP={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(at).reduce(function(A,n){return A|QP(n.value)},0)}},QP=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},UP={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},SP={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},fd;(function(t){t.NORMAL="normal",t.STRICT="strict"})(fd||(fd={}));var TP={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return fd.STRICT;case"normal":default:return fd.NORMAL}}},NP={name:"line-height",initialValue:"normal",prefix:!1,type:4},ov=function(t,e){return at(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Pt(t)?ft(t,e):e},kP={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Lw.parse(t,e)}},DP={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Cp={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},hf=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},LP=hf("top"),HP=hf("right"),RP=hf("bottom"),PP=hf("left"),MP={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(at).map(function(A){switch(A.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},OP={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},gf=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},KP=gf("top"),jP=gf("right"),WP=gf("bottom"),zP=gf("left"),GP={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},VP={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},$P={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&vp(e[0],"none")?[]:mr(e).map(function(A){for(var n={color:Dr.TRANSPARENT,offsetX:lA,offsetY:lA,blur:lA},r=0,s=0;s<A.length;s++){var i=A[s];Ds(i)?(r===0?n.offsetX=i:r===1?n.offsetY=i:n.blur=i,r++):n.color=Is.parse(t,i)}return n})}},XP={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},YP={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var A=ZP[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return A(e.values)}return null}},JP=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number});return e.length===6?e:null},qP=function(t){var e=t.filter(function(o){return o.type===17}).map(function(o){return o.number}),A=e[0],n=e[1];e[2],e[3];var r=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],e.length===16?[A,n,r,s,i,a]:null},ZP={matrix:JP,matrix3d:qP},av={type:16,number:50,flags:Wl},eM=[av,av],tM={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var A=e.filter(Pt);return A.length!==2?eM:[A[0],A[1]]}},AM={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Xa;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Xa||(Xa={}));var nM={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Xa.BREAK_ALL;case"keep-all":return Xa.KEEP_ALL;case"normal":default:return Xa.NORMAL}}},rM={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Wo(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},m_={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},sM={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Wo(e)?e.number:1}},iM={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},oM={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(at).map(function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(A){return A!==0})}},aM={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var A=[],n=[];return e.forEach(function(r){switch(r.type){case 20:case 0:A.push(r.value);break;case 17:A.push(r.number.toString());break;case 4:n.push(A.join(" ")),A.length=0;break}}),A.length&&n.push(A.join(" ")),n.map(function(r){return r.indexOf(" ")===-1?r:"'"+r+"'"})}},lM={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},cM={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Wo(e))return e.number;if(at(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},uM={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(at).map(function(A){return A.value})}},dM={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Gt=function(t,e){return(t&e)!==0},fM={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var A=e[0];return A.type===20&&A.value==="none"?[]:e}},hM={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var A=e[0];if(A.type===20&&A.value==="none")return null;for(var n=[],r=e.filter(e_),s=0;s<r.length;s++){var i=r[s],a=r[s+1];if(i.type===20){var o=a&&Wo(a)?a.number:1;n.push({counter:i.value,increment:o})}}return n}},gM={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var A=[],n=e.filter(e_),r=0;r<n.length;r++){var s=n[r],i=n[r+1];if(at(s)&&s.value!=="none"){var a=i&&Wo(i)?i.number:0;A.push({counter:s.value,reset:a})}}return A}},pM={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(zl).map(function(A){return m_.parse(t,A)})}},mM={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var A=e[0];if(A.type===20&&A.value==="none")return null;var n=[],r=e.filter(jR);if(r.length%2!==0)return null;for(var s=0;s<r.length;s+=2){var i=r[s].value,a=r[s+1].value;n.push({open:i,close:a})}return n}},lv=function(t,e,A){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?A?n.open:n.close:""},wM={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&vp(e[0],"none")?[]:mr(e).map(function(A){for(var n={color:255,offsetX:lA,offsetY:lA,blur:lA,spread:lA,inset:!1},r=0,s=0;s<A.length;s++){var i=A[s];vp(i,"inset")?n.inset=!0:Ds(i)?(r===0?n.offsetX=i:r===1?n.offsetY=i:r===2?n.blur=i:n.spread=i,r++):n.color=Is.parse(t,i)}return n})}},yM={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var A=[0,1,2],n=[];return e.filter(at).forEach(function(r){switch(r.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),A.forEach(function(r){n.indexOf(r)===-1&&n.push(r)}),n}},BM={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},vM={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return zl(e)?e.number:0}},CM=function(){function t(e,A){var n,r;this.animationDuration=de(e,pM,A.animationDuration),this.backgroundClip=de(e,GR,A.backgroundClip),this.backgroundColor=de(e,VR,A.backgroundColor),this.backgroundImage=de(e,nP,A.backgroundImage),this.backgroundOrigin=de(e,rP,A.backgroundOrigin),this.backgroundPosition=de(e,sP,A.backgroundPosition),this.backgroundRepeat=de(e,iP,A.backgroundRepeat),this.backgroundSize=de(e,aP,A.backgroundSize),this.borderTopColor=de(e,cP,A.borderTopColor),this.borderRightColor=de(e,uP,A.borderRightColor),this.borderBottomColor=de(e,dP,A.borderBottomColor),this.borderLeftColor=de(e,fP,A.borderLeftColor),this.borderTopLeftRadius=de(e,hP,A.borderTopLeftRadius),this.borderTopRightRadius=de(e,gP,A.borderTopRightRadius),this.borderBottomRightRadius=de(e,pP,A.borderBottomRightRadius),this.borderBottomLeftRadius=de(e,mP,A.borderBottomLeftRadius),this.borderTopStyle=de(e,wP,A.borderTopStyle),this.borderRightStyle=de(e,yP,A.borderRightStyle),this.borderBottomStyle=de(e,BP,A.borderBottomStyle),this.borderLeftStyle=de(e,vP,A.borderLeftStyle),this.borderTopWidth=de(e,CP,A.borderTopWidth),this.borderRightWidth=de(e,xP,A.borderRightWidth),this.borderBottomWidth=de(e,EP,A.borderBottomWidth),this.borderLeftWidth=de(e,FP,A.borderLeftWidth),this.boxShadow=de(e,wM,A.boxShadow),this.color=de(e,_P,A.color),this.direction=de(e,bP,A.direction),this.display=de(e,IP,A.display),this.float=de(e,UP,A.cssFloat),this.fontFamily=de(e,aM,A.fontFamily),this.fontSize=de(e,lM,A.fontSize),this.fontStyle=de(e,dM,A.fontStyle),this.fontVariant=de(e,uM,A.fontVariant),this.fontWeight=de(e,cM,A.fontWeight),this.letterSpacing=de(e,SP,A.letterSpacing),this.lineBreak=de(e,TP,A.lineBreak),this.lineHeight=de(e,NP,A.lineHeight),this.listStyleImage=de(e,kP,A.listStyleImage),this.listStylePosition=de(e,DP,A.listStylePosition),this.listStyleType=de(e,Cp,A.listStyleType),this.marginTop=de(e,LP,A.marginTop),this.marginRight=de(e,HP,A.marginRight),this.marginBottom=de(e,RP,A.marginBottom),this.marginLeft=de(e,PP,A.marginLeft),this.opacity=de(e,sM,A.opacity);var s=de(e,MP,A.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=de(e,OP,A.overflowWrap),this.paddingTop=de(e,KP,A.paddingTop),this.paddingRight=de(e,jP,A.paddingRight),this.paddingBottom=de(e,WP,A.paddingBottom),this.paddingLeft=de(e,zP,A.paddingLeft),this.paintOrder=de(e,yM,A.paintOrder),this.position=de(e,VP,A.position),this.textAlign=de(e,GP,A.textAlign),this.textDecorationColor=de(e,iM,(n=A.textDecorationColor)!==null&&n!==void 0?n:A.color),this.textDecorationLine=de(e,oM,(r=A.textDecorationLine)!==null&&r!==void 0?r:A.textDecoration),this.textShadow=de(e,$P,A.textShadow),this.textTransform=de(e,XP,A.textTransform),this.transform=de(e,YP,A.transform),this.transformOrigin=de(e,tM,A.transformOrigin),this.visibility=de(e,AM,A.visibility),this.webkitTextStrokeColor=de(e,BM,A.webkitTextStrokeColor),this.webkitTextStrokeWidth=de(e,vM,A.webkitTextStrokeWidth),this.wordBreak=de(e,nM,A.wordBreak),this.zIndex=de(e,rM,A.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Qs(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Gt(this.display,4)||Gt(this.display,33554432)||Gt(this.display,268435456)||Gt(this.display,536870912)||Gt(this.display,67108864)||Gt(this.display,134217728)},t}(),xM=function(){function t(e,A){this.content=de(e,fM,A.content),this.quotes=de(e,mM,A.quotes)}return t}(),cv=function(){function t(e,A){this.counterIncrement=de(e,hM,A.counterIncrement),this.counterReset=de(e,gM,A.counterReset)}return t}(),de=function(t,e,A){var n=new q1,r=A!==null&&typeof A<"u"?A.toString():e.initialValue;n.write(r);var s=new Z1(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,at(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return af.parse(t,s.parseComponentValue());case"color":return Is.parse(t,s.parseComponentValue());case"image":return Lw.parse(t,s.parseComponentValue());case"length":var a=s.parseComponentValue();return Ds(a)?a:lA;case"length-percentage":var o=s.parseComponentValue();return Pt(o)?o:lA;case"time":return m_.parse(t,s.parseComponentValue())}break}},EM="data-html2canvas-debug",FM=function(t){var e=t.getAttribute(EM);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},xp=function(t,e){var A=FM(t);return A===1||e===A},wr=function(){function t(e,A){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,xp(A,3))debugger;this.styles=new CM(e,window.getComputedStyle(A,null)),_p(A)&&(this.styles.animationDuration.some(function(n){return n>0})&&(A.style.animationDuration="0s"),this.styles.transform!==null&&(A.style.transform="none")),this.bounds=sf(this.context,A),xp(A,4)&&(this.flags|=16)}return t}(),_M="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",uv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qa=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Oc=0;Oc<uv.length;Oc++)Qa[uv.charCodeAt(Oc)]=Oc;var bM=function(t){var e=t.length*.75,A=t.length,n,r=0,s,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<A;n+=4)s=Qa[t.charCodeAt(n)],i=Qa[t.charCodeAt(n+1)],a=Qa[t.charCodeAt(n+2)],o=Qa[t.charCodeAt(n+3)],u[r++]=s<<2|i>>4,u[r++]=(i&15)<<4|a>>2,u[r++]=(a&3)<<6|o&63;return l},IM=function(t){for(var e=t.length,A=[],n=0;n<e;n+=2)A.push(t[n+1]<<8|t[n]);return A},QM=function(t){for(var e=t.length,A=[],n=0;n<e;n+=4)A.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return A},ii=5,Hw=11,Fh=2,UM=Hw-ii,w_=65536>>ii,SM=1<<ii,_h=SM-1,TM=1024>>ii,NM=w_+TM,kM=NM,DM=32,LM=kM+DM,HM=65536>>Hw,RM=1<<UM,PM=RM-1,dv=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},MM=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},OM=function(t,e){var A=bM(t),n=Array.isArray(A)?QM(A):new Uint32Array(A),r=Array.isArray(A)?IM(A):new Uint16Array(A),s=24,i=dv(r,s/2,n[4]/2),a=n[5]===2?dv(r,(s+n[4])/2):MM(n,Math.ceil((s+n[4])/4));return new KM(n[0],n[1],n[2],n[3],i,a)},KM=function(){function t(e,A,n,r,s,i){this.initialValue=e,this.errorValue=A,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=i}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>ii],A=(A<<Fh)+(e&_h),this.data[A];if(e<=65535)return A=this.index[w_+(e-55296>>ii)],A=(A<<Fh)+(e&_h),this.data[A];if(e<this.highStart)return A=LM-HM+(e>>Hw),A=this.index[A],A+=e>>ii&PM,A=this.index[A],A=(A<<Fh)+(e&_h),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),fv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jM=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Kc=0;Kc<fv.length;Kc++)jM[fv.charCodeAt(Kc)]=Kc;var WM=1,bh=2,Ih=3,hv=4,gv=5,zM=7,pv=8,Qh=9,Uh=10,mv=11,wv=12,yv=13,Bv=14,Sh=15,GM=function(t){for(var e=[],A=0,n=t.length;A<n;){var r=t.charCodeAt(A++);if(r>=55296&&r<=56319&&A<n){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),A--)}else e.push(r)}return e},VM=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var n=[],r=-1,s="";++r<A;){var i=t[r];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(r+1===A||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},$M=OM(_M),yn="",Th="",XM=function(t){return $M.get(t)},YM=function(t,e,A){var n=A-2,r=e[n],s=e[A-1],i=e[A];if(s===bh&&i===Ih)return yn;if(s===bh||s===Ih||s===hv||i===bh||i===Ih||i===hv)return Th;if(s===pv&&[pv,Qh,mv,wv].indexOf(i)!==-1||(s===mv||s===Qh)&&(i===Qh||i===Uh)||(s===wv||s===Uh)&&i===Uh||i===yv||i===gv||i===zM||s===WM)return yn;if(s===yv&&i===Bv){for(;r===gv;)r=e[--n];if(r===Bv)return yn}if(s===Sh&&i===Sh){for(var a=0;r===Sh;)a++,r=e[--n];if(a%2===0)return yn}return Th},JM=function(t){var e=GM(t),A=e.length,n=0,r=0,s=e.map(XM);return{next:function(){if(n>=A)return{done:!0,value:null};for(var i=yn;n<A&&(i=YM(e,s,++n))===yn;);if(i!==yn||n===A){var a=VM.apply(null,e.slice(r,n));return r=n,{value:a,done:!1}}return{done:!0,value:null}}}},qM=function(t){for(var e=JM(t),A=[],n;!(n=e.next()).done;)n.value&&A.push(n.value.slice());return A},ZM=function(t){var e=123;if(t.createRange){var A=t.createRange();if(A.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),A.selectNode(n);var r=A.getBoundingClientRect(),s=Math.round(r.height);if(t.body.removeChild(n),s===e)return!0}}return!1},eO=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var A=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,r=of(n.data).map(function(o){return kt(o)}),s=0,i={},a=r.every(function(o,l){A.setStart(n,s),A.setEnd(n,s+o.length);var u=A.getBoundingClientRect();s+=o.length;var d=u.x>i.x||u.y>i.y;return i=u,l===0?!0:d});return t.body.removeChild(e),a},tO=function(){return typeof new Image().crossOrigin<"u"},AO=function(){return typeof new XMLHttpRequest().responseType=="string"},nO=function(t){var e=new Image,A=t.createElement("canvas"),n=A.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),A.toDataURL()}catch{return!1}return!0},vv=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},rO=function(t){var e=t.createElement("canvas"),A=100;e.width=A,e.height=A;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,A,A);var r=new Image,s=e.toDataURL();r.src=s;var i=Ep(A,A,0,0,r);return n.fillStyle="red",n.fillRect(0,0,A,A),Cv(i).then(function(a){n.drawImage(a,0,0);var o=n.getImageData(0,0,A,A).data;n.fillStyle="red",n.fillRect(0,0,A,A);var l=t.createElement("div");return l.style.backgroundImage="url("+s+")",l.style.height=A+"px",vv(o)?Cv(Ep(A,A,0,0,l)):Promise.reject(!1)}).then(function(a){return n.drawImage(a,0,0),vv(n.getImageData(0,0,A,A).data)}).catch(function(){return!1})},Ep=function(t,e,A,n,r){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",A.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(r),i},Cv=function(t){return new Promise(function(e,A){var n=new Image;n.onload=function(){return e(n)},n.onerror=A,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},oA={get SUPPORT_RANGE_BOUNDS(){var t=ZM(document);return Object.defineProperty(oA,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=oA.SUPPORT_RANGE_BOUNDS&&eO(document);return Object.defineProperty(oA,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=nO(document);return Object.defineProperty(oA,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?rO(document):Promise.resolve(!1);return Object.defineProperty(oA,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=tO();return Object.defineProperty(oA,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=AO();return Object.defineProperty(oA,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(oA,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(oA,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Ya=function(){function t(e,A){this.text=e,this.bounds=A}return t}(),sO=function(t,e,A,n){var r=aO(e,A),s=[],i=0;return r.forEach(function(a){if(A.textDecorationLine.length||a.trim().length>0)if(oA.SUPPORT_RANGE_BOUNDS){var o=xv(n,i,a.length).getClientRects();if(o.length>1){var l=Rw(a),u=0;l.forEach(function(f){s.push(new Ya(f,jr.fromDOMRectList(t,xv(n,u+i,f.length).getClientRects()))),u+=f.length})}else s.push(new Ya(a,jr.fromDOMRectList(t,o)))}else{var d=n.splitText(a.length);s.push(new Ya(a,iO(t,n))),n=d}else oA.SUPPORT_RANGE_BOUNDS||(n=n.splitText(a.length));i+=a.length}),s},iO=function(t,e){var A=e.ownerDocument;if(A){var n=A.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var r=e.parentNode;if(r){r.replaceChild(n,e);var s=sf(t,n);return n.firstChild&&r.replaceChild(n.firstChild,n),s}}return jr.EMPTY},xv=function(t,e,A){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var r=n.createRange();return r.setStart(t,e),r.setEnd(t,e+A),r},Rw=function(t){if(oA.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(A){return A.segment})}return qM(t)},oO=function(t,e){if(oA.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(A.segment(t)).map(function(n){return n.segment})}return cO(t,e)},aO=function(t,e){return e.letterSpacing!==0?Rw(t):oO(t,e)},lO=[32,160,4961,65792,65793,4153,4241],cO=function(t,e){for(var A=HH(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],r,s=function(){if(r.value){var i=r.value.slice(),a=of(i),o="";a.forEach(function(l){lO.indexOf(l)===-1?o+=kt(l):(o.length&&n.push(o),n.push(kt(l)),o="")}),o.length&&n.push(o)}};!(r=A.next()).done;)s();return n},uO=function(){function t(e,A,n){this.text=dO(A.data,n.textTransform),this.textBounds=sO(e,this.text,n,A)}return t}(),dO=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(fO,hO);case 2:return t.toUpperCase();default:return t}},fO=/(^|\s|:|-|\(|\))([a-z])/g,hO=function(t,e,A){return t.length>0?e+A.toUpperCase():t},y_=function(t){tr(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return e}(wr),B_=function(t){tr(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return e}(wr),v_=function(t){tr(e,t);function e(A,n){var r=t.call(this,A,n)||this,s=new XMLSerializer,i=sf(A,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return e}(wr),C_=function(t){tr(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r.value=n.value,r}return e}(wr),Fp=function(t){tr(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r.start=n.start,r.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,r}return e}(wr),gO=[{type:15,flags:0,unit:"px",number:3}],pO=[{type:16,flags:0,number:50}],mO=function(t){return t.width>t.height?new jr(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new jr(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},wO=function(t){var e=t.type===yO?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},hd="checkbox",gd="radio",yO="password",Ev=707406591,Pw=function(t){tr(e,t);function e(A,n){var r=t.call(this,A,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=wO(n),(r.type===hd||r.type===gd)&&(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=mO(r.bounds)),r.type){case hd:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=gO;break;case gd:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=pO;break}return r}return e}(wr),x_=function(t){tr(e,t);function e(A,n){var r=t.call(this,A,n)||this,s=n.options[n.selectedIndex||0];return r.value=s&&s.text||"",r}return e}(wr),E_=function(t){tr(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r.value=n.value,r}return e}(wr),F_=function(t){tr(e,t);function e(A,n){var r=t.call(this,A,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=b_(A,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?$a(A,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Dr.TRANSPARENT,i=n.contentWindow.document.body?$a(A,getComputedStyle(n.contentWindow.document.body).backgroundColor):Dr.TRANSPARENT;r.backgroundColor=Qs(s)?Qs(i)?r.styles.backgroundColor:i:s}}catch{}return r}return e}(wr),BO=["OL","UL","MENU"],du=function(t,e,A,n){for(var r=e.firstChild,s=void 0;r;r=s)if(s=r.nextSibling,I_(r)&&r.data.trim().length>0)A.textNodes.push(new uO(t,r,A.styles));else if(Ao(r))if(T_(r)&&r.assignedNodes)r.assignedNodes().forEach(function(a){return du(t,a,A,n)});else{var i=__(t,r);i.styles.isVisible()&&(vO(r,i,n)?i.flags|=4:CO(i.styles)&&(i.flags|=2),BO.indexOf(r.tagName)!==-1&&(i.flags|=8),A.elements.push(i),r.slot,r.shadowRoot?du(t,r.shadowRoot,i,n):!pd(r)&&!Q_(r)&&!md(r)&&du(t,r,i,n))}},__=function(t,e){return bp(e)?new y_(t,e):U_(e)?new B_(t,e):Q_(e)?new v_(t,e):xO(e)?new C_(t,e):EO(e)?new Fp(t,e):FO(e)?new Pw(t,e):md(e)?new x_(t,e):pd(e)?new E_(t,e):S_(e)?new F_(t,e):new wr(t,e)},b_=function(t,e){var A=__(t,e);return A.flags|=4,du(t,e,A,A),A},vO=function(t,e,A){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Mw(t)&&A.styles.isTransparent()},CO=function(t){return t.isPositioned()||t.isFloating()},I_=function(t){return t.nodeType===Node.TEXT_NODE},Ao=function(t){return t.nodeType===Node.ELEMENT_NODE},_p=function(t){return Ao(t)&&typeof t.style<"u"&&!fu(t)},fu=function(t){return typeof t.className=="object"},xO=function(t){return t.tagName==="LI"},EO=function(t){return t.tagName==="OL"},FO=function(t){return t.tagName==="INPUT"},_O=function(t){return t.tagName==="HTML"},Q_=function(t){return t.tagName==="svg"},Mw=function(t){return t.tagName==="BODY"},U_=function(t){return t.tagName==="CANVAS"},Fv=function(t){return t.tagName==="VIDEO"},bp=function(t){return t.tagName==="IMG"},S_=function(t){return t.tagName==="IFRAME"},_v=function(t){return t.tagName==="STYLE"},bO=function(t){return t.tagName==="SCRIPT"},pd=function(t){return t.tagName==="TEXTAREA"},md=function(t){return t.tagName==="SELECT"},T_=function(t){return t.tagName==="SLOT"},bv=function(t){return t.tagName.indexOf("-")>0},IO=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var A=this.counters[e];return A&&A.length?A[A.length-1]:1},t.prototype.getCounterValues=function(e){var A=this.counters[e];return A||[]},t.prototype.pop=function(e){var A=this;e.forEach(function(n){return A.counters[n].pop()})},t.prototype.parse=function(e){var A=this,n=e.counterIncrement,r=e.counterReset,s=!0;n!==null&&n.forEach(function(a){var o=A.counters[a.counter];o&&a.increment!==0&&(s=!1,o.length||o.push(1),o[Math.max(0,o.length-1)]+=a.increment)});var i=[];return s&&r.forEach(function(a){var o=A.counters[a.counter];i.push(a.counter),o||(o=A.counters[a.counter]=[]),o.push(a.reset)}),i},t}(),Iv={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Qv={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},QO={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},UO={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Hi=function(t,e,A,n,r,s){return t<e||t>A?Il(t,r,s.length>0):n.integers.reduce(function(i,a,o){for(;t>=a;)t-=a,i+=n.values[o];return i},"")+s},N_=function(t,e,A,n){var r="";do A||t--,r=n(t)+r,t/=e;while(t*e>=e);return r},Nt=function(t,e,A,n,r){var s=A-e+1;return(t<0?"-":"")+(N_(Math.abs(t),s,n,function(i){return kt(Math.floor(i%s)+e)})+r)},Ws=function(t,e,A){A===void 0&&(A=". ");var n=e.length;return N_(Math.abs(t),n,!1,function(r){return e[Math.floor(r%n)]})+A},Mi=1,Zr=2,es=4,Ua=8,Er=function(t,e,A,n,r,s){if(t<-9999||t>9999)return Il(t,4,r.length>0);var i=Math.abs(t),a=r;if(i===0)return e[0]+a;for(var o=0;i>0&&o<=4;o++){var l=i%10;l===0&&Gt(s,Mi)&&a!==""?a=e[l]+a:l>1||l===1&&o===0||l===1&&o===1&&Gt(s,Zr)||l===1&&o===1&&Gt(s,es)&&t>100||l===1&&o>1&&Gt(s,Ua)?a=e[l]+(o>0?A[o-1]:"")+a:l===1&&o>0&&(a=A[o-1]+a),i=Math.floor(i/10)}return(t<0?n:"")+a},Uv="",Sv="",Tv="",Nh="",Il=function(t,e,A){var n=A?". ":"",r=A?"":"",s=A?", ":"",i=A?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var a=Nt(t,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return Ws(t,"",r);case 6:return Hi(t,1,3999,Iv,3,n).toLowerCase();case 7:return Hi(t,1,3999,Iv,3,n);case 8:return Nt(t,945,969,!1,n);case 9:return Nt(t,97,122,!1,n);case 10:return Nt(t,65,90,!1,n);case 11:return Nt(t,1632,1641,!0,n);case 12:case 49:return Hi(t,1,9999,Qv,3,n);case 35:return Hi(t,1,9999,Qv,3,n).toLowerCase();case 13:return Nt(t,2534,2543,!0,n);case 14:case 30:return Nt(t,6112,6121,!0,n);case 15:return Ws(t,"",r);case 16:return Ws(t,"",r);case 17:case 48:return Er(t,"",Uv,"",r,Zr|es|Ua);case 47:return Er(t,"",Sv,"",r,Mi|Zr|es|Ua);case 42:return Er(t,"",Uv,"",r,Zr|es|Ua);case 41:return Er(t,"",Sv,"",r,Mi|Zr|es|Ua);case 26:return Er(t,"","",Tv,r,0);case 25:return Er(t,"","",Tv,r,Mi|Zr|es);case 31:return Er(t,"","",Nh,s,Mi|Zr|es);case 33:return Er(t,"","",Nh,s,0);case 32:return Er(t,"","",Nh,s,Mi|Zr|es);case 18:return Nt(t,2406,2415,!0,n);case 20:return Hi(t,1,19999,UO,3,n);case 21:return Nt(t,2790,2799,!0,n);case 22:return Nt(t,2662,2671,!0,n);case 22:return Hi(t,1,10999,QO,3,n);case 23:return Ws(t,"");case 24:return Ws(t,"");case 27:return Nt(t,3302,3311,!0,n);case 28:return Ws(t,"",r);case 29:return Ws(t,"",r);case 34:return Nt(t,3792,3801,!0,n);case 37:return Nt(t,6160,6169,!0,n);case 38:return Nt(t,4160,4169,!0,n);case 39:return Nt(t,2918,2927,!0,n);case 40:return Nt(t,1776,1785,!0,n);case 43:return Nt(t,3046,3055,!0,n);case 44:return Nt(t,3174,3183,!0,n);case 45:return Nt(t,3664,3673,!0,n);case 46:return Nt(t,3872,3881,!0,n);case 3:default:return Nt(t,48,57,!0,n)}},k_="data-html2canvas-ignore",Nv=function(){function t(e,A,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=A,this.counters=new IO,this.quoteDepth=0,!A.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(A.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,A){var n=this,r=SO(e,A);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=r.contentWindow,o=a.document,l=kO(r).then(function(){return bA(n,void 0,void 0,function(){var u,d;return BA(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(RO),a&&(a.scrollTo(A.left,A.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==A.top||a.scrollX!==A.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-A.left,a.scrollY-A.top,0,0))),u=this.options.onclone,d=this.clonedReferenceElement,typeof d>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,NO(o)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(o,d)}).then(function(){return r})]:[2,r]}})})});return o.open(),o.write(LO(document.doctype)+"<html></html>"),HO(this.referenceElement.ownerDocument,s,i),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),l},t.prototype.createElementClone=function(e){if(xp(e,2))debugger;if(U_(e))return this.createCanvasClone(e);if(Fv(e))return this.createVideoClone(e);if(_v(e))return this.createStyleClone(e);var A=e.cloneNode(!1);return bp(A)&&(bp(e)&&e.currentSrc&&e.currentSrc!==e.src&&(A.src=e.currentSrc,A.srcset=""),A.loading==="lazy"&&(A.loading="eager")),bv(A)?this.createCustomElementClone(A):A},t.prototype.createCustomElementClone=function(e){var A=document.createElement("html2canvascustomelement");return kh(e.style,A),A},t.prototype.createStyleClone=function(e){try{var A=e.sheet;if(A&&A.cssRules){var n=[].slice.call(A.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var A;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var s=e.getContext("2d"),i=r.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var a=(A=e.getContext("webgl2"))!==null&&A!==void 0?A:e.getContext("webgl");if(a){var o=a.getContextAttributes();(o==null?void 0:o.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return r}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},t.prototype.createVideoClone=function(e){var A=e.ownerDocument.createElement("canvas");A.width=e.offsetWidth,A.height=e.offsetHeight;var n=A.getContext("2d");try{return n&&(n.drawImage(e,0,0,A.width,A.height),this.options.allowTaint||n.getImageData(0,0,A.width,A.height)),A}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},t.prototype.appendChildNode=function(e,A,n){(!Ao(A)||!bO(A)&&!A.hasAttribute(k_)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(A)))&&(!this.options.copyStyles||!Ao(A)||!_v(A))&&e.appendChild(this.cloneNode(A,n))},t.prototype.cloneChildNodes=function(e,A,n){for(var r=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Ao(s)&&T_(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(a){return r.appendChildNode(A,a,n)})}else this.appendChildNode(A,s,n)},t.prototype.cloneNode=function(e,A){if(I_(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Ao(e)&&(_p(e)||fu(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&_p(r)&&(this.clonedReferenceElement=r),Mw(r)&&OO(r);var o=this.counters.parse(new cv(this.context,s)),l=this.resolvePseudoContent(e,r,i,Ja.BEFORE);bv(e)&&(A=!0),Fv(e)||this.cloneChildNodes(e,r,A),l&&r.insertBefore(l,r.firstChild);var u=this.resolvePseudoContent(e,r,a,Ja.AFTER);return u&&r.appendChild(u),this.counters.pop(o),(s&&(this.options.copyStyles||fu(e))&&!S_(e)||A)&&kh(s,r),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(pd(e)||md(e))&&(pd(r)||md(r))&&(r.value=e.value),r}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,A,n,r){var s=this;if(n){var i=n.content,a=A.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new cv(this.context,n));var o=new xM(this.context,n),l=a.createElement("html2canvaspseudoelement");kh(n,l),o.content.forEach(function(d){if(d.type===0)l.appendChild(a.createTextNode(d.value));else if(d.type===22){var f=a.createElement("img");f.src=d.value,f.style.opacity="1",l.appendChild(f)}else if(d.type===18){if(d.name==="attr"){var B=d.values.filter(at);B.length&&l.appendChild(a.createTextNode(e.getAttribute(B[0].value)||""))}else if(d.name==="counter"){var h=d.values.filter(To),y=h[0],C=h[1];if(y&&at(y)){var p=s.counters.getCounterValue(y.value),g=C&&at(C)?Cp.parse(s.context,C.value):3;l.appendChild(a.createTextNode(Il(p,g,!1)))}}else if(d.name==="counters"){var v=d.values.filter(To),y=v[0],E=v[1],C=v[2];if(y&&at(y)){var S=s.counters.getCounterValues(y.value),U=C&&at(C)?Cp.parse(s.context,C.value):3,b=E&&E.type===0?E.value:"",L=S.map(function(q){return Il(q,U,!1)}).join(b);l.appendChild(a.createTextNode(L))}}}else if(d.type===20)switch(d.value){case"open-quote":l.appendChild(a.createTextNode(lv(o.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(a.createTextNode(lv(o.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(a.createTextNode(d.value))}}),l.className=Ip+" "+Qp;var u=r===Ja.BEFORE?" "+Ip:" "+Qp;return fu(A)?A.className.baseValue+=u:A.className+=u,l}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Ja;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Ja||(Ja={}));var SO=function(t,e){var A=t.createElement("iframe");return A.className="html2canvas-container",A.style.visibility="hidden",A.style.position="fixed",A.style.left="-10000px",A.style.top="0px",A.style.border="0",A.width=e.width.toString(),A.height=e.height.toString(),A.scrolling="no",A.setAttribute(k_,"true"),t.body.appendChild(A),A},TO=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},NO=function(t){return Promise.all([].slice.call(t.images,0).map(TO))},kO=function(t){return new Promise(function(e,A){var n=t.contentWindow;if(!n)return A("No window assigned for iframe");var r=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){r.body.childNodes.length>0&&r.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},DO=["all","d","content"],kh=function(t,e){for(var A=t.length-1;A>=0;A--){var n=t.item(A);DO.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},LO=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},HO=function(t,e,A){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||A!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,A)},RO=function(t){var e=t[0],A=t[1],n=t[2];e.scrollLeft=A,e.scrollTop=n},PO=":before",MO=":after",Ip="___html2canvas___pseudoelement_before",Qp="___html2canvas___pseudoelement_after",kv=`{
    content: "" !important;
    display: none !important;
}`,OO=function(t){KO(t,"."+Ip+PO+kv+`
         .`+Qp+MO+kv)},KO=function(t,e){var A=t.ownerDocument;if(A){var n=A.createElement("style");n.textContent=e,t.appendChild(n)}},D_=function(){function t(){}return t.getOrigin=function(e){var A=t._link;return A?(A.href=e,A.href=A.href,A.protocol+A.hostname+A.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),jO=function(){function t(e,A){this.context=e,this._options=A,this._cache={}}return t.prototype.addImage=function(e){var A=Promise.resolve();return this.has(e)||(Lh(e)||VO(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),A},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return bA(this,void 0,void 0,function(){var A,n,r,s,i=this;return BA(this,function(a){switch(a.label){case 0:return A=D_.isSameOrigin(e),n=!Dh(e)&&this._options.useCORS===!0&&oA.SUPPORT_CORS_IMAGES&&!A,r=!Dh(e)&&!A&&!Lh(e)&&typeof this._options.proxy=="string"&&oA.SUPPORT_CORS_XHR&&!n,!A&&this._options.allowTaint===!1&&!Dh(e)&&!Lh(e)&&!r&&!n?[2]:(s=e,r?[4,this.proxy(s)]:[3,2]);case 1:s=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(o,l){var u=new Image;u.onload=function(){return o(u)},u.onerror=l,($O(s)||n)&&(u.crossOrigin="anonymous"),u.src=s,u.complete===!0&&setTimeout(function(){return o(u)},500),i._options.imageTimeout>0&&setTimeout(function(){return l("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var A=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise(function(s,i){var a=oA.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(o.status===200)if(a==="text")s(o.response);else{var d=new FileReader;d.addEventListener("load",function(){return s(d.result)},!1),d.addEventListener("error",function(f){return i(f)},!1),d.readAsDataURL(o.response)}else i("Failed to proxy resource "+r+" with status code "+o.status)},o.onerror=i;var l=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+l+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&o instanceof XMLHttpRequest&&(o.responseType=a),A._options.imageTimeout){var u=A._options.imageTimeout;o.timeout=u,o.ontimeout=function(){return i("Timed out ("+u+"ms) proxying "+r)}}o.send()})},t}(),WO=/^data:image\/svg\+xml/i,zO=/^data:image\/.*;base64,/i,GO=/^data:image\/.*/i,VO=function(t){return oA.SUPPORT_SVG_DRAWING||!XO(t)},Dh=function(t){return GO.test(t)},$O=function(t){return zO.test(t)},Lh=function(t){return t.substr(0,4)==="blob"},XO=function(t){return t.substr(-3).toLowerCase()==="svg"||WO.test(t)},ce=function(){function t(e,A){this.type=0,this.x=e,this.y=A}return t.prototype.add=function(e,A){return new t(this.x+e,this.y+A)},t}(),Ri=function(t,e,A){return new ce(t.x+(e.x-t.x)*A,t.y+(e.y-t.y)*A)},jc=function(){function t(e,A,n,r){this.type=1,this.start=e,this.startControl=A,this.endControl=n,this.end=r}return t.prototype.subdivide=function(e,A){var n=Ri(this.start,this.startControl,e),r=Ri(this.startControl,this.endControl,e),s=Ri(this.endControl,this.end,e),i=Ri(n,r,e),a=Ri(r,s,e),o=Ri(i,a,e);return A?new t(this.start,n,i,o):new t(o,a,s,this.end)},t.prototype.add=function(e,A){return new t(this.start.add(e,A),this.startControl.add(e,A),this.endControl.add(e,A),this.end.add(e,A))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Cn=function(t){return t.type===1},YO=function(){function t(e){var A=e.styles,n=e.bounds,r=Ia(A.borderTopLeftRadius,n.width,n.height),s=r[0],i=r[1],a=Ia(A.borderTopRightRadius,n.width,n.height),o=a[0],l=a[1],u=Ia(A.borderBottomRightRadius,n.width,n.height),d=u[0],f=u[1],B=Ia(A.borderBottomLeftRadius,n.width,n.height),h=B[0],y=B[1],C=[];C.push((s+o)/n.width),C.push((h+d)/n.width),C.push((i+y)/n.height),C.push((l+f)/n.height);var p=Math.max.apply(Math,C);p>1&&(s/=p,i/=p,o/=p,l/=p,d/=p,f/=p,h/=p,y/=p);var g=n.width-o,v=n.height-f,E=n.width-d,S=n.height-y,U=A.borderTopWidth,b=A.borderRightWidth,L=A.borderBottomWidth,N=A.borderLeftWidth,I=ft(A.paddingTop,e.bounds.width),q=ft(A.paddingRight,e.bounds.width),O=ft(A.paddingBottom,e.bounds.width),H=ft(A.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?yt(n.left+N/3,n.top+U/3,s-N/3,i-U/3,rt.TOP_LEFT):new ce(n.left+N/3,n.top+U/3),this.topRightBorderDoubleOuterBox=s>0||i>0?yt(n.left+g,n.top+U/3,o-b/3,l-U/3,rt.TOP_RIGHT):new ce(n.left+n.width-b/3,n.top+U/3),this.bottomRightBorderDoubleOuterBox=d>0||f>0?yt(n.left+E,n.top+v,d-b/3,f-L/3,rt.BOTTOM_RIGHT):new ce(n.left+n.width-b/3,n.top+n.height-L/3),this.bottomLeftBorderDoubleOuterBox=h>0||y>0?yt(n.left+N/3,n.top+S,h-N/3,y-L/3,rt.BOTTOM_LEFT):new ce(n.left+N/3,n.top+n.height-L/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?yt(n.left+N*2/3,n.top+U*2/3,s-N*2/3,i-U*2/3,rt.TOP_LEFT):new ce(n.left+N*2/3,n.top+U*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?yt(n.left+g,n.top+U*2/3,o-b*2/3,l-U*2/3,rt.TOP_RIGHT):new ce(n.left+n.width-b*2/3,n.top+U*2/3),this.bottomRightBorderDoubleInnerBox=d>0||f>0?yt(n.left+E,n.top+v,d-b*2/3,f-L*2/3,rt.BOTTOM_RIGHT):new ce(n.left+n.width-b*2/3,n.top+n.height-L*2/3),this.bottomLeftBorderDoubleInnerBox=h>0||y>0?yt(n.left+N*2/3,n.top+S,h-N*2/3,y-L*2/3,rt.BOTTOM_LEFT):new ce(n.left+N*2/3,n.top+n.height-L*2/3),this.topLeftBorderStroke=s>0||i>0?yt(n.left+N/2,n.top+U/2,s-N/2,i-U/2,rt.TOP_LEFT):new ce(n.left+N/2,n.top+U/2),this.topRightBorderStroke=s>0||i>0?yt(n.left+g,n.top+U/2,o-b/2,l-U/2,rt.TOP_RIGHT):new ce(n.left+n.width-b/2,n.top+U/2),this.bottomRightBorderStroke=d>0||f>0?yt(n.left+E,n.top+v,d-b/2,f-L/2,rt.BOTTOM_RIGHT):new ce(n.left+n.width-b/2,n.top+n.height-L/2),this.bottomLeftBorderStroke=h>0||y>0?yt(n.left+N/2,n.top+S,h-N/2,y-L/2,rt.BOTTOM_LEFT):new ce(n.left+N/2,n.top+n.height-L/2),this.topLeftBorderBox=s>0||i>0?yt(n.left,n.top,s,i,rt.TOP_LEFT):new ce(n.left,n.top),this.topRightBorderBox=o>0||l>0?yt(n.left+g,n.top,o,l,rt.TOP_RIGHT):new ce(n.left+n.width,n.top),this.bottomRightBorderBox=d>0||f>0?yt(n.left+E,n.top+v,d,f,rt.BOTTOM_RIGHT):new ce(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=h>0||y>0?yt(n.left,n.top+S,h,y,rt.BOTTOM_LEFT):new ce(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?yt(n.left+N,n.top+U,Math.max(0,s-N),Math.max(0,i-U),rt.TOP_LEFT):new ce(n.left+N,n.top+U),this.topRightPaddingBox=o>0||l>0?yt(n.left+Math.min(g,n.width-b),n.top+U,g>n.width+b?0:Math.max(0,o-b),Math.max(0,l-U),rt.TOP_RIGHT):new ce(n.left+n.width-b,n.top+U),this.bottomRightPaddingBox=d>0||f>0?yt(n.left+Math.min(E,n.width-N),n.top+Math.min(v,n.height-L),Math.max(0,d-b),Math.max(0,f-L),rt.BOTTOM_RIGHT):new ce(n.left+n.width-b,n.top+n.height-L),this.bottomLeftPaddingBox=h>0||y>0?yt(n.left+N,n.top+Math.min(S,n.height-L),Math.max(0,h-N),Math.max(0,y-L),rt.BOTTOM_LEFT):new ce(n.left+N,n.top+n.height-L),this.topLeftContentBox=s>0||i>0?yt(n.left+N+H,n.top+U+I,Math.max(0,s-(N+H)),Math.max(0,i-(U+I)),rt.TOP_LEFT):new ce(n.left+N+H,n.top+U+I),this.topRightContentBox=o>0||l>0?yt(n.left+Math.min(g,n.width+N+H),n.top+U+I,g>n.width+N+H?0:o-N+H,l-(U+I),rt.TOP_RIGHT):new ce(n.left+n.width-(b+q),n.top+U+I),this.bottomRightContentBox=d>0||f>0?yt(n.left+Math.min(E,n.width-(N+H)),n.top+Math.min(v,n.height+U+I),Math.max(0,d-(b+q)),f-(L+O),rt.BOTTOM_RIGHT):new ce(n.left+n.width-(b+q),n.top+n.height-(L+O)),this.bottomLeftContentBox=h>0||y>0?yt(n.left+N+H,n.top+S,Math.max(0,h-(N+H)),y-(L+O),rt.BOTTOM_LEFT):new ce(n.left+N+H,n.top+n.height-(L+O))}return t}(),rt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(rt||(rt={}));var yt=function(t,e,A,n,r){var s=4*((Math.sqrt(2)-1)/3),i=A*s,a=n*s,o=t+A,l=e+n;switch(r){case rt.TOP_LEFT:return new jc(new ce(t,l),new ce(t,l-a),new ce(o-i,e),new ce(o,e));case rt.TOP_RIGHT:return new jc(new ce(t,e),new ce(t+i,e),new ce(o,l-a),new ce(o,l));case rt.BOTTOM_RIGHT:return new jc(new ce(o,e),new ce(o,e+a),new ce(t+i,l),new ce(t,l));case rt.BOTTOM_LEFT:default:return new jc(new ce(o,l),new ce(o-i,l),new ce(t,e+a),new ce(t,e))}},wd=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},JO=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},yd=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},qO=function(){function t(e,A,n){this.offsetX=e,this.offsetY=A,this.matrix=n,this.type=0,this.target=6}return t}(),Wc=function(){function t(e,A){this.path=e,this.target=A,this.type=1}return t}(),ZO=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),e3=function(t){return t.type===0},L_=function(t){return t.type===1},t3=function(t){return t.type===2},Dv=function(t,e){return t.length===e.length?t.some(function(A,n){return A===e[n]}):!1},A3=function(t,e,A,n,r){return t.map(function(s,i){switch(i){case 0:return s.add(e,A);case 1:return s.add(e+n,A);case 2:return s.add(e+n,A+r);case 3:return s.add(e,A+r)}return s})},H_=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),R_=function(){function t(e,A){if(this.container=e,this.parent=A,this.effects=[],this.curves=new YO(this.container),this.container.styles.opacity<1&&this.effects.push(new ZO(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new qO(n,r,s))}if(this.container.styles.overflowX!==0){var i=wd(this.curves),a=yd(this.curves);Dv(i,a)?this.effects.push(new Wc(i,6)):(this.effects.push(new Wc(i,2)),this.effects.push(new Wc(a,4)))}}return t.prototype.getEffects=function(e){for(var A=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,r=this.effects.slice(0);n;){var s=n.effects.filter(function(o){return!L_(o)});if(A||n.container.styles.position!==0||!n.parent){if(r.unshift.apply(r,s),A=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=wd(n.curves),a=yd(n.curves);Dv(i,a)||r.unshift(new Wc(a,6))}}else r.unshift.apply(r,s);n=n.parent}return r.filter(function(o){return Gt(o.target,e)})},t}(),Up=function(t,e,A,n){t.container.elements.forEach(function(r){var s=Gt(r.flags,4),i=Gt(r.flags,2),a=new R_(r,t);Gt(r.styles.display,2048)&&n.push(a);var o=Gt(r.flags,8)?[]:n;if(s||i){var l=s||r.styles.isPositioned()?A:e,u=new H_(a);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var d=r.styles.zIndex.order;if(d<0){var f=0;l.negativeZIndex.some(function(h,y){return d>h.element.container.styles.zIndex.order?(f=y,!1):f>0}),l.negativeZIndex.splice(f,0,u)}else if(d>0){var B=0;l.positiveZIndex.some(function(h,y){return d>=h.element.container.styles.zIndex.order?(B=y+1,!1):B>0}),l.positiveZIndex.splice(B,0,u)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else r.styles.isFloating()?l.nonPositionedFloats.push(u):l.nonPositionedInlineLevel.push(u);Up(a,u,s?u:A,o)}else r.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),Up(a,e,A,o);Gt(r.flags,8)&&P_(r,o)})},P_=function(t,e){for(var A=t instanceof Fp?t.start:1,n=t instanceof Fp?t.reversed:!1,r=0;r<e.length;r++){var s=e[r];s.container instanceof C_&&typeof s.container.value=="number"&&s.container.value!==0&&(A=s.container.value),s.listValue=Il(A,s.container.styles.listStyleType,!0),A+=n?-1:1}},n3=function(t){var e=new R_(t,null),A=new H_(e),n=[];return Up(e,A,A,n),P_(e.container,n),A},Lv=function(t,e){switch(e){case 0:return bn(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return bn(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return bn(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return bn(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},r3=function(t,e){switch(e){case 0:return bn(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return bn(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return bn(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return bn(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},s3=function(t,e){switch(e){case 0:return bn(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return bn(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return bn(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return bn(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},i3=function(t,e){switch(e){case 0:return zc(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return zc(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return zc(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return zc(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},zc=function(t,e){var A=[];return Cn(t)?A.push(t.subdivide(.5,!1)):A.push(t),Cn(e)?A.push(e.subdivide(.5,!0)):A.push(e),A},bn=function(t,e,A,n){var r=[];return Cn(t)?r.push(t.subdivide(.5,!1)):r.push(t),Cn(A)?r.push(A.subdivide(.5,!0)):r.push(A),Cn(n)?r.push(n.subdivide(.5,!0).reverse()):r.push(n),Cn(e)?r.push(e.subdivide(.5,!1).reverse()):r.push(e),r},M_=function(t){var e=t.bounds,A=t.styles;return e.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))},Bd=function(t){var e=t.styles,A=t.bounds,n=ft(e.paddingLeft,A.width),r=ft(e.paddingRight,A.width),s=ft(e.paddingTop,A.width),i=ft(e.paddingBottom,A.width);return A.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+r),-(e.borderTopWidth+e.borderBottomWidth+s+i))},o3=function(t,e){return t===0?e.bounds:t===2?Bd(e):M_(e)},a3=function(t,e){return t===0?e.bounds:t===2?Bd(e):M_(e)},Hh=function(t,e,A){var n=o3(Oi(t.styles.backgroundOrigin,e),t),r=a3(Oi(t.styles.backgroundClip,e),t),s=l3(Oi(t.styles.backgroundSize,e),A,n),i=s[0],a=s[1],o=Ia(Oi(t.styles.backgroundPosition,e),n.width-i,n.height-a),l=c3(Oi(t.styles.backgroundRepeat,e),o,s,n,r),u=Math.round(n.left+o[0]),d=Math.round(n.top+o[1]);return[l,u,d,i,a]},Pi=function(t){return at(t)&&t.value===po.AUTO},Gc=function(t){return typeof t=="number"},l3=function(t,e,A){var n=e[0],r=e[1],s=e[2],i=t[0],a=t[1];if(!i)return[0,0];if(Pt(i)&&a&&Pt(a))return[ft(i,A.width),ft(a,A.height)];var o=Gc(s);if(at(i)&&(i.value===po.CONTAIN||i.value===po.COVER)){if(Gc(s)){var l=A.width/A.height;return l<s!=(i.value===po.COVER)?[A.width,A.width/s]:[A.height*s,A.height]}return[A.width,A.height]}var u=Gc(n),d=Gc(r),f=u||d;if(Pi(i)&&(!a||Pi(a))){if(u&&d)return[n,r];if(!o&&!f)return[A.width,A.height];if(f&&o){var B=u?n:r*s,h=d?r:n/s;return[B,h]}var y=u?n:A.width,C=d?r:A.height;return[y,C]}if(o){var p=0,g=0;return Pt(i)?p=ft(i,A.width):Pt(a)&&(g=ft(a,A.height)),Pi(i)?p=g*s:(!a||Pi(a))&&(g=p/s),[p,g]}var v=null,E=null;if(Pt(i)?v=ft(i,A.width):a&&Pt(a)&&(E=ft(a,A.height)),v!==null&&(!a||Pi(a))&&(E=u&&d?v/n*r:A.height),E!==null&&Pi(i)&&(v=u&&d?E/r*n:A.width),v!==null&&E!==null)return[v,E];throw new Error("Unable to calculate background-size for element")},Oi=function(t,e){var A=t[e];return typeof A>"u"?t[0]:A},c3=function(t,e,A,n,r){var s=e[0],i=e[1],a=A[0],o=A[1];switch(t){case 2:return[new ce(Math.round(n.left),Math.round(n.top+i)),new ce(Math.round(n.left+n.width),Math.round(n.top+i)),new ce(Math.round(n.left+n.width),Math.round(o+n.top+i)),new ce(Math.round(n.left),Math.round(o+n.top+i))];case 3:return[new ce(Math.round(n.left+s),Math.round(n.top)),new ce(Math.round(n.left+s+a),Math.round(n.top)),new ce(Math.round(n.left+s+a),Math.round(n.height+n.top)),new ce(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ce(Math.round(n.left+s),Math.round(n.top+i)),new ce(Math.round(n.left+s+a),Math.round(n.top+i)),new ce(Math.round(n.left+s+a),Math.round(n.top+i+o)),new ce(Math.round(n.left+s),Math.round(n.top+i+o))];default:return[new ce(Math.round(r.left),Math.round(r.top)),new ce(Math.round(r.left+r.width),Math.round(r.top)),new ce(Math.round(r.left+r.width),Math.round(r.height+r.top)),new ce(Math.round(r.left),Math.round(r.height+r.top))]}},u3="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Hv="Hidden Text",d3=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,A){var n=this._document.createElement("div"),r=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=A,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),r.src=u3,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=A,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(Hv)),n.appendChild(s),n.appendChild(r);var a=r.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(Hv)),n.style.lineHeight="normal",r.style.verticalAlign="super";var o=r.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:a,middle:o}},t.prototype.getMetrics=function(e,A){var n=e+" "+A;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,A)),this._data[n]},t}(),O_=function(){function t(e,A){this.context=e,this.options=A}return t}(),f3=1e4,h3=function(t){tr(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new d3(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return e.prototype.applyEffects=function(A){for(var n=this;this._activeEffects.length;)this.popEffect();A.forEach(function(r){return n.applyEffect(r)})},e.prototype.applyEffect=function(A){this.ctx.save(),t3(A)&&(this.ctx.globalAlpha=A.opacity),e3(A)&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),L_(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(A){return bA(this,void 0,void 0,function(){var n;return BA(this,function(r){switch(r.label){case 0:return n=A.element.container.styles,n.isVisible()?[4,this.renderStackContent(A)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(A){return bA(this,void 0,void 0,function(){return BA(this,function(n){switch(n.label){case 0:if(Gt(A.container.flags,16))debugger;return A.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(A)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(A)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(A,n,r){var s=this;if(n===0)this.ctx.fillText(A.text,A.bounds.left,A.bounds.top+r);else{var i=Rw(A.text);i.reduce(function(a,o){return s.ctx.fillText(o,a,A.bounds.top+r),a+s.ctx.measureText(o).width},A.bounds.left)}},e.prototype.createFontStyle=function(A){var n=A.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),r=y3(A.fontFamily).join(", "),s=zl(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,n,A.fontWeight,s,r].join(" "),r,s]},e.prototype.renderTextNode=function(A,n){return bA(this,void 0,void 0,function(){var r,s,i,a,o,l,u,d,f=this;return BA(this,function(B){return r=this.createFontStyle(n),s=r[0],i=r[1],a=r[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(i,a),l=o.baseline,u=o.middle,d=n.paintOrder,A.textBounds.forEach(function(h){d.forEach(function(y){switch(y){case 0:f.ctx.fillStyle=Yt(n.color),f.renderTextWithLetterSpacing(h,n.letterSpacing,l);var C=n.textShadow;C.length&&h.text.trim().length&&(C.slice(0).reverse().forEach(function(p){f.ctx.shadowColor=Yt(p.color),f.ctx.shadowOffsetX=p.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=p.offsetY.number*f.options.scale,f.ctx.shadowBlur=p.blur.number,f.renderTextWithLetterSpacing(h,n.letterSpacing,l)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=Yt(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(p){switch(p){case 1:f.ctx.fillRect(h.bounds.left,Math.round(h.bounds.top+l),h.bounds.width,1);break;case 2:f.ctx.fillRect(h.bounds.left,Math.round(h.bounds.top),h.bounds.width,1);break;case 3:f.ctx.fillRect(h.bounds.left,Math.ceil(h.bounds.top+u),h.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&h.text.trim().length&&(f.ctx.strokeStyle=Yt(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(h.text,h.bounds.left,h.bounds.top+l)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(A,n,r){if(r&&A.intrinsicWidth>0&&A.intrinsicHeight>0){var s=Bd(A),i=yd(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(r,0,0,A.intrinsicWidth,A.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(A){return bA(this,void 0,void 0,function(){var n,r,s,i,a,o,g,g,l,u,d,f,E,B,h,S,y,C,p,g,v,E,S;return BA(this,function(U){switch(U.label){case 0:this.applyEffects(A.getEffects(4)),n=A.container,r=A.curves,s=n.styles,i=0,a=n.textNodes,U.label=1;case 1:return i<a.length?(o=a[i],[4,this.renderTextNode(o,s)]):[3,4];case 2:U.sent(),U.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof y_))return[3,8];U.label=5;case 5:return U.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return g=U.sent(),this.renderReplacedElement(n,r,g),[3,8];case 7:return U.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof B_&&this.renderReplacedElement(n,r,n.canvas),!(n instanceof v_))return[3,12];U.label=9;case 9:return U.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return g=U.sent(),this.renderReplacedElement(n,r,g),[3,12];case 11:return U.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof F_&&n.tree?(l=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,l.render(n.tree)]):[3,14];case 13:u=U.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),U.label=14;case 14:if(n instanceof Pw&&(d=Math.min(n.bounds.width,n.bounds.height),n.type===hd?n.checked&&(this.ctx.save(),this.path([new ce(n.bounds.left+d*.39363,n.bounds.top+d*.79),new ce(n.bounds.left+d*.16,n.bounds.top+d*.5549),new ce(n.bounds.left+d*.27347,n.bounds.top+d*.44071),new ce(n.bounds.left+d*.39694,n.bounds.top+d*.5649),new ce(n.bounds.left+d*.72983,n.bounds.top+d*.23),new ce(n.bounds.left+d*.84,n.bounds.top+d*.34085),new ce(n.bounds.left+d*.39363,n.bounds.top+d*.79)]),this.ctx.fillStyle=Yt(Ev),this.ctx.fill(),this.ctx.restore()):n.type===gd&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+d/2,n.bounds.top+d/2,d/4,0,Math.PI*2,!0),this.ctx.fillStyle=Yt(Ev),this.ctx.fill(),this.ctx.restore())),g3(n)&&n.value.length){switch(f=this.createFontStyle(s),E=f[0],B=f[1],h=this.fontMetrics.getMetrics(E,B).baseline,this.ctx.font=E,this.ctx.fillStyle=Yt(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=m3(n.styles.textAlign),S=Bd(n),y=0,n.styles.textAlign){case 1:y+=S.width/2;break;case 2:y+=S.width;break}C=S.add(y,0,0,-S.height/2+1),this.ctx.save(),this.path([new ce(S.left,S.top),new ce(S.left+S.width,S.top),new ce(S.left+S.width,S.top+S.height),new ce(S.left,S.top+S.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ya(n.value,C),s.letterSpacing,h),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Gt(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(p=n.styles.listStyleImage,p.type!==0)return[3,18];g=void 0,v=p.url,U.label=15;case 15:return U.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return g=U.sent(),this.ctx.drawImage(g,n.bounds.left-(g.width+10),n.bounds.top),[3,18];case 17:return U.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:A.listValue&&n.styles.listStyleType!==-1&&(E=this.createFontStyle(s)[0],this.ctx.font=E,this.ctx.fillStyle=Yt(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",S=new jr(n.bounds.left,n.bounds.top+ft(n.styles.paddingTop,n.bounds.width),n.bounds.width,ov(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ya(A.listValue,S),s.letterSpacing,ov(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),U.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(A){return bA(this,void 0,void 0,function(){var n,r,p,s,i,p,a,o,p,l,u,p,d,f,p,B,h,p,y,C,p;return BA(this,function(g){switch(g.label){case 0:if(Gt(A.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(A.element)];case 1:g.sent(),n=0,r=A.negativeZIndex,g.label=2;case 2:return n<r.length?(p=r[n],[4,this.renderStack(p)]):[3,5];case 3:g.sent(),g.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(A.element)];case 6:g.sent(),s=0,i=A.nonInlineLevel,g.label=7;case 7:return s<i.length?(p=i[s],[4,this.renderNode(p)]):[3,10];case 8:g.sent(),g.label=9;case 9:return s++,[3,7];case 10:a=0,o=A.nonPositionedFloats,g.label=11;case 11:return a<o.length?(p=o[a],[4,this.renderStack(p)]):[3,14];case 12:g.sent(),g.label=13;case 13:return a++,[3,11];case 14:l=0,u=A.nonPositionedInlineLevel,g.label=15;case 15:return l<u.length?(p=u[l],[4,this.renderStack(p)]):[3,18];case 16:g.sent(),g.label=17;case 17:return l++,[3,15];case 18:d=0,f=A.inlineLevel,g.label=19;case 19:return d<f.length?(p=f[d],[4,this.renderNode(p)]):[3,22];case 20:g.sent(),g.label=21;case 21:return d++,[3,19];case 22:B=0,h=A.zeroOrAutoZIndexOrTransformedOrOpacity,g.label=23;case 23:return B<h.length?(p=h[B],[4,this.renderStack(p)]):[3,26];case 24:g.sent(),g.label=25;case 25:return B++,[3,23];case 26:y=0,C=A.positiveZIndex,g.label=27;case 27:return y<C.length?(p=C[y],[4,this.renderStack(p)]):[3,30];case 28:g.sent(),g.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},e.prototype.formatPath=function(A){var n=this;A.forEach(function(r,s){var i=Cn(r)?r.start:r;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Cn(r)&&n.ctx.bezierCurveTo(r.startControl.x,r.startControl.y,r.endControl.x,r.endControl.y,r.end.x,r.end.y)})},e.prototype.renderRepeat=function(A,n,r,s){this.path(A),this.ctx.fillStyle=n,this.ctx.translate(r,s),this.ctx.fill(),this.ctx.translate(-r,-s)},e.prototype.resizeImage=function(A,n,r){var s;if(A.width===n&&A.height===r)return A;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=i.createElement("canvas");a.width=Math.max(1,n),a.height=Math.max(1,r);var o=a.getContext("2d");return o.drawImage(A,0,0,A.width,A.height,0,0,n,r),a},e.prototype.renderBackgroundImage=function(A){return bA(this,void 0,void 0,function(){var n,r,s,i,a,o;return BA(this,function(l){switch(l.label){case 0:n=A.styles.backgroundImage.length-1,r=function(u){var d,f,B,I,V,W,H,G,L,h,I,V,W,H,G,y,C,p,g,v,E,S,U,b,L,N,I,q,O,H,G,Z,V,W,z,Ae,j,te,re,ee,ue,ge;return BA(this,function(we){switch(we.label){case 0:if(u.type!==0)return[3,5];d=void 0,f=u.url,we.label=1;case 1:return we.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return d=we.sent(),[3,4];case 3:return we.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return d&&(B=Hh(A,n,[d.width,d.height,d.width/d.height]),I=B[0],V=B[1],W=B[2],H=B[3],G=B[4],L=s.ctx.createPattern(s.resizeImage(d,H,G),"repeat"),s.renderRepeat(I,L,V,W)),[3,6];case 5:eP(u)?(h=Hh(A,n,[null,null,null]),I=h[0],V=h[1],W=h[2],H=h[3],G=h[4],y=XR(u.angle,H,G),C=y[0],p=y[1],g=y[2],v=y[3],E=y[4],S=document.createElement("canvas"),S.width=H,S.height=G,U=S.getContext("2d"),b=U.createLinearGradient(p,v,g,E),sv(u.stops,C).forEach(function(xe){return b.addColorStop(xe.stop,Yt(xe.color))}),U.fillStyle=b,U.fillRect(0,0,H,G),H>0&&G>0&&(L=s.ctx.createPattern(S,"repeat"),s.renderRepeat(I,L,V,W))):tP(u)&&(N=Hh(A,n,[null,null,null]),I=N[0],q=N[1],O=N[2],H=N[3],G=N[4],Z=u.position.length===0?[Dw]:u.position,V=ft(Z[0],H),W=ft(Z[Z.length-1],G),z=YR(u,V,W,H,G),Ae=z[0],j=z[1],Ae>0&&j>0&&(te=s.ctx.createRadialGradient(q+V,O+W,0,q+V,O+W,Ae),sv(u.stops,Ae*2).forEach(function(xe){return te.addColorStop(xe.stop,Yt(xe.color))}),s.path(I),s.ctx.fillStyle=te,Ae!==j?(re=A.bounds.left+.5*A.bounds.width,ee=A.bounds.top+.5*A.bounds.height,ue=j/Ae,ge=1/ue,s.ctx.save(),s.ctx.translate(re,ee),s.ctx.transform(1,0,0,ue,0,0),s.ctx.translate(-re,-ee),s.ctx.fillRect(q,ge*(O-ee)+ee,H,G*ge),s.ctx.restore()):s.ctx.fill())),we.label=6;case 6:return n--,[2]}})},s=this,i=0,a=A.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return i<a.length?(o=a[i],[5,r(o)]):[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(A,n,r){return bA(this,void 0,void 0,function(){return BA(this,function(s){return this.path(Lv(r,n)),this.ctx.fillStyle=Yt(A),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(A,n,r,s){return bA(this,void 0,void 0,function(){var i,a;return BA(this,function(o){switch(o.label){case 0:return n<3?[4,this.renderSolidBorder(A,r,s)]:[3,2];case 1:return o.sent(),[2];case 2:return i=r3(s,r),this.path(i),this.ctx.fillStyle=Yt(A),this.ctx.fill(),a=s3(s,r),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(A){return bA(this,void 0,void 0,function(){var n,r,s,i,a,o,l,u,d=this;return BA(this,function(f){switch(f.label){case 0:return this.applyEffects(A.getEffects(2)),n=A.container.styles,r=!Qs(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=p3(Oi(n.backgroundClip,0),A.curves),r||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Qs(n.backgroundColor)||(this.ctx.fillStyle=Yt(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(A.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(B){d.ctx.save();var h=wd(A.curves),y=B.inset?0:f3,C=A3(h,-y+(B.inset?1:-1)*B.spread.number,(B.inset?1:-1)*B.spread.number,B.spread.number*(B.inset?-2:2),B.spread.number*(B.inset?-2:2));B.inset?(d.path(h),d.ctx.clip(),d.mask(C)):(d.mask(h),d.ctx.clip(),d.path(C)),d.ctx.shadowOffsetX=B.offsetX.number+y,d.ctx.shadowOffsetY=B.offsetY.number,d.ctx.shadowColor=Yt(B.color),d.ctx.shadowBlur=B.blur.number,d.ctx.fillStyle=B.inset?Yt(B.color):"rgba(0,0,0,1)",d.ctx.fill(),d.ctx.restore()}),f.label=2;case 2:a=0,o=0,l=s,f.label=3;case 3:return o<l.length?(u=l[o],u.style!==0&&!Qs(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,a,A.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,a,A.curves,3)];case 6:return f.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,a,A.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,a,A.curves)];case 10:f.sent(),f.label=11;case 11:a++,f.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(A,n,r,s,i){return bA(this,void 0,void 0,function(){var a,o,l,u,d,f,B,h,y,C,p,g,v,E,S,U,S,U;return BA(this,function(b){return this.ctx.save(),a=i3(s,r),o=Lv(s,r),i===2&&(this.path(o),this.ctx.clip()),Cn(o[0])?(l=o[0].start.x,u=o[0].start.y):(l=o[0].x,u=o[0].y),Cn(o[1])?(d=o[1].end.x,f=o[1].end.y):(d=o[1].x,f=o[1].y),r===0||r===2?B=Math.abs(l-d):B=Math.abs(u-f),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(o.slice(0,2)),h=n<3?n*3:n*2,y=n<3?n*2:n,i===3&&(h=n,y=n),C=!0,B<=h*2?C=!1:B<=h*2+y?(p=B/(2*h+y),h*=p,y*=p):(g=Math.floor((B+y)/(h+y)),v=(B-g*h)/(g-1),E=(B-(g+1)*h)/g,y=E<=0||Math.abs(y-v)<Math.abs(y-E)?v:E),C&&(i===3?this.ctx.setLineDash([0,h+y]):this.ctx.setLineDash([h,y])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Yt(A),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Cn(o[0])&&(S=o[3],U=o[0],this.ctx.beginPath(),this.formatPath([new ce(S.end.x,S.end.y),new ce(U.start.x,U.start.y)]),this.ctx.stroke()),Cn(o[1])&&(S=o[1],U=o[2],this.ctx.beginPath(),this.formatPath([new ce(S.end.x,S.end.y),new ce(U.start.x,U.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(A){return bA(this,void 0,void 0,function(){var n;return BA(this,function(r){switch(r.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Yt(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=n3(A),[4,this.renderStack(n)];case 1:return r.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(O_),g3=function(t){return t instanceof E_||t instanceof x_?!0:t instanceof Pw&&t.type!==gd&&t.type!==hd},p3=function(t,e){switch(t){case 0:return wd(e);case 2:return JO(e);case 1:default:return yd(e)}},m3=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},w3=["-apple-system","system-ui"],y3=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return w3.indexOf(e)===-1}):t},B3=function(t){tr(e,t);function e(A,n){var r=t.call(this,A,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return e.prototype.render=function(A){return bA(this,void 0,void 0,function(){var n,r;return BA(this,function(s){switch(s.label){case 0:return n=Ep(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,A),[4,v3(n)];case 1:return r=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Yt(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(r,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(O_),v3=function(t){return new Promise(function(e,A){var n=new Image;n.onload=function(){e(n)},n.onerror=A,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},C3=function(){function t(e){var A=e.id,n=e.enabled;this.id=A,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ec([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ec([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ec([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ec([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),x3=function(){function t(e,A){var n;this.windowBounds=A,this.instanceName="#"+t.instanceCount++,this.logger=new C3({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new jO(this,e)}return t.instanceCount=1,t}(),E3=function(t,e){return e===void 0&&(e={}),F3(t,e)};typeof window<"u"&&D_.setContext(window);var F3=function(t,e){return bA(void 0,void 0,void 0,function(){var A,n,r,s,i,a,o,l,u,d,f,B,h,y,C,p,g,v,E,S,b,U,b,L,N,I,q,O,H,G,Z,V,W,z,Ae,j,te,re,ee,ue;return BA(this,function(ge){switch(ge.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(A=t.ownerDocument,!A)throw new Error("Element is not attached to a Document");if(n=A.defaultView,!n)throw new Error("Document is not attached to a Window");return r={allowTaint:(L=e.allowTaint)!==null&&L!==void 0?L:!1,imageTimeout:(N=e.imageTimeout)!==null&&N!==void 0?N:15e3,proxy:e.proxy,useCORS:(I=e.useCORS)!==null&&I!==void 0?I:!1},s=lp({logging:(q=e.logging)!==null&&q!==void 0?q:!0,cache:e.cache},r),i={windowWidth:(O=e.windowWidth)!==null&&O!==void 0?O:n.innerWidth,windowHeight:(H=e.windowHeight)!==null&&H!==void 0?H:n.innerHeight,scrollX:(G=e.scrollX)!==null&&G!==void 0?G:n.pageXOffset,scrollY:(Z=e.scrollY)!==null&&Z!==void 0?Z:n.pageYOffset},a=new jr(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),o=new x3(s,a),l=(V=e.foreignObjectRendering)!==null&&V!==void 0?V:!1,u={allowTaint:(W=e.allowTaint)!==null&&W!==void 0?W:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:l,copyStyles:l},o.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),d=new Nv(o,t,u),f=d.clonedReferenceElement,f?[4,d.toIFrame(A,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return B=ge.sent(),h=Mw(f)||_O(f)?AH(f.ownerDocument):sf(o,f),y=h.width,C=h.height,p=h.left,g=h.top,v=_3(o,f,e.backgroundColor),E={canvas:e.canvas,backgroundColor:v,scale:(Ae=(z=e.scale)!==null&&z!==void 0?z:n.devicePixelRatio)!==null&&Ae!==void 0?Ae:1,x:((j=e.x)!==null&&j!==void 0?j:0)+p,y:((te=e.y)!==null&&te!==void 0?te:0)+g,width:(re=e.width)!==null&&re!==void 0?re:Math.ceil(y),height:(ee=e.height)!==null&&ee!==void 0?ee:Math.ceil(C)},l?(o.logger.debug("Document cloned, using foreign object rendering"),b=new B3(o,E),[4,b.render(f)]):[3,3];case 2:return S=ge.sent(),[3,5];case 3:return o.logger.debug("Document cloned, element located at "+p+","+g+" with size "+y+"x"+C+" using computed rendering"),o.logger.debug("Starting DOM parsing"),U=b_(o,f),v===U.styles.backgroundColor&&(U.styles.backgroundColor=Dr.TRANSPARENT),o.logger.debug("Starting renderer for element at "+E.x+","+E.y+" with size "+E.width+"x"+E.height),b=new h3(o,E),[4,b.render(U)];case 4:S=ge.sent(),ge.label=5;case 5:return(!((ue=e.removeContainer)!==null&&ue!==void 0)||ue)&&(Nv.destroy(B)||o.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),o.logger.debug("Finished rendering"),[2,S]}})})},_3=function(t,e,A){var n=e.ownerDocument,r=n.documentElement?$a(t,getComputedStyle(n.documentElement).backgroundColor):Dr.TRANSPARENT,s=n.body?$a(t,getComputedStyle(n.body).backgroundColor):Dr.TRANSPARENT,i=typeof A=="string"?$a(t,A):A===null?Dr.TRANSPARENT:4294967295;return e===n.documentElement?Qs(r)?Qs(s)?i:s:r:i};const wa=(t,e)=>{if(!e)return!1;const A=e.split("+").map(i=>i.trim()),n=new Set;let r="";if(A.forEach(i=>{const a=i.toUpperCase();["CTRL","ALT","SHIFT","META"].includes(a)?n.add(a):r=i}),t.key!==r&&t.key.toUpperCase()!==r.toUpperCase())return!1;const s=t.ctrlKey||t.metaKey;if(s!==n.has("CTRL")&&s!==n.has("META")){if(n.has("CTRL")){if(!t.ctrlKey&&!t.metaKey)return!1}else if(t.ctrlKey||t.metaKey)return!1}return!(t.altKey!==n.has("ALT")||t.shiftKey!==n.has("SHIFT"))};function b3(){const[t,e]=x.useState(null),[A,n]=x.useState(!0),[r,s]=x.useState(!1),[i,a]=x.useState(()=>{const w=navigator.userAgent.toLowerCase().includes(" electron/"),m=new URLSearchParams(window.location.search);return!w&&!m.has("boardId")}),[o,l]=x.useState(null),[u,d]=x.useState("Untitled Board"),[f,B]=x.useState(null),[h,y]=x.useState([]),[C,p]=x.useState([]),[g,v]=x.useState("select"),[E,S]=x.useState(!0),[U,b]=x.useState(!1),[L,N]=x.useState(""),[I,q]=x.useState([]),[O,H]=x.useState("idle"),[G,Z]=x.useState(""),[V,W]=x.useState([]),[z,Ae]=x.useState("");x.useEffect(()=>{q(R1())},[]),x.useEffect(()=>{qL(h)},[h]);const[j,te]=x.useState(null),re=(w,m)=>{te({nodeId:w,socketId:m})},ee=()=>{te(null)},[ue,ge]=x.useState({color:"#ffffff",size:5,eraserSize:10}),[we,xe]=x.useState(null),[Re,qe]=x.useState([]),[Ne,ct]=x.useState([]),[gn,pn]=x.useState(null),ke=x.useRef(null),[Xe,Kt]=x.useState(null),[vt,Ce]=x.useState([]),[ze,nA]=x.useState(null),[LA,hA]=x.useState(new Set),[He,Le]=x.useState([]),[oe,qA]=x.useState(null),yr=(w,m)=>{const _=h.find(Q=>Q.id===w);if(!_)return null;const F=24;if(_.type==="generation_node"){if(m==="image-output")return{x:_.x+_.width+F,y:_.y+40};if(m==="text-input")return{x:_.x-F,y:_.y+_.height-40};if(m==="image-input")return{x:_.x-F,y:_.y+_.height-88}}else if(_.type==="prompt_node"){if(m==="text-output")return{x:_.x+_.width+F,y:_.y+40}}else if(_.type==="image"){if(m==="image-input")return{x:_.x-32,y:_.y+32};if(m==="image-output")return{x:_.x+_.width+32,y:_.y+32}}return null},[ZA,EA]=x.useState(!1),[pf,mn]=x.useState([]),[Gl,zo]=x.useState(!1),[Ct,rA]=x.useState({pan:{keys:[],button:"Middle"},zoom:{keys:["Alt"],button:"Right"},zoomWheelModifier:"None",windowDrag:{keys:[],button:"Right"},alwaysOnTop:"CTRL+SHIFT+A",opacity:"CTRL+ALT+O",opacityDrag:{keys:["CTRL","ALT"],button:"Right"},alignItems:"CTRL+A"}),[en,mf]=x.useState({canvasBackgroundColor:"#1f1f1f",canvasBackgroundGradientColor:"#192024",dotPatternColor:"#999999"}),[gA,HA]=x.useState(1),[Br,zr]=x.useState(!1),[he,Ks]=x.useState({x:0,y:0,scale:1,width:0,height:0}),RA=x.useRef(h),_i=x.useRef(he),Go=x.useRef(o),Sn=x.useRef(null),Tn=x.useRef(null),Lt=x.useRef(null),Vo=x.useRef(gA),Gr=x.useRef(null),M=x.useRef({}),Qe=x.useRef(null),Fe=x.useRef(null),Ee=x.useRef(null),_e=x.useRef({x:0,y:0});x.useEffect(()=>{RA.current=h},[h]),x.useEffect(()=>{Vo.current=gA},[gA]),x.useEffect(()=>{_i.current=he},[he]),x.useEffect(()=>{Go.current=o},[o]),x.useEffect(()=>{var w;(w=window.electronAPI)!=null&&w.setOpacity&&window.electronAPI.setOpacity(gA)},[gA]);const{groups:le,createGroup:Ge,updateGroup:Te,updateGroupName:ye,deleteGroup:Ue,addItemToGroup:tt,removeItemFromGroup:Ve,getItemGroup:Ye,setGroups:Oe}=jL(o),{arrows:De,createArrow:Ke,deleteArrow:Je,deleteArrowsForItem:wn,setArrows:Tt}=WL(o);x.useEffect(()=>{o&&o!=="new"&&He.length>0&&Mn(o,"connections",He)},[He,o]),x.useEffect(()=>{o&&o!=="new"?(async()=>{try{const m=await getRemoteData(o);m!=null&&m.connections?Le(m.connections):Le([])}catch(m){console.error("Failed to load connections:",m),Le([])}})():Le([])},[o]);const PA=zL(),[tn,Nn]=x.useState([]),[gt,vr]=x.useState(null),[Ow,wf]=x.useState(null),[Kw,$o]=x.useState(!1),[jw,Xo]=x.useState(!1),[Ww,yf]=x.useState(null),[I3,Vl]=x.useState(!1),[zw,Yo]=x.useState(!1),Jo=x.useRef({}),qo=x.useRef(null),[Vr,kn]=x.useState([]),[wt,An]=x.useState(-1),bi=x.useRef(!1),st=x.useRef(null),[K_,$l]=x.useState(new Set),[Q3,Gw]=x.useState(!1),[U3,j_]=x.useState(null),$t=x.useCallback(()=>{if(bi.current)return;const w={items:JSON.parse(JSON.stringify(h)),groups:JSON.parse(JSON.stringify(le)),arrows:JSON.parse(JSON.stringify(De)),paths:JSON.parse(JSON.stringify(Ne))};kn(m=>{const _=m.slice(0,wt+1);return _.push(w),_.length>50&&_.shift(),_}),An(m=>{const _=m+1;return Math.min(_,49)})},[h,le,De,Ne,wt]),Xl=x.useCallback(w=>{if(!o||o==="new")return;const m={};w.items.forEach(T=>{m[T.id]=T});const _={};w.groups.forEach(T=>{_[T.id]=T});const F={};w.arrows.forEach(T=>{F[T.id]=T});const Q={};w.paths.forEach(T=>{Q[T.id]=T}),DB(o,{items:m,groups:_,arrows:F,paths:Q,boardName:u})},[o,u]),Bf=x.useCallback(()=>{if(wt<0||Vr.length===0)return;bi.current=!0;const w=Vr[wt];w&&(y(w.items),Oe(w.groups),Tt(w.arrows),ct(w.paths),An(m=>m-1),Xl(w)),setTimeout(()=>{bi.current=!1},0)},[Vr,wt,Xl]),vf=x.useCallback(()=>{if(wt>=Vr.length-1)return;bi.current=!0;const w=Vr[wt+1];w&&(y(w.items),Oe(w.groups),Tt(w.arrows),ct(w.paths),An(m=>m+1),Xl(w)),setTimeout(()=>{bi.current=!1},0)},[Vr,wt,Xl]),Vw=x.useCallback(w=>{if(!st.current){const m={items:JSON.parse(JSON.stringify(RA.current)),groups:JSON.parse(JSON.stringify(le)),arrows:JSON.parse(JSON.stringify(De)),paths:JSON.parse(JSON.stringify(Ne))};kn(_=>{const F=_.slice(0,wt+1);return F.push(m),F.length>50?F.slice(1):F}),An(_=>Math.min(_+1,49)),st.current=m}},[le,De,Ne,wt]),W_=x.useCallback(w=>{st.current&&(st.current=null);const m=RA.current.find(_=>_.id===w);m&&o&&o!=="new"&&sA(o,w,m)},[o]),$w=x.useCallback(w=>{if(w.length<=1)return null;const m=h.filter(P=>w.includes(P.id));if(m.length===0)return null;let _=1/0,F=1/0,Q=-1/0,T=-1/0;return m.forEach(P=>{_=Math.min(_,P.x),F=Math.min(F,P.y),Q=Math.max(Q,P.x+P.width),T=Math.max(T,P.y+P.height)}),{x:_,y:F,width:Q-_,height:T-F}},[h]);x.useEffect(()=>{if(C.length>1){const w=$w(C);Kt(w)}else Kt(null)},[C,h,$w]);const Yl=x.useRef(null),z_=x.useCallback(()=>{Yl.current={items:JSON.parse(JSON.stringify(RA.current)),groups:JSON.parse(JSON.stringify(le)),arrows:JSON.parse(JSON.stringify(De)),paths:JSON.parse(JSON.stringify(Ne))}},[le,De,Ne]),G_=x.useCallback((w,m)=>{if(!Xe)return;const _=Xe.x+Xe.width/2,F=Xe.y+Xe.height/2;y(Q=>Q.map(T=>{if(!C.includes(T.id))return T;const P=T.width*w,D=T.height*w,k=T.x-_,R=T.y-F,K=_+k*w,Y=F+R*w;return{...T,x:K,y:Y,width:P,height:D}}))},[Xe,C]),V_=x.useCallback(()=>{if(Yl.current&&(kn(w=>{const m=w.slice(0,wt+1);return m.push(Yl.current),m.length>50?m.slice(1):m}),An(w=>Math.min(w+1,49)),Yl.current=null),o&&o!=="new"){const w=h.filter(m=>C.includes(m.id));w.length>0&&js(o,w)}},[wt,o,h,C]),Jl=x.useRef(null);x.useCallback(()=>{Jl.current={items:JSON.parse(JSON.stringify(RA.current)),groups:JSON.parse(JSON.stringify(le)),arrows:JSON.parse(JSON.stringify(De)),paths:JSON.parse(JSON.stringify(Ne))}},[le,De,Ne]),x.useCallback(w=>{if(!Xe)return;const m=Xe.x+Xe.width/2,_=Xe.y+Xe.height/2,F=w*(Math.PI/180);y(Q=>Q.map(T=>{if(!C.includes(T.id))return T;const P=T.x-m,D=T.y-_,k=P*Math.cos(F)-D*Math.sin(F),R=P*Math.sin(F)+D*Math.cos(F),K=m+k,Y=_+R,J=((T.rotation||0)+w+360)%360;return{...T,x:K,y:Y,rotation:J}}))},[Xe,C]),x.useCallback(()=>{if(Jl.current&&(kn(w=>{const m=w.slice(0,wt+1);return m.push(Jl.current),m.length>50?m.slice(1):m}),An(w=>Math.min(w+1,49)),Jl.current=null),o&&o!=="new"){const w=h.filter(m=>C.includes(m.id));w.length>0&&js(o,w)}},[wt,o,h,C]);const Cf=x.useCallback(()=>{if(C.length<2)return;const w=h.filter($=>C.includes($.id));if(w.length<2)return;const m={items:JSON.parse(JSON.stringify(RA.current)),groups:JSON.parse(JSON.stringify(le)),arrows:JSON.parse(JSON.stringify(De)),paths:JSON.parse(JSON.stringify(Ne))};kn($=>{const ne=$.slice(0,wt+1);return ne.push(m),ne.length>50?ne.slice(1):ne}),An($=>Math.min($+1,49));const _=w.length,F=Math.ceil(Math.sqrt(_)),Q=Math.ceil(_/F),T=[...w].sort(($,ne)=>{const me=$.y-ne.y;return Math.abs(me)>50?me:$.x-ne.x}),P=new Array(F).fill(0),D=new Array(Q).fill(0);T.forEach(($,ne)=>{const me=ne%F,ae=Math.floor(ne/F);P[me]=Math.max(P[me],$.width),D[ae]=Math.max(D[ae],$.height)});const k=20,R=new Array(F).fill(0),K=new Array(Q).fill(0);for(let $=1;$<F;$++)R[$]=R[$-1]+P[$-1]+k;for(let $=1;$<Q;$++)K[$]=K[$-1]+D[$-1]+k;const Y=Math.min(...w.map($=>$.x)),X=Math.min(...w.map($=>$.y)),J=T.map(($,ne)=>{const me=ne%F,ae=Math.floor(ne/F),Be=Y+R[me],pe=X+K[ae];return{...$,x:Be,y:pe}});y($=>$.map(ne=>J.find(ae=>ae.id===ne.id)||ne)),o&&o!=="new"&&J.forEach($=>{sA(o,$.id,$)})},[C,h,le,De,Ne,wt,o]);x.useEffect(()=>{const w=Uw();w&&(e({uid:w.uid,email:w.email,displayName:w.displayName,photoURL:w.photoURL}),n(!1));const m=Sw(_=>{e(_),n(!1)});return()=>m()},[]),x.useEffect(()=>{if(!t)return;const w=k1(_=>{_?console.log("Firebase token updated automatically"):console.warn("Firebase token became null")}),m=setInterval(async()=>{console.log("[Token Refresh] Starting scheduled refresh..."),await ip()?console.log("[Token Refresh] Firebase token refreshed successfully"):console.warn("[Token Refresh] Failed to refresh Firebase auth token");try{const{refreshDriveAccessToken:F}=await or(async()=>{const{refreshDriveAccessToken:P}=await Promise.resolve().then(()=>Ru);return{refreshDriveAccessToken:P}},void 0);await F("145147670860-l0bu8h9lvmf1gjqd09q66g4jbb4i69q2.apps.googleusercontent.com",!1)?console.log("[Token Refresh] Drive token refreshed successfully"):console.warn("[Token Refresh] Drive token refresh returned false (silent refresh may have failed)")}catch(F){console.error("[Token Refresh] Failed to refresh Drive token:",F)}},15*60*1e3);return console.log("[Token Refresh] Initial token refresh on mount..."),ip(),()=>{w(),clearInterval(m)}},[t]),x.useEffect(()=>{const w=async()=>{console.log("Google Auth error detected, attempting to recover session...");try{const{refreshDriveAccessToken:m}=await or(async()=>{const{refreshDriveAccessToken:Q}=await Promise.resolve().then(()=>Ru);return{refreshDriveAccessToken:Q}},void 0);await m("145147670860-l0bu8h9lvmf1gjqd09q66g4jbb4i69q2.apps.googleusercontent.com",!0)?console.log("Session successfully recovered via interactive refresh"):console.warn("Session recovery failed or cancelled by user")}catch(m){console.error("Failed to recover session:",m)}};return window.addEventListener("google_auth_error",w),()=>window.removeEventListener("google_auth_error",w)},[]);const Ii=x.useCallback(async(w=!0)=>{if(!(!t||o===null)){if(h.length===0&&le.length===0&&De.length===0&&Ne.length===0&&He.length===0){console.log("Skipping save: board is empty");return}Gw(!0);try{const m=await Promise.all(h.map(async P=>{var D;if(P.type==="ad")return P;if("src"in P&&(P.type==="image"||P.type==="video")){const k=P;if((D=k.fileName)!=null&&D.toLowerCase().endsWith(".psd")||k.originalFilePath){if(k.driveFileId)return{...k,src:void 0};if(typeof k.src=="string")try{let R;if(k.src.startsWith("blob:")){const J=await(await fetch(k.src)).blob();R=await new Promise($=>{const ne=new FileReader;ne.onloadend=()=>$(ne.result),ne.readAsDataURL(J)})}else if(k.src.startsWith("data:"))R=k.src;else return P;const K=(k.fileName||`psd-${k.id}.png`).replace(/\.psd$/i,".png"),Y=await ns(R,K,!0,o||void 0);return console.log("PSD PNG uploaded/updated to Drive:",Y,K),{...k,driveFileId:Y,src:void 0}}catch(R){return console.error("Failed to upload PSD PNG to Drive:",R),P}return P}if(k.driveFileId)return{...k,src:void 0};if(P.type==="video"&&typeof k.src=="string"&&k.src.startsWith("blob:"))try{const K=await(await fetch(k.src)).blob(),Y=new File([K],k.fileName||`video-${k.id}.mp4`,{type:K.type}),X=k.fileName||`video-${k.id}.mp4`,J=await kg(Y,X,!1,!0,o||void 0);return console.log("Video uploaded to Drive during save:",J),{...k,driveFileId:J,src:void 0}}catch(R){return console.error("Failed to upload video to Drive:",R),P}if(P.type==="image"&&typeof k.src=="string")try{let R;if(k.src.startsWith("blob:")){const J=await(await fetch(k.src)).blob();R=await new Promise($=>{const ne=new FileReader;ne.onloadend=()=>$(ne.result),ne.readAsDataURL(J)})}else if(k.src.startsWith("data:"))R=k.src;else return P;const K=k.fileName||`image-${k.id}.png`,Y=await xa(R,K,o||void 0);return console.log("Image uploaded to Drive during save:",Y),{...k,driveFileId:Y,src:void 0}}catch(R){if(console.error("Failed to upload image to Drive:",R),k.src.startsWith("blob:"))try{const Y=await(await fetch(k.src)).blob(),X=await new Promise(J=>{const $=new FileReader;$.onloadend=()=>J($.result),$.readAsDataURL(Y)});return{...k,src:X}}catch(K){return console.error("Failed to convert blob to base64:",K),P}return P}}return P})),_={version:"2.0",boardId:o,items:m,groups:le,arrows:De,paths:Ne,connections:He};let F;if(w)try{F=(await E3(document.body,{useCORS:!0,allowTaint:!0,scale:.1,backgroundColor:"#111827",ignoreElements:D=>!1})).toDataURL("image/jpeg",.5)}catch(P){console.error("Failed to generate thumbnail:",P)}const T=await Ng(_,u,(o&&o!=="new"?o:f)||void 0,F);(!f||f!==T)&&(B(T),o==="new"&&l(T)),console.log("Board saved:",T,F?"(with thumbnail)":"(no thumbnail)")}catch(m){console.error("Failed to save:",m),alert(" : "+(m instanceof Error?m.message:String(m)))}finally{Gw(!1)}}},[h,le,De,Ne,He,t,o,u,f]);x.useEffect(()=>{if(!(!o||o==="new"||!t))return()=>{}},[h,le,De,Ne,He,o,t,Ii]),x.useEffect(()=>{const w=m=>{o&&o!=="new"&&Ii(!1)};return window.addEventListener("beforeunload",w),()=>window.removeEventListener("beforeunload",w)},[o,Ii]),x.useEffect(()=>{const w=m=>{(m.ctrlKey||m.metaKey)&&m.key==="s"&&(m.preventDefault(),console.log("Manual save triggered (Ctrl+S)"),Ii(!1))};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[Ii]),x.useEffect(()=>{const w=async m=>{if(ZA)return;const _=m.target;if(!(_&&(_.isContentEditable||_.tagName==="INPUT"||_.tagName==="TEXTAREA"))){if(Ct.alwaysOnTop&&wa(m,Ct.alwaysOnTop)&&(m.preventDefault(),window.electronAPI)){const F=await window.electronAPI.toggleAlwaysOnTop();zr(F)}if(Ct.opacity&&wa(m,Ct.opacity)){m.preventDefault();const Q=Vo.current>=.9?.5:1;HA(Q)}Ct.alignItems&&wa(m,Ct.alignItems)&&(m.preventDefault(),Cf())}};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[Ct,ZA,Cf]),x.useEffect(()=>{const w=async m=>{var Q;const _=m.target;if(_&&(_.isContentEditable||_.tagName==="INPUT"||_.tagName==="TEXTAREA"))return;const F=(Q=m.clipboardData)==null?void 0:Q.items;if(F){for(let T=0;T<F.length;T++)if(F[T].type.indexOf("image")!==-1){m.preventDefault();const P=F[T].getAsFile();if(!P)continue;console.log("Pasting image from clipboard:",P.type);const D=new FileReader;D.onload=async k=>{var Y;const R=(Y=k.target)==null?void 0:Y.result,K=new Image;K.onload=()=>{let X,J;const $=_e.current.x,ne=_e.current.y;console.log("Paste using Mouse Pos:",$,ne),$!==0||ne!==0?(X=($-he.x)/he.scale,J=(ne-he.y)/he.scale):(X=(window.innerWidth/2-he.x)/he.scale,J=(window.innerHeight/2-he.y)/he.scale);const me=800;let ae=K.width,Be=K.height;if(ae>me||Be>me){const Se=Math.min(me/ae,me/Be);ae=Math.round(ae*Se),Be=Math.round(Be*Se)}const pe={id:`img-${Date.now()}`,type:"image",src:R,url:R,x:X-ae/2,y:J-Be/2,width:ae,height:Be,zIndex:F.length,rotation:0,flipHorizontal:!1,flipVertical:!1,fileName:`clipboard-${Date.now()}.png`};$t(),y(Se=>[...Se,pe]),o&&o!=="new"&&sA(o,pe.id,pe),console.log("Image pasted successfully:",pe.id)},K.src=R},D.readAsDataURL(P);break}}};return window.addEventListener("paste",w),()=>window.removeEventListener("paste",w)},[he,h.length,o,$t]),x.useEffect(()=>{const w=m=>{_e.current={x:m.clientX,y:m.clientY}};return window.addEventListener("mousemove",w),()=>window.removeEventListener("mousemove",w)},[]),x.useEffect(()=>()=>{},[C,h]),x.useEffect(()=>{var w;return(w=window.electronAPI)!=null&&w.onPSDFileChanged&&window.electronAPI.onPSDFileChanged(async m=>{var T,P;console.log("PSD file changed event received:",m.path);const _=D=>D.replace(/\\/g,"/").toLowerCase(),F=_(m.path),Q=h.find(D=>{const k=D.originalFilePath;return k?_(k)===F:!1});if(Q&&((T=Q.fileName)!=null&&T.toLowerCase().endsWith(".psd"))){console.log("Found matching PSD item:",Q.fileName,"Updating...");try{if(await new Promise(D=>setTimeout(D,500)),(P=window.electronAPI)!=null&&P.readPSDFile){const D=await window.electronAPI.readPSDFile(m.path);if(D.success&&D.data){const k=new File([D.data],Q.fileName||"image.psd",{type:"application/octet-stream"}),{convertPSDToImage:R}=await or(async()=>{const{convertPSDToImage:Y}=await import("./psdParser-DX-W7wsa.js");return{convertPSDToImage:Y}},[]),K=await R(k);if(K){let Y=Q.driveFileId;try{const X=(Q.fileName||`psd-${Q.id}.png`).replace(/\.psd$/i,".png");Y=await ns(K,X,!0,o||void 0),console.log("PSD PNG updated in Drive:",Y,X)}catch(X){console.error("Failed to update PSD PNG in Drive:",X)}y(X=>X.map(J=>{if(J.id===Q.id){const $={...J,src:K,driveFileId:Y};return o&&o!=="new"&&sA(o,Q.id,{src:K,driveFileId:Y}),$}return J})),console.log("PSD file updated successfully:",Q.fileName)}else console.warn("Failed to convert PSD to image")}else console.error("Failed to read PSD file:",D.error)}}catch(D){console.error("Failed to update PSD file:",D)}}else console.warn("No matching PSD item found for path:",m.path)}),()=>{var m;(m=window.electronAPI)!=null&&m.removePSDFileChangedListener&&window.electronAPI.removePSDFileChangedListener()}},[h,o]),x.useEffect(()=>{async function w(){if(o&&o!=="new"){if(o===f)return;try{const m=await Jx(o);if(m.items){const _=await Promise.all(m.items.map(async F=>{const Q={...F};if(Q.src&&typeof Q.src=="string"&&Q.src.startsWith("blob:")&&(Q.src=void 0),Q.url&&typeof Q.url=="string"&&Q.url.startsWith("blob:")&&(Q.url=void 0),(Q.type==="image"||Q.type==="video")&&Q.driveFileId){let P=null;for(let D=0;D<3;D++)try{const k=await Wn(Q.driveFileId);return{...Q,src:k,url:k}}catch(k){P=k;const R=500*Math.pow(2,D);D<2&&(console.warn(`Drive load failed (attempt ${D+1}/3), retrying in ${R}ms:`,Q.id),await new Promise(K=>setTimeout(K,R)))}return console.error("Failed to load media from Drive after retries:",{itemId:Q.id,error:P instanceof Error?P.message:String(P)}),{...Q,url:"",src:""}}return Q}));y(_),_.forEach(async F=>{var Q,T;if(F.type==="image"&&((Q=F.fileName)!=null&&Q.toLowerCase().endsWith(".psd"))&&F.originalFilePath&&(T=window.electronAPI)!=null&&T.watchPSDFile)try{await window.electronAPI.watchPSDFile(F.originalFilePath),console.log("Started watching PSD file:",F.originalFilePath)}catch{console.log("PSD file not found on this computer (expected on different computers):",F.originalFilePath)}})}if(m.groups){const _=m.groups.map(F=>({...F,childIds:Array.isArray(F.childIds)?F.childIds:[]}));Oe(_)}m.arrows&&Tt(m.arrows),m.paths&&ct(m.paths),m.connections?(console.log("Loading connections from board:",m.connections),Le(Array.isArray(m.connections)?m.connections:Object.values(m.connections))):console.log("No connections found in board data"),kn([]),An(-1),m.name&&d(m.name),B(o),console.log("Board loaded:",m),console.log("Connections in board data:",m.connections);try{const{getOrCreateBoardImagesFolder:_}=await or(async()=>{const{getOrCreateBoardImagesFolder:F}=await Promise.resolve().then(()=>nU);return{getOrCreateBoardImagesFolder:F}},void 0);await _(o,m.name||u),console.log(`Ensured images folder exists for board: ${m.name||u}`)}catch(_){console.warn("Failed to ensure images folder exists:",_)}try{const _=`backup_${o}`,F=localStorage.getItem(_);if(F){const Q=JSON.parse(F);if(Q.items&&Array.isArray(Q.items)){console.log("Found local backup, restoring to ensure latest state...");const T=Q.items.map(P=>{if(P.src&&P.src.startsWith("blob:")&&(m!=null&&m.items)){const D=m.items.find(k=>k.id===P.id);if(D&&D.src&&!D.src.startsWith("blob:"))return console.log(`Recovered src for item ${P.id} from cloud data`),{...P,src:D.src}}return P});y(T),Q.groups&&Oe(Q.groups),Q.arrows&&Tt(Q.arrows),Q.paths&&ct(Q.paths),Q.connections&&Le(Q.connections)}}}catch(_){console.error("Failed to restore from backup:",_)}}catch(m){console.error("Failed to load board:",m)}}else if(o==="new"){y([]),Oe([]),Tt([]),ct([]),B(null);try{const _=await Ng({version:"2.0",boardId:"new",items:[],groups:[],arrows:[],paths:[]},u,void 0);B(_),l(_),console.log("Empty board created and saved:",_)}catch(m){console.error("Failed to create empty board:",m)}}}w()},[o]);const Xw=x.useCallback(w=>{const m=w.get("boardId"),_=w.get("x"),F=w.get("y"),Q=w.get("scale"),T=w.get("name");if(m&&_&&F){if(console.log("Deep link processing:",{boardIdParam:m,x:_,y:F,scale:Q,name:T}),m!==o){Go.current!==m&&(console.log(`Switching board for deep link: ${o} -> ${m}`),l(m));return}setTimeout(()=>{const P=parseFloat(_),D=parseFloat(F),k=Q?parseFloat(Q):1;if(Ks(R=>({...R,scale:k})),nA({x:P,y:D}),T){const R=decodeURIComponent(T);Ce(K=>{if(K.some(ne=>Math.abs(ne.x-P)<1&&Math.abs(ne.y-D)<1&&ne.name===R))return K;const X=w.get("targetId");let J=null;X&&(J=X,console.log("Deep link target ID set (blind trust):",X));const $={id:Date.now().toString(),name:R,targetId:J,x:P,y:D,scale:k};return console.log("Shared bookmark auto-saved:",$),o&&o!=="new"&&setTimeout(()=>{Mn(o,"bookmarks",[...K,$])},500),[...K,$]})}},1e3)}},[o]);x.useEffect(()=>{const w=new URLSearchParams(window.location.search),m=w.get("boardId"),_=w.get("x"),F=w.get("y"),Q=w.get("scale"),T=w.get("name");if(m&&_&&F){if(console.log("Bookmark URL detected:",{boardIdParam:m,x:_,y:F,scale:Q,name:T}),m!==o){Go.current!==m&&l(m);return}setTimeout(()=>{const P=parseFloat(_),D=parseFloat(F),k=Q?parseFloat(Q):1;if(Ks(R=>({...R,scale:k})),nA({x:P,y:D}),T){const R=decodeURIComponent(T);Ce(K=>{if(K.some(J=>Math.abs(J.x-P)<1&&Math.abs(J.y-D)<1&&J.name===R))return K;const X={id:Date.now().toString(),name:R,targetId:null,x:P,y:D,scale:k};return console.log("Shared bookmark auto-saved:",X),o&&o!=="new"&&setTimeout(()=>{Mn(o,"bookmarks",[...K,X])},500),[...K,X]})}},1e3)}},[o]),x.useEffect(()=>{var w;(w=window.electronAPI)!=null&&w.onDeepLink&&window.electronAPI.onDeepLink(m=>{console.log("Electron deep link received:",m);try{const F=new URL(m).searchParams;if(console.log("Parsed params:",Object.fromEntries(F.entries())),!F.get("boardId")||!F.get("x")||!F.get("y")){console.warn("Deep link missing required params");return}Xw(F)}catch(_){console.error("Failed to parse Electron deep link:",_),alert(`DEBUG: Deep Link Parse Error
`+_.message)}})},[Xw]),x.useEffect(()=>{if(!t||!o||o==="new")return;const w=RL(o,mn),m=KL(o,F=>{const Q=F.map(T=>({...T,url:T.url||T.src}));y(T=>{const P=new Map(T.map(R=>[R.id,R]));new Map(Q.map(R=>[R.id,R]));const D=[],k=Q.map(R=>{var Y;const K=P.get(R.id);if(K&&K.url&&!R.url)return{...R,url:K.url};if(R.driveFileId&&t){const X=(Y=R.url)==null?void 0:Y.startsWith("blob:"),J=!R.url;R.type==="video"||(X||J)&&D.push(R.id)}return K&&K.url&&!R.url?{...R,url:K.url}:R});if(D.length>0){const R=new Set;window.hydratedItems||(window.hydratedItems=new Set);const K=3,Y=X=>new Promise(J=>setTimeout(J,X));(async()=>{for(let X=0;X<D.length;X+=K){const J=D.slice(X,X+K);await Promise.all(J.map(async $=>{if(window.hydratedItems.has($)||R.has($))return;R.add($);const ne=k.find(ae=>ae.id===$);if(!ne||!ne.driveFileId){R.delete($);return}if((ne.url||"").startsWith("http")){window.hydratedItems.add($),R.delete($);return}try{const ae=ne.type==="video",Be=await Wn(ne.driveFileId,!1,ae);y(pe=>pe.map(Se=>Se.id===$?{...Se,url:Be,src:Be}:Se)),window.hydratedItems.add($)}catch(ae){console.warn("Hydration failed for:",$,ae)}finally{R.delete($)}})),X+K<D.length&&await Y(100)}})()}return Q.forEach(R=>{R.type==="ad"&&R.id!=="ad-banner"&&(console.log(`[Cleanup] Deleting duplicate ad: ${R.id} from board ${o}`),HB(o,R.id))}),k})},F=>{const Q=F.map(T=>({...T,childIds:Array.isArray(T.childIds)?T.childIds:[]}));Oe(Q)},F=>Tt(F),F=>ct(F),F=>{F&&F.length>0&&Le(F)});PL(o,t.uid,t.displayName||"Unknown",t.email||"");const _=F=>{kB(o,t.uid,t.displayName||"Unknown",t.email||"",F.clientX,F.clientY)};return window.addEventListener("mousemove",_),()=>{w(),m(),ML(o),window.removeEventListener("mousemove",_)}},[t,o]);const Xt=x.useCallback(()=>{vr(null)},[]),Ar=async w=>{if(w.startsWith("data:"))return w;try{const _=await(await fetch(w)).blob();return new Promise((F,Q)=>{const T=new FileReader;T.onloadend=()=>F(T.result),T.onerror=Q,T.readAsDataURL(_)})}catch(m){return console.error("Failed to convert media to base64:",m),w}},Yw=w=>{if(w.startsWith("blob:"))return w;if(w.startsWith("data:"))try{const m=w.match(/^data:([^;]+);base64,(.+)$/);if(m){const _=m[1],F=m[2],Q=atob(F),T=new Array(Q.length);for(let k=0;k<Q.length;k++)T[k]=Q.charCodeAt(k);const P=new Uint8Array(T),D=new Blob([P],{type:_});return URL.createObjectURL(D)}}catch(m){console.error("Failed to convert base64 to blob URL:",m)}return w},Jw=x.useCallback(async()=>{var _;const m={version:"1.0",items:await Promise.all(h.map(async F=>{if(F.type==="image"||F.type==="video"){const Q=await Ar(F.src);return{...F,src:Q}}return F})),groups:le,arrows:De,paths:Ne,settings:Ct,penSettings:ue};if((_=window.electronAPI)!=null&&_.saveFile){const F=await window.electronAPI.saveFile(m);F.success?(console.log("Board saved to:",F.path),o&&o!=="new"&&DB(o,m)):F.canceled||console.error("Save failed:",F.error)}Xt()},[h,le,De,Ne,He,Ct,ue,Xt,o]),qw=x.useCallback(async()=>{var _;const m={version:"1.0",items:await Promise.all(h.map(async F=>{if(F.type==="image"||F.type==="video"){if(F.type==="video"&&F.driveFileId)return F;const Q=F.url||F.src;if(Q){const T=await Ar(Q);return{...F,url:T,src:void 0}}}return F})),groups:le,arrows:De,paths:Ne,settings:Ct,penSettings:ue};if((_=window.electronAPI)!=null&&_.saveFileAs){const F=await window.electronAPI.saveFileAs(m);F.success?console.log("Board saved to:",F.path):F.canceled||console.error("Save as failed:",F.error)}Xt()},[h,le,De,Ne,He,Ct,ue,Xt]),Zw=x.useCallback(async()=>{var w;if((w=window.electronAPI)!=null&&w.openFile){const m=await window.electronAPI.openFile();if(m.success&&m.data){const _=m.data;if(_.items){const F=await Promise.all(_.items.map(async Q=>{let T=Q.url||Q.src;if(T&&T.startsWith("data:")&&(T=Yw(T)),Q.driveFileId&&t)try{T=await Wn(Q.driveFileId,!1)}catch(P){console.warn("Failed to restore item from Drive:",Q.driveFileId,P)}return{...Q,url:T,src:T}}));y(F)}_.groups&&Oe(_.groups),_.arrows&&Tt(_.arrows),_.paths&&ct(_.paths),_.settings&&rA(_.settings),_.penSettings&&ge(_.penSettings),p([]),Nn([]),console.log("Board loaded from:",m.path)}else m.canceled||console.error("Load failed:",m.error)}Xt()},[Oe,Tt,Xt,t]),e0=x.useCallback(async w=>{try{const m=await w.text(),_=JSON.parse(m);if(_.items){const F=await Promise.all(_.items.map(async Q=>{let T=Q.url||Q.src;if(T&&T.startsWith("data:")&&(T=Yw(T)),Q.driveFileId&&t)try{T=await Wn(Q.driveFileId,!1)}catch(P){console.warn("Failed to restore item from Drive:",Q.driveFileId,P)}return{...Q,url:T,src:T}}));y(F)}_.groups&&Oe(_.groups),_.arrows&&Tt(_.arrows),_.paths&&ct(_.paths),_.connections&&Le(_.connections),_.settings&&rA(_.settings),_.penSettings&&ge(_.penSettings),p([]),Nn([]),console.log("Board loaded from file:",w.name)}catch(m){console.error("Failed to load board file:",m)}},[Oe,Tt,t]),Zo=x.useCallback(async w=>{var Q,T,P;w&&(w.preventDefault(),w.stopPropagation());const m=async(D,k=`pasted-image-${Date.now()}.png`)=>{const R=new File([D],k,{type:D.type});let K=URL.createObjectURL(R),Y,X;const J=_e.current.x,$=_e.current.y;console.log("Blob Paste using Mouse Pos:",J,$),J!==0||$!==0?(Y=(J-he.x)/he.scale-150,X=($-he.y)/he.scale-100):(Y=(window.innerWidth/2-he.x)/he.scale-150,X=(window.innerHeight/2-he.y)/he.scale-100);let ne;if(t)try{const ae=await Ar(K);ne=await xa(ae,R.name,o||void 0,u),console.log("Pasted image uploaded to Drive:",ne),K=ae}catch(ae){console.error("Failed to upload pasted image to Drive:",ae),K=await Ar(K)}else K=await Ar(K);const me={id:`image-${Date.now()}`,type:"image",src:K,url:K,x:Y,y:X,width:300,height:200,zIndex:h.length+1,fileName:R.name,driveFileId:ne,rotation:0,flipHorizontal:!1,flipVertical:!1};$t(),y(ae=>[...ae,me]),p([me.id]),o&&o!=="new"&&sA(o,me.id,me),console.log("Pasted image from clipboard"),Xt()},_=async(D,k,R)=>{var me;const K=(me=document.querySelector(".canvas-content"))==null?void 0:me.getBoundingClientRect(),Y=K?K.width/2-150:100,X=K?K.height/2-100:100;let J,$=D;if(t)try{J=await xa(D,`pasted-image-${Date.now()}.png`,o||void 0,u),console.log("Pasted image uploaded to Drive:",J)}catch(ae){console.error("Failed to upload pasted image to Drive:",ae)}const ne={id:`image-${Date.now()}`,type:"image",src:$,url:$,x:Y,y:X,width:k,height:R,zIndex:h.length+1,fileName:`pasted-image-${Date.now()}.png`,driveFileId:J,rotation:0,flipHorizontal:!1,flipVertical:!1};$t(),y(ae=>[...ae,ne]),p([ne.id]),o&&o!=="new"&&sA(o,ne.id,ne),console.log("Pasted image from Electron clipboard"),Xt()};if(Re.length>0){const D=await Promise.all(Re.map(async(k,R)=>{const K={...k,id:`${k.type}-${Date.now()}-${R}`,x:k.x+20,y:k.y+20,zIndex:h.length+R+1};if(K.type==="image"){const Y=K;if(Y.originalFilePath&&Y.originalFilePath.length>0&&Y.src&&typeof Y.src=="string")try{let J;if(Y.src.startsWith("blob:")){const ae=await(await fetch(Y.src)).blob();J=await new Promise(Be=>{const pe=new FileReader;pe.onloadend=()=>Be(pe.result),pe.readAsDataURL(ae)})}else if(Y.src.startsWith("data:"))J=Y.src;else return K;const $=(Y.fileName||`psd-${Y.id}.png`).replace(/\.psd$/i,".png"),ne=await ns(J,$,!1,o||void 0);return console.log("Pasted PSD PNG uploaded to Drive:",ne,$),{...Y,driveFileId:ne,src:J,originalFilePath:void 0}}catch(J){return console.error("Failed to upload pasted PSD PNG to Drive:",J),K}else return{...Y,originalFilePath:void 0}}return K}));$t(),y(k=>[...k,...D]),p(D.map(k=>k.id)),D.forEach(k=>{delete M.current[k.id]}),o&&o!=="new"&&js(o,D),console.log("Pasted",D.length,"items from internal clipboard"),qe([]),Xt();return}if((Q=window.electronAPI)!=null&&Q.readClipboardImage)try{console.log("Attempting to read image from Electron clipboard API...");const D=await window.electronAPI.readClipboardImage();if(D.success&&D.data){console.log("Successfully read image from Electron clipboard:",D.width,"x",D.height),await _(D.data,D.width||300,D.height||200);return}}catch(D){console.log("Failed to read image from Electron clipboard API:",D)}if(w!=null&&w.clipboardData){const D=w.clipboardData.items;for(let k=0;k<D.length;k++){const R=D[k];if(R.type.indexOf("image")!==-1){const K=R.getAsFile();if(K){console.log("Found image in clipboard event data:",R.type,K.size),await m(K);return}}}}if(window.navigator.clipboard&&typeof window.navigator.clipboard.read=="function")try{console.log("Attempting to read image from clipboard API...");const D=await navigator.clipboard.read();console.log("Clipboard items:",D.length);for(const k of D){console.log("Clipboard item types:",k.types);for(const R of k.types)if(R.startsWith("image/")){console.log("Found image type in clipboard:",R);const K=await k.getType(R);if(K){console.log("Successfully read image blob:",K.size,"bytes");const Y=R.split("/")[1]||"png";await m(K,`pasted-image-${Date.now()}.${Y}`);return}}}}catch(D){console.log("Failed to read image from clipboard API:",D)}let F=(T=w==null?void 0:w.clipboardData)==null?void 0:T.getData("text/plain");if(!F&&window.navigator.clipboard)try{F=await navigator.clipboard.readText()}catch(D){console.warn("Failed to read text from clipboard:",D)}if(F&&F.trim().length>0){const D=(P=document.querySelector(".canvas-content"))==null?void 0:P.getBoundingClientRect(),k=D?D.width/2-100:100,R=D?D.height/2-25:100,Y=Math.max(8,Math.min(200,16/he.scale)),X={id:`text-${Date.now()}`,type:"text",content:F,x:k,y:R,width:200,height:50,fontSize:Y,color:"#ffffff",fontFamily:"Inter, sans-serif",zIndex:h.length+1};$t(),y(J=>[...J,X]),p([X.id]),$l(J=>new Set(J).add(X.id)),o&&o!=="new"&&sA(o,X.id,X),console.log("Pasted text from clipboard"),Xt();return}Xt()},[Re,h.length,Xt,o,$t,t,Ar,qe,y,p,$l,sA,js,E]);x.useEffect(()=>{const w=m=>{const _=m.target;_&&(_.isContentEditable||_.tagName==="INPUT"||_.tagName==="TEXTAREA")||(m.key==="u"||m.key==="U")&&!m.ctrlKey&&!m.metaKey&&!m.altKey&&!m.shiftKey&&(m.preventDefault(),console.log("UseEffect Toggle UI Triggered"),S(F=>!F))};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[]),x.useEffect(()=>{const w=m=>{if(console.log("Key:",m.key,"Ctrl:",m.ctrlKey,"Settings:",ZA,"Target:",m.target),ZA)return;const _=m.target;if(!(_&&(_.isContentEditable||_.tagName==="INPUT"||_.tagName==="TEXTAREA"))){if((m.ctrlKey||m.metaKey)&&(m.key==="s"||m.key==="S")&&!m.shiftKey){m.preventDefault(),m.stopPropagation(),Jw();return}if((m.ctrlKey||m.metaKey)&&m.shiftKey&&(m.key==="s"||m.key==="S")){m.preventDefault(),m.stopPropagation(),qw();return}if((m.ctrlKey||m.metaKey)&&(m.key==="o"||m.key==="O")){m.preventDefault(),m.stopPropagation(),Zw();return}if((m.ctrlKey||m.metaKey)&&(m.key==="c"||m.key==="C")){if(m.preventDefault(),m.stopPropagation(),C.length>0){const F=h.filter(Q=>C.includes(Q.id));if(qe(F),console.log("Copied",F.length,"items"),C.length===1){const Q=h.find(T=>T.id===C[0]);Q&&Q.type==="image"&&(async()=>{var T;try{const P=Q.src||Q.url;if(!P)return;if(console.log("Attempting to copy image to system clipboard:",P),(T=window.electronAPI)!=null&&T.copyImageToClipboard)try{let R=P;if(P.startsWith("blob:")){console.log("Converting blob URL to base64 for IPC...");const X=await(await fetch(P)).blob();R=await new Promise(J=>{const $=new FileReader;$.onloadend=()=>J($.result),$.readAsDataURL(X)})}console.log("Using Electron Native Clipboard Copy...");const K=await window.electronAPI.copyImageToClipboard(R);if(K.success){console.log("Image copied via Electron:",Q.id);return}else console.warn("Electron copy failed, falling back to Web API:",K.error)}catch(R){console.error("IPC preparation failed:",R)}const D=await fetch(P);if(!D.ok)throw new Error(`Fetch failed: ${D.statusText}`);const k=await D.blob();k&&(await navigator.clipboard.write([new ClipboardItem({[k.type]:k})]),console.log("Image copied to system clipboard (Web API):",Q.id))}catch(P){console.error("Failed to copy image to system clipboard:",P),alert("  : "+(P instanceof Error?P.message:String(P)))}})()}}return}if((m.ctrlKey||m.metaKey)&&(m.key==="v"||m.key==="V")){m.preventDefault(),m.stopPropagation(),Zo();return}if((m.ctrlKey||m.metaKey)&&(m.key==="z"||m.key==="Z")&&!m.shiftKey){m.preventDefault(),m.stopPropagation(),Bf();return}if((m.ctrlKey||m.metaKey)&&(m.key==="y"||m.key==="Y"||m.shiftKey&&(m.key==="z"||m.key==="Z"))){m.preventDefault(),m.stopPropagation(),vf();return}if((m.ctrlKey||m.metaKey)&&(m.key==="g"||m.key==="G")){if(m.preventDefault(),m.stopPropagation(),C.length>=2){const F=h.filter(Q=>C.includes(Q.id));F.length>=2&&(Ge(C,F),p([]))}return}if((m.key==="ArrowLeft"||m.key==="ArrowRight")&&C.length===1){const F=h.find(Q=>Q.id===C[0]);if(F&&F.type==="video"){m.preventDefault(),m.stopPropagation();const Q=document.querySelector(`[data-item-id="${F.id}"] video`);if(Q){const T=.03333333333333333;m.key==="ArrowLeft"?Q.currentTime=Math.max(0,Q.currentTime-T):Q.currentTime=Math.min(Q.duration||0,Q.currentTime+T)}return}}if(m.key==="Delete"||m.key==="Backspace"){const F=h.filter(T=>C.includes(T.id)&&T.type!=="ad"),Q=F.map(T=>T.id);Q.length>0?(m.preventDefault(),m.stopPropagation(),$t(),F.forEach(T=>{if((T.type==="image"||T.type==="video")&&"driveFileId"in T&&T.driveFileId){const P=T.driveFileId,D=h.filter(k=>k.id!==T.id&&!Q.includes(k.id)&&(k.type==="image"||k.type==="video")&&"driveFileId"in k&&k.driveFileId===P);D.length===0?Pu(P).catch(k=>{console.error("Failed to delete image from Drive:",k)}):console.log(`Skipping Drive deletion for ${P}: ${D.length} other items are using this file`)}}),y(T=>T.filter(P=>!Q.includes(P.id))),Q.forEach(T=>{T.startsWith("group-")&&Ue(T),wn(T),o&&o!=="new"&&HB(o,T)}),p([])):tn.length>0&&(m.preventDefault(),m.stopPropagation(),$t(),tn.forEach(T=>Je(T)),Nn([]));return}if(g==="pen"||g==="eraser"){const F=Ct.brushSizeDecrease?wa(m,Ct.brushSizeDecrease):m.key==="[",Q=Ct.brushSizeIncrease?wa(m,Ct.brushSizeIncrease):m.key==="]";if(F){m.preventDefault(),m.stopPropagation(),ge(g==="pen"?T=>({...T,size:Math.max(1,T.size-1)}):T=>({...T,eraserSize:Math.max(1,T.eraserSize-1)}));return}if(Q){m.preventDefault(),m.stopPropagation(),ge(g==="pen"?T=>({...T,size:Math.min(50,T.size+1)}):T=>({...T,eraserSize:Math.min(50,T.eraserSize+1)}));return}}!m.ctrlKey&&!m.metaKey&&(m.key.toLowerCase()==="v"&&v("select"),m.key.toLowerCase()==="t"&&v("text"),m.key.toLowerCase()==="a"&&v("arrow"),m.key.toLowerCase()==="p"&&v("pen"),m.key.toLowerCase()==="e"&&v("eraser"))}};return document.addEventListener("keydown",w,!0),window.addEventListener("keydown",w,!0),()=>{document.removeEventListener("keydown",w,!0),window.removeEventListener("keydown",w,!0)}},[h,C,Re,ZA,Vr,wt,Jw,qw,Zw,Zo,Bf,vf,Ge,qe,p,$t,E]),x.useEffect(()=>{const w=m=>{const _=m.target;_&&(_.isContentEditable||_.tagName==="INPUT"||_.tagName==="TEXTAREA")||ZA||Zo(m)};return document.addEventListener("paste",w),()=>{document.removeEventListener("paste",w)}},[Zo,ZA]);const $_=x.useCallback(w=>{w.preventDefault(),w.stopPropagation();const m=Array.from(w.dataTransfer.files),_=m.filter(Y=>Y.name.endsWith(".refboard")||Y.type==="application/json");if(_.length>0){e0(_[0]);return}const F=m.filter(Y=>{const X=Y.name.toLowerCase(),J=Y.type.startsWith("image/"),$=Y.type.startsWith("video/")||X.endsWith(".mp4")||X.endsWith(".webm")||X.endsWith(".mov")||X.endsWith(".avi")||X.endsWith(".mkv"),ne=X.endsWith(".psd");return J||$||ne});if(F.length===0)return;const Q=Math.ceil(Math.sqrt(F.length)),T=300,P=200,D=0;let k,R;w.canvasX!==void 0&&w.canvasY!==void 0?(k=w.canvasX,R=w.canvasY):(k=w.clientX,R=w.clientY),(async()=>{const Y=await Promise.all(F.map(async(X,J)=>{var nn,rn,OA,$r;const $=X.name.toLowerCase(),ne=$.endsWith(".psd"),me=X.type.startsWith("image/")||ne;let ae=X;const Be=$.split(".").pop();if(X.type===""&&Be){let ve="";Be==="mp4"?ve="video/mp4":Be==="webm"?ve="video/webm":Be==="mov"?ve="video/quicktime":Be==="avi"?ve="video/x-msvideo":Be==="mkv"&&(ve="video/x-matroska"),ve&&(ae=new File([X],X.name,{type:ve}))}let pe=URL.createObjectURL(ae),Se;const Ze=X.type.startsWith("video/")||$.endsWith(".mp4")||$.endsWith(".webm")||$.endsWith(".mov")||$.endsWith(".avi")||$.endsWith(".mkv");if((me||Ze)&&!ne&&t)try{if(Ze){if(Se=await kg(X,X.name,!1,!0,o||void 0,u),!Se||Se.trim()==="")throw new Error("Video upload failed: No file ID returned");console.log("Video uploaded to Drive:",Se,"File:",X.name)}else{const ve=await Ar(pe);Se=await xa(ve,X.name,o||void 0,u),console.log("Image uploaded to Drive:",Se)}if(Se)try{const ve=await Wn(Se,!1,Ze);if(ve){console.log("Replacing blob URL with Drive URL for sync:",ve);const jt=pe;URL.revokeObjectURL(jt),pe=ve}}catch(ve){console.warn("Failed to fetch Drive URL after upload, falling back to blob/base64:",ve)}}catch(ve){if(console.error("Failed to upload media to Drive:",ve),!Ze)try{pe=await Ar(pe)}catch(jt){console.error("Failed to convert dropped file to base64:",jt)}}else if(!ne&&!Ze)try{pe=await Ar(pe)}catch(ve){console.error("Failed to convert dropped file to base64:",ve)}let xt;if(ne){let ve;if((nn=window.electronAPI)!=null&&nn.getPathForFile)try{ve=window.electronAPI.getPathForFile(X),console.log("Got path via webUtils:",ve)}catch(jt){console.warn("Failed to get path via webUtils:",jt)}if(!ve&&X.path&&(ve=X.path,console.log("Got path via file.path:",ve)),ve&&typeof ve=="string")xt=ve,console.log("PSD file original path:",ve),(rn=window.electronAPI)!=null&&rn.watchPSDFile&&await window.electronAPI.watchPSDFile(ve);else if((OA=window.electronAPI)!=null&&OA.savePSDFile)try{const jt=await X.arrayBuffer(),Ht=await window.electronAPI.savePSDFile(jt,X.name);Ht.success&&Ht.path?(xt=Ht.path,console.log("PSD file saved to temp:",Ht.path,"for file:",X.name),($r=window.electronAPI)!=null&&$r.watchPSDFile&&await window.electronAPI.watchPSDFile(Ht.path)):console.error("Failed to save PSD file:",Ht.error)}catch(jt){console.error("Failed to save PSD file:",jt)}else console.warn("PSD file detected but savePSDFile API not available")}if(ne&&t)try{const{convertPSDToImage:ve}=await or(async()=>{const{convertPSDToImage:Ht}=await import("./psdParser-DX-W7wsa.js");return{convertPSDToImage:Ht}},[]),jt=await ve(X);if(jt){pe=jt;try{const Ht=X.name.replace(/\.psd$/i,".png");Se=await ns(jt,Ht,!0,o||void 0,u),console.log("PSD converted to PNG and uploaded to Drive:",Se,Ht)}catch(Ht){console.error("Failed to upload PSD PNG to Drive:",Ht)}}}catch(ve){console.error("Failed to convert PSD to image:",ve)}let bt=T,At=P;if(me&&pe)try{const ve=await new Promise((jt,Ht)=>{const Dn=new Image;Dn.onload=()=>jt({width:Dn.naturalWidth,height:Dn.naturalHeight}),Dn.onerror=()=>Ht(new Error("Failed to load image")),Dn.src=pe});bt=ve.width,At=ve.height}catch(ve){console.warn("Failed to get image dimensions, using defaults:",ve)}else if(Ze&&pe)try{const ve=await new Promise((jt,Ht)=>{const Dn=document.createElement("video");Dn.onloadedmetadata=()=>jt({width:Dn.videoWidth,height:Dn.videoHeight}),Dn.onerror=()=>Ht(new Error("Failed to load video")),Dn.src=pe});bt=ve.width,At=ve.height}catch(ve){console.warn("Failed to get video dimensions, using defaults:",ve)}const pA=J%Q,MA=Math.floor(J/Q),FA=pA*(bt+D),Cr=MA*(At+D);return{id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}-${J}`,type:me?"image":"video",url:pe,driveFileId:Se,fileName:X.name,originalFilePath:xt,x:k+FA,y:R+Cr,width:bt,height:At,zIndex:h.length+J+1,rotation:0,flipHorizontal:!1,flipVertical:!1}}));$t(),y(X=>[...X,...Y]),o&&o!=="new"&&js(o,Y)})()},[h,e0,Ar,o,$t]),X_=w=>{var m;if(!(typeof w.canvasX!="number"||typeof w.canvasY!="number"||isNaN(w.canvasX)||isNaN(w.canvasY))){if(g==="text"){let _,F;if(w.canvasX!==void 0&&w.canvasY!==void 0&&!isNaN(w.canvasX)&&!isNaN(w.canvasY))_=w.canvasX,F=w.canvasY;else{console.warn("Canvas click without transformed coordinates");const D=w.currentTarget.getBoundingClientRect();_=w.clientX-D.left,F=w.clientY-D.top}const T=Math.max(8,Math.min(200,16/he.scale)),P={id:`text-${Date.now()}`,type:"text",content:"",x:_,y:F,width:200,height:50,fontSize:T,color:"#ffffff",fontFamily:"Inter, sans-serif",zIndex:h.length+1};$t(),y(D=>[...D,P]),$l(D=>new Set(D).add(P.id)),o&&o!=="new"&&sA(o,P.id,P),v("select")}else if(g==="select"){const _=w.target;if(typeof w.canvasX=="number"&&typeof w.canvasY=="number"){const F=(m=Lt.current)==null?void 0:m.getItemAt(w.canvasX,w.canvasY);if(F){const Q=w.ctrlKey||w.metaKey,T=w.shiftKey;xf(F,Q,T);return}}!_.closest("[data-item-id]")&&!_.closest(".group")&&p([])}}},Y_=w=>{var m;if(!(isNaN(w.canvasX)||isNaN(w.canvasY))){if(g==="pen"||g==="eraser"){const _={id:Date.now().toString(),points:[{x:w.canvasX,y:w.canvasY,pressure:w.pressure}],color:ue.color,size:g==="pen"?ue.size:ue.eraserSize,isEraser:g==="eraser"};pn(_),Gr.current=_,ke.current&&ke.current.startPath(_);return}if(g==="select"){const _=(m=Lt.current)==null?void 0:m.getItemAt(w.canvasX,w.canvasY);if(_){const F=C.includes(_),Q=w.ctrlKey||w.metaKey,T=w.shiftKey,P=w.altKey;if(Q&&P&&g==="select"){const k=F?C:[...C,_],R={};let K=1/0,Y=1/0,X=-1/0,J=-1/0;k.forEach(me=>{const ae=h.find(Be=>Be.id===me);ae&&(R[me]={x:ae.x,y:ae.y,width:ae.width,height:ae.height},K=Math.min(K,ae.x),Y=Math.min(Y,ae.y),X=Math.max(X,ae.x+ae.width),J=Math.max(J,ae.y+ae.height))});const $=(K+X)/2,ne=(Y+J)/2;Ee.current={startX:w.clientX,itemDimensions:R,centerX:$,centerY:ne},st.current={items:JSON.parse(JSON.stringify(h)),groups:JSON.parse(JSON.stringify(le)),arrows:JSON.parse(JSON.stringify(De)),paths:JSON.parse(JSON.stringify(Ne))},F||p(me=>[...me,_]),w.preventDefault(),w.stopPropagation();return}if(Q&&!P&&g==="select"){const k=F?C:[...C,_],R={};k.forEach(K=>{const Y=h.find(X=>X.id===K);Y&&(R[K]=Y.rotation||0)}),Fe.current={startX:w.clientX,itemRotations:R},st.current={items:JSON.parse(JSON.stringify(h)),groups:JSON.parse(JSON.stringify(le)),arrows:JSON.parse(JSON.stringify(De)),paths:JSON.parse(JSON.stringify(Ne))},F||p(K=>[...K,_]),w.preventDefault(),w.stopPropagation();return}if(!F)p(T?k=>[...k,_]:[_]);else if(T){p(k=>k.filter(R=>R!==_));return}M.current={},(F?C:[_]).forEach(k=>{const R=h.find(K=>K.id===k);R&&(M.current[k]={x:R.x,y:R.y})}),st.current={items:JSON.parse(JSON.stringify(h)),groups:JSON.parse(JSON.stringify(le)),arrows:JSON.parse(JSON.stringify(De)),paths:JSON.parse(JSON.stringify(Ne))},qo.current={x:w.canvasX,y:w.canvasY},Qe.current=_,w.preventDefault(),w.stopPropagation()}}}},J_=w=>{if(isNaN(w.canvasX)||isNaN(w.canvasY))return;if(o&&o!=="new"&&t&&kB(o,t.uid,t.displayName||"Anonymous",t.email||"anonymous@example.com",w.canvasX,w.canvasY),Gr.current){const F=w.coalescedPoints||[{x:w.canvasX,y:w.canvasY,pressure:w.pressure}];ke.current&&ke.current.addPoints(F),Gr.current.points.push(...F)}const m=qo.current,_=Qe.current;if(m&&_&&M.current[_]){const F=w.canvasX-m.x,Q=w.canvasY-m.y,T=M.current[_];if(T){const P=T.x+F,D=T.y+Q;eb(_,{x:P,y:D})}return}if(m&&C.length>0,Ee.current){const F=w.clientX-Ee.current.startX,Q=Math.max(.1,1+F/200);y(T=>T.map(P=>{var k;const D=(k=Ee.current)==null?void 0:k.itemDimensions[P.id];if(D){const R=D.width*Q,K=D.height*Q,Y=Ee.current.centerX,X=Ee.current.centerY,J=D.x-Y,$=D.y-X,ne=Y+J*Q,me=X+$*Q;return{...P,x:ne,y:me,width:R,height:K}}return P}));return}if(Fe.current){const Q=-(w.clientX-Fe.current.startX)*.5;y(T=>T.map(P=>{var k;const D=(k=Fe.current)==null?void 0:k.itemRotations[P.id];if(D!==void 0){const R=(D+Q+360)%360,K=w.shiftKey?Math.round(R/25)*25:R;return{...P,rotation:K}}return P}));return}},q_=w=>{if(Gr.current){const F=Gr.current;if(F.isEraser){const Q=F.size/2,T=Ne.filter(P=>!P.points.some(k=>F.points.some(R=>{const K=k.x-R.x,Y=k.y-R.y;return Math.sqrt(K*K+Y*Y)<Q+P.size/2})));$t(),ct(T),o&&o!=="new"&&Mn(o,"paths",T)}else $t(),ct(Q=>{const T=[...Q,F];return o&&o!=="new"&&Mn(o,"paths",T),T});pn(null),Gr.current=null,ke.current&&ke.current.endPath()}const m=qo.current,_=Qe.current;if(_&&m){const F=w.canvasX-m.x,Q=w.canvasY-m.y,T=M.current[_];if(T){const P=T.x+F,D=T.y+Q;r0(_,P,D)}Qe.current=null}else m&&(qo.current=null,st.current=null,M.current={});if(Ee.current){if(st.current&&(kn(F=>{const Q=F.slice(0,wt+1);return Q.push(st.current),Q.length>50?Q.slice(1):Q}),An(F=>Math.min(F+1,49))),o&&o!=="new"){const F=h.filter(Q=>{var T;return((T=Ee.current)==null?void 0:T.itemDimensions[Q.id])!==void 0});F.length>0&&js(o,F)}Ee.current=null,st.current=null}if(Fe.current){if(st.current&&(kn(F=>{const Q=F.slice(0,wt+1);return Q.push(st.current),Q.length>50?Q.slice(1):Q}),An(F=>Math.min(F+1,49))),o&&o!=="new"){const F=h.filter(Q=>{var T;return((T=Fe.current)==null?void 0:T.itemRotations[Q.id])!==void 0});F.length>0&&js(o,F)}Fe.current=null,st.current=null}},Qi=(w,m)=>{!st.current&&!bi.current&&$t(),y(_=>_.map(F=>{if(F.id===w){const Q={...F,...m};return o&&o!=="new"&&(F.type==="ad"?sA(o,w,Q):sA(o,w,m)),Q}return F}))};x.useEffect(()=>{if(!o)return;const w=60*60*1e3,m=()=>{const Q=RA.current,T=_i.current,P=Q.find(pA=>pA.id==="ad-banner");if(!P)return;const D=T.width||window.innerWidth,k=728,R=90,K=k/T.scale,Y=R/T.scale,X=D/2,J=120,$=(X-T.x)/T.scale,ne=(J-T.y)/T.scale,me=$-K/2,ae=ne,Be=P.width||k,pe=(P.x+Be/2)*T.scale+T.x,Se=P.y*T.scale+T.y,Ze=Math.abs(pe-X),xt=Math.abs(Se-J),bt=P.height||R,At=Math.abs(Be-K)>1||Math.abs(bt-Y)>1;(Ze>5||xt>5||At)&&y(pA=>pA.map(MA=>{if(MA.id==="ad-banner"){const FA={...MA,x:me,y:ae,width:K,height:Y};return o&&o!=="new"&&sA(o,"ad-banner",FA),FA}return MA}))},_=setTimeout(m,500),F=setInterval(m,w);return()=>{clearTimeout(_),clearInterval(F)}},[o]),x.useCallback(async w=>{var _,F;const m=h.find(Q=>Q.id===w);if(!m||!((_=m.fileName)!=null&&_.toLowerCase().endsWith(".psd"))||!m.originalFilePath){console.warn("Cannot refresh: not a PSD file or no original path");return}try{if(console.log("Refreshing PSD file:",m.fileName),(F=window.electronAPI)!=null&&F.readPSDFile){const Q=await window.electronAPI.readPSDFile(m.originalFilePath);if(Q.success&&Q.data){const T=new File([Q.data],m.fileName||"image.psd",{type:"application/octet-stream"}),{convertPSDToImage:P}=await or(async()=>{const{convertPSDToImage:k}=await import("./psdParser-DX-W7wsa.js");return{convertPSDToImage:k}},[]),D=await P(T);if(D){let k=m.driveFileId;try{const R=(m.fileName||`psd-${m.id}.png`).replace(/\.psd$/i,".png");k=await ns(D,R,!0,o||void 0),console.log("PSD PNG updated in Drive:",k,R)}catch(R){console.error("Failed to update PSD PNG in Drive:",R);return}y(R=>R.map(K=>{if(K.id===w&&K.type!=="text"){const Y={...K,src:"",driveFileId:k};return o&&o!=="new"&&sA(o,w,{driveFileId:k}),Y}return K})),console.log("PSD file refreshed successfully:",m.fileName)}else console.warn("Failed to convert PSD to image")}else console.error("Failed to read PSD file:",Q.error)}}catch(Q){console.error("Failed to refresh PSD file:",Q)}},[h,o]);const[t0,A0]=x.useState(null),Z_=x.useCallback(w=>{const m=h.find(_=>_.id===w);!m||m.type!=="image"||(p([w]),A0(w),setTimeout(()=>{A0(null)},100))},[h]);x.useCallback(w=>{C.forEach(m=>{const _=h.find(F=>F.id===m);_&&(M.current[m]={x:_.x,y:_.y})}),st.current||(st.current={items:JSON.parse(JSON.stringify(h)),groups:JSON.parse(JSON.stringify(le)),arrows:JSON.parse(JSON.stringify(De)),paths:JSON.parse(JSON.stringify(Ne))})},[C,h,le,De,Ne]);const eb=x.useCallback((w,m)=>{Lt.current&&Lt.current.setHiddenItems([]),document.body.classList.add("dragging-items");const _=h.find(D=>D.id===w);if(!_)return;let F=M.current[w];if(!F){F={x:m.x,y:m.y},M.current[w]=F,C.forEach(D=>{const k=h.find(R=>R.id===D);k&&!M.current[D]&&(M.current[D]={x:k.x,y:k.y})});return}const Q=m.x-F.x,T=m.y-F.y;Tn.current&&Tn.current.updateTracker(w,m.x,m.y),Sn.current&&Sn.current.updateTracker(w,m.x,m.y),Lt.current&&Lt.current.updateTracker(w,m.x,m.y,!0);const P=document.querySelector(`[data-item-id="${w}"]`);if(P&&_){P.classList.contains("is-active-dragging")||P.classList.add("is-active-dragging");const D=m.x-F.x,k=m.y-F.y,{rotation:R,flipHorizontal:K,flipVertical:Y}=_,X=`translate(${D}px, ${k}px) rotate(${R||0}deg) scaleX(${K?-1:1}) scaleY(${Y?-1:1})`;P.style.transform=X}C.length>1&&C.forEach(D=>{if(D===w)return;const k=M.current[D];if(k){const R=k.x+Q,K=k.y+T;Tn.current&&Tn.current.updateTracker(D,R,K),Sn.current&&Sn.current.updateTracker(D,R,K),Lt.current&&Lt.current.updateTracker(D,R,K,!1);const Y=document.querySelector(`[data-item-id="${D}"]`),X=h.find(J=>J.id===D);if(Y&&X){const{rotation:J,flipHorizontal:$,flipVertical:ne}=X,me=`translate(${Q}px, ${T}px) rotate(${J||0}deg) scaleX(${$?-1:1}) scaleY(${ne?-1:1})`;Y.style.transform=me}}})},[C,h]);x.useEffect(()=>{if(!oe)return;const w=_=>{const F=(_.clientX-he.x)/he.scale,Q=(_.clientY-he.y)/he.scale;qA(T=>T?{...T,toPoint:{x:F,y:Q}}:null)},m=()=>{qA(null)};return window.addEventListener("mousemove",w),window.addEventListener("mouseup",m),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",m)}},[oe,he]);const n0=w=>{if(!gt)return;const m=(gt.x-he.x)/he.scale,_=(gt.y-he.y)/he.scale;let F=w==="prompt_node"?480:600,Q=w==="prompt_node"?300:900;if(w==="generation_node"){const P="2:3",[k,R]=P.split(":").map(Number);F=Math.round(900/R*k),Q=900}const T={id:`node-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,type:w,src:"",url:"",x:m,y:_,width:F,height:Q,rotation:0,zIndex:h.length+1,flipHorizontal:!1,flipVertical:!1,currentFileSlot:0,promptText:"",nodeInputs:{},generationParams:w==="generation_node"?{aspectRatio:"2:3",resolution:"1k",model:"gemini-2.5",batchSize:1,style:"structure"}:void 0};y(P=>[...P,T]),o&&o!=="new"&&sA(o,T.id,T),Xt()},tb=(w,m,_)=>{if(_.stopPropagation(),_.preventDefault(),_.button!==0)return;console.log("Socket MouseDown:",w,m);const F=(_.clientX-he.x)/he.scale,Q=(_.clientY-he.y)/he.scale;qA({fromNodeId:w,fromSocketId:m,toPoint:{x:F,y:Q}});let T=null;const P=k=>{const R=_i.current,K=(k.clientX-R.x)/R.scale,Y=(k.clientY-R.y)/R.scale;qA(ne=>ne?{...ne,toPoint:{x:K,y:Y}}:null);const X=100;let J=null,$=X;RA.current.forEach(ne=>{let me=[];ne.type==="generation_node"?me=["text-input","image-input","image-output"]:ne.type==="prompt_node"?me=["text-output"]:ne.type==="image"&&(me=["image-input","image-output"]),me.forEach(ae=>{const Be=yr(ne.id,ae);if(Be){const pe=Be.x-K,Se=Be.y-Y,Ze=Math.sqrt(pe*pe+Se*Se);Ze<$&&($=Ze,J={nodeId:ne.id,socketId:ae})}})}),T=J,te(J)},D=()=>{if(document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",D),T){if(T.nodeId===w){qA(null),te(null);return}Le(k=>{if(k.some(Y=>Y.fromNodeId===w&&Y.fromSocketId===m&&Y.toNodeId===T.nodeId&&Y.toSocketId===T.socketId))return k;const K={id:`conn-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,fromNodeId:w,fromSocketId:m,toNodeId:T.nodeId,toSocketId:T.socketId};return[...k,K]})}qA(null),te(null)};document.addEventListener("mousemove",P),document.addEventListener("mouseup",D)},Ab=(w,m)=>{if(oe){if(console.log("Socket MouseUp:",w,m),console.log("Attempting connection from:",oe.fromSocketId,"to:",m),oe.fromNodeId===w){qA(null);return}if(He.some(Q=>Q.fromNodeId===oe.fromNodeId&&Q.fromSocketId===oe.fromSocketId&&Q.toNodeId===w&&Q.toSocketId===m)){qA(null);return}const F={id:`conn-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,fromNodeId:oe.fromNodeId,fromSocketId:oe.fromSocketId,toNodeId:w,toSocketId:m};console.log("Connection Created:",F),Le(Q=>[...Q,F]),qA(null)}},nb=w=>{Le(m=>m.filter(_=>_.id!==w)),console.log("Deleted connection:",w)},rb=(w,m)=>{m.preventDefault(),m.stopPropagation(),C.includes(w)&&vr({x:m.clientX,y:m.clientY,itemId:w})},sb=w=>{const m=h.find(_=>_.id===w);m&&Qi(w,{flipHorizontal:!m.flipHorizontal}),vr(null)},ib=w=>{const m=h.find(_=>_.id===w);m&&Qi(w,{flipVertical:!m.flipVertical}),vr(null)},ob=async w=>{var R,K,Y,X;console.log("Generate requested for node:",w),hA(J=>new Set(J).add(w));const m=h.find(J=>J.id===w);if(!m||m.type!=="generation_node")return;const _=He.find(J=>J.toNodeId===w&&J.toSocketId==="text-input"),F=He.filter(J=>J.toNodeId===w&&J.toSocketId==="image-input");let Q="";const T={};if(_){let J=h.find($=>$.id===_.fromNodeId);if(!J){const $=h.filter(ne=>ne.type==="prompt_node");$.length===1?(console.log("Auto-recovery: Using available PromptNode"),J=$[0]):$.length>1&&console.error("Multiple PromptNodes found, please reconnect manually.")}J&&J.type==="prompt_node"&&(Q=J.promptText||"")}const P=async(J,$)=>{if(J.type==="image"||J.type==="generation_node"){const ne=document.querySelector(`[data-item-id="${J.id}"] img`);let me=(ne==null?void 0:ne.src)||J.src||"",ae=me;if(me&&!me.startsWith("data:"))try{if(ne&&ne.complete&&ne.naturalWidth>0){const Be=document.createElement("canvas");Be.width=ne.naturalWidth,Be.height=ne.naturalHeight;const pe=Be.getContext("2d");if(pe)pe.drawImage(ne,0,0),ae=Be.toDataURL("image/png"),console.log(`Converted image ${$} to base64 for Gemini (from DOM element)`);else throw new Error("Failed to get canvas context")}else ae=await new Promise((Be,pe)=>{const Se=new Image;Se.crossOrigin="anonymous",Se.onload=()=>{try{const Ze=document.createElement("canvas");Ze.width=Se.naturalWidth,Ze.height=Se.naturalHeight;const xt=Ze.getContext("2d");if(!xt){pe(new Error("Failed to get canvas context"));return}xt.drawImage(Se,0,0);const bt=Ze.toDataURL("image/png");Be(bt)}catch(Ze){pe(Ze)}},Se.onerror=()=>pe(new Error("Failed to load image")),Se.src=me}),console.log(`Converted image ${$} to base64 for Gemini (loaded fresh)`)}catch(Be){console.error(`Failed to convert image ${$} to base64:`,Be),ae=""}if(ae){const Be=F.length>1?`reference_image_${$}`:"reference_image";T[Be]={id:J.id,src:ae}}}};for(let J=0;J<F.length;J++){const $=F[J],ne=h.find(me=>me.id===$.fromNodeId);ne&&await P(ne,J)}if(!Q&&Object.keys(T).length===0){alert("Please connect a Text Node (Input 1) or Image Node (Input 2)!");return}const D=((R=m.generationParams)==null?void 0:R.batchSize)||1,k={prompt:Q,images:T,config:{model:((K=m.generationParams)==null?void 0:K.model)||"gemini-2.5",resolution:((Y=m.generationParams)==null?void 0:Y.resolution)||"1k",aspectRatio:((X=m.generationParams)==null?void 0:X.aspectRatio)||"1:1"}};j_(w);try{const J=RA.current.find(pe=>pe.id===w);if(J&&J.type==="generation_node"){const Se=(J.generatedHistory||[]).filter(Ze=>Ze.driveFileId).map(Ze=>Ze.driveFileId);if(Se.length>0){console.log(`Deleting ${Se.length} old files before new generation...`),console.log("File IDs to delete:",Se);const Ze=await Promise.allSettled(Se.map(async At=>{var pA,MA;try{return await Pu(At,o||void 0,u),{success:!0,fileId:At}}catch(FA){if((pA=FA.message)!=null&&pA.includes("404")||(MA=FA.message)!=null&&MA.includes("not found"))return console.log(`File ${At} already deleted (404), skipping`),{success:!0,fileId:At,alreadyDeleted:!0};throw FA}})),xt=Ze.filter(At=>At.status==="fulfilled").length,bt=Ze.filter(At=>At.status==="rejected").length;bt>0?(console.warn(`File deletion completed with errors: ${xt} succeeded, ${bt} failed`),Ze.forEach((At,pA)=>{At.status==="rejected"&&console.error(`Failed to delete file ${Se[pA]}:`,At.reason)})):console.log(`All ${xt} old files deleted successfully`)}}const $=0,ne=async pe=>{var pA,MA,FA,Cr;if(!RA.current.find(nn=>nn.id===w))return null;console.log(`Sending to Gemini (Batch ${pe+1}/${D}):`,k);const Ze=await DL(k);console.log(`Gemini Result (Batch ${pe+1}):`,Ze);const xt=(FA=(MA=(pA=Ze.candidates)==null?void 0:pA[0])==null?void 0:MA.content)==null?void 0:FA.parts;let bt=null,At=null;if(xt&&xt.length>0){const nn=xt.find(rn=>{var OA;return(OA=rn.inlineData)==null?void 0:OA.data});if(nn){const rn=nn.inlineData.mimeType||"image/png",OA=nn.inlineData.data;bt=`data:${rn};base64,${OA}`}else At=(Cr=xt.find(rn=>rn.text))==null?void 0:Cr.text}if(bt){const nn=rn=>new Promise((OA,$r)=>{const ve=new Image;ve.onload=()=>OA({width:ve.naturalWidth,height:ve.naturalHeight}),ve.onerror=$r,ve.src=rn});try{const OA=($+pe)%8,$r=`generation_node_${w}_slot_${OA}.png`;console.log(`Uploading generated image to Drive (Slot ${OA}): ${$r}`);const ve=await nn(bt),jt=ve.width/ve.height,Ht=await ns(bt,$r,!0,o||void 0,u);return{historyItem:{id:`hist-${Date.now()}-${pe}-${OA}`,src:"",driveFileId:Ht,timestamp:Date.now()},driveFileId:Ht,fileName:$r,actualAspectRatio:jt,index:pe,targetSlot:OA}}catch(rn){return console.error("Failed to upload/update:",rn),null}}else if(At)return console.warn("Received text response instead of image:",At),D===1&&alert(`Gemini Text Response: ${At}`),null;return null},me=Array.from({length:D}).map((pe,Se)=>ne(Se)),Be=(await Promise.allSettled(me)).filter(pe=>pe.status==="fulfilled"&&pe.value!==null).map(pe=>pe.value);if(Be.length>0){const pe=Be[Be.length-1],Ze=($+D)%8,xt=Be.map(bt=>bt.historyItem);y(bt=>bt.map(At=>{if(At.id===w&&At.type==="generation_node"){let FA=Math.max(At.width,250),Cr=Math.round(FA/pe.actualAspectRatio);Cr<250&&(Cr=250,FA=Math.round(Cr*pe.actualAspectRatio));const nn={...At,src:"",driveFileId:pe.driveFileId,fileName:pe.fileName,width:FA,height:Cr,generatedHistory:xt,currentFileSlot:Ze};return o&&o!=="new"&&sA(o,w,nn),nn}return At}))}}catch(J){console.error("Generation Error:",J),alert(`Generation Failed: ${J.message}`)}finally{hA(J=>{const $=new Set(J);return $.delete(w),$})}},r0=(w,m,_)=>{const F=h.find(D=>D.id===w);if(!F)return;const Q={},T=M.current[w];if(T&&C.length>1){const D=m-T.x,k=_-T.y;if(D!==0||k!==0){if(st.current){const R=st.current;kn(K=>{const Y=K.slice(0,wt+1);return Y.push(R),Y.length>50&&Y.shift(),Y}),An(K=>Math.min(K+1,49)),st.current=null}C.forEach(R=>{const K=M.current[R];if(K){const Y=K.x+D,X=K.y+k;!isNaN(Y)&&!isNaN(X)&&isFinite(Y)&&isFinite(X)&&(Q[R]={x:Y,y:X})}})}}else!isNaN(m)&&!isNaN(_)&&isFinite(m)&&isFinite(_)&&(m!==F.x||_!==F.y)&&(Q[w]={x:m,y:_});if(Object.keys(Q).length>0){y(R=>R.map(K=>Q[K.id]?{...K,...Q[K.id]}:K)),o&&o!=="new"&&Object.entries(Q).forEach(([R,K])=>{sA(o,R,K)});const D=[],k=vt.map(R=>{if(R.targetId&&Q[R.targetId]){const K=Q[R.targetId],Y={...R,x:K.x,y:K.y};return D.push(Y),Y}return R});D.length>0&&(Ce(k),o&&o!=="new"&&Mn(o,"bookmarks",k))}M.current={},qo.current=null,st.current=null,Lt.current&&(C.forEach(D=>{var k;return(k=Lt.current)==null?void 0:k.clearTracker(D)}),Lt.current.clearTracker(w),Lt.current.setHiddenItems([])),document.body.classList.remove("dragging-items");const P=document.querySelector(`[data-item-id="${w}"]`);if(P&&P.classList.remove("is-active-dragging"),requestAnimationFrame(()=>{(Object.keys(Q).length>0?Object.keys(Q):[w]).forEach(k=>{const R=h.find(X=>X.id===k),K=document.querySelector(`[data-item-id="${k}"]`),Y=R||(Q[k]?{...h.find(X=>X.id===k),...Q[k]}:null);if(K&&Y){const{rotation:X,flipHorizontal:J,flipVertical:$}=Y,ne=`rotate(${X||0}deg) scaleX(${J?-1:1}) scaleY(${$?-1:1})`;K.style.transform=ne}else K&&K.style.removeProperty("transform")})}),F.type==="ad"){const D=Ye(w);D&&(Ve(w),console.log(`Force removed ${w} from group ${D.name}`))}else{const D=le.find(k=>{if(!k.childIds||!Array.isArray(k.childIds))return!1;const R=m+F.width/2,K=_+F.height/2;return R>=k.x&&R<=k.x+k.width&&K>=k.y&&K<=k.y+k.height&&!k.childIds.includes(w)});if(D){const k=Ye(w);k&&k.id!==D.id&&(Ve(w),console.log(`Transferred ${w} from group ${k.name} to ${D.name}`)),tt(D.id,w),console.log(`Added ${w} to group ${D.name}`)}else{const k=Ye(w);if(k){const R=m+F.width/2,K=_+F.height/2;(R<k.x||R>k.x+k.width||K<k.y||K>k.y+k.height)&&(Ve(w),console.log(`Removed ${w} from group ${k.name}`))}}}},ab=async()=>{if(!o||o==="new"){alert("   ");return}try{console.log("Starting Drive Cleanup Analysis...");const w=await $L(h,o,u);if(w.totalCount===0){alert("   .");return}const m=`  ${w.totalCount} .
-  : ${w.regularCount}
- AI  : ${w.aiCount}

     ?
(      .)`;if(window.confirm(m)){console.log(`Cleaning up ${w.totalCount} files...`);const _=await XL(w.orphans.map(F=>F.id));alert(` .
: ${_.success}, : ${_.failed}`)}}catch(w){console.error("Cleanup failed:",w),alert(` : ${w.message}`)}},ea=(w,m)=>{let _;if(w){const F=h.find(T=>T.id===w)||le.find(T=>T.id===w);if(!F)return;const Q=F.name||F.fileName||"Saved Item";_={id:Date.now().toString(),name:Q,targetId:F.id,x:F.x,y:F.y,scale:1}}else if(m)_={id:Date.now().toString(),name:`Bookmark ${vt.length+1}`,targetId:null,x:m.x,y:m.y,scale:he.scale};else{const F=(window.innerWidth/2-he.x)/he.scale,Q=(window.innerHeight/2-he.y)/he.scale;_={id:Date.now().toString(),name:`View ${vt.length+1}`,targetId:null,x:F,y:Q,scale:he.scale}}Ce(F=>[...F,_]),o&&o!=="new"&&Mn(o,"bookmarks",[...vt,_])},lb=w=>{if(w.targetId){const m=h.find(_=>_.id===w.targetId)||le.find(_=>_.id===w.targetId);if(m){const _=m.x+m.width/2,F=m.y+m.height/2;nA({x:_,y:F})}}else nA({x:w.x,y:w.y})},cb=(w,m)=>{const _=vt.map(F=>F.id===w?{...F,name:m}:F);Ce(_),o&&o!=="new"&&Mn(o,"bookmarks",_)},ub=w=>{const m=vt.filter(_=>_.id!==w);Ce(m),o&&o!=="new"&&Mn(o,"bookmarks",m)},db=x.useCallback(w=>{const m=le.find(T=>T.id===w);if(!m||!m.childIds||!Array.isArray(m.childIds)||m.childIds.length===0)return;st.current||(st.current={items:JSON.parse(JSON.stringify(RA.current)),groups:JSON.parse(JSON.stringify(le)),arrows:JSON.parse(JSON.stringify(De)),paths:JSON.parse(JSON.stringify(Ne))});const _={},F={};RA.current.forEach(T=>{if(m.childIds.includes(T.id)){const P=T;_[T.id]={x:T.x,y:T.y,rotation:P.rotation||0,flipH:!!P.flipHorizontal,flipV:!!P.flipVertical};const D=document.querySelector(`[data-item-id="${T.id}"]`);D&&(F[T.id]=D)}}),Jo.current[w]={groupX:m.x,groupY:m.y,items:_,elements:F}},[le]),fb=x.useCallback((w,m)=>{const _=Jo.current[w];if(!_||!_.elements)return;const{items:F,elements:Q,groupX:T,groupY:P}=_,D=m.x-T,k=m.y-P;Object.entries(Q).forEach(([R,K])=>{const Y=K,X=F[R];if(X){const{rotation:J,flipH:$,flipV:ne}=X,me=`translate(${D}px, ${k}px) rotate(${J}deg) scaleX(${$?-1:1}) scaleY(${ne?-1:1})`;Y.style.transform=me;const ae=X.x+D,Be=X.y+k;Lt.current&&Lt.current.updateTracker(R,ae,Be),Tn.current&&Tn.current.updateTracker(R,ae,Be),Sn.current&&Sn.current.updateTracker(R,ae,Be)}})},[]),hb=(w,m)=>{const _=le.find(P=>P.id===w);if(!_||!_.childIds||!Array.isArray(_.childIds)){Te(w,m),delete Jo.current[w],st.current&&(kn(P=>{const D=P.slice(0,wt+1);return D.push(st.current),D.length>50?D.slice(1):D}),An(P=>Math.min(P+1,49)),st.current=null);return}const F=m.width!==void 0||m.height!==void 0,Q=(m.x!==void 0||m.y!==void 0)&&!F,T={};if(F){const P=_.width,D=_.height,k=m.width!==void 0?m.width:P,R=m.height!==void 0?m.height:D,K=_.x,Y=_.y,X=m.x!==void 0?m.x:K,J=m.y!==void 0?m.y:Y;if(P!==k||D!==R){const $=k/P,ne=R/D;_.childIds.forEach(me=>{const ae=h.find(Be=>Be.id===me);if(ae){const Be=ae.x-K,pe=ae.y-Y,Se=Be*$,Ze=pe*ne,xt=ae.type==="image"||ae.type==="ad"||ae.type==="video"||ae.type==="generation_node"||ae.type==="prompt_node",bt=xt?ae.x:X+Se,At=xt?ae.y:J+Ze,pA=xt?ae.width:ae.width*$,MA=xt?ae.height:ae.height*ne;T[me]={x:bt,y:At,width:pA,height:MA}}})}}else if(Q){const P=Jo.current[w];if(P){const D=(m.x||_.x)-P.groupX,k=(m.y||_.y)-P.groupY;_.childIds.forEach(R=>{const K=P.items[R];K&&(T[R]={x:K.x+D,y:K.y+k})})}}Object.keys(T).length>0&&(y(P=>P.map(D=>T[D.id]?{...D,...T[D.id]}:D)),o&&o!=="new"&&Object.entries(T).forEach(([P,D])=>{sA(o,P,D)})),Te(w,m),st.current&&(kn(P=>{const D=P.slice(0,wt+1);return D.push(st.current),D.length>50?D.slice(1):D}),An(P=>Math.min(P+1,49)),st.current=null),requestAnimationFrame(()=>{_.childIds.forEach(P=>{const D=document.querySelector(`[data-item-id="${P}"]`),k=h.find(R=>R.id===P);if(D&&k){const R=k,K=R.rotation,Y=R.flipHorizontal,X=R.flipVertical,J=`rotate(${K||0}deg) scaleX(${Y?-1:1}) scaleY(${X?-1:1})`;D.style.transform=J,Lt.current&&Lt.current.clearTracker(P),Tn.current&&Tn.current.updateTracker(P,k.x,k.y),Sn.current&&Sn.current.updateTracker(P,k.x,k.y)}else D&&D.style.removeProperty("transform")})}),delete Jo.current[w]},xf=(w,m=!1,_=!1)=>{if(g==="arrow"){we?we!==w&&($t(),Ke(we,w),xe(null),v("select")):xe(w);return}Nn([]),_?p(F=>F.includes(w)?F.filter(Q=>Q!==w):[...F,w]):m?p(F=>F.includes(w)?F.filter(Q=>Q!==w):[...F,w]):C.includes(w)||p([w])},gb=w=>{p([]),Nn([w])},pb=w=>{const m=h.filter(_=>{const F=_.x+_.width,Q=_.y+_.height,T=w.x+w.width,P=w.y+w.height;return!(_.x>T||F<w.x||_.y>P||Q<w.y)});p(m.map(_=>_.id))},mb=()=>{if(C.length>=2){const w=h.filter(m=>C.includes(m.id));w.length>=2&&($t(),Ge(C,w),p([]))}},wb=w=>{const m=h.find(_=>_.id===w);return m?{x:m.x,y:m.y,width:m.width,height:m.height}:null},yb=x.useCallback(w=>{w.preventDefault();const _=w.target.closest("[data-item-id]"),F=(_==null?void 0:_.getAttribute("data-item-id"))||void 0;vr({x:w.clientX,y:w.clientY,itemId:F})},[]),Bb=PA.has("CTRL");if(i)return c.jsx(TL,{onGetStarted:()=>a(!1),onDownload:()=>window.open("https://github.com/Start-to/RefBoard/releases","_blank")});if(A)return c.jsx("div",{className:"w-screen h-screen flex items-center justify-center bg-black text-white",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{children:"Loading..."})]})});if(!t)return c.jsxs(c.Fragment,{children:[c.jsx(hh,{boardName:"RefBoard"}),c.jsx(FS,{onLogin:()=>{console.log("Login successful, waiting for auth state update...")}})]});if(o===null)return c.jsxs(c.Fragment,{children:[c.jsx(hh,{boardName:"RefBoard"}),c.jsx(QL,{onBoardSelect:(w,m)=>{y([]),Oe([]),Tt([]),ct([]),Le([]),p([]),Ks({x:0,y:0,scale:1,width:0,height:0}),l(w),m?d(m):w==="new"&&d(" ")}})]});const vb=gA>=1;return c.jsxs("div",{className:`w-screen h-screen overflow-hidden ${vb?"bg-black":"bg-transparent"} text-white ${he.scale<.3?"low-zoom":""}`,children:[E&&c.jsx(hh,{boardName:u}),E&&c.jsxs(c.Fragment,{children:[c.jsx(vS,{onBackToList:async()=>{s(!0),await new Promise(w=>setTimeout(w,50));try{await Ii(!0)}catch(w){console.error("Failed to save on exit:",w)}finally{l(null),s(!1),y([]),Oe([]),Tt([]),ct([]),Le([]),p([]),Ks({x:0,y:0,scale:1,width:0,height:0})}},onShare:o&&o!=="new"?()=>zo(!0):void 0,boardName:u,opacity:gA,onOpacityChange:w=>{var m;HA(w),(m=window.electronAPI)==null||m.setOpacity(w)},isAlwaysOnTop:Br,onToggleAlwaysOnTop:async()=>{if(window.electronAPI){const w=await window.electronAPI.toggleAlwaysOnTop();zr(w)}},onUndo:Bf,onRedo:vf,canUndo:wt>=0,canRedo:wt<Vr.length-1}),c.jsx(GL,{bookmarks:vt,onNavigate:lb,onRename:cb,onDelete:ub,onCopyUrl:async w=>{try{const m="https://www.refboard.org/",_={boardId:o||"",x:w.x.toString(),y:w.y.toString(),scale:w.scale.toString(),name:w.name,open:"web"};w.targetId&&(_.targetId=w.targetId);const F=new URLSearchParams(_),Q=`${m}?${F.toString()}`;await navigator.clipboard.writeText(Q),alert(`  !

${w.name}`),console.log("Bookmark URL copied:",Q)}catch(m){console.error("Failed to copy bookmark URL:",m),alert("  ")}}}),c.jsx(CS,{activeTool:g,onToolChange:v,onSettingsClick:()=>EA(!0),onAlignClick:Cf,onCleanupClick:ab,selectedCount:C.length}),(g==="pen"||g==="eraser")&&c.jsx(ES,{color:ue.color,size:g==="pen"?ue.size:ue.eraserSize,isEraser:g==="eraser",onColorChange:w=>ge(m=>({...m,color:w})),onSizeChange:w=>ge(m=>g==="pen"?{...m,size:w}:{...m,eraserSize:w})})]}),E&&Ow&&(()=>{var F;const w=le.find(Q=>Q.id===Ow);if(!w)return null;const m=[10,12,14,16,18,20,24,28,32],_=[{name:"Inter",value:"Inter, sans-serif"},{name:"Arial",value:"Arial, sans-serif"},{name:"Times New Roman",value:"Times New Roman, serif"},{name:"Courier New",value:"Courier New, monospace"},{name:"Georgia",value:"Georgia, serif"},{name:"Verdana",value:"Verdana, sans-serif"}];return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>{wf(null),$o(!1),Xo(!1)}}),c.jsxs("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-gray-700 border border-gray-600 rounded-lg shadow-xl py-3 px-4 z-[10000] flex items-center gap-3",style:{position:"fixed",top:"1rem",left:"50%",transform:"translateX(-50%)"},onClick:Q=>Q.stopPropagation(),children:[c.jsxs("div",{className:"relative flex items-center gap-1",children:[c.jsx("input",{type:"number",value:w.fontSize||12,onChange:Q=>{const T=parseInt(Q.target.value);!isNaN(T)&&T>0&&T<=200&&Te(w.id,{fontSize:T})},onFocus:Q=>Q.stopPropagation(),onClick:Q=>Q.stopPropagation(),onMouseDown:Q=>Q.stopPropagation(),onKeyDown:Q=>Q.stopPropagation(),className:"w-16 px-2 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500 outline-none border border-gray-500 focus:border-gray-400",min:"1",max:"200"}),c.jsx("span",{className:"text-sm text-gray-300",children:"px"}),c.jsx("button",{onClick:Q=>{Q.stopPropagation(),$o(!Kw),Xo(!1)},className:"px-2 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500",children:c.jsx("span",{className:"text-xs",children:""})}),Kw&&c.jsx("div",{className:"absolute top-full left-0 mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg py-1 z-[10001] min-w-[100px] max-h-48 overflow-y-auto",children:m.map(Q=>c.jsxs("button",{onClick:()=>{Te(w.id,{fontSize:Q}),$o(!1)},className:`w-full px-3 py-2 text-left text-sm text-gray-300 hover:bg-gray-600 font-medium ${(w.fontSize||12)===Q?"bg-gray-600":""}`,children:[Q,"px"]},Q))})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:Q=>{Q.stopPropagation(),Xo(!jw),$o(!1)},className:"px-3 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500 flex items-center justify-between gap-2 min-w-[140px]",style:{fontFamily:w.fontFamily||"Inter, sans-serif"},children:[c.jsx("span",{children:((F=_.find(Q=>Q.value===(w.fontFamily||"Inter, sans-serif")))==null?void 0:F.name)||"Inter"}),c.jsx("span",{className:"text-xs text-gray-400",children:""})]}),jw&&c.jsx("div",{className:"absolute top-full left-0 mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg py-1 z-[10001] min-w-[140px] max-h-48 overflow-y-auto",children:_.map(Q=>c.jsx("button",{onClick:()=>{Te(w.id,{fontFamily:Q.value}),Xo(!1)},className:`w-full px-3 py-2 text-left text-sm text-gray-300 hover:bg-gray-600 font-medium ${(w.fontFamily||"Inter, sans-serif")===Q.value?"bg-gray-600":""}`,style:{fontFamily:Q.value},children:Q.name},Q.value))})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"color",value:w.color||"#ffffff",onChange:Q=>{Te(w.id,{color:Q.target.value})},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",style:{zIndex:1}}),c.jsxs("button",{className:"px-3 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500 flex items-center gap-2 relative",children:[c.jsx("div",{className:"w-5 h-5 rounded border border-gray-500",style:{backgroundColor:w.color||"#ffffff"}}),c.jsx("span",{children:""})]})]}),c.jsx("button",{onClick:()=>{wf(null),$o(!1),Xo(!1)},className:"px-3 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500",children:""})]})]})})(),E&&c.jsx(xS,{isOpen:ZA,onClose:()=>EA(!1),settings:Ct,uiSettings:en,onSave:(w,m)=>{rA(w),mf(m)}}),c.jsxs(oU,{selectedItemId:C[0]||null,getItemPosition:wb,onSelectionBox:pb,onCanvasClick:X_,onCanvasDrop:$_,uiSettings:en,panSettings:Ct.pan,windowDragSettings:Ct.windowDrag,zoomWheelModifier:Ct.zoomWheelModifier,activeTool:g,pressedKeys:PA,isEraser:g==="eraser",brushSize:g==="pen"?ue.size:ue.eraserSize,onContextMenu:yb,opacity:gA,onOpacityChange:HA,opacityDragSettings:Ct.opacityDrag,items:h,onCanvasMouseDown:Y_,onCanvasMouseMove:J_,onCanvasMouseUp:q_,zoomToFit:t0?{itemId:t0,padding:40}:null,onViewportChange:Ks,onVisualUpdate:w=>{var m;w&&ke.current?ke.current.updateTransform?ke.current.updateTransform(w):ke.current.syncView():(m=ke.current)==null||m.syncView()},onLODChange:w=>{var m;return(m=Lt.current)==null?void 0:m.setLODMode(w)},navigateTo:ze,onNavigated:()=>nA(null),isUiVisible:E,fixedLayer:c.jsx(rU,{ref:Lt,items:h,selectedIds:C,onRender:()=>{}}),children:[c.jsx(JQ,{ref:Tn,connections:He,getItemPosition:yr,tempConnection:oe,onConnectionContextMenu:(w,m)=>{nb(w)},items:h,activeGenerationNodeIds:Array.from(LA),hoveredSocket:j}),c.jsx(ZQ,{ref:Sn,arrows:De,items:h,onArrowSelect:gb,selectedArrowIds:tn}),le.map(w=>c.jsx(yS,{group:w,isSelected:C.includes(w.id),onUpdate:hb,onDragStart:db,onDrag:fb,onSelect:m=>p([m]),onNameChange:ye,onFormatMenuOpen:m=>wf(m),onUngroup:Ue,activeTool:g,onSaveCoordinate:ea},w.id)),h.map((w,m)=>{const _=w.id||`item-${m}`;return w.type==="text"?c.jsx(BS,{item:w,isSelected:C.includes(w.id),onUpdate:Qi,onInteractionStart:Vw,onInteractionEnd:r0,onSelect:(F,Q,T)=>xf(F,Q,T),onGroup:mb,canGroup:C.length>=2&&C.includes(w.id),isCtrlPressed:Bb,activeTool:g,isNewlyCreated:K_.has(w.id),onEditStart:F=>{$l(Q=>{const T=new Set(Q);return T.delete(F),T})},onFormatMenuOpen:F=>yf(F),onSaveCoordinate:ea,scale:he.scale},_):c.jsx(cE,{item:w,isSelected:C.includes(w.id),onUpdate:Qi,onInteractionStart:Vw,onInteractionEnd:W_,onSelect:(F,Q)=>xf(F,!1,Q),scale:he.scale,activeTool:g,onSocketMouseDown:tb,onSocketMouseUp:Ab,onSocketMouseEnter:re,onSocketMouseLeave:ee,onGenerateNode:ob,isGenerating:LA.has(w.id),onContextMenu:F=>rb(w.id,F),onImageDoubleClick:Z_},_)}),c.jsx(SL,{cursors:pf}),Xe&&C.length>1&&c.jsx(VL,{bounds:Xe,scale:he.scale,onScaleStart:z_,onScale:G_,onScaleEnd:V_}),c.jsx(FE,{ref:ke,paths:Ne,currentPath:gn})]}),E&&Ww&&(()=>{var _;const w=h.find(F=>F.id===Ww&&F.type==="text");if(!w)return null;const m=[...I,{name:"Inter",value:"Inter, sans-serif"},{name:"Arial",value:"Arial, sans-serif"},{name:"Times New Roman",value:"Times New Roman, serif"},{name:"Courier New",value:"Courier New, monospace"},{name:"Georgia",value:"Georgia, serif"},{name:"Verdana",value:"Verdana, sans-serif"}];return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>{yf(null),Vl(!1),Yo(!1)}}),c.jsxs("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-gray-700 border border-gray-600 rounded-lg shadow-xl py-3 px-4 z-[10000] flex items-center gap-3",style:{position:"fixed",top:"1rem",left:"50%",transform:"translateX(-50%)"},onClick:F=>F.stopPropagation(),children:[c.jsxs("div",{className:"relative flex items-center gap-1",children:[c.jsxs("button",{onClick:F=>{F.stopPropagation(),Yo(!zw),Vl(!1)},className:"px-3 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500 flex items-center justify-between gap-2 min-w-[140px]",style:{fontFamily:w.fontFamily},children:[c.jsx("span",{className:"truncate max-w-[100px]",children:((_=m.find(F=>F.value===w.fontFamily))==null?void 0:_.name)||"Inter"}),c.jsx("span",{className:"text-xs text-gray-400",children:""})]}),c.jsx("button",{onClick:F=>{F.stopPropagation(),b(!0),Yo(!1),Vl(!1)},className:"px-2 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500",title:"Add Google Font",children:"+"}),zw&&c.jsx("div",{className:"absolute top-full left-0 mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg py-1 z-[10001] min-w-[140px] max-h-48 overflow-y-auto",children:m.map(F=>c.jsx("button",{onClick:()=>{Qi(w.id,{fontFamily:F.value}),Yo(!1)},className:`w-full px-3 py-2 text-left text-sm text-gray-300 hover:bg-gray-600 font-medium ${w.fontFamily===F.value?"bg-gray-600":""}`,style:{fontFamily:F.value},children:F.name},F.value))})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"color",value:w.color,onChange:F=>{Qi(w.id,{color:F.target.value})},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",style:{zIndex:1}}),c.jsxs("button",{className:"px-3 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500 flex items-center gap-2 relative",children:[c.jsx("div",{className:"w-5 h-5 rounded border border-gray-500",style:{backgroundColor:w.color}}),c.jsx("span",{children:""})]})]}),c.jsx("button",{onClick:()=>{yf(null),Vl(!1),Yo(!1)},className:"px-3 py-2 bg-gray-600 rounded-lg text-sm text-gray-300 font-medium hover:bg-gray-500",children:""})]})]})})(),h.length===0&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none text-gray-500",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xl mb-2",children:"Drag and drop images or videos here"}),c.jsx("p",{className:"text-sm",children:"Or press T for text, A for arrows"})]})}),g==="arrow"&&we&&c.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 bg-blue-500 text-white px-4 py-2 rounded shadow-lg",children:"Click another item to create arrow"}),gt&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:Xt,onContextMenu:w=>w.preventDefault()}),c.jsx("div",{className:"fixed bg-gray-800 border border-gray-700 rounded-lg shadow-lg py-1 z-[9999] min-w-[200px]",style:{left:gt.x,top:gt.y},children:(()=>{const w=gt.itemId?h.find(_=>_.id===gt.itemId):null;return(w==null?void 0:w.type)==="image"?c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2",onClick:()=>gt.itemId&&sb(gt.itemId),children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Flip Horizontal"]}),c.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2",onClick:()=>gt.itemId&&ib(gt.itemId),children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),"Flip Vertical"]}),c.jsx("div",{className:"h-px bg-gray-700 my-1"}),c.jsx("button",{onClick:()=>{gt.itemId&&ea(gt.itemId),Xt()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center gap-2",children:c.jsx("span",{children:"Bookmark"})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{if(C.length>0){const _=h.filter(F=>C.includes(F.id));qe(_)}Xt()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-4",children:[c.jsx("span",{children:"copy"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Ctrl+C"})]}),c.jsxs("button",{onClick:()=>Zo(),className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center justify-between gap-4",children:[c.jsx("span",{children:"paste"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Ctrl+V"})]}),!gt.itemId&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-px bg-gray-700 my-1"}),c.jsx("button",{onClick:()=>{const _=(gt.x-he.x)/he.scale,F=(gt.y-he.y)/he.scale;ea(void 0,{x:_,y:F}),Xt()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center gap-2",children:c.jsx("span",{children:"Add Bookmark"})})]}),gt.itemId&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-px bg-gray-700 my-1"}),c.jsx("button",{onClick:()=>{gt.itemId&&ea(gt.itemId),Xt()},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 flex items-center gap-2",children:c.jsx("span",{children:"Bookmark"})}),c.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2",onClick:()=>{gt.itemId&&y(_=>_.filter(F=>F.id!==gt.itemId)),vr(null)},children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]}),c.jsx("div",{className:"h-px bg-gray-700 my-1"}),c.jsx("button",{onClick:()=>n0("prompt_node"),className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700",children:c.jsx("span",{children:"Add Prompt Node"})}),c.jsx("button",{onClick:()=>n0("generation_node"),className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700",children:c.jsx("span",{children:"Add Generation Node"})})]})})()})]}),U&&c.jsx("div",{className:"fixed inset-0 z-[10002] flex items-center justify-center bg-black/50",children:c.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 w-[400px] shadow-2xl",children:[c.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Add Google Font"}),c.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:["Search for any Google Font and select from the list to preview. Browse fonts at ",c.jsx("a",{href:"https://fonts.google.com",target:"_blank",rel:"noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:"fonts.google.com"}),"."]}),c.jsx("input",{type:"text",placeholder:"Type to search all Google Fonts (e.g., bbh, noto, open)",value:L,onChange:async w=>{const m=w.target.value;if(N(m),Ae(""),H("idle"),Z(""),m.trim()){const _=await tH(m);W(_)}else W([])},className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white mb-3 focus:outline-none focus:border-blue-500",autoFocus:!0}),V.length>0&&!z&&O==="idle"&&c.jsxs("div",{className:"mb-3",children:[c.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Select a font to preview:"}),c.jsx("div",{className:"max-h-48 overflow-y-auto bg-gray-700 border border-gray-600 rounded-lg",children:V.map(w=>c.jsx("button",{onClick:async()=>{N(w),Ae(w),W([]),H("loading"),Z("");try{await op(w),H("success")}catch(m){H("error"),Z(m.message),Ae("")}},className:"w-full px-4 py-2 text-left text-white hover:bg-gray-600 transition-colors text-sm",children:w},w))})]}),O==="success"&&z&&c.jsxs("div",{className:"mb-4 p-3 bg-gray-700 rounded-lg border border-gray-600",children:[c.jsxs("p",{className:"text-gray-400 text-xs mb-1",children:['Preview of "',z,'":']}),c.jsxs("p",{className:"text-xl text-white break-words",style:{fontFamily:`'${z}', sans-serif`},children:["The quick brown fox jumps over the lazy dog.",c.jsx("br",{}),"1234567890",c.jsx("br",{}),"   "]})]}),O==="loading"&&c.jsx("div",{className:"mb-3 p-3 bg-blue-900/30 border border-blue-700 rounded-lg",children:c.jsx("p",{className:"text-blue-400 text-sm",children:"Loading font..."})}),G&&c.jsx("div",{className:"mb-3 p-3 bg-red-900/30 border border-red-700 rounded-lg",children:c.jsx("p",{className:"text-red-400 text-sm",children:G})}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>{b(!1),N(""),Ae(""),W([]),H("idle"),Z("")},className:"px-4 py-2 text-gray-300 hover:text-white",children:"Cancel"}),c.jsx("button",{onClick:async()=>{if(z){const w=z;try{await op(w);const m=JL(w);q(_=>_.find(F=>F.name===m.name)?_:[..._,m]),b(!1),N(""),Ae(""),W([]),H("idle"),Z("")}catch(m){H("error"),Z(m.message||"Failed to add font")}}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!z||O==="loading",children:"Add Font"})]})]})}),Gl&&o&&o!=="new"&&c.jsx(UL,{boardId:o,boardName:u,items:h,onClose:()=>zo(!1)}),r&&c.jsxs("div",{className:"fixed inset-0 z-[100000] bg-black/80 backdrop-blur-sm flex flex-col items-center justify-center pointer-events-auto transition-opacity duration-300",children:[c.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-6"}),c.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:"Saving Board..."}),c.jsx("div",{className:"text-gray-400",children:"Returning to list"})]}),c.jsx("div",{className:"fixed top-6 right-6 z-[99999] flex items-center gap-1 bg-black/40 backdrop-blur-xl rounded-2xl p-2 shadow-2xl border border-white/10 ring-1 ring-white/5 transition-all duration-300 hover:bg-black/60",style:{pointerEvents:"auto"},children:c.jsxs("div",{style:{width:"728px",height:"90px"},className:"bg-gray-800/40 rounded-xl border border-white/5 flex flex-col items-center justify-center relative overflow-hidden group",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent to-white/5 pointer-events-none"}),c.jsx("div",{className:"text-gray-600 font-bold text-sm group-hover:text-gray-500 transition-colors",children:"AD SPACE"}),c.jsx("div",{className:"text-gray-700 text-[10px] group-hover:text-gray-600 transition-colors",children:"728 x 90"})]})})]})}Rh.createRoot(document.getElementById("root")).render(c.jsx(cA.StrictMode,{children:c.jsx(b3,{})}));
